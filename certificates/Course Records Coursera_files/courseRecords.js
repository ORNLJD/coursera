define(["jquery","backbone","underscore","js/core/coursera","pages/home/template/body","pages/home/account/courseRecords.html","i18n!pages/home/account/nls/courseRecords","pages/home/account/courseRecordListing","js/collections/topics","js/collections/courses","js/lib/sharebuttons","js/lib/util","js/lib/modals","js/json/categorySimilarities","js/lib/moment","js/lib/cookie","js/lib/bootstrap-modal"],function($,Backbone,_,Coursera,body,template,template_t,CourseTemplate,Topics,Courses,ShareButtons,util,Modal){var courseRecords=body.extend({initialize:function(){var self=this;document.title="Course Records | Coursera",self.bind("view:appended",function(){var coursesWithStatementsAndSigTrack=Courses.byTime(Courses.withRecords(Coursera.user.get("courses"),!0,!0));_.each(coursesWithStatementsAndSigTrack,function(course){var newCourseTemplate=new CourseTemplate({course:course});self.$(".coursera-course-records-listings-with-sigtrack").append(newCourseTemplate.render().$el)});var coursesWithStatements=Courses.byTime(Courses.withRecords(Coursera.user.get("courses"),!1,!0));_.each(coursesWithStatements,function(course){var newCourseTemplate=new CourseTemplate({course:course});self.$(".coursera-course-records-with").append(newCourseTemplate.render().$el)});var coursesWithout=Courses.byTime(Courses.withRecords(Coursera.user.get("courses"),!1,!1));if(_.each(coursesWithout,function(course){var newCourseTemplate=new CourseTemplate({course:course});self.$(".coursera-course-records-listings-without").append(newCourseTemplate.render().$el)}),coursesWithStatements.length||coursesWithStatementsAndSigTrack.length)self.$(".coursera-course-records-with").show(),self.$(".coursera-course-records-listings-with-sigtrack").show();else if(coursesWithout.length)self.$(".coursera-course-records-without").show();else self.$(".coursera-course-records-none").show();if(coursesWithout.length)if(self.$(".coursera-course-records-show-without").show(),self.options.show_all)self.showWithout();self.$(".coursera-share-buttons").each(function(){new ShareButtons($(this),{isChina:util.isChina(),buttons:{googlePlus:{enabled:!1}}})}),self.$(".coursera-records-linkedin").on("click",function(){var courseId=$(this).attr("data-course-id");Coursera.multitracker.push(["records.linkedin",courseId])})}),self.bind("view:closed",function(){})},events:{"click .coursera-course-records-show-without":"showWithout","click [data-missing-vc]":"missingVCPrompt"},missingVCPrompt:function(){Modal(this.$(".coursera-profile-where-is-verified-certificate")).open()},render:function(){var self=this;return self.$el.html(template({_t:template_t,config:Coursera.config})),self},showWithout:function(){var self=this;self.$(".coursera-course-records-show-without").hide(),self.$(".coursera-course-records-without").hide(),self.$(".coursera-course-records-listings-without").show(),self.$(".coursera-course-records-without-shown").show()}});return courseRecords});