!function(window,undefined){function createFlags(flags){var object=flagsCache[flags]={},i,length;for(flags=flags.split(/\s+/),i=0,length=flags.length;length>i;i++)object[flags[i]]=!0;return object}function dataAttr(elem,key,data){if(data===undefined&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if(data=elem.getAttribute(name),"string"==typeof data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:jQuery.isNumeric(data)?parseFloat(data):rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){for(var name in obj){if("data"===name&&jQuery.isEmptyObject(obj[name]))continue;if("toJSON"!==name)return!1}return!0}function handleQueueMarkDefer(elem,type,src){var deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",defer=jQuery._data(elem,deferDataKey);if(!(!defer||"queue"!==src&&jQuery._data(elem,queueDataKey)||"mark"!==src&&jQuery._data(elem,markDataKey)))setTimeout(function(){if(!jQuery._data(elem,queueDataKey)&&!jQuery._data(elem,markDataKey))jQuery.removeData(elem,deferDataKey,!0),defer.fire()},0)}function returnFalse(){return!1}function returnTrue(){return!0}function isDisconnected(node){return!node||!node.parentNode||11===node.parentNode.nodeType}function winnow(elements,qualifier,keep){if(qualifier=qualifier||0,jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep});else if(qualifier.nodeType)return jQuery.grep(elements,function(elem,i){return elem===qualifier===keep});else if("string"==typeof qualifier){var filtered=jQuery.grep(elements,function(elem){return 1===elem.nodeType});if(isSimple.test(qualifier))return jQuery.filter(qualifier,filtered,!keep);else qualifier=jQuery.filter(qualifier,filtered)}return jQuery.grep(elements,function(elem,i){return jQuery.inArray(elem,qualifier)>=0===keep})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}function root(elem,cur){return jQuery.nodeName(elem,"table")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function cloneCopyEvent(src,dest){if(1!==dest.nodeType||!jQuery.hasData(src))return;var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle,curData.events={};for(type in events)for(i=0,l=events[type].length;l>i;i++)jQuery.event.add(dest,type+(events[type][i].namespace?".":"")+events[type][i].namespace,events[type][i],events[type][i].data)}if(curData.data)curData.data=jQuery.extend({},curData.data)}function cloneFixAttributes(src,dest){var nodeName;if(1!==dest.nodeType)return;if(dest.clearAttributes)dest.clearAttributes();if(dest.mergeAttributes)dest.mergeAttributes(src);if(nodeName=dest.nodeName.toLowerCase(),"object"===nodeName)dest.outerHTML=src.outerHTML;else if("input"===nodeName&&("checkbox"===src.type||"radio"===src.type)){if(src.checked)dest.defaultChecked=dest.checked=src.checked;if(dest.value!==src.value)dest.value=src.value}else if("option"===nodeName)dest.selected=src.defaultSelected;else if("input"===nodeName||"textarea"===nodeName)dest.defaultValue=src.defaultValue;dest.removeAttribute(jQuery.expando)}function getAll(elem){if("undefined"!=typeof elem.getElementsByTagName)return elem.getElementsByTagName("*");else if("undefined"!=typeof elem.querySelectorAll)return elem.querySelectorAll("*");else return[]}function fixDefaultChecked(elem){if("checkbox"===elem.type||"radio"===elem.type)elem.defaultChecked=elem.checked}function findInputs(elem){var nodeName=(elem.nodeName||"").toLowerCase();if("input"===nodeName)fixDefaultChecked(elem);else if("script"!==nodeName&&"undefined"!=typeof elem.getElementsByTagName)jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked)}function shimCloneNode(elem){var div=document.createElement("div");return safeFragment.appendChild(div),div.innerHTML=elem.outerHTML,div.firstChild}function evalScript(i,elem){if(elem.src)jQuery.ajax({url:elem.src,async:!1,dataType:"script"});else jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,"/*$0*/"));if(elem.parentNode)elem.parentNode.removeChild(elem)}function getWH(elem,name,extra){var val="width"===name?elem.offsetWidth:elem.offsetHeight,which="width"===name?cssWidth:cssHeight,i=0,len=which.length;if(val>0){if("border"!==extra)for(;len>i;i++){if(!extra)val-=parseFloat(jQuery.css(elem,"padding"+which[i]))||0;if("margin"===extra)val+=parseFloat(jQuery.css(elem,extra+which[i]))||0;else val-=parseFloat(jQuery.css(elem,"border"+which[i]+"Width"))||0}return val+"px"}if(val=curCSS(elem,name,name),0>val||null==val)val=elem.style[name]||0;if(val=parseFloat(val)||0,extra)for(;len>i;i++){if(val+=parseFloat(jQuery.css(elem,"padding"+which[i]))||0,"padding"!==extra)val+=parseFloat(jQuery.css(elem,"border"+which[i]+"Width"))||0;if("margin"===extra)val+=parseFloat(jQuery.css(elem,extra+which[i]))||0}return val+"px"}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if("string"!=typeof dataTypeExpression)func=dataTypeExpression,dataTypeExpression="*";if(jQuery.isFunction(func))for(var dataTypes=dataTypeExpression.toLowerCase().split(rspacesAjax),i=0,length=dataTypes.length,dataType,list,placeBefore;length>i;i++){if(dataType=dataTypes[i],placeBefore=/^\+/.test(dataType))dataType=dataType.substr(1)||"*";list=structure[dataType]=structure[dataType]||[],list[placeBefore?"unshift":"push"](func)}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0],inspected=inspected||{},inspected[dataType]=!0;for(var list=structure[dataType],i=0,length=list?list.length:0,executeOnly=structure===prefilters,selection;length>i&&(executeOnly||!selection);i++)if(selection=list[i](options,originalOptions,jqXHR),"string"==typeof selection)if(!executeOnly||inspected[selection])selection=undefined;else options.dataTypes.unshift(selection),selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected);if((executeOnly||!selection)&&!inspected["*"])selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected);return selection}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)if(src[key]!==undefined)(flatOptions[key]?target:deep||(deep={}))[key]=src[key];if(deep)jQuery.extend(!0,target,deep)}function buildParams(prefix,obj,traditional,add){if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix))add(prefix,v);else buildParams(prefix+"["+("object"==typeof v||jQuery.isArray(v)?i:"")+"]",v,traditional,add)});else if(!traditional&&null!=obj&&"object"==typeof obj)for(var name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add);else add(prefix,obj)}function ajaxHandleResponses(s,jqXHR,responses){var contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields,ct,type,finalDataType,firstDataType;for(type in responseFields)if(type in responses)jqXHR[responseFields[type]]=responses[type];for(;"*"===dataTypes[0];)if(dataTypes.shift(),ct===undefined)ct=s.mimeType||jqXHR.getResponseHeader("content-type");if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType)firstDataType=type}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0])dataTypes.unshift(finalDataType);return responses[finalDataType]}}function ajaxConvert(s,response){if(s.dataFilter)response=s.dataFilter(response,s.dataType);var dataTypes=s.dataTypes,converters={},i,key,length=dataTypes.length,tmp,current=dataTypes[0],prev,conversion,conv,conv1,conv2;for(i=1;length>i;i++){if(1===i)for(key in s.converters)if("string"==typeof key)converters[key.toLowerCase()]=s.converters[key];if(prev=current,current=dataTypes[i],"*"===current)current=prev;else if("*"!==prev&&prev!==current){if(conversion=prev+" "+current,conv=converters[conversion]||converters["* "+current],!conv){conv2=undefined;for(conv1 in converters)if(tmp=conv1.split(" "),tmp[0]===prev||"*"===tmp[0])if(conv2=converters[tmp[1]+" "+current]){if(conv1=converters[conv1],conv1===!0)conv=conv2;else if(conv2===!0)conv=conv1;break}}if(!conv&&!conv2)jQuery.error("No conversion from "+conversion.replace(" "," to "));if(conv!==!0)response=conv?conv(response):conv2(conv1(response))}}return response}function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function createFxNow(){return setTimeout(clearFxNow,0),fxNow=jQuery.now()}function clearFxNow(){fxNow=undefined}function genFx(type,num){var obj={};return jQuery.each(fxAttrs.concat.apply([],fxAttrs.slice(0,num)),function(){obj[this]=type}),obj}function defaultDisplay(nodeName){if(!elemdisplay[nodeName]){var body=document.body,elem=jQuery("<"+nodeName+">").appendTo(body),display=elem.css("display");if(elem.remove(),"none"===display||""===display){if(!iframe)iframe=document.createElement("iframe"),iframe.frameBorder=iframe.width=iframe.height=0;if(body.appendChild(iframe),!iframeDoc||!iframe.createElement)iframeDoc=(iframe.contentWindow||iframe.contentDocument).document,iframeDoc.write(("CSS1Compat"===document.compatMode?"<!doctype html>":"")+"<html><body>"),iframeDoc.close();elem=iframeDoc.createElement(nodeName),iframeDoc.body.appendChild(elem),display=jQuery.css(elem,"display"),body.removeChild(iframe)}elemdisplay[nodeName]=display}return elemdisplay[nodeName]}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType?elem.defaultView||elem.parentWindow:!1}var document=window.document,navigator=window.navigator,location=window.location,jQuery=function(){function doScrollCheck(){if(jQuery.isReady)return;try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(doScrollCheck,1)}jQuery.ready()}var jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},_jQuery=window.jQuery,_$=window.$,rootjQuery,quickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rnotwhite=/\S/,trimLeft=/^\s+/,trimRight=/\s+$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rwebkit=/(webkit)[ \/]([\w.]+)/,ropera=/(opera)(?:.*version)?[ \/]([\w.]+)/,rmsie=/(msie) ([\w.]+)/,rmozilla=/(mozilla)(?:.*? rv:([\w.]+))?/,rdashAlpha=/-([a-z]|[0-9])/gi,rmsPrefix=/^-ms-/,fcamelCase=function(all,letter){return(letter+"").toUpperCase()},userAgent=navigator.userAgent,browserMatch,readyList,DOMContentLoaded,toString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty,push=Array.prototype.push,slice=Array.prototype.slice,trim=String.prototype.trim,indexOf=Array.prototype.indexOf,class2type={};if(jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector)return this;if(selector.nodeType)return this.context=this[0]=selector,this.length=1,this;if("body"===selector&&!context&&document.body)return this.context=document,this[0]=document.body,this.selector=selector,this.length=1,this;if("string"==typeof selector){if("<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3)match=[null,selector,null];else match=quickExpr.exec(selector);if(match&&(match[1]||!context))if(match[1]){if(context=context instanceof jQuery?context[0]:context,doc=context?context.ownerDocument||context:document,ret=rsingleTag.exec(selector))if(jQuery.isPlainObject(context))selector=[document.createElement(ret[1])],jQuery.fn.attr.call(selector,context,!0);else selector=[doc.createElement(ret[1])];else ret=jQuery.buildFragment([match[1]],[doc]),selector=(ret.cacheable?jQuery.clone(ret.fragment):ret.fragment).childNodes;return jQuery.merge(this,selector)}else{if(elem=document.getElementById(match[2]),elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}else if(!context||context.jquery)return(context||rootjQuery).find(selector);else return this.constructor(context).find(selector)}else if(jQuery.isFunction(selector))return rootjQuery.ready(selector);if(selector.selector!==undefined)this.selector=selector.selector,this.context=selector.context;return jQuery.makeArray(selector,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return slice.call(this,0)},get:function(num){return null==num?this.toArray():0>num?this[this.length+num]:this[num]},pushStack:function(elems,name,selector){var ret=this.constructor();if(jQuery.isArray(elems))push.apply(ret,elems);else jQuery.merge(ret,elems);if(ret.prevObject=this,ret.context=this.context,"find"===name)ret.selector=this.selector+(this.selector?" ":"")+selector;else if(name)ret.selector=this.selector+"."+name+"("+selector+")";return ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){return jQuery.bindReady(),readyList.add(fn),this},eq:function(i){return i=+i,-1===i?this.slice(i):this.slice(i,i+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(slice.apply(this,arguments),"slice",slice.call(arguments).join(","))},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:[].sort,splice:[].splice},jQuery.fn.init.prototype=jQuery.fn,jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;if("boolean"==typeof target)deep=target,target=arguments[1]||{},i=2;if("object"!=typeof target&&!jQuery.isFunction(target))target={};if(length===i)target=this,--i;for(;length>i;i++)if(null!=(options=arguments[i]))for(name in options){if(src=target[name],copy=options[name],target===copy)continue;if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray)copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[];else clone=src&&jQuery.isPlainObject(src)?src:{};target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined)target[name]=copy}return target},jQuery.extend({noConflict:function(deep){if(window.$===jQuery)window.$=_$;if(deep&&window.jQuery===jQuery)window.jQuery=_jQuery;return jQuery},isReady:!1,readyWait:1,holdReady:function(hold){if(hold)jQuery.readyWait++;else jQuery.ready(!0)},ready:function(wait){if(wait===!0&&!--jQuery.readyWait||wait!==!0&&!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready,1);if(jQuery.isReady=!0,wait!==!0&&--jQuery.readyWait>0)return;if(readyList.fireWith(document,[jQuery]),jQuery.fn.trigger)jQuery(document).trigger("ready").off("ready")}},bindReady:function(){if(readyList)return;if(readyList=jQuery.Callbacks("once memory"),"complete"===document.readyState)return setTimeout(jQuery.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",DOMContentLoaded,!1),window.addEventListener("load",jQuery.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded),window.attachEvent("onload",jQuery.ready);var toplevel=!1;try{toplevel=null==window.frameElement}catch(e){}if(document.documentElement.doScroll&&toplevel)doScrollCheck()}},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return obj&&"object"==typeof obj&&"setInterval"in obj},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return null==obj?String(obj):class2type[toString.call(obj)]||"object"},isPlainObject:function(obj){if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var key;for(key in obj);return key===undefined||hasOwn.call(obj,key)},isEmptyObject:function(obj){for(var name in obj)return!1;return!0},error:function(msg){throw new Error(msg)},parseJSON:function(data){if("string"!=typeof data||!data)return null;if(data=jQuery.trim(data),window.JSON&&window.JSON.parse)return window.JSON.parse(data);if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,"")))return new Function("return "+data)();jQuery.error("Invalid JSON: "+data)},parseXML:function(data){var xml,tmp;try{if(window.DOMParser)tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml");else xml=new ActiveXObject("Microsoft.XMLDOM"),xml.async="false",xml.loadXML(data)}catch(e){xml=undefined}if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length)jQuery.error("Invalid XML: "+data);return xml},noop:function(){},globalEval:function(data){if(data&&rnotwhite.test(data))(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase()},each:function(object,callback,args){var name,i=0,length=object.length,isObj=length===undefined||jQuery.isFunction(object);if(args)if(isObj){for(name in object)if(callback.apply(object[name],args)===!1)break}else for(;length>i&&callback.apply(object[i++],args)!==!1;);else if(isObj){for(name in object)if(callback.call(object[name],name,object[name])===!1)break}else for(;length>i&&callback.call(object[i],i,object[i++])!==!1;);return object},trim:trim?function(text){return null==text?"":trim.call(text)}:function(text){return null==text?"":text.toString().replace(trimLeft,"").replace(trimRight,"")},makeArray:function(array,results){var ret=results||[];if(null!=array){var type=jQuery.type(array);if(null==array.length||"string"===type||"function"===type||"regexp"===type||jQuery.isWindow(array))push.call(ret,array);else jQuery.merge(ret,array)}return ret},inArray:function(elem,array,i){var len;if(array){if(indexOf)return indexOf.call(array,elem,i);for(len=array.length,i=i?0>i?Math.max(0,len+i):i:0;len>i;i++)if(i in array&&array[i]===elem)return i}return-1},merge:function(first,second){var i=first.length,j=0;if("number"==typeof second.length)for(var l=second.length;l>j;j++)first[i++]=second[j];else for(;second[j]!==undefined;)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,inv){var ret=[],retVal;inv=!!inv;for(var i=0,length=elems.length;length>i;i++)if(retVal=!!callback(elems[i],i),inv!==retVal)ret.push(elems[i]);return ret},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&"number"==typeof length&&(length>0&&elems[0]&&elems[length-1]||0===length||jQuery.isArray(elems));if(isArray){for(;length>i;i++)if(value=callback(elems[i],i,arg),null!=value)ret[ret.length]=value}else for(key in elems)if(value=callback(elems[key],key,arg),null!=value)ret[ret.length]=value;return ret.concat.apply([],ret)},guid:1,proxy:function(fn,context){if("string"==typeof context){var tmp=fn[context];context=fn,fn=tmp}if(!jQuery.isFunction(fn))return undefined;var args=slice.call(arguments,2),proxy=function(){return fn.apply(context,args.concat(slice.call(arguments)))};return proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++,proxy},access:function(elems,key,value,exec,fn,pass){var length=elems.length;if("object"==typeof key){for(var k in key)jQuery.access(elems,k,key[k],exec,fn,value);return elems}if(value!==undefined){exec=!pass&&exec&&jQuery.isFunction(value);for(var i=0;length>i;i++)fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);return elems}return length?fn(elems[0],key):undefined},now:function(){return(new Date).getTime()},uaMatch:function(ua){ua=ua.toLowerCase();var match=rwebkit.exec(ua)||ropera.exec(ua)||rmsie.exec(ua)||ua.indexOf("compatible")<0&&rmozilla.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},sub:function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(!0,jQuerySub,this),jQuerySub.superclass=this,jQuerySub.fn=jQuerySub.prototype=this(),jQuerySub.fn.constructor=jQuerySub,jQuerySub.sub=this.sub,jQuerySub.fn.init=function init(selector,context){if(context&&context instanceof jQuery&&!(context instanceof jQuerySub))context=jQuerySub(context);return jQuery.fn.init.call(this,selector,context,rootjQuerySub)},jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub},browser:{}}),jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),browserMatch=jQuery.uaMatch(userAgent),browserMatch.browser)jQuery.browser[browserMatch.browser]=!0,jQuery.browser.version=browserMatch.version;if(jQuery.browser.webkit)jQuery.browser.safari=!0;if(rnotwhite.test(" "))trimLeft=/^[\s\xA0]+/,trimRight=/[\s\xA0]+$/;if(rootjQuery=jQuery(document),document.addEventListener)DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,!1),jQuery.ready()};else if(document.attachEvent)DOMContentLoaded=function(){if("complete"===document.readyState)document.detachEvent("onreadystatechange",DOMContentLoaded),jQuery.ready()};return jQuery}(),flagsCache={};jQuery.Callbacks=function(flags){flags=flags?flagsCache[flags]||createFlags(flags):{};var list=[],stack=[],memory,firing,firingStart,firingLength,firingIndex,add=function(args){var i,length,elem,type,actual;for(i=0,length=args.length;length>i;i++)if(elem=args[i],type=jQuery.type(elem),"array"===type)add(elem);else if("function"===type)if(!flags.unique||!self.has(elem))list.push(elem)},fire=function(context,args){for(args=args||[],memory=!flags.memory||[context,args],firing=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length;list&&firingLength>firingIndex;firingIndex++)if(list[firingIndex].apply(context,args)===!1&&flags.stopOnFalse){memory=!0;break}if(firing=!1,list)if(!flags.once){if(stack&&stack.length)memory=stack.shift(),self.fireWith(memory[0],memory[1])}else if(memory===!0)self.disable();else list=[]},self={add:function(){if(list){var length=list.length;if(add(arguments),firing)firingLength=list.length;else if(memory&&memory!==!0)firingStart=length,fire(memory[0],memory[1])}return this},remove:function(){if(list)for(var args=arguments,argIndex=0,argLength=args.length;argLength>argIndex;argIndex++)for(var i=0;i<list.length;i++)if(args[argIndex]===list[i]){if(firing)if(firingLength>=i)if(firingLength--,firingIndex>=i)firingIndex--;if(list.splice(i--,1),flags.unique)break}return this},has:function(fn){if(list)for(var i=0,length=list.length;length>i;i++)if(fn===list[i])return!0;return!1},empty:function(){return list=[],this},disable:function(){return list=stack=memory=undefined,this},disabled:function(){return!list},lock:function(){if(stack=undefined,!memory||memory===!0)self.disable();return this},locked:function(){return!stack},fireWith:function(context,args){if(stack)if(firing){if(!flags.once)stack.push([context,args])}else if(!flags.once||!memory)fire(context,args);return this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!memory}};return self};var sliceDeferred=[].slice;jQuery.extend({Deferred:function(func){var doneList=jQuery.Callbacks("once memory"),failList=jQuery.Callbacks("once memory"),progressList=jQuery.Callbacks("memory"),state="pending",lists={resolve:doneList,reject:failList,notify:progressList},promise={done:doneList.add,fail:failList.add,progress:progressList.add,state:function(){return state},isResolved:doneList.fired,isRejected:failList.fired,then:function(doneCallbacks,failCallbacks,progressCallbacks){return deferred.done(doneCallbacks).fail(failCallbacks).progress(progressCallbacks),this},always:function(){return deferred.done.apply(deferred,arguments).fail.apply(deferred,arguments),this},pipe:function(fnDone,fnFail,fnProgress){return jQuery.Deferred(function(newDefer){jQuery.each({done:[fnDone,"resolve"],fail:[fnFail,"reject"],progress:[fnProgress,"notify"]},function(handler,data){var fn=data[0],action=data[1],returned;if(jQuery.isFunction(fn))deferred[handler](function(){if(returned=fn.apply(this,arguments),returned&&jQuery.isFunction(returned.promise))returned.promise().then(newDefer.resolve,newDefer.reject,newDefer.notify);else newDefer[action+"With"](this===deferred?newDefer:this,[returned])});else deferred[handler](newDefer[action])})}).promise()},promise:function(obj){if(null==obj)obj=promise;else for(var key in promise)obj[key]=promise[key];return obj}},deferred=promise.promise({}),key;for(key in lists)deferred[key]=lists[key].fire,deferred[key+"With"]=lists[key].fireWith;if(deferred.done(function(){state="resolved"},failList.disable,progressList.lock).fail(function(){state="rejected"},doneList.disable,progressList.lock),func)func.call(deferred,deferred);return deferred},when:function(firstParam){function resolveFunc(i){return function(value){if(args[i]=arguments.length>1?sliceDeferred.call(arguments,0):value,!--count)deferred.resolveWith(deferred,args)}}function progressFunc(i){return function(value){pValues[i]=arguments.length>1?sliceDeferred.call(arguments,0):value,deferred.notifyWith(promise,pValues)}}var args=sliceDeferred.call(arguments,0),i=0,length=args.length,pValues=new Array(length),count=length,pCount=length,deferred=1>=length&&firstParam&&jQuery.isFunction(firstParam.promise)?firstParam:jQuery.Deferred(),promise=deferred.promise();if(length>1){for(;length>i;i++)if(args[i]&&args[i].promise&&jQuery.isFunction(args[i].promise))args[i].promise().then(resolveFunc(i),deferred.reject,progressFunc(i));else--count;if(!count)deferred.resolveWith(deferred,args)}else if(deferred!==firstParam)deferred.resolveWith(deferred,length?[firstParam]:[]);return promise}}),jQuery.support=function(){var support,all,a,select,opt,input,marginDiv,fragment,tds,events,eventName,i,isSupported,div=document.createElement("div"),documentElement=document.documentElement;if(div.setAttribute("className","t"),div.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",all=div.getElementsByTagName("*"),a=div.getElementsByTagName("a")[0],!all||!all.length||!a)return{};select=document.createElement("select"),opt=select.appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],support={leadingWhitespace:3===div.firstChild.nodeType,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:"/a"===a.getAttribute("href"),opacity:/^0.55/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:"on"===input.value,optSelected:opt.selected,getSetAttribute:"t"!==div.className,enctype:!!document.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},input.checked=!0,support.noCloneChecked=input.cloneNode(!0).checked,select.disabled=!0,support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=!1}if(!div.addEventListener&&div.attachEvent&&div.fireEvent)div.attachEvent("onclick",function(){support.noCloneEvent=!1}),div.cloneNode(!0).fireEvent("onclick");if(input=document.createElement("input"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value,input.setAttribute("checked","checked"),div.appendChild(input),fragment=document.createDocumentFragment(),fragment.appendChild(div.lastChild),support.checkClone=fragment.cloneNode(!0).cloneNode(!0).lastChild.checked,support.appendChecked=input.checked,fragment.removeChild(input),fragment.appendChild(div),div.innerHTML="",window.getComputedStyle)marginDiv=document.createElement("div"),marginDiv.style.width="0",marginDiv.style.marginRight="0",div.style.width="2px",div.appendChild(marginDiv),support.reliableMarginRight=0===(parseInt((window.getComputedStyle(marginDiv,null)||{marginRight:0}).marginRight,10)||0);if(div.attachEvent)for(i in{submit:1,change:1,focusin:1}){if(eventName="on"+i,isSupported=eventName in div,!isSupported)div.setAttribute(eventName,"return;"),isSupported="function"==typeof div[eventName];support[i+"Bubbles"]=isSupported}return fragment.removeChild(div),fragment=select=opt=marginDiv=div=input=null,jQuery(function(){var container,outer,inner,table,td,offsetSupport,conMarginTop,ptlm,vb,style,html,body=document.getElementsByTagName("body")[0];if(!body)return;if(conMarginTop=1,ptlm="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",vb="visibility:hidden;border:0;",style="style='"+ptlm+"border:5px solid #000;padding:0;'",html="<div "+style+"><div></div></div><table "+style+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",container=document.createElement("div"),container.style.cssText=vb+"width:0;height:0;position:static;top:0;margin-top:"+conMarginTop+"px",body.insertBefore(container,body.firstChild),div=document.createElement("div"),container.appendChild(div),div.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",tds=div.getElementsByTagName("td"),isSupported=0===tds[0].offsetHeight,tds[0].style.display="",tds[1].style.display="none",support.reliableHiddenOffsets=isSupported&&0===tds[0].offsetHeight,div.innerHTML="",div.style.width=div.style.paddingLeft="1px",jQuery.boxModel=support.boxModel=2===div.offsetWidth,"undefined"!=typeof div.style.zoom)div.style.display="inline",div.style.zoom=1,support.inlineBlockNeedsLayout=2===div.offsetWidth,div.style.display="",div.innerHTML="<div style='width:4px;'></div>",support.shrinkWrapBlocks=2!==div.offsetWidth;div.style.cssText=ptlm+vb,div.innerHTML=html,outer=div.firstChild,inner=outer.firstChild,td=outer.nextSibling.firstChild.firstChild,offsetSupport={doesNotAddBorder:5!==inner.offsetTop,doesAddBorderForTableAndCells:5===td.offsetTop},inner.style.position="fixed",inner.style.top="20px",offsetSupport.fixedPosition=20===inner.offsetTop||15===inner.offsetTop,inner.style.position=inner.style.top="",outer.style.overflow="hidden",outer.style.position="relative",offsetSupport.subtractsBorderForOverflowNotVisible=-5===inner.offsetTop,offsetSupport.doesNotIncludeMarginInBodyOffset=body.offsetTop!==conMarginTop,body.removeChild(container),div=container=null,jQuery.extend(support,offsetSupport)}),support}();var rbrace=/^(?:\{.*\}|\[.*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(elem){return elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando],!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data,pvt){if(!jQuery.acceptData(elem))return;var privateCache,thisCache,ret,internalKey=jQuery.expando,getByName="string"==typeof name,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey,isEvents="events"===name;
if(!(id&&cache[id]&&(isEvents||pvt||cache[id].data))&&getByName&&data===undefined)return;if(!id)if(isNode)elem[internalKey]=id=++jQuery.uuid;else id=internalKey;if(!cache[id])if(cache[id]={},!isNode)cache[id].toJSON=jQuery.noop;if("object"==typeof name||"function"==typeof name)if(pvt)cache[id]=jQuery.extend(cache[id],name);else cache[id].data=jQuery.extend(cache[id].data,name);if(privateCache=thisCache=cache[id],!pvt){if(!thisCache.data)thisCache.data={};thisCache=thisCache.data}if(data!==undefined)thisCache[jQuery.camelCase(name)]=data;if(isEvents&&!thisCache[name])return privateCache.events;if(getByName){if(ret=thisCache[name],null==ret)ret=thisCache[jQuery.camelCase(name)]}else ret=thisCache;return ret},removeData:function(elem,name,pvt){if(!jQuery.acceptData(elem))return;var thisCache,i,l,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:internalKey;if(!cache[id])return;if(name)if(thisCache=pvt?cache[id]:cache[id].data){if(!jQuery.isArray(name))if(name in thisCache)name=[name];else if(name=jQuery.camelCase(name),name in thisCache)name=[name];else name=name.split(" ");for(i=0,l=name.length;l>i;i++)delete thisCache[name[i]];if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache))return}if(!pvt)if(delete cache[id].data,!isEmptyDataObject(cache[id]))return;if(jQuery.support.deleteExpando||!cache.setInterval)delete cache[id];else cache[id]=null;if(isNode)if(jQuery.support.deleteExpando)delete elem[internalKey];else if(elem.removeAttribute)elem.removeAttribute(internalKey);else elem[internalKey]=null},_data:function(elem,name,data){return jQuery.data(elem,name,data,!0)},acceptData:function(elem){if(elem.nodeName){var match=jQuery.noData[elem.nodeName.toLowerCase()];if(match)return!(match===!0||elem.getAttribute("classid")!==match)}return!0}}),jQuery.fn.extend({data:function(key,value){var parts,attr,name,data=null;if("undefined"==typeof key){if(this.length)if(data=jQuery.data(this[0]),1===this[0].nodeType&&!jQuery._data(this[0],"parsedAttrs")){attr=this[0].attributes;for(var i=0,l=attr.length;l>i;i++)if(name=attr[i].name,0===name.indexOf("data-"))name=jQuery.camelCase(name.substring(5)),dataAttr(this[0],name,data[name]);jQuery._data(this[0],"parsedAttrs",!0)}return data}else if("object"==typeof key)return this.each(function(){jQuery.data(this,key)});if(parts=key.split("."),parts[1]=parts[1]?"."+parts[1]:"",value===undefined){if(data=this.triggerHandler("getData"+parts[1]+"!",[parts[0]]),data===undefined&&this.length)data=jQuery.data(this[0],key),data=dataAttr(this[0],key,data);return data===undefined&&parts[1]?this.data(parts[0]):data}else return this.each(function(){var self=jQuery(this),args=[parts[0],value];self.triggerHandler("setData"+parts[1]+"!",args),jQuery.data(this,key,value),self.triggerHandler("changeData"+parts[1]+"!",args)})},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({_mark:function(elem,type){if(elem)type=(type||"fx")+"mark",jQuery._data(elem,type,(jQuery._data(elem,type)||0)+1)},_unmark:function(force,elem,type){if(force!==!0)type=elem,elem=force,force=!1;if(elem){type=type||"fx";var key=type+"mark",count=force?0:(jQuery._data(elem,key)||1)-1;if(count)jQuery._data(elem,key,count);else jQuery.removeData(elem,key,!0),handleQueueMarkDefer(elem,type,"mark")}},queue:function(elem,type,data){var q;if(elem){if(type=(type||"fx")+"queue",q=jQuery._data(elem,type),data)if(!q||jQuery.isArray(data))q=jQuery._data(elem,type,jQuery.makeArray(data));else q.push(data);return q||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),fn=queue.shift(),hooks={};if("inprogress"===fn)fn=queue.shift();if(fn){if("fx"===type)queue.unshift("inprogress");jQuery._data(elem,type+".run",hooks),fn.call(elem,function(){jQuery.dequeue(elem,type)},hooks)}if(!queue.length)jQuery.removeData(elem,type+"queue "+type+".run",!0),handleQueueMarkDefer(elem,type,"queue")}}),jQuery.fn.extend({queue:function(type,data){if("string"!=typeof type)data=type,type="fx";if(data===undefined)return jQuery.queue(this[0],type);return this.each(function(){var queue=jQuery.queue(this,type,data);if("fx"===type&&"inprogress"!==queue[0])jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,object){function resolve(){if(!--count)defer.resolveWith(elements,[elements])}if("string"!=typeof type)object=type,type=undefined;type=type||"fx";for(var defer=jQuery.Deferred(),elements=this,i=elements.length,count=1,deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",tmp;i--;)if(tmp=jQuery.data(elements[i],deferDataKey,undefined,!0)||(jQuery.data(elements[i],queueDataKey,undefined,!0)||jQuery.data(elements[i],markDataKey,undefined,!0))&&jQuery.data(elements[i],deferDataKey,jQuery.Callbacks("once memory"),!0))count++,tmp.add(resolve);return resolve(),defer.promise()}});var rclass=/[\n\t\r]/g,rspace=/\s+/,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea)?$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute,nodeHook,boolHook,fixSpecified;if(jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,name,value,!0,jQuery.attr)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,name,value,!0,jQuery.prop)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=undefined,delete this[name]}catch(e){}})},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(value&&"string"==typeof value)for(classNames=value.split(rspace),i=0,l=this.length;l>i;i++)if(elem=this[i],1===elem.nodeType)if(!elem.className&&1===classNames.length)elem.className=value;else{for(setClass=" "+elem.className+" ",c=0,cl=classNames.length;cl>c;c++)if(!~setClass.indexOf(" "+classNames[c]+" "))setClass+=classNames[c]+" ";elem.className=jQuery.trim(setClass)}return this},removeClass:function(value){var classNames,i,l,elem,className,c,cl;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(value&&"string"==typeof value||value===undefined)for(classNames=(value||"").split(rspace),i=0,l=this.length;l>i;i++)if(elem=this[i],1===elem.nodeType&&elem.className)if(value){for(className=(" "+elem.className+" ").replace(rclass," "),c=0,cl=classNames.length;cl>c;c++)className=className.replace(" "+classNames[c]+" "," ");elem.className=jQuery.trim(className)}else elem.className="";return this},toggleClass:function(value,stateVal){var type=typeof value,isBool="boolean"==typeof stateVal;if(jQuery.isFunction(value))return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)});return this.each(function(){if("string"===type)for(var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(rspace);className=classNames[i++];)state=isBool?state:!self.hasClass(className),self[state?"addClass":"removeClass"](className);else if("undefined"===type||"boolean"===type){if(this.className)jQuery._data(this,"__className__",this.className);this.className=this.className||value===!1?"":jQuery._data(this,"__className__")||""}})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;l>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>-1)return!0;return!1},val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){if(hooks=jQuery.valHooks[elem.nodeName.toLowerCase()]||jQuery.valHooks[elem.type],hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined)return ret;return ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret}return}return isFunction=jQuery.isFunction(value),this.each(function(i){var self=jQuery(this),val;if(1!==this.nodeType)return;if(isFunction)val=value.call(this,i,self.val());else val=value;if(null==val)val="";else if("number"==typeof val)val+="";else if(jQuery.isArray(val))val=jQuery.map(val,function(value){return null==value?"":value+""});if(hooks=jQuery.valHooks[this.nodeName.toLowerCase()]||jQuery.valHooks[this.type],!(hooks&&"set"in hooks&&hooks.set(this,val,"value")!==undefined))this.value=val})}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text}},select:{get:function(elem){var value,i,max,option,index=elem.selectedIndex,values=[],options=elem.options,one="select-one"===elem.type;if(0>index)return null;for(i=one?index:0,max=one?index+1:options.length;max>i;i++)if(option=options[i],!(!option.selected||(jQuery.support.optDisabled?option.disabled:null!==option.getAttribute("disabled"))||option.parentNode.disabled&&jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}if(one&&!values.length&&options.length)return jQuery(options[index]).val();return values},set:function(elem,value){var values=jQuery.makeArray(value);if(jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0}),!values.length)elem.selectedIndex=-1;return values}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(elem,name,value,pass){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||3===nType||8===nType||2===nType)return;if(pass&&name in jQuery.attrFn)return jQuery(elem)[name](value);if("undefined"==typeof elem.getAttribute)return jQuery.prop(elem,name,value);if(notxml=1!==nType||!jQuery.isXMLDoc(elem))name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook);if(value!==undefined)if(null===value)return void jQuery.removeAttr(elem,name);else if(hooks&&"set"in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined)return ret;else return elem.setAttribute(name,""+value),value;else if(hooks&&"get"in hooks&&notxml&&null!==(ret=hooks.get(elem,name)))return ret;else return ret=elem.getAttribute(name),null===ret?undefined:ret},removeAttr:function(elem,value){var propName,attrNames,name,l,i=0;if(value&&1===elem.nodeType)for(attrNames=value.toLowerCase().split(rspace),l=attrNames.length;l>i;i++)if(name=attrNames[i])if(propName=jQuery.propFix[name]||name,jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName),rboolean.test(name)&&propName in elem)elem[propName]=!1},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode)jQuery.error("type property can't be changed");else if(!jQuery.support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;if(elem.setAttribute("type",value),val)elem.value=val;return value}}},value:{get:function(elem,name){if(nodeHook&&jQuery.nodeName(elem,"button"))return nodeHook.get(elem,name);return name in elem?elem.value:null},set:function(elem,value,name){if(nodeHook&&jQuery.nodeName(elem,"button"))return nodeHook.set(elem,value,name);elem.value=value}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||3===nType||8===nType||2===nType)return;if(notxml=1!==nType||!jQuery.isXMLDoc(elem))name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name];if(value!==undefined)if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined)return ret;else return elem[name]=value;else if(hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name)))return ret;else return elem[name]},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}}),jQuery.attrHooks.tabindex=jQuery.propHooks.tabIndex,boolHook={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===!0||"boolean"!=typeof property&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==!1?name.toLowerCase():undefined},set:function(elem,value,name){var propName;if(value===!1)jQuery.removeAttr(elem,name);else{if(propName=jQuery.propFix[name]||name,propName in elem)elem[propName]=!0;elem.setAttribute(name,name.toLowerCase())}return name}},!getSetAttribute)fixSpecified={name:!0,id:!0},nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;return ret=elem.getAttributeNode(name),ret&&(fixSpecified[name]?""!==ret.nodeValue:ret.specified)?ret.nodeValue:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret)ret=document.createAttribute(name),elem.setAttributeNode(ret);return ret.nodeValue=value+""}},jQuery.attrHooks.tabindex.set=nodeHook.set,jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(""===value)return elem.setAttribute(name,"auto"),value}})}),jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){if(""===value)value="false";nodeHook.set(elem,value,name)}};if(!jQuery.support.hrefNormalized)jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return null===ret?undefined:ret}})});if(!jQuery.support.style)jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined},set:function(elem,value){return elem.style.cssText=""+value}};if(!jQuery.support.optSelected)jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent)if(parent.selectedIndex,parent.parentNode)parent.parentNode.selectedIndex;return null}});if(!jQuery.support.enctype)jQuery.propFix.enctype="encoding";if(!jQuery.support.checkOn)jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return null===elem.getAttribute("value")?"on":elem.value}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){if(jQuery.isArray(value))return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}})});var rformElems=/^(?:textarea|input|select)$/i,rtypenamespace=/^([^\.]*)?(?:\.(.+))?$/,rhoverHack=/\bhover(\.\S+)?\b/,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rquickIs=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,quickParse=function(selector){var quick=rquickIs.exec(selector);if(quick)quick[1]=(quick[1]||"").toLowerCase(),quick[3]=quick[3]&&new RegExp("(?:^|\\s)"+quick[3]+"(?:\\s|$)");return quick},quickIs=function(elem,m){var attrs=elem.attributes||{};return!(m[1]&&elem.nodeName.toLowerCase()!==m[1]||m[2]&&(attrs.id||{}).value!==m[2]||m[3]&&!m[3].test((attrs["class"]||{}).value))},hoverHack=function(events){return jQuery.event.special.hover?events:events.replace(rhoverHack,"mouseenter$1 mouseleave$1")};if(jQuery.event={add:function(elem,types,handler,data,selector){var elemData,eventHandle,events,t,tns,type,namespaces,handleObj,handleObjIn,quick,handlers,special;if(3===elem.nodeType||8===elem.nodeType||!types||!handler||!(elemData=jQuery._data(elem)))return;if(handler.handler)handleObjIn=handler,handler=handleObjIn.handler;if(!handler.guid)handler.guid=jQuery.guid++;if(events=elemData.events,!events)elemData.events=events={};if(eventHandle=elemData.handle,!eventHandle)elemData.handle=eventHandle=function(e){return"undefined"!=typeof jQuery&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined},eventHandle.elem=elem;for(types=jQuery.trim(hoverHack(types)).split(" "),t=0;t<types.length;t++){if(tns=rtypenamespace.exec(types[t])||[],type=tns[1],namespaces=(tns[2]||"").split(".").sort(),special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:tns[1],data:data,handler:handler,guid:handler.guid,selector:selector,quick:quickParse(selector),namespace:namespaces.join(".")},handleObjIn),handlers=events[type],!handlers)if(handlers=events[type]=[],handlers.delegateCount=0,!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===!1)if(elem.addEventListener)elem.addEventListener(type,eventHandle,!1);else if(elem.attachEvent)elem.attachEvent("on"+type,eventHandle);if(special.add)if(special.add.call(elem,handleObj),!handleObj.handler.guid)handleObj.handler.guid=handler.guid;if(selector)handlers.splice(handlers.delegateCount++,0,handleObj);else handlers.push(handleObj);jQuery.event.global[type]=!0}elem=null},global:{},remove:function(elem,types,handler,selector,mappedTypes){var elemData=jQuery.hasData(elem)&&jQuery._data(elem),t,tns,type,origType,namespaces,origCount,j,events,special,handle,eventType,handleObj;if(!elemData||!(events=elemData.events))return;for(types=jQuery.trim(hoverHack(types||"")).split(" "),t=0;t<types.length;t++){if(tns=rtypenamespace.exec(types[t])||[],type=origType=tns[1],namespaces=tns[2],!type){for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);continue}for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,eventType=events[type]||[],origCount=eventType.length,namespaces=namespaces?new RegExp("(^|\\.)"+namespaces.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,j=0;j<eventType.length;j++)if(handleObj=eventType[j],!(!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||namespaces&&!namespaces.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector))){if(eventType.splice(j--,1),handleObj.selector)eventType.delegateCount--;if(special.remove)special.remove.call(elem,handleObj)}if(0===eventType.length&&origCount!==eventType.length){if(!special.teardown||special.teardown.call(elem,namespaces)===!1)jQuery.removeEvent(elem,type,elemData.handle);delete events[type]}}if(jQuery.isEmptyObject(events)){if(handle=elemData.handle)handle.elem=null;jQuery.removeData(elem,["events","handle"],!0)}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(event,data,elem,onlyHandlers){if(elem&&(3===elem.nodeType||8===elem.nodeType))return;var type=event.type||event,namespaces=[],cache,exclusive,i,cur,old,ontype,special,handle,eventPath,bubbleType;if(rfocusMorph.test(type+jQuery.event.triggered))return;if(type.indexOf("!")>=0)type=type.slice(0,-1),exclusive=!0;if(type.indexOf(".")>=0)namespaces=type.split("."),type=namespaces.shift(),namespaces.sort();if((!elem||jQuery.event.customEvent[type])&&!jQuery.event.global[type])return;if(event="object"==typeof event?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type),event.type=type,event.isTrigger=!0,event.exclusive=exclusive,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,ontype=type.indexOf(":")<0?"on"+type:"",!elem){cache=jQuery.cache;for(i in cache)if(cache[i].events&&cache[i].events[type])jQuery.event.trigger(event,data,cache[i].handle.elem,!0);return}if(event.result=undefined,!event.target)event.target=elem;if(data=null!=data?jQuery.makeArray(data):[],data.unshift(event),special=jQuery.event.special[type]||{},special.trigger&&special.trigger.apply(elem,data)===!1)return;if(eventPath=[[elem,special.bindType||type]],!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,cur=rfocusMorph.test(bubbleType+type)?elem:elem.parentNode,old=null;cur;cur=cur.parentNode)eventPath.push([cur,bubbleType]),old=cur;if(old&&old===elem.ownerDocument)eventPath.push([old.defaultView||old.parentWindow||window,bubbleType])}for(i=0;i<eventPath.length&&!event.isPropagationStopped();i++){if(cur=eventPath[i][0],event.type=eventPath[i][1],handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"))handle.apply(cur,data);if(handle=ontype&&cur[ontype],handle&&jQuery.acceptData(cur)&&handle.apply(cur,data)===!1)event.preventDefault()}if(event.type=type,!onlyHandlers&&!event.isDefaultPrevented())if(!(special._default&&special._default.apply(elem.ownerDocument,data)!==!1||"click"===type&&jQuery.nodeName(elem,"a"))&&jQuery.acceptData(elem))if(ontype&&elem[type]&&("focus"!==type&&"blur"!==type||0!==event.target.offsetWidth)&&!jQuery.isWindow(elem)){if(old=elem[ontype])elem[ontype]=null;if(jQuery.event.triggered=type,elem[type](),jQuery.event.triggered=undefined,old)elem[ontype]=old}return event.result},dispatch:function(event){event=jQuery.event.fix(event||window.event);var handlers=(jQuery._data(this,"events")||{})[event.type]||[],delegateCount=handlers.delegateCount,args=[].slice.call(arguments,0),run_all=!event.exclusive&&!event.namespace,handlerQueue=[],i,j,cur,jqcur,ret,selMatch,matched,matches,handleObj,sel,related;if(args[0]=event,event.delegateTarget=this,delegateCount&&!event.target.disabled&&(!event.button||"click"!==event.type))for(jqcur=jQuery(this),jqcur.context=this.ownerDocument||this,cur=event.target;cur!=this;cur=cur.parentNode||this){for(selMatch={},matches=[],jqcur[0]=cur,i=0;delegateCount>i;i++){if(handleObj=handlers[i],sel=handleObj.selector,selMatch[sel]===undefined)selMatch[sel]=handleObj.quick?quickIs(cur,handleObj.quick):jqcur.is(sel);if(selMatch[sel])matches.push(handleObj)}if(matches.length)handlerQueue.push({elem:cur,matches:matches})}if(handlers.length>delegateCount)handlerQueue.push({elem:this,matches:handlers.slice(delegateCount)});for(i=0;i<handlerQueue.length&&!event.isPropagationStopped();i++)for(matched=handlerQueue[i],event.currentTarget=matched.elem,j=0;j<matched.matches.length&&!event.isImmediatePropagationStopped();j++)if(handleObj=matched.matches[j],run_all||!event.namespace&&!handleObj.namespace||event.namespace_re&&event.namespace_re.test(handleObj.namespace))if(event.data=handleObj.data,event.handleObj=handleObj,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),ret!==undefined)if(event.result=ret,ret===!1)event.preventDefault(),event.stopPropagation();return event.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(null==event.which)event.which=null!=original.charCode?original.charCode:original.keyCode;return event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;if(null==event.pageX&&null!=original.clientX)eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);if(!event.relatedTarget&&fromElement)event.relatedTarget=fromElement===event.target?original.toElement:fromElement;if(!event.which&&button!==undefined)event.which=1&button?1:2&button?3:4&button?2:0;return event}},fix:function(event){if(event[jQuery.expando])return event;var i,prop,originalEvent=event,fixHook=jQuery.event.fixHooks[event.type]||{},copy=fixHook.props?this.props.concat(fixHook.props):this.props;for(event=jQuery.Event(originalEvent),i=copy.length;i;)prop=copy[--i],event[prop]=originalEvent[prop];if(!event.target)event.target=originalEvent.srcElement||document;if(3===event.target.nodeType)event.target=event.target.parentNode;if(event.metaKey===undefined)event.metaKey=event.ctrlKey;return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{ready:{setup:jQuery.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(data,namespaces,eventHandle){if(jQuery.isWindow(this))this.onbeforeunload=eventHandle},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle)this.onbeforeunload=null}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});if(bubble)jQuery.event.trigger(e,null,elem);else jQuery.event.dispatch.call(elem,e);if(e.isDefaultPrevented())event.preventDefault()}},jQuery.event.handle=jQuery.event.dispatch,jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener)elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){if(elem.detachEvent)elem.detachEvent("on"+type,handle)},jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);if(src&&src.type)this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||src.returnValue===!1||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse;else this.type=src;if(props)jQuery.extend(this,props);this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e)return;if(e.preventDefault)e.preventDefault();else e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e)return;if(e.stopPropagation)e.stopPropagation();e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var target=this,related=event.relatedTarget,handleObj=event.handleObj,selector=handleObj.selector,ret;if(!related||related!==target&&!jQuery.contains(target,related))event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix;return ret}}}),!jQuery.support.submitBubbles)jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;if(form&&!form._submit_attached)jQuery.event.add(form,"submit._submit",function(event){if(this.parentNode&&!event.isTrigger)jQuery.event.simulate("submit",this.parentNode,event,!0)}),form._submit_attached=!0})},teardown:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.remove(this,"._submit")}};if(!jQuery.support.changeBubbles)jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)jQuery.event.add(this,"propertychange._change",function(event){if("checked"===event.originalEvent.propertyName)this._just_changed=!0}),jQuery.event.add(this,"click._change",function(event){if(this._just_changed&&!event.isTrigger)this._just_changed=!1,jQuery.event.simulate("change",this,event,!0)});return!1}jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&!elem._change_attached)jQuery.event.add(elem,"change._change",function(event){if(this.parentNode&&!event.isSimulated&&!event.isTrigger)jQuery.event.simulate("change",this.parentNode,event,!0)}),elem._change_attached=!0})},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type)return event.handleObj.handler.apply(this,arguments)},teardown:function(){return jQuery.event.remove(this,"._change"),rformElems.test(this.nodeName)}};if(!jQuery.support.focusinBubbles)jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){if(0===attaches++)document.addEventListener(orig,handler,!0)},teardown:function(){if(0===--attaches)document.removeEventListener(orig,handler,!0)}}});jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if("object"==typeof types){if("string"!=typeof selector)data=selector,selector=undefined;for(type in types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn)fn=selector,data=selector=undefined;else if(null==fn)if("string"==typeof selector)fn=data,data=undefined;else fn=data,data=selector,selector=undefined;if(fn===!1)fn=returnFalse;else if(!fn)return this;if(1===one)origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++);return this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on.call(this,types,selector,data,fn,1)},off:function(types,selector,fn){if(types&&types.preventDefault&&types.handleObj){var handleObj=types.handleObj;return jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.type+"."+handleObj.namespace:handleObj.type,handleObj.selector,handleObj.handler),this}if("object"==typeof types){for(var type in types)this.off(type,selector,types[type]);return this}if(selector===!1||"function"==typeof selector)fn=selector,selector=undefined;if(fn===!1)fn=returnFalse;return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},live:function(types,data,fn){return jQuery(this.context).on(types,this.selector,data,fn),this},die:function(types,fn){return jQuery(this.context).off(types,this.selector||"**",fn),this},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1==arguments.length?this.off(selector,"**"):this.off(types,selector,fn)},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){if(this[0])return jQuery.event.trigger(type,data,this[0],!0)},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;return jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1),event.preventDefault(),args[lastToggle].apply(this,arguments)||!1};for(toggler.guid=guid;i<args.length;)args[i++].guid=guid;return this.click(toggler)},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){if(jQuery.fn[name]=function(data,fn){if(null==fn)fn=data,data=null;return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)
},jQuery.attrFn)jQuery.attrFn[name]=!0;if(rkeyEvent.test(name))jQuery.event.fixHooks[name]=jQuery.event.keyHooks;if(rmouseEvent.test(name))jQuery.event.fixHooks[name]=jQuery.event.mouseHooks}),function(){function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;l>i;i++){var elem=checkSet[i];if(elem){var match=!1;for(elem=elem[dir];elem;){if(elem[expando]===doneName){match=checkSet[elem.sizset];break}if(1===elem.nodeType&&!isXML)elem[expando]=doneName,elem.sizset=i;if(elem.nodeName.toLowerCase()===cur){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;l>i;i++){var elem=checkSet[i];if(elem){var match=!1;for(elem=elem[dir];elem;){if(elem[expando]===doneName){match=checkSet[elem.sizset];break}if(1===elem.nodeType){if(!isXML)elem[expando]=doneName,elem.sizset=i;if("string"!=typeof cur){if(elem===cur){match=!0;break}}else if(Sizzle.filter(cur,[elem]).length>0){match=elem;break}}elem=elem[dir]}checkSet[i]=match}}}var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,expando="sizcache"+(Math.random()+"").replace(".",""),done=0,toString=Object.prototype.toString,hasDuplicate=!1,baseHasDuplicate=!0,rBackslash=/\\/g,rReturn=/\r\n/g,rNonWord=/\W/;[0,0].sort(function(){return baseHasDuplicate=!1,0});var Sizzle=function(selector,context,results,seed){results=results||[],context=context||document;var origContext=context;if(1!==context.nodeType&&9!==context.nodeType)return[];if(!selector||"string"!=typeof selector)return results;var m,set,checkSet,extra,ret,cur,pop,i,prune=!0,contextXML=Sizzle.isXML(context),parts=[],soFar=selector;do if(chunker.exec(""),m=chunker.exec(soFar))if(soFar=m[3],parts.push(m[1]),m[2]){extra=m[3];break}while(m);if(parts.length>1&&origPOS.exec(selector))if(2===parts.length&&Expr.relative[parts[0]])set=posProcess(parts[0]+parts[1],context,seed);else for(set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);parts.length;){if(selector=parts.shift(),Expr.relative[selector])selector+=parts.shift();set=posProcess(selector,set,seed)}else{if(!seed&&parts.length>1&&9===context.nodeType&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1]))ret=Sizzle.find(parts.shift(),context,contextXML),context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0];if(context){if(ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),1===parts.length&&("~"===parts[0]||"+"===parts[0])&&context.parentNode?context.parentNode:context,contextXML),set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set,parts.length>0)checkSet=makeArray(set);else prune=!1;for(;parts.length;){if(cur=parts.pop(),pop=cur,!Expr.relative[cur])cur="";else pop=parts.pop();if(null==pop)pop=context;Expr.relative[cur](checkSet,pop,contextXML)}}else checkSet=parts=[]}if(!checkSet)checkSet=set;if(!checkSet)Sizzle.error(cur||selector);if("[object Array]"===toString.call(checkSet)){if(!prune)results.push.apply(results,checkSet);else if(context&&1===context.nodeType){for(i=0;null!=checkSet[i];i++)if(checkSet[i]&&(checkSet[i]===!0||1===checkSet[i].nodeType&&Sizzle.contains(context,checkSet[i])))results.push(set[i])}else for(i=0;null!=checkSet[i];i++)if(checkSet[i]&&1===checkSet[i].nodeType)results.push(set[i])}else makeArray(checkSet,results);if(extra)Sizzle(extra,origContext,results,seed),Sizzle.uniqueSort(results);return results};Sizzle.uniqueSort=function(results){if(sortOrder)if(hasDuplicate=baseHasDuplicate,results.sort(sortOrder),hasDuplicate)for(var i=1;i<results.length;i++)if(results[i]===results[i-1])results.splice(i--,1);return results},Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set)},Sizzle.matchesSelector=function(node,expr){return Sizzle(expr,null,null,[node]).length>0},Sizzle.find=function(expr,context,isXML){var set,i,len,match,type,left;if(!expr)return[];for(i=0,len=Expr.order.length;len>i;i++)if(type=Expr.order[i],match=Expr.leftMatch[type].exec(expr))if(left=match[1],match.splice(1,1),"\\"!==left.substr(left.length-1))if(match[1]=(match[1]||"").replace(rBackslash,""),set=Expr.find[type](match,context,isXML),null!=set){expr=expr.replace(Expr.match[type],"");break}if(!set)set="undefined"!=typeof context.getElementsByTagName?context.getElementsByTagName("*"):[];return{set:set,expr:expr}},Sizzle.filter=function(expr,set,inplace,not){for(var match,anyFound,type,found,item,filter,left,i,pass,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&Sizzle.isXML(set[0]);expr&&set.length;){for(type in Expr.filter)if(null!=(match=Expr.leftMatch[type].exec(expr))&&match[2]){if(filter=Expr.filter[type],left=match[1],anyFound=!1,match.splice(1,1),"\\"===left.substr(left.length-1))continue;if(curLoop===result)result=[];if(Expr.preFilter[type])if(match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter),!match)anyFound=found=!0;else if(match===!0)continue;if(match)for(i=0;null!=(item=curLoop[i]);i++)if(item)if(found=filter(item,match,i,curLoop),pass=not^found,inplace&&null!=found)if(pass)anyFound=!0;else curLoop[i]=!1;else if(pass)result.push(item),anyFound=!0;if(found!==undefined){if(!inplace)curLoop=result;if(expr=expr.replace(Expr.match[type],""),!anyFound)return[];break}}if(expr===old)if(null==anyFound)Sizzle.error(expr);else break;old=expr}return curLoop},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};var getText=Sizzle.getText=function(elem){var i,node,nodeType=elem.nodeType,ret="";if(nodeType){if(1===nodeType||9===nodeType)if("string"==typeof elem.textContent)return elem.textContent;else if("string"==typeof elem.innerText)return elem.innerText.replace(rReturn,"");else for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem);else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(i=0;node=elem[i];i++)if(8!==node.nodeType)ret+=getText(node);return ret},Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href")},type:function(elem){return elem.getAttribute("type")}},relative:{"+":function(checkSet,part){var isPartStr="string"==typeof part,isTag=isPartStr&&!rNonWord.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag)part=part.toLowerCase();for(var i=0,l=checkSet.length,elem;l>i;i++)if(elem=checkSet[i]){for(;(elem=elem.previousSibling)&&1!==elem.nodeType;);checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||!1:elem===part}if(isPartStrNotTag)Sizzle.filter(part,checkSet,!0)},">":function(checkSet,part){var elem,isPartStr="string"==typeof part,i=0,l=checkSet.length;if(isPartStr&&!rNonWord.test(part)){for(part=part.toLowerCase();l>i;i++)if(elem=checkSet[i]){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:!1}}else{for(;l>i;i++)if(elem=checkSet[i])checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part;if(isPartStr)Sizzle.filter(part,checkSet,!0)}},"":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if("string"==typeof part&&!rNonWord.test(part))part=part.toLowerCase(),nodeCheck=part,checkFn=dirNodeCheck;checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML)},"~":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if("string"==typeof part&&!rNonWord.test(part))part=part.toLowerCase(),nodeCheck=part,checkFn=dirNodeCheck;checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML)}},find:{ID:function(match,context,isXML){if("undefined"!=typeof context.getElementById&&!isXML){var m=context.getElementById(match[1]);return m&&m.parentNode?[m]:[]}},NAME:function(match,context){if("undefined"!=typeof context.getElementsByName){for(var ret=[],results=context.getElementsByName(match[1]),i=0,l=results.length;l>i;i++)if(results[i].getAttribute("name")===match[1])ret.push(results[i]);return 0===ret.length?null:ret}},TAG:function(match,context){if("undefined"!=typeof context.getElementsByTagName)return context.getElementsByTagName(match[1])}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){if(match=" "+match[1].replace(rBackslash,"")+" ",isXML)return match;for(var i=0,elem;null!=(elem=curLoop[i]);i++)if(elem)if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n\r]/g," ").indexOf(match)>=0)){if(!inplace)result.push(elem)}else if(inplace)curLoop[i]=!1;return!1},ID:function(match){return match[1].replace(rBackslash,"")},TAG:function(match,curLoop){return match[1].replace(rBackslash,"").toLowerCase()},CHILD:function(match){if("nth"===match[1]){if(!match[2])Sizzle.error(match[0]);match[2]=match[2].replace(/^\+|\s*/g,"");var test=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===match[2]&&"2n"||"odd"===match[2]&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=test[1]+(test[2]||1)-0,match[3]=test[3]-0}else if(match[2])Sizzle.error(match[0]);return match[0]=done++,match},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1]=match[1].replace(rBackslash,"");if(!isXML&&Expr.attrMap[name])match[1]=Expr.attrMap[name];if(match[4]=(match[4]||match[5]||"").replace(rBackslash,""),"~="===match[2])match[4]=" "+match[4]+" ";return match},PSEUDO:function(match,curLoop,inplace,result,not){if("not"===match[1])if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3]))match[3]=Sizzle(match[3],null,null,curLoop);else{var ret=Sizzle.filter(match[3],curLoop,inplace,!0^not);if(!inplace)result.push.apply(result,ret);return!1}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0]))return!0;return match},POS:function(match){return match.unshift(!0),match}},filters:{enabled:function(elem){return elem.disabled===!1&&"hidden"!==elem.type},disabled:function(elem){return elem.disabled===!0},checked:function(elem){return elem.checked===!0},selected:function(elem){if(elem.parentNode)elem.parentNode.selectedIndex;return elem.selected===!0},parent:function(elem){return!!elem.firstChild},empty:function(elem){return!elem.firstChild},has:function(elem,i,match){return!!Sizzle(match[3],elem).length},header:function(elem){return/h\d/i.test(elem.nodeName)},text:function(elem){var attr=elem.getAttribute("type"),type=elem.type;return"input"===elem.nodeName.toLowerCase()&&"text"===type&&(attr===type||null===attr)},radio:function(elem){return"input"===elem.nodeName.toLowerCase()&&"radio"===elem.type},checkbox:function(elem){return"input"===elem.nodeName.toLowerCase()&&"checkbox"===elem.type},file:function(elem){return"input"===elem.nodeName.toLowerCase()&&"file"===elem.type},password:function(elem){return"input"===elem.nodeName.toLowerCase()&&"password"===elem.type},submit:function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&"submit"===elem.type},image:function(elem){return"input"===elem.nodeName.toLowerCase()&&"image"===elem.type},reset:function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&"reset"===elem.type},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},input:function(elem){return/input|select|textarea|button/i.test(elem.nodeName)},focus:function(elem){return elem===elem.ownerDocument.activeElement}},setFilters:{first:function(elem,i){return 0===i},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2===0},odd:function(elem,i){return i%2===1},lt:function(elem,i,match){return i<match[3]-0},gt:function(elem,i,match){return i>match[3]-0},nth:function(elem,i,match){return match[3]-0===i},eq:function(elem,i,match){return match[3]-0===i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter)return filter(elem,i,match,array);else if("contains"===name)return(elem.textContent||elem.innerText||getText([elem])||"").indexOf(match[3])>=0;else if("not"===name){for(var not=match[3],j=0,l=not.length;l>j;j++)if(not[j]===elem)return!1;return!0}else Sizzle.error(name)},CHILD:function(elem,match){var first,last,doneName,parent,cache,count,diff,type=match[1],node=elem;switch(type){case"only":case"first":for(;node=node.previousSibling;)if(1===node.nodeType)return!1;if("first"===type)return!0;node=elem;case"last":for(;node=node.nextSibling;)if(1===node.nodeType)return!1;return!0;case"nth":if(first=match[2],last=match[3],1===first&&0===last)return!0;if(doneName=match[0],parent=elem.parentNode,parent&&(parent[expando]!==doneName||!elem.nodeIndex)){for(count=0,node=parent.firstChild;node;node=node.nextSibling)if(1===node.nodeType)node.nodeIndex=++count;parent[expando]=doneName}if(diff=elem.nodeIndex-last,0===first)return 0===diff;else return diff%first===0&&diff/first>=0}},ID:function(elem,match){return 1===elem.nodeType&&elem.getAttribute("id")===match},TAG:function(elem,match){return"*"===match&&1===elem.nodeType||!!elem.nodeName&&elem.nodeName.toLowerCase()===match},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1},ATTR:function(elem,match){var name=match[1],result=Sizzle.attr?Sizzle.attr(elem,name):Expr.attrHandle[name]?Expr.attrHandle[name](elem):null!=elem[name]?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return null==result?"!="===type:!type&&Sizzle.attr?null!=result:"="===type?value===check:"*="===type?value.indexOf(check)>=0:"~="===type?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==!1:"!="===type?value!==check:"^="===type?0===value.indexOf(check):"$="===type?value.substr(value.length-check.length)===check:"|="===type?value===check||value.substr(0,check.length+1)===check+"-":!1},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter)return filter(elem,i,match,array)}}},origPOS=Expr.match.POS,fescape=function(all,num){return"\\"+(num-0+1)};for(var type in Expr.match)Expr.match[type]=new RegExp(Expr.match[type].source+/(?![^\[]*\])(?![^\(]*\))/.source),Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,fescape));var makeArray=function(array,results){if(array=Array.prototype.slice.call(array,0),results)return results.push.apply(results,array),results;return array};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(e){makeArray=function(array,results){var i=0,ret=results||[];if("[object Array]"===toString.call(array))Array.prototype.push.apply(ret,array);else if("number"==typeof array.length)for(var l=array.length;l>i;i++)ret.push(array[i]);else for(;array[i];i++)ret.push(array[i]);return ret}}var sortOrder,siblingCheck;if(document.documentElement.compareDocumentPosition)sortOrder=function(a,b){if(a===b)return hasDuplicate=!0,0;if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return 4&a.compareDocumentPosition(b)?-1:1};else sortOrder=function(a,b){if(a===b)return hasDuplicate=!0,0;else if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup)return siblingCheck(a,b);else if(!aup)return-1;else if(!bup)return 1;for(;cur;)ap.unshift(cur),cur=cur.parentNode;for(cur=bup;cur;)bp.unshift(cur),cur=cur.parentNode;al=ap.length,bl=bp.length;for(var i=0;al>i&&bl>i;i++)if(ap[i]!==bp[i])return siblingCheck(ap[i],bp[i]);return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)},siblingCheck=function(a,b,ret){if(a===b)return ret;for(var cur=a.nextSibling;cur;){if(cur===b)return-1;cur=cur.nextSibling}return 1};if(function(){var form=document.createElement("div"),id="script"+(new Date).getTime(),root=document.documentElement;if(form.innerHTML="<a name='"+id+"'/>",root.insertBefore(form,root.firstChild),document.getElementById(id))Expr.find.ID=function(match,context,isXML){if("undefined"!=typeof context.getElementById&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||"undefined"!=typeof m.getAttributeNode&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[]}},Expr.filter.ID=function(elem,match){var node="undefined"!=typeof elem.getAttributeNode&&elem.getAttributeNode("id");return 1===elem.nodeType&&node&&node.nodeValue===match};root.removeChild(form),root=form=null}(),function(){var div=document.createElement("div");if(div.appendChild(document.createComment("")),div.getElementsByTagName("*").length>0)Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if("*"===match[1]){for(var tmp=[],i=0;results[i];i++)if(1===results[i].nodeType)tmp.push(results[i]);results=tmp}return results};if(div.innerHTML="<a href='#'></a>",div.firstChild&&"undefined"!=typeof div.firstChild.getAttribute&&"#"!==div.firstChild.getAttribute("href"))Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2)};div=null}(),document.querySelectorAll)!function(){var oldSizzle=Sizzle,div=document.createElement("div"),id="__sizzle__";if(div.innerHTML="<p class='TEST'></p>",div.querySelectorAll&&0===div.querySelectorAll(".TEST").length)return;Sizzle=function(query,context,extra,seed){if(context=context||document,!seed&&!Sizzle.isXML(context)){var match=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(query);if(match&&(1===context.nodeType||9===context.nodeType))if(match[1])return makeArray(context.getElementsByTagName(query),extra);else if(match[2]&&Expr.find.CLASS&&context.getElementsByClassName)return makeArray(context.getElementsByClassName(match[2]),extra);if(9===context.nodeType){if("body"===query&&context.body)return makeArray([context.body],extra);else if(match&&match[3]){var elem=context.getElementById(match[3]);if(elem&&elem.parentNode){if(elem.id===match[3])return makeArray([elem],extra)}else return makeArray([],extra)}try{return makeArray(context.querySelectorAll(query),extra)}catch(qsaError){}}else if(1===context.nodeType&&"object"!==context.nodeName.toLowerCase()){var oldContext=context,old=context.getAttribute("id"),nid=old||id,hasParent=context.parentNode,relativeHierarchySelector=/^\s*[+~]/.test(query);if(!old)context.setAttribute("id",nid);else nid=nid.replace(/'/g,"\\$&");if(relativeHierarchySelector&&hasParent)context=context.parentNode;try{if(!relativeHierarchySelector||hasParent)return makeArray(context.querySelectorAll("[id='"+nid+"'] "+query),extra)}catch(pseudoError){}finally{if(!old)oldContext.removeAttribute("id")}}}return oldSizzle(query,context,extra,seed)};for(var prop in oldSizzle)Sizzle[prop]=oldSizzle[prop];div=null}();if(function(){var html=document.documentElement,matches=html.matchesSelector||html.mozMatchesSelector||html.webkitMatchesSelector||html.msMatchesSelector;if(matches){var disconnectedMatch=!matches.call(document.createElement("div"),"div"),pseudoWorks=!1;try{matches.call(document.documentElement,"[test!='']:sizzle")}catch(pseudoError){pseudoWorks=!0}Sizzle.matchesSelector=function(node,expr){if(expr=expr.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!Sizzle.isXML(node))try{if(pseudoWorks||!Expr.match.PSEUDO.test(expr)&&!/!=/.test(expr)){var ret=matches.call(node,expr);if(ret||!disconnectedMatch||node.document&&11!==node.document.nodeType)return ret}}catch(e){}return Sizzle(expr,null,null,[node]).length>0}}}(),function(){var div=document.createElement("div");if(div.innerHTML="<div class='test e'></div><div class='test'></div>",!div.getElementsByClassName||0===div.getElementsByClassName("e").length)return;if(div.lastChild.className="e",1===div.getElementsByClassName("e").length)return;Expr.order.splice(1,0,"CLASS"),Expr.find.CLASS=function(match,context,isXML){if("undefined"!=typeof context.getElementsByClassName&&!isXML)return context.getElementsByClassName(match[1])},div=null}(),document.documentElement.contains)Sizzle.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)};else if(document.documentElement.compareDocumentPosition)Sizzle.contains=function(a,b){return!!(16&a.compareDocumentPosition(b))};else Sizzle.contains=function(){return!1};Sizzle.isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?"HTML"!==documentElement.nodeName:!1};var posProcess=function(selector,context,seed){for(var match,tmpSet=[],later="",root=context.nodeType?[context]:context;match=Expr.match.PSEUDO.exec(selector);)later+=match[0],selector=selector.replace(Expr.match.PSEUDO,"");selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;l>i;i++)Sizzle(selector,root[i],tmpSet,seed);return Sizzle.filter(later,tmpSet)};Sizzle.attr=jQuery.attr,Sizzle.selectors.attrMap={},jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.filters,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains}();var runtil=/Until$/,rparentsprev=/^(?:parents|prevUntil|prevAll)/,rmultiselector=/,/,isSimple=/^.[^:#\[\.,]*$/,slice=Array.prototype.slice,POS=jQuery.expr.match.POS,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.fn.extend({find:function(selector){var self=this,i,l;if("string"!=typeof selector)return jQuery(selector).filter(function(){for(i=0,l=self.length;l>i;i++)if(jQuery.contains(self[i],this))return!0});var ret=this.pushStack("","find",selector),length,n,r;for(i=0,l=this.length;l>i;i++)if(length=ret.length,jQuery.find(selector,this[i],ret),i>0)for(n=length;n<ret.length;n++)for(r=0;length>r;r++)if(ret[r]===ret[n]){ret.splice(n--,1);break}return ret},has:function(target){var targets=jQuery(target);return this.filter(function(){for(var i=0,l=targets.length;l>i;i++)if(jQuery.contains(this,targets[i]))return!0})},not:function(selector){return this.pushStack(winnow(this,selector,!1),"not",selector)},filter:function(selector){return this.pushStack(winnow(this,selector,!0),"filter",selector)},is:function(selector){return!!selector&&("string"==typeof selector?POS.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0)},closest:function(selectors,context){var ret=[],i,l,cur=this[0];if(jQuery.isArray(selectors)){for(var level=1;cur&&cur.ownerDocument&&cur!==context;){for(i=0;i<selectors.length;i++)if(jQuery(cur).is(selectors[i]))ret.push({selector:selectors[i],elem:cur,level:level});cur=cur.parentNode,level++}return ret}var pos=POS.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;for(i=0,l=this.length;l>i;i++)for(cur=this[i];cur;)if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break}else if(cur=cur.parentNode,!cur||!cur.ownerDocument||cur===context||11===cur.nodeType)break;return ret=ret.length>1?jQuery.unique(ret):ret,this.pushStack(ret,"closest",selectors)},index:function(elem){if(!elem)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if("string"==typeof elem)return jQuery.inArray(this[0],jQuery(elem));return jQuery.inArray(elem.jquery?elem[0]:elem,this)},add:function(selector,context){var set="string"==typeof selector?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all))},andSelf:function(){return this.add(this.prevObject)}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return jQuery.nth(elem,2,"nextSibling")},prev:function(elem){return jQuery.nth(elem,2,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling(elem.parentNode.firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(!runtil.test(name))selector=until;if(selector&&"string"==typeof selector)ret=jQuery.filter(selector,ret);if(ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret,(this.length>1||rmultiselector.test(selector))&&rparentsprev.test(name))ret=ret.reverse();return this.pushStack(ret,name,slice.call(arguments).join(","))}}),jQuery.extend({filter:function(expr,elems,not){if(not)expr=":not("+expr+")";return 1===elems.length?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(until===undefined||1!==cur.nodeType||!jQuery(cur).is(until));){if(1===cur.nodeType)matched.push(cur);cur=cur[dir]}return matched},nth:function(cur,result,dir,elem){result=result||1;for(var num=0;cur&&(1!==cur.nodeType||++num!==result);cur=cur[dir]);return cur},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)if(1===n.nodeType&&n!==elem)r.push(n);return r}});var nodeNames="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:\d+|null)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style)/i,rnocache=/<(?:script|object|embed|option|style)/i,rnoshimcache=new RegExp("<(?:"+nodeNames+")","i"),rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)/,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},safeFragment=createSafeFragment(document);if(wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,!jQuery.support.htmlSerialize)wrapMap._default=[1,"div<div>","</div>"];jQuery.fn.extend({text:function(text){if(jQuery.isFunction(text))return this.each(function(i){var self=jQuery(this);self.text(text.call(this,i,self.text()))});if("object"!=typeof text&&text!==undefined)return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(text));return jQuery.text(this)},wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);if(this[0].parentNode)wrap.insertBefore(this[0]);wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))});return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length)contents.wrapAll(html);else self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body"))jQuery(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(elem){if(1===this.nodeType)this.appendChild(elem)})},prepend:function(){return this.domManip(arguments,!0,function(elem){if(1===this.nodeType)this.insertBefore(elem,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(elem){this.parentNode.insertBefore(elem,this)});else if(arguments.length){var set=jQuery.clean(arguments);return set.push.apply(set,this.toArray()),this.pushStack(set,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(elem){this.parentNode.insertBefore(elem,this.nextSibling)});else if(arguments.length){var set=this.pushStack(this,"after",arguments);return set.push.apply(set,jQuery.clean(arguments)),set}},remove:function(selector,keepData){for(var i=0,elem;null!=(elem=this[i]);i++)if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&1===elem.nodeType)jQuery.cleanData(elem.getElementsByTagName("*")),jQuery.cleanData([elem]);if(elem.parentNode)elem.parentNode.removeChild(elem)}return this},empty:function(){for(var i=0,elem;null!=(elem=this[i]);i++){if(1===elem.nodeType)jQuery.cleanData(elem.getElementsByTagName("*"));for(;elem.firstChild;)elem.removeChild(elem.firstChild)}return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null==dataAndEvents?!1:dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){if(value===undefined)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(rinlinejQuery,""):null;else if(!("string"!=typeof value||rnoInnerhtml.test(value)||!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(value)||wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()])){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(var i=0,l=this.length;l>i;i++)if(1===this[i].nodeType)jQuery.cleanData(this[i].getElementsByTagName("*")),this[i].innerHTML=value}catch(e){this.empty().append(value)}}else if(jQuery.isFunction(value))this.each(function(i){var self=jQuery(this);self.html(value.call(this,i,self.html()))});else this.empty().append(value);return this},replaceWith:function(value){if(this[0]&&this[0].parentNode){if(jQuery.isFunction(value))return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old))});if("string"!=typeof value)value=jQuery(value).detach();return this.each(function(){var next=this.nextSibling,parent=this.parentNode;if(jQuery(this).remove(),next)jQuery(next).before(value);else jQuery(parent).append(value)})}else return this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value):this},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,table,callback){var results,first,fragment,parent,value=args[0],scripts=[];if(!jQuery.support.checkClone&&3===arguments.length&&"string"==typeof value&&rchecked.test(value))return this.each(function(){jQuery(this).domManip(args,table,callback,!0)});if(jQuery.isFunction(value))return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined),self.domManip(args,table,callback)});if(this[0]){if(parent=value&&value.parentNode,jQuery.support.parentNode&&parent&&11===parent.nodeType&&parent.childNodes.length===this.length)results={fragment:parent};else results=jQuery.buildFragment(args,this,scripts);if(fragment=results.fragment,1===fragment.childNodes.length)first=fragment=fragment.firstChild;
else first=fragment.firstChild;if(first){table=table&&jQuery.nodeName(first,"tr");for(var i=0,l=this.length,lastIndex=l-1;l>i;i++)callback.call(table?root(this[i],first):this[i],results.cacheable||l>1&&lastIndex>i?jQuery.clone(fragment,!0,!0):fragment)}if(scripts.length)jQuery.each(scripts,evalScript)}return this}}),jQuery.buildFragment=function(args,nodes,scripts){var fragment,cacheable,cacheresults,doc,first=args[0];if(nodes&&nodes[0])doc=nodes[0].ownerDocument||nodes[0];if(!doc.createDocumentFragment)doc=document;if(1===args.length&&"string"==typeof first&&first.length<512&&doc===document&&"<"===first.charAt(0)&&!rnocache.test(first)&&(jQuery.support.checkClone||!rchecked.test(first))&&(jQuery.support.html5Clone||!rnoshimcache.test(first)))if(cacheable=!0,cacheresults=jQuery.fragments[first],cacheresults&&1!==cacheresults)fragment=cacheresults;if(!fragment)fragment=doc.createDocumentFragment(),jQuery.clean(args,doc,fragment,scripts);if(cacheable)jQuery.fragments[first]=cacheresults?fragment:1;return{fragment:fragment,cacheable:cacheable}},jQuery.fragments={},jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),parent=1===this.length&&this[0].parentNode;if(parent&&11===parent.nodeType&&1===parent.childNodes.length&&1===insert.length)return insert[original](this[0]),this;else{for(var i=0,l=insert.length;l>i;i++){var elems=(i>0?this.clone(!0):this).get();jQuery(insert[i])[original](elems),ret=ret.concat(elems)}return this.pushStack(ret,name,insert.selector)}}}),jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,destElements,i,clone=jQuery.support.html5Clone||!rnoshimcache.test("<"+elem.nodeName)?elem.cloneNode(!0):shimCloneNode(elem);if(!(jQuery.support.noCloneEvent&&jQuery.support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(cloneFixAttributes(elem,clone),srcElements=getAll(elem),destElements=getAll(clone),i=0;srcElements[i];++i)if(destElements[i])cloneFixAttributes(srcElements[i],destElements[i]);if(dataAndEvents)if(cloneCopyEvent(elem,clone),deepDataAndEvents)for(srcElements=getAll(elem),destElements=getAll(clone),i=0;srcElements[i];++i)cloneCopyEvent(srcElements[i],destElements[i]);return srcElements=destElements=null,clone},clean:function(elems,context,fragment,scripts){var checkScriptType;if(context=context||document,"undefined"==typeof context.createElement)context=context.ownerDocument||context[0]&&context[0].ownerDocument||document;for(var ret=[],j,i=0,elem;null!=(elem=elems[i]);i++){if("number"==typeof elem)elem+="";if(!elem)continue;if("string"==typeof elem)if(!rhtml.test(elem))elem=context.createTextNode(elem);else{elem=elem.replace(rxhtmlTag,"<$1></$2>");var tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div=context.createElement("div");if(context===document)safeFragment.appendChild(div);else createSafeFragment(context).appendChild(div);for(div.innerHTML=wrap[1]+elem+wrap[2];depth--;)div=div.lastChild;if(!jQuery.support.tbody){var hasBody=rtbody.test(elem),tbody="table"===tag&&!hasBody?div.firstChild&&div.firstChild.childNodes:"<table>"===wrap[1]&&!hasBody?div.childNodes:[];for(j=tbody.length-1;j>=0;--j)if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length)tbody[j].parentNode.removeChild(tbody[j])}if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem))div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild);elem=div.childNodes}var len;if(!jQuery.support.appendChecked)if(elem[0]&&"number"==typeof(len=elem.length))for(j=0;len>j;j++)findInputs(elem[j]);else findInputs(elem);if(elem.nodeType)ret.push(elem);else ret=jQuery.merge(ret,elem)}if(fragment)for(checkScriptType=function(elem){return!elem.type||rscriptType.test(elem.type)},i=0;ret[i];i++)if(scripts&&jQuery.nodeName(ret[i],"script")&&(!ret[i].type||"text/javascript"===ret[i].type.toLowerCase()))scripts.push(ret[i].parentNode?ret[i].parentNode.removeChild(ret[i]):ret[i]);else{if(1===ret[i].nodeType){var jsTags=jQuery.grep(ret[i].getElementsByTagName("script"),checkScriptType);ret.splice.apply(ret,[i+1,0].concat(jsTags))}fragment.appendChild(ret[i])}return ret},cleanData:function(elems){for(var data,id,cache=jQuery.cache,special=jQuery.event.special,deleteExpando=jQuery.support.deleteExpando,i=0,elem;null!=(elem=elems[i]);i++){if(elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()])continue;if(id=elem[jQuery.expando]){if(data=cache[id],data&&data.events){for(var type in data.events)if(special[type])jQuery.event.remove(elem,type);else jQuery.removeEvent(elem,type,data.handle);if(data.handle)data.handle.elem=null}if(deleteExpando)delete elem[jQuery.expando];else if(elem.removeAttribute)elem.removeAttribute(jQuery.expando);delete cache[id]}}}});var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rupper=/([A-Z]|^ms)/g,rnumpx=/^-?\d+(?:px)?$/i,rnum=/^-?\d/,rrelNum=/^([\-+])=([\-+.\de]+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssWidth=["Left","Right"],cssHeight=["Top","Bottom"],curCSS,getComputedStyle,currentStyle;if(jQuery.fn.css=function(name,value){if(2===arguments.length&&value===undefined)return this;return jQuery.access(this,name,value,!0,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)})},jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity","opacity");return""===ret?"1":ret}else return elem.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||3===elem.nodeType||8===elem.nodeType||!elem.style)return;var ret,type,origName=jQuery.camelCase(name),style=elem.style,hooks=jQuery.cssHooks[origName];if(name=jQuery.cssProps[origName]||origName,value!==undefined){if(type=typeof value,"string"===type&&(ret=rrelNum.exec(value)))value=+(ret[1]+1)*+ret[2]+parseFloat(jQuery.css(elem,name)),type="number";if(null==value||"number"===type&&isNaN(value))return;if("number"===type&&!jQuery.cssNumber[origName])value+="px";if(!(hooks&&"set"in hooks&&(value=hooks.set(elem,value))===undefined))try{style[name]=value}catch(e){}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,!1,extra))!==undefined)return ret;return style[name]}},css:function(elem,name,extra){var ret,hooks;if(name=jQuery.camelCase(name),hooks=jQuery.cssHooks[name],name=jQuery.cssProps[name]||name,"cssFloat"===name)name="float";if(hooks&&"get"in hooks&&(ret=hooks.get(elem,!0,extra))!==undefined)return ret;else if(curCSS)return curCSS(elem,name)},swap:function(elem,options,callback){var old={};for(var name in options)old[name]=elem.style[name],elem.style[name]=options[name];callback.call(elem);for(name in options)elem.style[name]=old[name]}}),jQuery.curCSS=jQuery.css,jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){var val;if(computed){if(0!==elem.offsetWidth)return getWH(elem,name,extra);else jQuery.swap(elem,cssShow,function(){val=getWH(elem,name,extra)});return val}},set:function(elem,value){if(rnumpx.test(value)){if(value=parseFloat(value),value>=0)return value+"px"}else return value}}}),!jQuery.support.opacity)jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?parseFloat(RegExp.$1)/100+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";if(style.zoom=1,value>=1&&""===jQuery.trim(filter.replace(ralpha,""))&&style.removeAttribute)if(style.removeAttribute("filter"),currentStyle&&!currentStyle.filter)return;style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity}};if(jQuery(function(){if(!jQuery.support.reliableMarginRight)jQuery.cssHooks.marginRight={get:function(elem,computed){var ret;return jQuery.swap(elem,{display:"inline-block"},function(){if(computed)ret=curCSS(elem,"margin-right","marginRight");else ret=elem.style.marginRight}),ret}}}),document.defaultView&&document.defaultView.getComputedStyle)getComputedStyle=function(elem,name){var ret,defaultView,computedStyle;if(name=name.replace(rupper,"-$1").toLowerCase(),(defaultView=elem.ownerDocument.defaultView)&&(computedStyle=defaultView.getComputedStyle(elem,null)))if(ret=computedStyle.getPropertyValue(name),""===ret&&!jQuery.contains(elem.ownerDocument.documentElement,elem))ret=jQuery.style(elem,name);return ret};if(document.documentElement.currentStyle)currentStyle=function(elem,name){var left,rsLeft,uncomputed,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;if(null===ret&&style&&(uncomputed=style[name]))ret=uncomputed;if(!rnumpx.test(ret)&&rnum.test(ret)){if(left=style.left,rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left)elem.runtimeStyle.left=elem.currentStyle.left;if(style.left="fontSize"===name?"1em":ret||0,ret=style.pixelLeft+"px",style.left=left,rsLeft)elem.runtimeStyle.left=rsLeft}return""===ret?"auto":ret};if(curCSS=getComputedStyle||currentStyle,jQuery.expr&&jQuery.expr.filters)jQuery.expr.filters.hidden=function(elem){var width=elem.offsetWidth,height=elem.offsetHeight;return 0===width&&0===height||!jQuery.support.reliableHiddenOffsets&&"none"===(elem.style&&elem.style.display||jQuery.css(elem,"display"))},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rselectTextarea=/^(?:select|textarea)/i,rspacesAjax=/\s+/,rts=/([?&])_=[^&]*/,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,_load=jQuery.fn.load,prefilters={},transports={},ajaxLocation,ajaxLocParts,allTypes=["*/"]+["*"];try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.fn.extend({load:function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);else if(!this.length)return this;var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off)}var type="GET";if(params)if(jQuery.isFunction(params))callback=params,params=undefined;else if("object"==typeof params)params=jQuery.param(params,jQuery.ajaxSettings.traditional),type="POST";var self=this;return jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status,responseText){if(responseText=jqXHR.responseText,jqXHR.isResolved())jqXHR.done(function(r){responseText=r}),self.html(selector?jQuery("<div>").append(responseText.replace(rscript,"")).find(selector):responseText);if(callback)self.each(callback,[responseText,status,jqXHR])}}),this},serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.on(o,f)}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data))type=type||callback,callback=data,data=undefined;return jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type})}}),jQuery.extend({getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},ajaxSetup:function(target,settings){if(settings)ajaxExtend(target,jQuery.ajaxSettings);else settings=target,target=jQuery.ajaxSettings;return ajaxExtend(target,settings),target},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){if(2===state)return;if(state=2,timeoutTimer)clearTimeout(timeoutTimer);transport=undefined,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0;var isSuccess,success,error,statusText=nativeStatusText,response=responses?ajaxHandleResponses(s,jqXHR,responses):undefined,lastModified,etag;if(status>=200&&300>status||304===status){if(s.ifModified){if(lastModified=jqXHR.getResponseHeader("Last-Modified"))jQuery.lastModified[ifModifiedKey]=lastModified;if(etag=jqXHR.getResponseHeader("Etag"))jQuery.etag[ifModifiedKey]=etag}if(304===status)statusText="notmodified",isSuccess=!0;else try{success=ajaxConvert(s,response),statusText="success",isSuccess=!0}catch(e){statusText="parsererror",error=e}}else if(error=statusText,!statusText||status)if(statusText="error",0>status)status=0;if(jqXHR.status=status,jqXHR.statusText=""+(nativeStatusText||statusText),isSuccess)deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);else deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);if(jqXHR.statusCode(statusCode),statusCode=undefined,fireGlobals)globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error]);if(completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals)if(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),!--jQuery.active)jQuery.event.trigger("ajaxStop")}if("object"==typeof url)options=url,url=undefined;options=options||{};var s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},ifModifiedKey,requestHeaders={},requestHeadersNames={},responseHeadersString,responseHeaders,transport,timeoutTimer,parts,state=0,fireGlobals,i,jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value}return this},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return match===undefined?null:match},overrideMimeType:function(type){if(!state)s.mimeType=type;return this},abort:function(statusText){if(statusText=statusText||"abort",transport)transport.abort(statusText);return done(0,statusText),this}};if(deferred.promise(jqXHR),jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,jqXHR.complete=completeDeferred.add,jqXHR.statusCode=function(map){if(map){var tmp;if(2>state)for(tmp in map)statusCode[tmp]=[statusCode[tmp],map[tmp]];else tmp=map[jqXHR.status],jqXHR.then(tmp,tmp)}return this},s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().split(rspacesAjax),null==s.crossDomain)parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]==ajaxLocParts[1]&&parts[2]==ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?80:443))==(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?80:443)));if(s.data&&s.processData&&"string"!=typeof s.data)s.data=jQuery.param(s.data,s.traditional);if(inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return!1;if(fireGlobals=s.global,s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),fireGlobals&&0===jQuery.active++)jQuery.event.trigger("ajaxStart");if(!s.hasContent){if(s.data)s.url+=(rquery.test(s.url)?"&":"?")+s.data,delete s.data;if(ifModifiedKey=s.url,s.cache===!1){var ts=jQuery.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+(ret===s.url?(rquery.test(s.url)?"&":"?")+"_="+ts:"")}}if(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)jqXHR.setRequestHeader("Content-Type",s.contentType);if(s.ifModified){if(ifModifiedKey=ifModifiedKey||s.url,jQuery.lastModified[ifModifiedKey])jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[ifModifiedKey]);if(jQuery.etag[ifModifiedKey])jqXHR.setRequestHeader("If-None-Match",jQuery.etag[ifModifiedKey])}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===!1||2===state))return jqXHR.abort(),!1;for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR),!transport)done(-1,"No Transport");else{if(jqXHR.readyState=1,fireGlobals)globalEventContext.trigger("ajaxSend",[jqXHR,s]);if(s.async&&s.timeout>0)timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout);try{state=1,transport.send(requestHeaders,done)}catch(e){if(2>state)done(-1,e);else throw e}}return jqXHR},param:function(a,traditional){var s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined)traditional=jQuery.ajaxSettings.traditional;if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(var prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")}}),jQuery.extend({active:0,lastModified:{},etag:{}});var jsc=jQuery.now(),jsre=/(\=)\?(&|$)|\?\?/i;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return jQuery.expando+"_"+jsc++}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var inspectData="application/x-www-form-urlencoded"===s.contentType&&"string"==typeof s.data;if("jsonp"===s.dataTypes[0]||s.jsonp!==!1&&(jsre.test(s.url)||inspectData&&jsre.test(s.data))){var responseContainer,jsonpCallback=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,previous=window[jsonpCallback],url=s.url,data=s.data,replace="$1"+jsonpCallback+"$2";if(s.jsonp!==!1)if(url=url.replace(jsre,replace),s.url===url){if(inspectData)data=data.replace(jsre,replace);if(s.data===data)url+=(/\?/.test(url)?"&":"?")+s.jsonp+"="+jsonpCallback}return s.url=url,s.data=data,window[jsonpCallback]=function(response){responseContainer=[response]},jqXHR.always(function(){if(window[jsonpCallback]=previous,responseContainer&&jQuery.isFunction(previous))window[jsonpCallback](responseContainer[0])}),s.converters["script json"]=function(){if(!responseContainer)jQuery.error(jsonpCallback+" was not called");return responseContainer[0]},s.dataTypes[0]="json","script"}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined)s.cache=!1;if(s.crossDomain)s.type="GET",s.global=!1}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){if(script=document.createElement("script"),script.async="async",s.scriptCharset)script.charset=s.scriptCharset;script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){if(script.onload=script.onreadystatechange=null,head&&script.parentNode)head.removeChild(script);if(script=undefined,!isAbort)callback(200,"success")}},head.insertBefore(script,head.firstChild)},abort:function(){if(script)script.onload(0,1)}}}});var xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks)xhrCallbacks[key](0,1)}:!1,xhrId=0,xhrCallbacks;if(jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR()}:createStandardXHR,function(xhr){jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&"withCredentials"in xhr})}(jQuery.ajaxSettings.xhr()),jQuery.support.ajax)jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var xhr=s.xhr(),handle,i;if(s.username)xhr.open(s.type,s.url,s.async,s.username,s.password);else xhr.open(s.type,s.url,s.async);if(s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];if(s.mimeType&&xhr.overrideMimeType)xhr.overrideMimeType(s.mimeType);if(!s.crossDomain&&!headers["X-Requested-With"])headers["X-Requested-With"]="XMLHttpRequest";try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(_){}if(xhr.send(s.hasContent&&s.data||null),callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||4===xhr.readyState)){if(callback=undefined,handle)if(xhr.onreadystatechange=jQuery.noop,xhrOnUnloadAbort)delete xhrCallbacks[handle];if(isAbort){if(4!==xhr.readyState)xhr.abort()}else{if(status=xhr.status,responseHeaders=xhr.getAllResponseHeaders(),responses={},xml=xhr.responseXML,xml&&xml.documentElement)responses.xml=xml;responses.text=xhr.responseText;try{statusText=xhr.statusText}catch(e){statusText=""}if(!status&&s.isLocal&&!s.crossDomain)status=responses.text?200:404;else if(1223===status)status=204}}}catch(firefoxAccessException){if(!isAbort)complete(-1,firefoxAccessException)}if(responses)complete(status,statusText,responses,responseHeaders)},!s.async||4===xhr.readyState)callback();else{if(handle=++xhrId,xhrOnUnloadAbort){if(!xhrCallbacks)xhrCallbacks={},jQuery(window).unload(xhrOnUnloadAbort);xhrCallbacks[handle]=callback}xhr.onreadystatechange=callback}},abort:function(){if(callback)callback(0,1)}}}});var elemdisplay={},iframe,iframeDoc,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,timerId,fxAttrs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],fxNow;if(jQuery.fn.extend({show:function(speed,easing,callback){var elem,display;if(speed||0===speed)return this.animate(genFx("show",3),speed,easing,callback);else{for(var i=0,j=this.length;j>i;i++)if(elem=this[i],elem.style){if(display=elem.style.display,!jQuery._data(elem,"olddisplay")&&"none"===display)display=elem.style.display="";if(""===display&&"none"===jQuery.css(elem,"display"))jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName))}for(i=0;j>i;i++)if(elem=this[i],elem.style)if(display=elem.style.display,""===display||"none"===display)elem.style.display=jQuery._data(elem,"olddisplay")||"";return this}},hide:function(speed,easing,callback){if(speed||0===speed)return this.animate(genFx("hide",3),speed,easing,callback);else{for(var elem,display,i=0,j=this.length;j>i;i++)if(elem=this[i],elem.style)if(display=jQuery.css(elem,"display"),"none"!==display&&!jQuery._data(elem,"olddisplay"))jQuery._data(elem,"olddisplay",display);for(i=0;j>i;i++)if(this[i].style)this[i].style.display="none";return this}},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2,callback){var bool="boolean"==typeof fn;if(jQuery.isFunction(fn)&&jQuery.isFunction(fn2))this._toggle.apply(this,arguments);else if(null==fn||bool)this.each(function(){var state=bool?fn:jQuery(this).is(":hidden");jQuery(this)[state?"show":"hide"]()});else this.animate(genFx("toggle",3),fn,fn2,callback);return this},fadeTo:function(speed,to,easing,callback){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){function doAnimation(){if(optall.queue===!1)jQuery._mark(this);var opt=jQuery.extend({},optall),isElement=1===this.nodeType,hidden=isElement&&jQuery(this).is(":hidden"),name,val,p,e,parts,start,end,unit,method;opt.animatedProperties={};for(p in prop){if(name=jQuery.camelCase(p),p!==name)prop[name]=prop[p],delete prop[p];if(val=prop[name],jQuery.isArray(val))opt.animatedProperties[name]=val[1],val=prop[name]=val[0];else opt.animatedProperties[name]=opt.specialEasing&&opt.specialEasing[name]||opt.easing||"swing";if("hide"===val&&hidden||"show"===val&&!hidden)return opt.complete.call(this);if(isElement&&("height"===name||"width"===name))if(opt.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===jQuery.css(this,"display")&&"none"===jQuery.css(this,"float"))if(!jQuery.support.inlineBlockNeedsLayout||"inline"===defaultDisplay(this.nodeName))this.style.display="inline-block";else this.style.zoom=1}if(null!=opt.overflow)this.style.overflow="hidden";for(p in prop)if(e=new jQuery.fx(this,opt,p),val=prop[p],rfxtypes.test(val))if(method=jQuery._data(this,"toggle"+p)||("toggle"===val?hidden?"show":"hide":0))jQuery._data(this,"toggle"+p,"show"===method?"hide":"show"),e[method]();else e[val]();else if(parts=rfxnum.exec(val),start=e.cur(),parts){if(end=parseFloat(parts[2]),unit=parts[3]||(jQuery.cssNumber[p]?"":"px"),"px"!==unit)jQuery.style(this,p,(end||1)+unit),start=(end||1)/e.cur()*start,jQuery.style(this,p,start+unit);if(parts[1])end=("-="===parts[1]?-1:1)*end+start;e.custom(start,end,unit)}else e.custom(start,val,"");return!0}var optall=jQuery.speed(speed,easing,callback);if(jQuery.isEmptyObject(prop))return this.each(optall.complete,[!1]);return prop=jQuery.extend({},prop),optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){if("string"!=typeof type)gotoEnd=clearQueue,clearQueue=type,type=undefined;if(clearQueue&&type!==!1)this.queue(type||"fx",[]);return this.each(function(){function stopQueue(elem,data,index){var hooks=data[index];jQuery.removeData(elem,index,!0),hooks.stop(gotoEnd)}var index,hadTimers=!1,timers=jQuery.timers,data=jQuery._data(this);if(!gotoEnd)jQuery._unmark(!0,this);if(null==type){for(index in data)if(data[index]&&data[index].stop&&index.indexOf(".run")===index.length-4)stopQueue(this,data,index)}else if(data[index=type+".run"]&&data[index].stop)stopQueue(this,data,index);for(index=timers.length;index--;)if(timers[index].elem===this&&(null==type||timers[index].queue===type)){if(gotoEnd)timers[index](!0);else timers[index].saveState();hadTimers=!0,timers.splice(index,1)}if(!gotoEnd||!hadTimers)jQuery.dequeue(this,type)})}}),jQuery.each({slideDown:genFx("show",1),slideUp:genFx("hide",1),slideToggle:genFx("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};if(opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,null==opt.queue||opt.queue===!0)opt.queue="fx";return opt.old=opt.complete,opt.complete=function(noUnmark){if(jQuery.isFunction(opt.old))opt.old.call(this);if(opt.queue)jQuery.dequeue(this,opt.queue);else if(noUnmark!==!1)jQuery._unmark(this)},opt},easing:{linear:function(p,n,firstNum,diff){return firstNum+diff*p},swing:function(p,n,firstNum,diff){return(-Math.cos(p*Math.PI)/2+.5)*diff+firstNum}},timers:[],fx:function(elem,options,prop){this.options=options,this.elem=elem,this.prop=prop,options.orig=options.orig||{}}}),jQuery.fx.prototype={update:function(){if(this.options.step)this.options.step.call(this.elem,this.now,this);(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var parsed,r=jQuery.css(this.elem,this.prop);return isNaN(parsed=parseFloat(r))?!r||"auto"===r?0:r:parsed},custom:function(from,to,unit){function t(gotoEnd){return self.step(gotoEnd)}var self=this,fx=jQuery.fx;if(this.startTime=fxNow||createFxNow(),this.end=to,this.now=this.start=from,this.pos=this.state=0,this.unit=unit||this.unit||(jQuery.cssNumber[this.prop]?"":"px"),t.queue=this.options.queue,t.elem=this.elem,t.saveState=function(){if(self.options.hide&&jQuery._data(self.elem,"fxshow"+self.prop)===undefined)jQuery._data(self.elem,"fxshow"+self.prop,self.start)},t()&&jQuery.timers.push(t)&&!timerId)timerId=setInterval(fx.tick,fx.interval)},show:function(){var dataShow=jQuery._data(this.elem,"fxshow"+this.prop);if(this.options.orig[this.prop]=dataShow||jQuery.style(this.elem,this.prop),this.options.show=!0,dataShow!==undefined)this.custom(this.cur(),dataShow);else this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur());jQuery(this.elem).show()},hide:function(){this.options.orig[this.prop]=jQuery._data(this.elem,"fxshow"+this.prop)||jQuery.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(gotoEnd){var p,n,complete,t=fxNow||createFxNow(),done=!0,elem=this.elem,options=this.options;if(gotoEnd||t>=options.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),options.animatedProperties[this.prop]=!0;for(p in options.animatedProperties)if(options.animatedProperties[p]!==!0)done=!1;if(done){if(null!=options.overflow&&!jQuery.support.shrinkWrapBlocks)jQuery.each(["","X","Y"],function(index,value){elem.style["overflow"+value]=options.overflow[index]});if(options.hide)jQuery(elem).hide();if(options.hide||options.show)for(p in options.animatedProperties)jQuery.style(elem,p,options.orig[p]),jQuery.removeData(elem,"fxshow"+p,!0),jQuery.removeData(elem,"toggle"+p,!0);if(complete=options.complete)options.complete=!1,complete.call(elem)}return!1}else{if(1/0==options.duration)this.now=t;else n=t-this.startTime,this.state=n/options.duration,this.pos=jQuery.easing[options.animatedProperties[this.prop]](this.state,n,0,1,options.duration),this.now=this.start+(this.end-this.start)*this.pos;this.update()}return!0}},jQuery.extend(jQuery.fx,{tick:function(){for(var timer,timers=jQuery.timers,i=0;i<timers.length;i++)if(timer=timers[i],!timer()&&timers[i]===timer)timers.splice(i--,1);if(!timers.length)jQuery.fx.stop()},interval:13,stop:function(){clearInterval(timerId),timerId=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(fx){jQuery.style(fx.elem,"opacity",fx.now)},_default:function(fx){if(fx.elem.style&&null!=fx.elem.style[fx.prop])fx.elem.style[fx.prop]=fx.now+fx.unit;
else fx.elem[fx.prop]=fx.now}}}),jQuery.each(["width","height"],function(i,prop){jQuery.fx.step[prop]=function(fx){jQuery.style(fx.elem,prop,Math.max(0,fx.now)+fx.unit)}}),jQuery.expr&&jQuery.expr.filters)jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var rtable=/^t(?:able|d|h)$/i,rroot=/^(?:body|html)$/i;if("getBoundingClientRect"in document.documentElement)jQuery.fn.offset=function(options){var elem=this[0],box;if(options)return this.each(function(i){jQuery.offset.setOffset(this,options,i)});if(!elem||!elem.ownerDocument)return null;if(elem===elem.ownerDocument.body)return jQuery.offset.bodyOffset(elem);try{box=elem.getBoundingClientRect()}catch(e){}var doc=elem.ownerDocument,docElem=doc.documentElement;if(!box||!jQuery.contains(docElem,elem))return box?{top:box.top,left:box.left}:{top:0,left:0};var body=doc.body,win=getWindow(doc),clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,scrollTop=win.pageYOffset||jQuery.support.boxModel&&docElem.scrollTop||body.scrollTop,scrollLeft=win.pageXOffset||jQuery.support.boxModel&&docElem.scrollLeft||body.scrollLeft,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{top:top,left:left}};else jQuery.fn.offset=function(options){var elem=this[0];if(options)return this.each(function(i){jQuery.offset.setOffset(this,options,i)});if(!elem||!elem.ownerDocument)return null;if(elem===elem.ownerDocument.body)return jQuery.offset.bodyOffset(elem);for(var computedStyle,offsetParent=elem.offsetParent,prevOffsetParent=elem,doc=elem.ownerDocument,docElem=doc.documentElement,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top=elem.offsetTop,left=elem.offsetLeft;(elem=elem.parentNode)&&elem!==body&&elem!==docElem&&(!jQuery.support.fixedPosition||"fixed"!==prevComputedStyle.position);){if(computedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top-=elem.scrollTop,left-=elem.scrollLeft,elem===offsetParent){if(top+=elem.offsetTop,left+=elem.offsetLeft,jQuery.support.doesNotAddBorder&&(!jQuery.support.doesAddBorderForTableAndCells||!rtable.test(elem.nodeName)))top+=parseFloat(computedStyle.borderTopWidth)||0,left+=parseFloat(computedStyle.borderLeftWidth)||0;prevOffsetParent=offsetParent,offsetParent=elem.offsetParent}if(jQuery.support.subtractsBorderForOverflowNotVisible&&"visible"!==computedStyle.overflow)top+=parseFloat(computedStyle.borderTopWidth)||0,left+=parseFloat(computedStyle.borderLeftWidth)||0;prevComputedStyle=computedStyle}if("relative"===prevComputedStyle.position||"static"===prevComputedStyle.position)top+=body.offsetTop,left+=body.offsetLeft;if(jQuery.support.fixedPosition&&"fixed"===prevComputedStyle.position)top+=Math.max(docElem.scrollTop,body.scrollTop),left+=Math.max(docElem.scrollLeft,body.scrollLeft);return{top:top,left:left}};if(jQuery.offset={bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;if(jQuery.support.doesNotIncludeMarginInBodyOffset)top+=parseFloat(jQuery.css(body,"marginTop"))||0,left+=parseFloat(jQuery.css(body,"marginLeft"))||0;return{top:top,left:left}},setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");if("static"===position)elem.style.position="relative";var curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={},curTop,curLeft;if(calculatePosition)curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left;else curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0;if(jQuery.isFunction(options))options=options.call(elem,i,curOffset);if(null!=options.top)props.top=options.top-curOffset.top+curTop;if(null!=options.left)props.left=options.left-curOffset.left+curLeft;if("using"in options)options.using.call(elem,props);else curElem.css(props)}},jQuery.fn.extend({position:function(){if(!this[0])return null;var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();return offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0,offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0,parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||0,parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0,{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||document.body;offsetParent&&!rroot.test(offsetParent.nodeName)&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent})}}),jQuery.each(["Left","Top"],function(i,name){var method="scroll"+name;jQuery.fn[method]=function(val){var elem,win;if(val===undefined){if(elem=this[0],!elem)return null;return win=getWindow(elem),win?"pageXOffset"in win?win[i?"pageYOffset":"pageXOffset"]:jQuery.support.boxModel&&win.document.documentElement[method]||win.document.body[method]:elem[method]}return this.each(function(){if(win=getWindow(this))win.scrollTo(!i?val:jQuery(win).scrollLeft(),i?val:jQuery(win).scrollTop());else this[method]=val})}}),jQuery.each(["Height","Width"],function(i,name){var type=name.toLowerCase();jQuery.fn["inner"+name]=function(){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,"padding")):this[type]():null},jQuery.fn["outer"+name]=function(margin){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,margin?"margin":"border")):this[type]():null},jQuery.fn[type]=function(size){var elem=this[0];if(!elem)return null==size?null:this;if(jQuery.isFunction(size))return this.each(function(i){var self=jQuery(this);self[type](size.call(this,i,self[type]()))});if(jQuery.isWindow(elem)){var docElemProp=elem.document.documentElement["client"+name],body=elem.document.body;return"CSS1Compat"===elem.document.compatMode&&docElemProp||body&&body["client"+name]||docElemProp}else if(9===elem.nodeType)return Math.max(elem.documentElement["client"+name],elem.body["scroll"+name],elem.documentElement["scroll"+name],elem.body["offset"+name],elem.documentElement["offset"+name]);else if(size===undefined){var orig=jQuery.css(elem,type),ret=parseFloat(orig);return jQuery.isNumeric(ret)?ret:orig}else return this.css(type,"string"==typeof size?size:size+"px")}}),window.jQuery=window.$=jQuery,"function"==typeof define&&define.amd&&define.amd.jQuery)define("jquery",[],function(){return jQuery})}(window),function(){function eq(a,b,stack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;if(a._chain)a=a._wrapped;if(b._chain)b=b._wrapped;if(a.isEqual&&_.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&_.isFunction(b.isEqual))return b.isEqual(a);var className=toString.call(a);if(className!=toString.call(b))return!1;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var length=stack.length;length--;)if(stack[length]==a)return!0;stack.push(a);var size=0,result=!0;if("[object Array]"==className){if(size=a.length,result=size==b.length)for(;size--&&(result=size in a==size in b&&eq(a[size],b[size],stack)););}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var key in a)if(_.has(a,key))if(size++,!(result=_.has(b,key)&&eq(a[key],b[key],stack)))break;if(result){for(key in b)if(_.has(b,key)&&!size--)break;result=!size}}return stack.pop(),result}var root=this,previousUnderscore=root._,breaker={},ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,slice=ArrayProto.slice,unshift=ArrayProto.unshift,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,_=function(obj){return new wrapper(obj)};if("undefined"!=typeof exports){if("undefined"!=typeof module&&module.exports)exports=module.exports=_;exports._=_}else root._=_;_.VERSION="1.3.1";var each=_.each=_.forEach=function(obj,iterator,context){if(null==obj)return;if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,l=obj.length;l>i;i++)if(i in obj&&iterator.call(context,obj[i],i,obj)===breaker)return}else for(var key in obj)if(_.has(obj,key))if(iterator.call(context,obj[key],key,obj)===breaker)return};_.map=_.collect=function(obj,iterator,context){var results=[];if(null==obj)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);if(each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)}),obj.length===+obj.length)results.length=obj.length;return results},_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator)}if(each(obj,function(value,index,list){if(!initial)memo=value,initial=!0;else memo=iterator.call(context,memo,value,index,list)}),!initial)throw new TypeError("Reduce of empty array with no initial value");return memo},_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator)}var reversed=_.toArray(obj).reverse();if(context&&!initial)iterator=_.bind(iterator,context);return initial?_.reduce(reversed,iterator,memo,context):_.reduce(reversed,iterator)},_.find=_.detect=function(obj,iterator,context){var result;return any(obj,function(value,index,list){if(iterator.call(context,value,index,list))return result=value,!0}),result},_.filter=_.select=function(obj,iterator,context){var results=[];if(null==obj)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);return each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results[results.length]=value}),results},_.reject=function(obj,iterator,context){var results=[];if(null==obj)return results;return each(obj,function(value,index,list){if(!iterator.call(context,value,index,list))results[results.length]=value}),results},_.every=_.all=function(obj,iterator,context){var result=!0;if(null==obj)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);return each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker}),result};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=!1;if(null==obj)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);return each(obj,function(value,index,list){if(result||(result=iterator.call(context,value,index,list)))return breaker}),!!result};_.include=_.contains=function(obj,target){var found=!1;if(null==obj)return found;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return-1!=obj.indexOf(target);return found=any(obj,function(value){return value===target})},_.invoke=function(obj,method){var args=slice.call(arguments,2);return _.map(obj,function(value){return(_.isFunction(method)?method||value:value[method]).apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})},_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj))return Math.max.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return-1/0;var result={computed:-1/0};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed})}),result.value},_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj))return Math.min.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return 1/0;var result={computed:1/0};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})}),result.value},_.shuffle=function(obj){var shuffled=[],rand;return each(obj,function(value,index,list){if(0==index)shuffled[0]=value;else rand=Math.floor(Math.random()*(index+1)),shuffled[index]=shuffled[rand],shuffled[rand]=value}),shuffled},_.sortBy=function(obj,iterator,context){return _.pluck(_.map(obj,function(value,index,list){return{value:value,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;return b>a?-1:a>b?1:0}),"value")},_.groupBy=function(obj,val){var result={},iterator=_.isFunction(val)?val:function(obj){return obj[val]};return each(obj,function(value,index){var key=iterator(value,index);(result[key]||(result[key]=[])).push(value)}),result},_.sortedIndex=function(array,obj,iterator){iterator||(iterator=_.identity);for(var low=0,high=array.length;high>low;){var mid=low+high>>1;iterator(array[mid])<iterator(obj)?low=mid+1:high=mid}return low},_.toArray=function(iterable){if(!iterable)return[];if(iterable.toArray)return iterable.toArray();if(_.isArray(iterable))return slice.call(iterable);if(_.isArguments(iterable))return slice.call(iterable);return _.values(iterable)},_.size=function(obj){return _.toArray(obj).length},_.first=_.head=function(array,n,guard){return null!=n&&!guard?slice.call(array,0,n):array[0]},_.initial=function(array,n,guard){return slice.call(array,0,array.length-(null==n||guard?1:n))},_.last=function(array,n,guard){if(null!=n&&!guard)return slice.call(array,Math.max(array.length-n,0));else return array[array.length-1]},_.rest=_.tail=function(array,index,guard){return slice.call(array,null==index||guard?1:index)},_.compact=function(array){return _.filter(array,function(value){return!!value})},_.flatten=function(array,shallow){return _.reduce(array,function(memo,value){if(_.isArray(value))return memo.concat(shallow?value:_.flatten(value));return memo[memo.length]=value,memo},[])},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.uniq=_.unique=function(array,isSorted,iterator){var initial=iterator?_.map(array,iterator):array,result=[];return _.reduce(initial,function(memo,el,i){if(0==i||(isSorted===!0?_.last(memo)!=el:!_.include(memo,el)))memo[memo.length]=el,result[result.length]=array[i];return memo},[]),result},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=_.intersect=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})},_.difference=function(array){var rest=_.flatten(slice.call(arguments,1));return _.filter(array,function(value){return!_.include(rest,value)})},_.zip=function(){for(var args=slice.call(arguments),length=_.max(_.pluck(args,"length")),results=new Array(length),i=0;length>i;i++)results[i]=_.pluck(args,""+i);return results},_.indexOf=function(array,item,isSorted){if(null==array)return-1;var i,l;if(isSorted)return i=_.sortedIndex(array,item),array[i]===item?i:-1;if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item);for(i=0,l=array.length;l>i;i++)if(i in array&&array[i]===item)return i;return-1},_.lastIndexOf=function(array,item){if(null==array)return-1;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return array.lastIndexOf(item);for(var i=array.length;i--;)if(i in array&&array[i]===item)return i;return-1},_.range=function(start,stop,step){if(arguments.length<=1)stop=start||0,start=0;step=arguments[2]||1;for(var len=Math.max(Math.ceil((stop-start)/step),0),idx=0,range=new Array(len);len>idx;)range[idx++]=start,start+=step;return range};var ctor=function(){};if(_.bind=function bind(func,context){var bound,args;if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;return args=slice.call(arguments,2),bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor,result=func.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result)return result;return self}},_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(0==funcs.length)funcs=_.functions(obj);return each(funcs,function(f){obj[f]=_.bind(obj[f],obj)}),obj},_.memoize=function(func,hasher){var memo={};return hasher||(hasher=_.identity),function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(func,args)},wait)},_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))},_.throttle=function(func,wait){var context,args,timeout,throttling,more,whenDone=_.debounce(function(){more=throttling=!1},wait);return function(){context=this,args=arguments;var later=function(){if(timeout=null,more)func.apply(context,args);whenDone()};if(!timeout)timeout=setTimeout(later,wait);if(throttling)more=!0;else func.apply(context,args);whenDone(),throttling=!0}},_.debounce=function(func,wait){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,func.apply(context,args)};clearTimeout(timeout),timeout=setTimeout(later,wait)}},_.once=function(func){var ran=!1,memo;return function(){if(ran)return memo;return ran=!0,memo=func.apply(this,arguments)}},_.wrap=function(func,wrapper){return function(){var args=[func].concat(slice.call(arguments,0));return wrapper.apply(this,args)}},_.compose=function(){var funcs=arguments;return function(){for(var args=arguments,i=funcs.length-1;i>=0;i--)args=[funcs[i].apply(this,args)];return args[0]}},_.after=function(times,func){if(0>=times)return func();return function(){if(--times<1)return func.apply(this,arguments)}},_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)if(_.has(obj,key))keys[keys.length]=key;return keys},_.values=function(obj){return _.map(obj,_.identity)},_.functions=_.methods=function(obj){var names=[];for(var key in obj)if(_.isFunction(obj[key]))names.push(key);return names.sort()},_.extend=function(obj){return each(slice.call(arguments,1),function(source){for(var prop in source)obj[prop]=source[prop]}),obj},_.defaults=function(obj){return each(slice.call(arguments,1),function(source){for(var prop in source)if(null==obj[prop])obj[prop]=source[prop]}),obj},_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)},_.tap=function(obj,interceptor){return interceptor(obj),obj},_.isEqual=function(a,b){return eq(a,b,[])},_.isEmpty=function(obj){if(_.isArray(obj)||_.isString(obj))return 0===obj.length;for(var key in obj)if(_.has(obj,key))return!1;return!0},_.isElement=function(obj){return!(!obj||1!=obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"==toString.call(obj)},_.isObject=function(obj){return obj===Object(obj)},_.isArguments=function(obj){return"[object Arguments]"==toString.call(obj)},!_.isArguments(arguments))_.isArguments=function(obj){return!(!obj||!_.has(obj,"callee"))};_.isFunction=function(obj){return"[object Function]"==toString.call(obj)},_.isString=function(obj){return"[object String]"==toString.call(obj)},_.isNumber=function(obj){return"[object Number]"==toString.call(obj)},_.isNaN=function(obj){return obj!==obj},_.isBoolean=function(obj){return obj===!0||obj===!1||"[object Boolean]"==toString.call(obj)},_.isDate=function(obj){return"[object Date]"==toString.call(obj)},_.isRegExp=function(obj){return"[object RegExp]"==toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.times=function(n,iterator,context){for(var i=0;n>i;i++)iterator.call(context,i)},_.escape=function(string){return(""+string).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},_.mixin=function(obj){each(_.functions(obj),function(name){addToWrapper(name,_[name]=obj[name])})};var idCounter=0;_.uniqueId=function(prefix){var id=idCounter++;return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/.^/,unescape=function(code){return code.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};_.template=function(str,data){var c=_.templateSettings,tmpl="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+str.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape||noMatch,function(match,code){return"',_.escape("+unescape(code)+"),'"}).replace(c.interpolate||noMatch,function(match,code){return"',"+unescape(code)+",'"}).replace(c.evaluate||noMatch,function(match,code){return"');"+unescape(code).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",func=new Function("obj","_",tmpl);if(data)return func(data,_);return function(data){return func.call(this,data,_)}},_.chain=function(obj){return _(obj).chain()};var wrapper=function(obj){this._wrapped=obj};_.prototype=wrapper.prototype;var result=function(obj,chain){return chain?_(obj).chain():obj},addToWrapper=function(name,func){wrapper.prototype[name]=function(){var args=slice.call(arguments);return unshift.call(args,this._wrapped),result(func.apply(_,args),this._chain)}};_.mixin(_),each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){var wrapped=this._wrapped;method.apply(wrapped,arguments);var length=wrapped.length;if(("shift"==name||"splice"==name)&&0===length)delete wrapped[0];return result(wrapped,this._chain)}}),each(["concat","join","slice"],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){return result(method.apply(this._wrapped,arguments),this._chain)}}),wrapper.prototype.chain=function(){return this._chain=!0,this},wrapper.prototype.value=function(){return this._wrapped}}.call(this),define("underscore",function(global){return function(){var ret,fn;return ret||global._}}(this)),function(){var root=this,previousBackbone=root.Backbone,slice=Array.prototype.slice,splice=Array.prototype.splice,Backbone;if("undefined"!=typeof exports)Backbone=exports;else Backbone=root.Backbone={};Backbone.VERSION="0.9.2";var _=root._;if(!_&&"undefined"!=typeof require)_=require("underscore");var $=root.jQuery||root.Zepto||root.ender;Backbone.setDomLibrary=function(lib){$=lib},Backbone.noConflict=function(){return root.Backbone=previousBackbone,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var eventSplitter=/\s+/,Events=Backbone.Events={on:function(events,callback,context){var calls,event,node,tail,list;if(!callback)return this;for(events=events.split(eventSplitter),calls=this._callbacks||(this._callbacks={});event=events.shift();)list=calls[event],node=list?list.tail:{},node.next=tail={},node.context=context,node.callback=callback,calls[event]={tail:tail,next:list?list.next:node};return this},off:function(events,callback,context){var event,calls,node,tail,cb,ctx;if(!(calls=this._callbacks))return;if(!(events||callback||context))return delete this._callbacks,this;for(events=events?events.split(eventSplitter):_.keys(calls);event=events.shift();){if(node=calls[event],delete calls[event],!node||!callback&&!context)continue;for(tail=node.tail;(node=node.next)!==tail;)if(cb=node.callback,ctx=node.context,callback&&cb!==callback||context&&ctx!==context)this.on(event,cb,ctx)}return this},trigger:function(events){var event,node,calls,tail,args,all,rest;if(!(calls=this._callbacks))return this;for(all=calls.all,events=events.split(eventSplitter),rest=slice.call(arguments,1);event=events.shift();){if(node=calls[event])for(tail=node.tail;(node=node.next)!==tail;)node.callback.apply(node.context||this,rest);if(node=all)for(tail=node.tail,args=[event].concat(rest);(node=node.next)!==tail;)node.callback.apply(node.context||this,args)}return this}};Events.bind=Events.on,Events.unbind=Events.off;var Model=Backbone.Model=function(attributes,options){var defaults;if(attributes||(attributes={}),options&&options.parse)attributes=this.parse(attributes);if(defaults=getValue(this,"defaults"))attributes=_.extend({},defaults,attributes);if(options&&options.collection)this.collection=options.collection;this.attributes={},this._escapedAttributes={},this.cid=_.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(attributes,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=_.clone(this.attributes),this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(options){return _.clone(this.attributes)},get:function(attr){return this.attributes[attr]},escape:function(attr){var html;if(html=this._escapedAttributes[attr])return html;var val=this.get(attr);return this._escapedAttributes[attr]=_.escape(null==val?"":""+val)},has:function(attr){return null!=this.get(attr)},set:function(key,value,options){var attrs,attr,val;if(_.isObject(key)||null==key)attrs=key,options=value;else attrs={},attrs[key]=value;if(options||(options={}),!attrs)return this;if(attrs instanceof Model)attrs=attrs.attributes;if(options.unset)for(attr in attrs)attrs[attr]=void 0;if(!this._validate(attrs,options))return!1;if(this.idAttribute in attrs)this.id=attrs[this.idAttribute];var changes=options.changes={},now=this.attributes,escaped=this._escapedAttributes,prev=this._previousAttributes||{};for(attr in attrs){if(val=attrs[attr],!_.isEqual(now[attr],val)||options.unset&&_.has(now,attr))delete escaped[attr],(options.silent?this._silent:changes)[attr]=!0;if(options.unset?delete now[attr]:now[attr]=val,!_.isEqual(prev[attr],val)||_.has(now,attr)!=_.has(prev,attr)){if(this.changed[attr]=val,!options.silent)this._pending[attr]=!0}else delete this.changed[attr],delete this._pending[attr]}if(!options.silent)this.change(options);return this},unset:function(attr,options){return(options||(options={})).unset=!0,this.set(attr,null,options)},clear:function(options){return(options||(options={})).unset=!0,this.set(_.clone(this.attributes),options)},fetch:function(options){options=options?_.clone(options):{};var model=this,success=options.success;return options.success=function(resp,status,xhr){if(!model.set(model.parse(resp,xhr),options))return!1;if(success)success(model,resp)},options.error=Backbone.wrapError(options.error,model,options),(this.sync||Backbone.sync).call(this,"read",this,options)},save:function(key,value,options){var attrs,current;if(_.isObject(key)||null==key)attrs=key,options=value;else attrs={},attrs[key]=value;if(options=options?_.clone(options):{},options.wait){if(!this._validate(attrs,options))return!1;current=_.clone(this.attributes)}var silentOptions=_.extend({},options,{silent:!0});if(attrs&&!this.set(attrs,options.wait?silentOptions:options))return!1;var model=this,success=options.success;options.success=function(resp,status,xhr){var serverAttrs=model.parse(resp,xhr);if(options.wait)delete options.wait,serverAttrs=_.extend(attrs||{},serverAttrs);if(!model.set(serverAttrs,options))return!1;if(success)success(model,resp);else model.trigger("sync",model,resp,options)},options.error=Backbone.wrapError(options.error,model,options);var method=this.isNew()?"create":"update",xhr=(this.sync||Backbone.sync).call(this,method,this,options);if(options.wait)this.set(current,silentOptions);return xhr},destroy:function(options){options=options?_.clone(options):{};var model=this,success=options.success,triggerDestroy=function(){model.trigger("destroy",model,model.collection,options)};if(this.isNew())return triggerDestroy(),!1;options.success=function(resp){if(options.wait)triggerDestroy();if(success)success(model,resp);else model.trigger("sync",model,resp,options)},options.error=Backbone.wrapError(options.error,model,options);var xhr=(this.sync||Backbone.sync).call(this,"delete",this,options);if(!options.wait)triggerDestroy();return xhr},url:function(){var base=getValue(this,"urlRoot")||getValue(this.collection,"url")||urlError();if(this.isNew())return base;return base+("/"==base.charAt(base.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(resp,xhr){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(options){options||(options={});var changing=this._changing;this._changing=!0;for(var attr in this._silent)this._pending[attr]=!0;var changes=_.extend({},options.changes,this._silent);this._silent={};for(var attr in changes)this.trigger("change:"+attr,this,this.get(attr),options);if(changing)return this;for(;!_.isEmpty(this._pending);){this._pending={},this.trigger("change",this,options);for(var attr in this.changed){if(this._pending[attr]||this._silent[attr])continue;delete this.changed[attr]}this._previousAttributes=_.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(attr){if(!arguments.length)return!_.isEmpty(this.changed);return _.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):!1;var val,changed=!1,old=this._previousAttributes;for(var attr in diff){if(_.isEqual(old[attr],val=diff[attr]))continue;(changed||(changed={}))[attr]=val}return changed},previous:function(attr){if(!arguments.length||!this._previousAttributes)return null;return this._previousAttributes[attr]},previousAttributes:function(){return _.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(attrs,options){if(options.silent||!this.validate)return!0;attrs=_.extend({},this.attributes,attrs);var error=this.validate(attrs,options);if(!error)return!0;if(options&&options.error)options.error(this,error,options);else this.trigger("error",this,error,options);return!1}});var Collection=Backbone.Collection=function(models,options){if(options||(options={}),options.model)this.model=options.model;if(options.comparator)this.comparator=options.comparator;if(this._reset(),this.initialize.apply(this,arguments),models)this.reset(models,{silent:!0,parse:options.parse})};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},add:function(models,options){var i,index,length,model,cid,id,cids={},ids={},dups=[];for(options||(options={}),models=_.isArray(models)?models.slice():[models],i=0,length=models.length;length>i;i++){if(!(model=models[i]=this._prepareModel(models[i],options)))throw new Error("Can't add an invalid model to a collection");if(cid=model.cid,id=model.id,cids[cid]||this._byCid[cid]||null!=id&&(ids[id]||this._byId[id])){dups.push(i);continue}cids[cid]=ids[id]=model}for(i=dups.length;i--;)models.splice(dups[i],1);
for(i=0,length=models.length;length>i;i++)if((model=models[i]).on("all",this._onModelEvent,this),this._byCid[model.cid]=model,null!=model.id)this._byId[model.id]=model;if(this.length+=length,index=null!=options.at?options.at:this.models.length,splice.apply(this.models,[index,0].concat(models)),this.comparator)this.sort({silent:!0});if(options.silent)return this;for(i=0,length=this.models.length;length>i;i++){if(!cids[(model=this.models[i]).cid])continue;options.index=i,model.trigger("add",model,this,options)}return this},remove:function(models,options){var i,l,index,model;for(options||(options={}),models=_.isArray(models)?models.slice():[models],i=0,l=models.length;l>i;i++){if(model=this.getByCid(models[i])||this.get(models[i]),!model)continue;if(delete this._byId[model.id],delete this._byCid[model.cid],index=this.indexOf(model),this.models.splice(index,1),this.length--,!options.silent)options.index=index,model.trigger("remove",model,this,options);this._removeReference(model)}return this},push:function(model,options){return model=this._prepareModel(model,options),this.add(model,options),model},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options),model},unshift:function(model,options){return model=this._prepareModel(model,options),this.add(model,_.extend({at:0},options)),model},shift:function(options){var model=this.at(0);return this.remove(model,options),model},get:function(id){if(null==id)return void 0;return this._byId[null!=id.id?id.id:id]},getByCid:function(cid){return cid&&this._byCid[cid.cid||cid]},at:function(index){return this.models[index]},where:function(attrs){if(_.isEmpty(attrs))return[];return this.filter(function(model){for(var key in attrs)if(attrs[key]!==model.get(key))return!1;return!0})},sort:function(options){if(options||(options={}),!this.comparator)throw new Error("Cannot sort a set without a comparator");var boundComparator=_.bind(this.comparator,this);if(1==this.comparator.length)this.models=this.sortBy(boundComparator);else this.models.sort(boundComparator);if(!options.silent)this.trigger("reset",this,options);return this},pluck:function(attr){return _.map(this.models,function(model){return model.get(attr)})},reset:function(models,options){models||(models=[]),options||(options={});for(var i=0,l=this.models.length;l>i;i++)this._removeReference(this.models[i]);if(this._reset(),this.add(models,_.extend({silent:!0},options)),!options.silent)this.trigger("reset",this,options);return this},fetch:function(options){if(options=options?_.clone(options):{},void 0===options.parse)options.parse=!0;var collection=this,success=options.success;return options.success=function(resp,status,xhr){if(collection[options.add?"add":"reset"](collection.parse(resp,xhr),options),success)success(collection,resp)},options.error=Backbone.wrapError(options.error,collection,options),(this.sync||Backbone.sync).call(this,"read",this,options)},create:function(model,options){var coll=this;if(options=options?_.clone(options):{},model=this._prepareModel(model,options),!model)return!1;if(!options.wait)coll.add(model,options);var success=options.success;return options.success=function(nextModel,resp,xhr){if(options.wait)coll.add(nextModel,options);if(success)success(nextModel,resp);else nextModel.trigger("sync",model,resp,options)},model.save(null,options),model},parse:function(resp,xhr){return resp},chain:function(){return _(this.models).chain()},_reset:function(options){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(model,options){if(options||(options={}),!(model instanceof Model)){var attrs=model;if(options.collection=this,model=new this.model(attrs,options),!model._validate(model.attributes,options))model=!1}else if(!model.collection)model.collection=this;return model},_removeReference:function(model){if(this==model.collection)delete model.collection;model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){if(("add"==event||"remove"==event)&&collection!=this)return;if("destroy"==event)this.remove(model,options);if(model&&event==="change:"+model.idAttribute)delete this._byId[model.previous(model.idAttribute)],this._byId[model.id]=model;this.trigger.apply(this,arguments)}});var methods=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];_.each(methods,function(method){Collection.prototype[method]=function(){return _[method].apply(_,[this.models].concat(_.toArray(arguments)))}});var Router=Backbone.Router=function(options){if(options||(options={}),options.routes)this.routes=options.routes;this._bindRoutes(),this.initialize.apply(this,arguments)},namedParam=/:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[-[\]{}()+?.,\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){if(Backbone.history||(Backbone.history=new History),!_.isRegExp(route))route=this._routeToRegExp(route);if(!callback)callback=this[name];return Backbone.history.route(route,_.bind(function(fragment){var args=this._extractParameters(route,fragment);callback&&callback.apply(this,args),this.trigger.apply(this,["route:"+name].concat(args)),Backbone.history.trigger("route",this,name,args)},this)),this},navigate:function(fragment,options){Backbone.history.navigate(fragment,options)},_bindRoutes:function(){if(!this.routes)return;var routes=[];for(var route in this.routes)routes.unshift([route,this.routes[route]]);for(var i=0,l=routes.length;l>i;i++)this.route(routes[i][0],routes[i][1],this[routes[i][1]])},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(namedParam,"([^/]+)").replace(splatParam,"(.*?)"),new RegExp("^"+route+"$")},_extractParameters:function(route,fragment){return route.exec(fragment).slice(1)}});var History=Backbone.History=function(){this.handlers=[],_.bindAll(this,"checkUrl")},routeStripper=/^[#\/]/,isExplorer=/msie [\w.]+/;History.started=!1,_.extend(History.prototype,Events,{interval:50,getHash:function(windowOverride){var loc=windowOverride?windowOverride.location:window.location,match=loc.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(null==fragment)if(this._hasPushState||forcePushState){fragment=window.location.pathname;var search=window.location.search;if(search)fragment+=search}else fragment=this.getHash();if(!fragment.indexOf(this.options.root))fragment=fragment.substr(this.options.root.length);return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=!0,this.options=_.extend({},{root:"/"},this.options,options),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var fragment=this.getFragment(),docMode=document.documentMode,oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||7>=docMode);if(oldIE)this.iframe=$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(fragment);if(this._hasPushState)$(window).bind("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!oldIE)$(window).bind("hashchange",this.checkUrl);else if(this._wantsHashChange)this._checkUrlInterval=setInterval(this.checkUrl,this.interval);this.fragment=fragment;var loc=window.location,atRoot=loc.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!atRoot)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;else if(this._wantsPushState&&this._hasPushState&&atRoot&&loc.hash)this.fragment=this.getHash().replace(routeStripper,""),window.history.replaceState({},document.title,loc.protocol+"//"+loc.host+this.options.root+this.fragment);if(!this.options.silent)return this.loadUrl()},stop:function(){$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),History.started=!1},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();if(current==this.fragment&&this.iframe)current=this.getFragment(this.getHash(this.iframe));if(current==this.fragment)return!1;if(this.iframe)this.navigate(current);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(fragmentOverride){var fragment=this.fragment=this.getFragment(fragmentOverride),matched=_.any(this.handlers,function(handler){if(handler.route.test(fragment))return handler.callback(fragment),!0});return matched},navigate:function(fragment,options){if(!History.started)return!1;if(!options||options===!0)options={trigger:options};var frag=(fragment||"").replace(routeStripper,"");if(this.fragment==frag)return;if(this._hasPushState){if(0!=frag.indexOf(this.options.root))frag=this.options.root+frag;this.fragment=frag,window.history[options.replace?"replaceState":"pushState"]({},document.title,frag)}else if(this._wantsHashChange){if(this.fragment=frag,this._updateHash(window.location,frag,options.replace),this.iframe&&frag!=this.getFragment(this.getHash(this.iframe))){if(!options.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,frag,options.replace)}}else window.location.assign(this.options.root+fragment);if(options.trigger)this.loadUrl(fragment)},_updateHash:function(location,fragment,replace){if(replace)location.replace(location.toString().replace(/(javascript:|#).*$/,"")+"#"+fragment);else location.hash=fragment}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view"),this._configure(options||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},delegateEventSplitter=/^(\S+)\s*(.*)$/,viewOptions=["model","collection","el","id","attributes","className","tagName"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(tagName,attributes,content){var el=document.createElement(tagName);if(attributes)$(el).attr(attributes);if(content)$(el).html(content);return el},setElement:function(element,delegate){if(this.$el)this.undelegateEvents();if(this.$el=element instanceof $?element:$(element),this.el=this.$el[0],delegate!==!1)this.delegateEvents();return this},delegateEvents:function(events){if(!events&&!(events=getValue(this,"events")))return;this.undelegateEvents();for(var key in events){var method=events[key];if(!_.isFunction(method))method=this[events[key]];if(!method)throw new Error('Method "'+events[key]+'" does not exist');var match=key.match(delegateEventSplitter),eventName=match[1],selector=match[2];if(method=_.bind(method,this),eventName+=".delegateEvents"+this.cid,""===selector)this.$el.bind(eventName,method);else this.$el.delegate(selector,eventName,method)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(options){if(this.options)options=_.extend({},this.options,options);for(var i=0,l=viewOptions.length;l>i;i++){var attr=viewOptions[i];if(options[attr])this[attr]=options[attr]}this.options=options},_ensureElement:function(){if(!this.el){var attrs=getValue(this,"attributes")||{};if(this.id)attrs.id=this.id;if(this.className)attrs["class"]=this.className;this.setElement(this.make(this.tagName,attrs),!1)}else this.setElement(this.el,!1)}});var extend=function(protoProps,classProps){var child=inherits(this,protoProps,classProps);return child.extend=this.extend,child};Model.extend=Collection.extend=Router.extend=View.extend=extend;var methodMap={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};Backbone.sync=function(method,model,options){var type=methodMap[method];options||(options={});var params={type:type,dataType:"json"};if(!options.url)params.url=getValue(model,"url")||urlError();if(!options.data&&model&&("create"==method||"update"==method))params.contentType="application/json",params.data=JSON.stringify(model.toJSON());if(Backbone.emulateJSON)params.contentType="application/x-www-form-urlencoded",params.data=params.data?{model:params.data}:{};if(Backbone.emulateHTTP)if("PUT"===type||"DELETE"===type){if(Backbone.emulateJSON)params.data._method=type;params.type="POST",params.beforeSend=function(xhr){xhr.setRequestHeader("X-HTTP-Method-Override",type)}}if("GET"!==params.type&&!Backbone.emulateJSON)params.processData=!1;return $.ajax(_.extend(params,options))},Backbone.wrapError=function(onError,originalModel,options){return function(model,resp){if(resp=model===originalModel?resp:model,onError)onError(originalModel,resp,options);else originalModel.trigger("error",originalModel,resp,options)}};var ctor=function(){},inherits=function(parent,protoProps,staticProps){var child;if(protoProps&&protoProps.hasOwnProperty("constructor"))child=protoProps.constructor;else child=function(){parent.apply(this,arguments)};if(_.extend(child,parent),ctor.prototype=parent.prototype,child.prototype=new ctor,protoProps)_.extend(child.prototype,protoProps);if(staticProps)_.extend(child,staticProps);return child.prototype.constructor=child,child.__super__=parent.prototype,child},getValue=function(object,prop){if(!object||!object[prop])return null;return _.isFunction(object[prop])?object[prop]():object[prop]},urlError=function(){throw new Error('A "url" property or function must be specified')}}.call(this),define("backbone",["underscore","jquery"],function(global){return function(){var ret,fn;return fn=function(_,$){return _.noConflict(),$.noConflict(),Backbone.noConflict()},ret=fn.apply(global,arguments),ret||global.Backbone}}(this)),!function(factory){if("function"==typeof define&&define.amd)define("js/lib/lucid",factory);else if(("object"==typeof module||"function"==typeof module)&&module.exports)module.exports=factory();else window.LucidJS=factory()}(function(){function EventEmitter(object){function on(event){function clear(){if(!listeners[event])return;for(aI=0;aI<args.length;aI+=1)listeners[event].splice(listeners[event].indexOf(args[aI]),1);if(listeners[event].length<1)delete listeners[event]}function batchOn(events,args){function clear(){var bI;for(bI=0;bI<bindings.length;bI+=1)bindings[bI].clear()}var eI,binding={},bindings=[];for(eI=0;eI<events.length;eI+=1)args.unshift(events[eI]),bindings.push(on.apply(this,args)),args.shift();return binding.clear=clear,binding}var args=Array.prototype.slice.apply(arguments,[1]),binding={},aI,sI;if("object"==typeof event&&"function"==typeof event.push)return batchOn(event,args);if("emitter"!==event.slice(0,7))trigger("emitter.listener",event,args);if(setEvents[event]){for(aI=0;aI<args.length;aI+=1){if("function"!=typeof args[aI])throw new Error("Cannot bind event. All callbacks must be functions.");for(sI=0;sI<setEvents[event].length;sI+=1)args[aI].apply(this,setEvents[event][sI])}return binding.clear=function(){},binding}if(!listeners[event])listeners[event]=[];for(aI=0;aI<args.length;aI+=1){if("function"!=typeof args[aI])throw new Error("Cannot bind event. All callbacks must be functions.");listeners[event].push(args[aI])}return binding.clear=clear,binding}function off(event){var args=Array.prototype.slice.apply(arguments,[1]),aI,sI;if("object"==typeof event&&"function"==typeof event.push){for(sI=0;sI<event.length;sI+=1)off.apply(null,[event[sI]].concat(args));return}if(!listeners[event])throw new Error('Tried to remove an event from a non-existant event of type "'+event+'".');for(aI=0;aI<args.length;aI+=1){if("function"!=typeof args[aI])throw new Error("Tried to remove a non-function.");var listenerIndex=listeners[event].indexOf(args[aI]);listeners[event].splice(listenerIndex,1)}}function once(event){var binding,args=Array.prototype.slice.apply(arguments,[1]),result=!0;return binding=on(event,function(){var aI,eventArgs=Array.prototype.slice.apply(arguments);for(binding.clear(),aI=0;aI<args.length;aI+=1)if(args[aI].apply(this,eventArgs)===!1)result=!1;return result})}function trigger(event,a1,a2,a3,a4,la){function batchTrigger(events,a1,a2,a3,a4,la){var eI,result=!0;if("undefined"!=typeof la)longArgs=Array.prototype.slice.apply(arguments,[1]);for(eI=0;eI<events.length;eI+=1)if(longArgs){if(args.unshift(events[eI]),trigger.apply(this,args)===!1)result=!1;args.shift()}else if(trigger(events[eI],a1,a2,a3,a4)===!1)result=!1;return result}var longArgs,lI,eventListeners,result=!0;if("undefined"!=typeof la)longArgs=Array.prototype.slice.apply(arguments,[1]);if("object"==typeof event&&"function"==typeof event.push)if(longArgs)return batchTrigger.apply(null,arguments);else return batchTrigger(event,a1,a2,a3,a4);for(event=event.split(".");event.length;){if(eventListeners=listeners[event.join(".")],"emitter"!==event[0])if(longArgs)trigger.apply(this,[].concat("emitter.event",event.join("."),longArgs));else trigger("emitter.event",a1,a2,a3,a4);if(eventListeners)for(eventListeners=[].concat(eventListeners),lI=0;lI<eventListeners.length;lI+=1)if(longArgs){if(eventListeners[lI].apply(this,longArgs)===!1)result=!1}else if(eventListeners[lI](a1,a2,a3,a4)===!1)result=!1;event.pop()}return result}function set(event){function batchSet(events,args){var eI,result=!0;for(eI=0;eI<events.length;eI+=1){if(args.unshift(events[eI]),trigger.apply(this,args)===!1)result=!1;args.shift()}return result}function clear(){if(setEvents[event])if(setEvents[event].splice(setEvents[event].indexOf(args),1),setEvents[event].length<1)delete setEvents[event]}var args=Array.prototype.slice.apply(arguments),setEvent={};if("object"==typeof event&&"function"==typeof event.push)return batchSet(event,args);if(trigger.apply(this,args),clearListeners(event),!setEvents[event])setEvents[event]=[];return setEvents[event].push(args.slice(1)),setEvent.clear=clear,setEvent}function clearSet(event){if(event)delete setEvents[event];else setEvents={}}function pipe(event){function captureListener(connection,emitter){connection.listenerBinding=on("emitter.listener",function(event){if(-1===connection.events.indexOf(event))connection.bindings.push(captureEvent(emitter,event)),connection.events.push(event)})}function captureEvent(emitter,event){return emitter.on(event,function(){var args=Array.prototype.slice.apply(arguments);return args.unshift(event),trigger.apply(this,args)})}function clearBatch(){if(bindings.length)for(;bindings.length;)bindings[0].clear(),bindings.splice(0,1)}function clear(){for(;connections.length;){if(connections[0].listenerBinding)connections[0].listenerBinding.clear();for(;connections[0].bindings.length;)connections[0].bindings[0].clear(),connections[0].bindings.splice(0,1);pipes.splice(pipes.indexOf(connections[0]),1),connections.splice(0,1)}}var api={},args=Array.prototype.slice.apply(arguments),eI,aI,pI,connections=[],connection,bindings=[],binding;if("object"==typeof event&&"function"==typeof event.push&&"string"==typeof event[0]){for(eI=0;eI<event.length;eI+=1)bindings.push(pipe.apply(null,[event[eI]].concat(args)));return api.clear=clearBatch,api}if("object"==typeof event&&"function"==typeof event.on)event=!1;else args.shift();if(event!==!1&&"string"!=typeof event)throw new Error("Cannot create pipe. The first argument must be an event string or an emitter.");for(aI=0;aI<args.length;aI+=1){for(pI=0;pI<pipes.length;pI+=1)if(pipes[pI].emitter===args[aI]){connection=pipes[pI];break}if(connection&&2===connection.type)continue;if(!connection)if(connection={},connection.emitter=args[aI],connection.bindings=[],connection.events=[],event)connection.type=1;else connection.type=2;if(-1!==connection.events.indexOf(event))continue;if(connection.events.push(event),1===connection.type)binding=captureEvent(args[aI],event),binding.event=event,connection.bindings.push(binding);else if(2===connection.type){for(event in listeners){if(!listeners.hasOwnProperty(event))continue;binding=args[aI].on(event,captureEvent),binding.event=event,connection.bindings.push(binding),connection.events.push(event)}captureListener(connection,args[aI])}connections.push(connection),pipes.push(connection)}return api.clear=clear,api}function clearPipes(event){var pI,bI,binding;for(pI=0;pI<pipes.length;pI+=1){if(event){if(2===pipes[pI].type)continue;if(-1===pipes[pI].events.indexOf(event))continue;pipes[pI].events.splice(pipes[pI].events.indexOf(event),1)}if(2===pipes[pI].type)pipes[pI].listenerBinding.clear();for(bI=0;bI<pipes[pI].bindings.length;bI+=1){if(event&&pipes[pI].bindings[bI].event!==event)continue;pipes[pI].bindings[bI].clear(),pipes[pI].bindings.splice(bI,1),bI-=1}if(pipes[pI].bindings.length<1)pipes.splice(pI,1),pI-=1}}function getListeners(event){if(event)return listeners[event];else return listeners}function clearListeners(event){if(event)delete listeners[event];else listeners={}}function clear(){trigger("emitter.clear"),listeners={},setEvents={},pipes={},delete emitter.on,delete emitter.once,delete emitter.trigger,delete emitter.set,delete emitter.pipe,delete emitter.listeners,delete emitter.clear}function handleNode(node){function clearNodeEmitter(){var DI;for(DI=0;DI<DOMEventListeners.length;DI+=1)try{if(node.removeEventListener)node.removeEventListener(DOMEventListeners[DI].event,DOMEventListeners[DI].listener,!1);else if(node.detachEvent)node.detachEvent("on"+DOMEventListeners[DI].event,DOMEventListeners[DI].listener)}catch(e){console.error(e)}handledEvents=[],listenerBinding.clear()}var handledEvents=[],listenerBinding,DOMEventListeners=[];listenerBinding=on("emitter.listener",function(event){function nodeListener(eventObj){var args=Array.prototype.slice.apply(arguments);if(args.unshift([event,"dom."+event]),trigger.apply(this,args)===!1)eventObj.preventDefault(),eventObj.stopPropagation()}if(handledEvents.indexOf(event)>-1)return;handledEvents.push(event);try{if(node.addEventListener)node.addEventListener(event,nodeListener,!1),DOMEventListeners.push({event:event,listener:nodeListener});else if(node.attachEvent)node.attachEvent("on"+event,nodeListener),DOMEventListeners.push({event:event,listener:nodeListener})}catch(e){console.error(e)}}),emitter.clearNodeEmitter=clearNodeEmitter}var emitter=object||{},listeners={},setEvents={},pipes=[];if(!(emitter.on||emitter.once||emitter.trigger||emitter.set||emitter.pipe||emitter.listeners))emitter.on=on,emitter.off=off,emitter.once=once,emitter.trigger=trigger,emitter.set=set,emitter.set.clear=clearSet,emitter.pipe=pipe,emitter.pipe.clear=clearPipes,emitter.listeners=getListeners,emitter.listeners.clear=clearListeners;else return emitter;if(emitter.addEventListener||emitter.attachEvent)handleNode(emitter);return emitter}var api;return api={emitter:EventEmitter},[].indexOf||(Array.prototype.indexOf=function(a,b,c){for(c=this.length,b=(c+~~b)%c;c>b&&(!(b in this)||this[b]!==a);b++);return b^c?b:-1}),api}),!function(){var DataAttributes=function($){var parse=function(el,defaults,_prefix){var settings={},prefix=_prefix||"";for(var key in defaults){var pkey=prefix+key.replace(/\./g,"-"),attr=$(el).attr(pkey);if(void 0===attr)settings[key]=defaults[key];else if("string"==typeof attr&&0===attr.length||/^\s*true\s*$/.test(attr)||pkey==attr)settings[key]=!0;else if(/^\s*false\s*$/.test(attr))settings[key]=!1;else settings[key]=attr}return settings},exports={parse:parse};return exports};if("function"==typeof define&&define.amd)define("js/lib/data.attributes",["jquery"],function($){return DataAttributes($)});else if("undefined"!=typeof window&&"undefined"==typeof ender)window.DataAttributes=DataAttributes(window.$)}(),!function(){var Modals=function($,LucidJS,_,DataAttributes){var CLOSED=0,OPEN=1,_private={defaults:{"bind.open":"click","bind.close":"click","bind.action":"click","attribute.open":"data-modal","attribute.close":"data-modal-close","attribute.iframe":"data-modal-iframe","attribute.action":"data-modal-action","attribute.focus":"data-modal-focus","attribute.focus.index":1e4,"animate.modal.open":null,"animate.modal.close":null,"animate.modal.duration":250,"animate.overlay.open":null,"animate.overlay.close":null,"animate.overlay.duration":250,"overlay.show":!0,"overlay.class":"overlay","overlay.close":!0,"z.index":9999,"position.top":"50%","position.left":"50%",position:"fixed","iframe.autoclose":!0},$overlay:null,count:0,prevScroll:null,prevModal:null,getModal:function(el,options){var modal=$(el).data("modal.me");if(modal&&modal.constructor==Modal.prototype.constructor)if(options)return modal.customize(options);else return modal;else return null},makeModal:function(el,options){var $el=$(el),modal=_private.getModal($el);if(!modal)modal=new Modal($el,options),$el.data("modal.me",modal);return modal},setOverlayHeight:function(){if($(window).height()<$(document).height())_private.$overlay.css({height:$(document).height()+"px"});else _private.$overlay.css({height:"100%"})},observeKeyPress:function(e){if(this.options["overlay.close"])if(27==e.keyCode||27==e.DOM_VK_ESCAPE&&0===e.which)this.emitter.trigger("action",!1,this),this.close();this.emitter.trigger("key",e)},cycleTabs:function(e){var $tabbable=this.$el.find("a,input,select,textarea,button").filter(":visible");if(9==e.keyCode&&$(e.target).is($tabbable.last()))window.setTimeout(function(){$tabbable.first().focus()},0)},actionTrigger:function(e){var $el=$(e.currentTarget),action=$el.attr(this.options["attribute.action"]);this.emitter.trigger("action",action,this)},open:function(){if("fixed"!=this.options.position)_private.prevScroll={top:$(document).scrollTop(),left:$(document).scrollLeft()},window.scrollTo(0,0);if(this.$iframe){var iframeUrl=this.options["iframe.url"]||$(this.anchor).attr(this.options["attribute.iframe"]);this.$iframe.attr("src",iframeUrl),this.$iframe.focus()}else{var $focus=this.$el.find("["+this.options["attribute.focus"]+"]"),$focusable_elements=this.$el.find("a,input,select,textarea,button");for(i=0;i<$focusable_elements.length;i++)$focusable_elements.eq(i).attr("tabindex",this.options["attribute.focus.index"]+1+i);if($focus.size()>0)$focus.filter(":visible").eq(0).attr("tabindex",this.options["attribute.focus.index"]),$focus.filter(":visible").eq(0).focus();else if($focusable_elements.size()>0)$focusable_elements.filter(":visible").eq(0).attr("tabindex",this.options["attribute.focus.index"]),$focusable_elements.filter(":visible").eq(0).focus()}this.state=OPEN,this.$el.on(this.options["bind.action"],"["+this.options["attribute.action"]+"]",_.bind(_private.actionTrigger,this)),this.emitter.trigger("open")},close:function(){var $iframe=this.$el.find("iframe");if(this.$el.off(".modal").hide(),this.options["iframe.autoclose"]&&$iframe.size())$iframe.attr({src:"about:blank"});if(_private.prevScroll)window.scrollTo(_private.prevScroll.left,_private.prevScroll.top),_private.prevScroll=null;this.anchor=null,this.$parent.append(this.$el),this.state=CLOSED,this.emitter.trigger("close")}},Modal=function(el,settings){var that=this;this.$el=$(el),this.state=CLOSED,this.$parent=this.$el.parent(),this.customize(settings),this.emitter=LucidJS.emitter(this)};Modal.prototype.customize=function(settings){return this.options=_.extend({},DataAttributes.parse(this.$el,_private.defaults,"data-modal-"),settings),this},Modal.prototype.open=function(){var that=this,iframeUrl;if(this.anchor)iframeUrl=$(this.anchor).attr(this.options["attribute.iframe"]);if(this.options["iframe.url"])iframeUrl=this.options["iframe.url"];if(iframeUrl)if(this.$iframe=this.$el.find("iframe"),/^https?:\/\/|^\/|^\.\.\//.test(iframeUrl))if(!this.$iframe.size()||this.$iframe.attr("src")!=iframeUrl)if(this.$iframe.attr("src","about:blank").remove(),this.$iframe=$("<iframe>").css({height:"100%",width:"100%"}).attr({scrolling:"no",frameborder:0}),this.$el.append(this.$iframe),this.state!=CLOSED)this.$iframe.attr("src",iframeUrl);if(this.state!=CLOSED)return;if(this.options["overlay.show"]){if(_private.$overlay&&"none"!=_private.$overlay.css("display")&&_private.$overlay.hasClass(this.options["overlay.class"]))this.$overlay=_private.$overlay;else{if(_private.$overlay)_private.$overlay.off(".modal").hide().remove();this.$overlay=_private.$overlay=$("<div>").addClass(this.options["overlay.class"]).hide(),this.$overlay.css({position:"fixed",width:"100%",top:0,left:0,right:0,bottom:0,zIndex:this.options["z.index"]++}),$("body").append(this.$overlay)}if(_private.setOverlayHeight(),this.reposition(),this.options["animate.overlay.open"])this.$overlay.animate(this.options["animate.overlay.open"],{duration:this.options["animate.overlay.duration"]});else this.$overlay.show();_private.count++,this.$overlay.data("modal",this)}if(this.emitter.trigger("opening"),"fixed"!=this.options.position||0===this.$el.closest("html").length)this.$el.appendTo("body");if(this.reposition(),this.$el.show(),this.options["animate.modal.open"])this.$el.animate(this.options["animate.modal.open"],{duration:this.options["animate.modal.duration"],complete:function(){_private.open.call(that)}});else _private.open.call(this);if($(window).on("resize.modal",_.bind(_private.setOverlayHeight,that)).on("resize.modal",_.bind(that.reposition,that)).on("scroll.modal",_.bind(that.reposition,that)),this.$el.on("keydown.modal",_.bind(_private.cycleTabs,that)),$(window).on("keyup.modal",_.bind(_private.observeKeyPress,that)),this.options["overlay.close"])this.$overlay.on(this.options["bind.close"]+".modal",function(e){that.emitter.trigger("action",!1,that),that.close()});if(this.options["attribute.close"])this.$el.on(this.options["bind.close"]+".modal","["+this.options["attribute.close"]+"]",function(e){var $target=$(e.currentTarget);if("disabled"!=$target.attr("disabled")){if(void 0===$target.attr(that.options["attribute.action"]))that.emitter.trigger("action",!1,that);that.close()}});return this},Modal.prototype.reposition=function(){var left=this.options["position.left"],top=this.options["position.top"];if(left)this.$el.css({position:this.options.position,left:left,marginLeft:/%/.test(left)?this.$el.outerWidth()/2*-1:0,zIndex:this.options["z.index"]++});if(top)this.$el.css({position:this.options.position,top:top,marginTop:/%/.test(top)?this.$el.outerHeight()/2*-1:0,zIndex:this.options["z.index"]++});return this},Modal.prototype.close=function(){var that=this;if(this.state!=OPEN)return;if(this.trigger("closeRequest")===!1)return;if(this.$el.off(".modal"),$(window).off(".modal"),this.emitter.trigger("closing"),this.options["animate.modal.close"])this.$el.animate(this.options["animate.modal.close"],{duration:this.options["animate.modal.duration"],complete:function(){_private.close.call(that)}});else _private.close.call(this);if(0===--_private.count)if(this.options["overlay.show"]&&this.$overlay)if(this.$overlay.off(".modal"),this.options["animate.overlay.close"])this.$overlay.animate(this.options["animate.overlay.close"],{duration:this.options["animate.overlay.duration"],complete:function(){this.$overlay.hide().remove()}});else this.$overlay.hide().remove();return this};var external=function(){return _private.getModal.apply(null,arguments)||_private.makeModal.apply(this,arguments)};return external.start=function(view,_options){var $view=$(view),options=_.extend({},_private.defaults,_options);if($view.data("modals-initialized"))return;else $view.data("modals-initialized",1);$view.on(options["bind.open"]+".modal","["+options["attribute.open"]+"]",function(e){var $anchor=$(this),selector=$anchor.attr(options["attribute.open"]),$modal=$view.find(selector);options=_.extend({},options,DataAttributes.parse($modal,_private.defaults,"data-modal-"));var modal=_private.getModal($modal,options)||_private.makeModal($modal,options);if(/^https?:\/\/|^\/|^\.\.\//.test($anchor.attr("href"))&&!e.ctrlKey&&!e.metaKey)e.preventDefault();modal.anchor=this,_private.prevModal=$modal[0],modal.open()})},external.stop=function(view){var $view=$(view);
if($view.unbind(".modal"),$view.data("modals-initialized",0),_private.prevModal)Modal(_private.prevModal).close()},external.start("body"),external};if("function"==typeof define&&define.amd)define("js/lib/modals",["jquery","js/lib/lucid","underscore","js/lib/data.attributes"],function($,LucidJS,_,DataAttributes){return Modals($,LucidJS,_,DataAttributes)});else if("undefined"!=typeof window&&"undefined"==typeof ender)window.Modal=Modals(window.$,window.LucidJS,window._,window.DataAttributes)}(),!function(wndw){function nulls(val){return null!=val&&""!==val}function joinClasses(val){return Array.isArray(val)?val.map(joinClasses).filter(nulls).join(" "):val}var exports={};if(!Array.isArray)Array.isArray=function(arr){return"[object Array]"==Object.prototype.toString.call(arr)};if(!Object.keys)Object.keys=function(obj){var arr=[];for(var key in obj)if(obj.hasOwnProperty(key))arr.push(key);return arr};if(exports.merge=function merge(a,b){if(1===arguments.length){for(var attrs=a[0],i=1;i<a.length;i++)attrs=merge(attrs,a[i]);return attrs}var ac=a["class"],bc=b["class"];if(ac||bc){if(ac=ac||[],bc=bc||[],!Array.isArray(ac))ac=[ac];if(!Array.isArray(bc))bc=[bc];a["class"]=ac.concat(bc).filter(nulls)}for(var key in b)if("class"!=key)a[key]=b[key];return a},exports.joinClasses=joinClasses,exports.cls=function cls(classes,escaped){for(var buf=[],i=0;i<classes.length;i++)if(escaped&&escaped[i])buf.push(exports.escape(joinClasses([classes[i]])));else buf.push(joinClasses(classes[i]));var text=joinClasses(buf);if(text.length)return' class="'+text+'"';else return""},exports.attr=function attr(key,val,escaped,terse){if("boolean"==typeof val||null==val)if(val)return" "+(terse?key:key+'="'+key+'"');else return"";else if(0==key.indexOf("data")&&"string"!=typeof val)return" "+key+"='"+JSON.stringify(val).replace(/'/g,"&apos;")+"'";else if(escaped)return" "+key+'="'+exports.escape(val)+'"';else return" "+key+'="'+val+'"'},exports.attrs=function attrs(obj,terse){var buf=[],keys=Object.keys(obj);if(keys.length)for(var i=0;i<keys.length;++i){var key=keys[i],val=obj[key];if("class"==key){if(val=joinClasses(val))buf.push(" "+key+'="'+val+'"')}else buf.push(exports.attr(key,val,!1,terse))}return buf.join("")},exports.escape=function escape(html){var result=String(html).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");if(result===""+html)return html;else return result},exports.rethrow=function rethrow(err,filename,lineno,str){if(!(err instanceof Error))throw err;if(!("undefined"==typeof window&&filename||str))throw err.message+=" on line "+lineno,err;try{str=str||require("fs").readFileSync(filename,"utf8")}catch(ex){rethrow(err,null,lineno)}var context=3,lines=str.split("\n"),start=Math.max(lineno-context,0),end=Math.min(lines.length,lineno+context),context=lines.slice(start,end).map(function(line,i){var curr=i+start+1;return(curr==lineno?"  > ":"    ")+curr+"| "+line}).join("\n");throw err.path=filename,err.message=(filename||"Jade")+":"+lineno+"\n"+context+"\n\n"+err.message,err},"function"==typeof define&&define.amd)define("js/lib/jade",[],function(){return exports});else wndw.jade={helpers:exports,templates:{}}}(window),!function(){function addPart(locale,master,needed,toLoad,prefix,suffix){for(;"[object String]"==Object.prototype.toString.call(master[locale]);)locale=master[locale];if(master[locale])if(needed.push(locale),master[locale]===!0||1===master[locale])toLoad.push(prefix+locale+"/"+suffix)}function addIfExists(req,locale,toLoad,prefix,suffix){var fullName=prefix+locale+"/"+suffix;if(require._fileExists(req.toUrl(fullName+".js")))toLoad.push(fullName)}function mixin(target,source,force){var prop;for(prop in source)if(source.hasOwnProperty(prop)&&(!target.hasOwnProperty(prop)||force))target[prop]=source[prop];else if("object"==typeof source[prop]){if(!target[prop])target[prop]={};mixin(target[prop],source[prop],force)}}function generateTranslationFunction(dictionary){dictionary=dictionary||{};var f=function(key,interpolationHash){var value=dictionary[key]||key;if("object"==typeof interpolationHash&&interpolationHash)return value.replace(interpolationRegex,function(match,interpKey){var interpolation=interpolationHash[interpKey];return dictionary[interpolation]||interpolation||interpKey});else return value};return f.dictionary=dictionary,f.merge=function(){var _ts=Array.prototype.slice.call(arguments,0),i,source,key;for(i=0;i<_ts.length;i++)if(source=_ts[i]&&_ts[i].dictionary)for(key in source)if(!(key in dictionary))dictionary[key]=source[key];return f},f}var nlsRegExp=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/,interpolationRegex=/[#!]\{([^}]+?)\}/g;define("i18n",["module"],function(module){var masterConfig=module.config?module.config():{};return{version:"2.0.3",load:function(name,req,onLoad,config){if(config=config||{},config.locale)masterConfig.locale=config.locale;masterConfig.locale=(masterConfig.locale||"").toLowerCase().replace(/_/g,"-"),masterConfig.locale=masterConfig.locale.split(/[;=,]/)[0];var masterName,match=nlsRegExp.exec(name),prefix=match[1],locale=match[4],suffix=match[5],parts=locale.split("-"),toLoad=[],value={},i,part,current="";if(match[5])prefix=match[1],masterName=prefix+suffix;else{if(masterName=name,suffix=match[4],locale=masterConfig.locale,!locale)locale=masterConfig.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase();parts=locale.split("-")}if(config.isBuild){for(toLoad.push(masterName),addIfExists(req,"root",toLoad,prefix,suffix),i=0;i<parts.length;i++)part=parts[i],current+=(current?"-":"")+part,addIfExists(req,current,toLoad,prefix,suffix);req(toLoad,function(){onLoad()})}else req([masterName],function(master){var needed=[],part;for(addPart("root",master,needed,toLoad,prefix,suffix),i=0;i<parts.length;i++)part=parts[i],current+=(current?"-":"")+part,addPart(current,master,needed,toLoad,prefix,suffix);req(toLoad,function(){var i,partBundle,part;for(i=needed.length-1;i>-1&&needed[i];i--){if(part=needed[i],partBundle=master[part],partBundle===!0||1===partBundle)partBundle=req(prefix+part+"/"+suffix);mixin(value,partBundle)}onLoad(generateTranslationFunction(value))})})}}})}(),define("js/core/nls/confirmNavigation",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t){buf.push('<div class="hide confirm-navigation modal"><div class="modal-header"><h3>'+jade.escape(null==(jade_interp=_t("Confirm Navigation"))?"":jade_interp)+'</h3></div><div class="modal-body"><div class="confirm-navigation-message"></div><div>'+jade.escape(null==(jade_interp=_t("Are you sure you want to leave this page?"))?"":jade_interp)+'</div></div><div class="modal-footer"><button data-modal-close="data-modal-close" class="btn confirm-navigation-stay">'+jade.escape(null==(jade_interp=_t("Stay on this Page"))?"":jade_interp)+'</button><button data-modal-close="data-modal-close" class="btn btn-danger confirm-navigation-leave">'+jade.escape(null==(jade_interp=_t("Leave this Page"))?"":jade_interp)+"</button></div></div>")}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("js/core/confirmNavigation.html",["js/lib/jade","i18n!js/core/nls/confirmNavigation"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["js.core.confirmNavigation"]=jadify(wndw.jade.helpers)}(window),!function(definition){if("function"==typeof bootstrap)bootstrap("promise",definition);else if("object"==typeof exports)module.exports=definition();else if("function"==typeof define&&define.amd)define("js/lib/q",definition);else if("undefined"!=typeof ses)if(!ses.ok())return;else ses.makeQ=definition;else Q=definition()}(function(){function uncurryThis(f){return function(){return call.apply(f,arguments)}}function isObject(value){return value===Object(value)}function isStopIteration(exception){return"[object StopIteration]"===object_toString(exception)||exception instanceof QReturnValue}function makeStackTraceLong(error,promise){if(hasStacks&&promise.stack&&"object"==typeof error&&null!==error&&error.stack&&-1===error.stack.indexOf(STACK_JUMP_SEPARATOR)){for(var stacks=[],p=promise;p;p=p.source)if(p.stack)stacks.unshift(p.stack);stacks.unshift(error.stack);var concatedStacks=stacks.join("\n"+STACK_JUMP_SEPARATOR+"\n");error.stack=filterStackString(concatedStacks)}}function filterStackString(stackString){for(var lines=stackString.split("\n"),desiredLines=[],i=0;i<lines.length;++i){var line=lines[i];if(!isInternalFrame(line)&&!isNodeFrame(line)&&line)desiredLines.push(line)}return desiredLines.join("\n")}function isNodeFrame(stackLine){return-1!==stackLine.indexOf("(module.js:")||-1!==stackLine.indexOf("(node.js:")}function getFileNameAndLineNumber(stackLine){var attempt1=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(stackLine);if(attempt1)return[attempt1[1],Number(attempt1[2])];var attempt2=/at ([^ ]+):(\d+):(?:\d+)$/.exec(stackLine);if(attempt2)return[attempt2[1],Number(attempt2[2])];var attempt3=/.*@(.+):(\d+)$/.exec(stackLine);if(attempt3)return[attempt3[1],Number(attempt3[2])]}function isInternalFrame(stackLine){var fileNameAndLineNumber=getFileNameAndLineNumber(stackLine);if(!fileNameAndLineNumber)return!1;var fileName=fileNameAndLineNumber[0],lineNumber=fileNameAndLineNumber[1];return fileName===qFileName&&lineNumber>=qStartingLine&&qEndingLine>=lineNumber}function captureLine(){if(!hasStacks)return;try{throw new Error}catch(e){var lines=e.stack.split("\n"),firstLine=lines[0].indexOf("@")>0?lines[1]:lines[2],fileNameAndLineNumber=getFileNameAndLineNumber(firstLine);if(!fileNameAndLineNumber)return;return qFileName=fileNameAndLineNumber[0],fileNameAndLineNumber[1]}}function deprecate(callback,name,alternative){return function(){if("undefined"!=typeof console&&"function"==typeof console.warn)console.warn(name+" is deprecated, use "+alternative+" instead.",new Error("").stack);return callback.apply(callback,arguments)}}function Q(value){if(isPromise(value))return value;if(isPromiseAlike(value))return coerce(value);else return fulfill(value)}function defer(){function become(newPromise){resolvedPromise=newPromise,promise.source=newPromise,array_reduce(messages,function(undefined,message){nextTick(function(){newPromise.promiseDispatch.apply(newPromise,message)})},void 0),messages=void 0,progressListeners=void 0}var messages=[],progressListeners=[],resolvedPromise,deferred=object_create(defer.prototype),promise=object_create(Promise.prototype);if(promise.promiseDispatch=function(resolve,op,operands){var args=array_slice(arguments);if(messages){if(messages.push(args),"when"===op&&operands[1])progressListeners.push(operands[1])}else nextTick(function(){resolvedPromise.promiseDispatch.apply(resolvedPromise,args)})},promise.valueOf=deprecate(function(){if(messages)return promise;var nearerValue=nearer(resolvedPromise);if(isPromise(nearerValue))resolvedPromise=nearerValue;return nearerValue},"valueOf","inspect"),promise.inspect=function(){if(!resolvedPromise)return{state:"pending"};return resolvedPromise.inspect()},Q.longStackSupport&&hasStacks)try{throw new Error}catch(e){promise.stack=e.stack.substring(e.stack.indexOf("\n")+1)}return deferred.promise=promise,deferred.resolve=function(value){if(resolvedPromise)return;become(Q(value))},deferred.fulfill=function(value){if(resolvedPromise)return;become(fulfill(value))},deferred.reject=function(reason){if(resolvedPromise)return;become(reject(reason))},deferred.notify=function(progress){if(resolvedPromise)return;array_reduce(progressListeners,function(undefined,progressListener){nextTick(function(){progressListener(progress)})},void 0)},deferred}function promise(resolver){if("function"!=typeof resolver)throw new TypeError("resolver must be a function.");var deferred=defer();try{resolver(deferred.resolve,deferred.reject,deferred.notify)}catch(reason){deferred.reject(reason)}return deferred.promise}function race(answerPs){return promise(function(resolve,reject){for(var i=0,len=answerPs.length;len>i;i++)Q(answerPs[i]).then(resolve,reject)})}function Promise(descriptor,fallback,inspect){if(void 0===fallback)fallback=function(op){return reject(new Error("Promise does not support operation: "+op))};if(void 0===inspect)inspect=function(){return{state:"unknown"}};var promise=object_create(Promise.prototype);if(promise.promiseDispatch=function(resolve,op,args){var result;try{if(descriptor[op])result=descriptor[op].apply(promise,args);else result=fallback.call(promise,op,args)}catch(exception){result=reject(exception)}if(resolve)resolve(result)},promise.inspect=inspect,inspect){var inspected=inspect();if("rejected"===inspected.state)promise.exception=inspected.reason;promise.valueOf=deprecate(function(){var inspected=inspect();if("pending"===inspected.state||"rejected"===inspected.state)return promise;return inspected.value})}return promise}function when(value,fulfilled,rejected,progressed){return Q(value).then(fulfilled,rejected,progressed)}function nearer(value){if(isPromise(value)){var inspected=value.inspect();if("fulfilled"===inspected.state)return inspected.value}return value}function isPromise(object){return isObject(object)&&"function"==typeof object.promiseDispatch&&"function"==typeof object.inspect}function isPromiseAlike(object){return isObject(object)&&"function"==typeof object.then}function isPending(object){return isPromise(object)&&"pending"===object.inspect().state}function isFulfilled(object){return!isPromise(object)||"fulfilled"===object.inspect().state}function isRejected(object){return isPromise(object)&&"rejected"===object.inspect().state}function displayUnhandledReasons(){if(!unhandledReasonsDisplayed&&"undefined"!=typeof window&&!window.Touch&&window.console)console.warn("[Q] Unhandled rejection reasons (should be empty):",unhandledReasons);unhandledReasonsDisplayed=!0}function logUnhandledReasons(){for(var i=0;i<unhandledReasons.length;i++){var reason=unhandledReasons[i];if(reason&&"undefined"!=typeof reason.stack)console.warn("Unhandled rejection reason:",reason.stack);else console.warn("Unhandled rejection reason (no stack):",reason)}}function resetUnhandledRejections(){if(unhandledReasons.length=0,unhandledRejections.length=0,unhandledReasonsDisplayed=!1,!trackUnhandledRejections)if(trackUnhandledRejections=!0,"undefined"!=typeof process&&process.on)process.on("exit",logUnhandledReasons)}function trackRejection(promise,reason){if(!trackUnhandledRejections)return;unhandledRejections.push(promise),unhandledReasons.push(reason),displayUnhandledReasons()}function untrackRejection(promise){if(!trackUnhandledRejections)return;var at=array_indexOf(unhandledRejections,promise);if(-1!==at)unhandledRejections.splice(at,1),unhandledReasons.splice(at,1)}function reject(reason){var rejection=Promise({when:function(rejected){if(rejected)untrackRejection(this);return rejected?rejected(reason):this}},function fallback(){return this},function inspect(){return{state:"rejected",reason:reason}});return trackRejection(rejection,reason),rejection}function fulfill(value){return Promise({when:function(){return value},get:function(name){return value[name]},set:function(name,rhs){value[name]=rhs},"delete":function(name){delete value[name]},post:function(name,args){if(null===name||void 0===name)return value.apply(void 0,args);else return value[name].apply(value,args)},apply:function(thisp,args){return value.apply(thisp,args)},keys:function(){return object_keys(value)}},void 0,function inspect(){return{state:"fulfilled",value:value}})}function coerce(promise){var deferred=defer();return nextTick(function(){try{promise.then(deferred.resolve,deferred.reject,deferred.notify)}catch(exception){deferred.reject(exception)}}),deferred.promise}function master(object){return Promise({isDef:function(){}},function fallback(op,args){return dispatch(object,op,args)},function(){return Q(object).inspect()})}function spread(value,fulfilled,rejected){return Q(value).spread(fulfilled,rejected)}function async(makeGenerator){return function(){function continuer(verb,arg){var result;if(hasES6Generators){try{result=generator[verb](arg)}catch(exception){return reject(exception)}if(result.done)return result.value;else return when(result.value,callback,errback)}else{try{result=generator[verb](arg)}catch(exception){if(isStopIteration(exception))return exception.value;else return reject(exception)}return when(result,callback,errback)}}var generator=makeGenerator.apply(this,arguments),callback=continuer.bind(continuer,"next"),errback=continuer.bind(continuer,"throw");return callback()}}function spawn(makeGenerator){Q.done(Q.async(makeGenerator)())}function _return(value){throw new QReturnValue(value)}function promised(callback){return function(){return spread([this,all(arguments)],function(self,args){return callback.apply(self,args)})}}function dispatch(object,op,args){return Q(object).dispatch(op,args)}function all(promises){return when(promises,function(promises){var countDown=0,deferred=defer();if(array_reduce(promises,function(undefined,promise,index){var snapshot;if(isPromise(promise)&&"fulfilled"===(snapshot=promise.inspect()).state)promises[index]=snapshot.value;else++countDown,when(promise,function(value){if(promises[index]=value,0===--countDown)deferred.resolve(promises)},deferred.reject,function(progress){deferred.notify({index:index,value:progress})})},void 0),0===countDown)deferred.resolve(promises);return deferred.promise})}function allResolved(promises){return when(promises,function(promises){return promises=array_map(promises,Q),when(all(array_map(promises,function(promise){return when(promise,noop,noop)})),function(){return promises})})}function allSettled(promises){return Q(promises).allSettled()}function progress(object,progressed){return Q(object).then(void 0,void 0,progressed)}function nodeify(object,nodeback){return Q(object).nodeify(nodeback)}var hasStacks=!1;try{throw new Error}catch(e){hasStacks=!!e.stack}var qStartingLine=captureLine(),qFileName,noop=function(){},nextTick=function(){function flush(){for(;head.next;){head=head.next;var task=head.task;head.task=void 0;var domain=head.domain;if(domain)head.domain=void 0,domain.enter();try{task()}catch(e){if(isNodeJS){if(domain)domain.exit();if(setTimeout(flush,0),domain)domain.enter();throw e}else setTimeout(function(){throw e},0)}if(domain)domain.exit()}flushing=!1}var head={task:void 0,next:null},tail=head,flushing=!1,requestTick=void 0,isNodeJS=!1;if(nextTick=function(task){if(tail=tail.next={task:task,domain:isNodeJS&&process.domain,next:null},!flushing)flushing=!0,requestTick()},"undefined"!=typeof process&&process.nextTick)isNodeJS=!0,requestTick=function(){process.nextTick(flush)};else if("function"==typeof setImmediate)if("undefined"!=typeof window)requestTick=setImmediate.bind(window,flush);else requestTick=function(){setImmediate(flush)};else if("undefined"!=typeof MessageChannel){var channel=new MessageChannel;channel.port1.onmessage=flush,requestTick=function(){channel.port2.postMessage(0)}}else requestTick=function(){setTimeout(flush,0)};return nextTick}(),call=Function.call,array_slice=uncurryThis(Array.prototype.slice),array_reduce=uncurryThis(Array.prototype.reduce||function(callback,basis){var index=0,length=this.length;if(1===arguments.length)for(;;){if(index in this){basis=this[index++];break}if(++index>=length)throw new TypeError}for(;length>index;index++)if(index in this)basis=callback(basis,this[index],index);return basis}),array_indexOf=uncurryThis(Array.prototype.indexOf||function(value){for(var i=0;i<this.length;i++)if(this[i]===value)return i;return-1}),array_map=uncurryThis(Array.prototype.map||function(callback,thisp){var self=this,collect=[];return array_reduce(self,function(undefined,value,index){collect.push(callback.call(thisp,value,index,self))},void 0),collect}),object_create=Object.create||function(prototype){function Type(){}return Type.prototype=prototype,new Type},object_hasOwnProperty=uncurryThis(Object.prototype.hasOwnProperty),object_keys=Object.keys||function(object){var keys=[];for(var key in object)if(object_hasOwnProperty(object,key))keys.push(key);return keys},object_toString=uncurryThis(Object.prototype.toString),QReturnValue;if("undefined"!=typeof ReturnValue)QReturnValue=ReturnValue;else QReturnValue=function(value){this.value=value};var hasES6Generators;try{new Function("(function* (){ yield 1; })"),hasES6Generators=!0}catch(e){hasES6Generators=!1}var STACK_JUMP_SEPARATOR="From previous event:";Q.resolve=Q,Q.nextTick=nextTick,Q.longStackSupport=!1,Q.defer=defer,defer.prototype.makeNodeResolver=function(){var self=this;return function(error,value){if(error)self.reject(error);else if(arguments.length>2)self.resolve(array_slice(arguments,1));else self.resolve(value)}},Q.promise=promise,Q.passByCopy=function(object){return object},Promise.prototype.passByCopy=function(){return this},Q.join=function(x,y){return Q(x).join(y)},Promise.prototype.join=function(that){return Q([this,that]).spread(function(x,y){if(x===y)return x;else throw new Error("Can't join: not the same: "+x+" "+y)})},Q.race=race,Promise.prototype.race=function(){return this.then(Q.race)},Q.makePromise=Promise,Promise.prototype.toString=function(){return"[object Promise]"},Promise.prototype.then=function(fulfilled,rejected,progressed){function _fulfilled(value){try{return"function"==typeof fulfilled?fulfilled(value):value}catch(exception){return reject(exception)}}function _rejected(exception){if("function"==typeof rejected){makeStackTraceLong(exception,self);try{return rejected(exception)}catch(newException){return reject(newException)}}return reject(exception)}function _progressed(value){return"function"==typeof progressed?progressed(value):value}var self=this,deferred=defer(),done=!1;return nextTick(function(){self.promiseDispatch(function(value){if(done)return;done=!0,deferred.resolve(_fulfilled(value))},"when",[function(exception){if(done)return;done=!0,deferred.resolve(_rejected(exception))}])}),self.promiseDispatch(void 0,"when",[void 0,function(value){var newValue,threw=!1;try{newValue=_progressed(value)}catch(e){if(threw=!0,Q.onerror)Q.onerror(e);else throw e}if(!threw)deferred.notify(newValue)}]),deferred.promise},Q.when=when,Promise.prototype.thenResolve=function(value){return this.then(function(){return value})},Q.thenResolve=function(promise,value){return Q(promise).thenResolve(value)},Promise.prototype.thenReject=function(reason){return this.then(function(){throw reason})},Q.thenReject=function(promise,reason){return Q(promise).thenReject(reason)},Q.nearer=nearer,Q.isPromise=isPromise,Q.isPromiseAlike=isPromiseAlike,Q.isPending=isPending,Promise.prototype.isPending=function(){return"pending"===this.inspect().state},Q.isFulfilled=isFulfilled,Promise.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},Q.isRejected=isRejected,Promise.prototype.isRejected=function(){return"rejected"===this.inspect().state};var unhandledReasons=[],unhandledRejections=[],unhandledReasonsDisplayed=!1,trackUnhandledRejections=!0;Q.resetUnhandledRejections=resetUnhandledRejections,Q.getUnhandledReasons=function(){return unhandledReasons.slice()},Q.stopUnhandledRejectionTracking=function(){if(resetUnhandledRejections(),"undefined"!=typeof process&&process.on)process.removeListener("exit",logUnhandledReasons);trackUnhandledRejections=!1},resetUnhandledRejections(),Q.reject=reject,Q.fulfill=fulfill,Q.master=master,Q.spread=spread,Promise.prototype.spread=function(fulfilled,rejected){return this.all().then(function(array){return fulfilled.apply(void 0,array)},rejected)},Q.async=async,Q.spawn=spawn,Q["return"]=_return,Q.promised=promised,Q.dispatch=dispatch,Promise.prototype.dispatch=function(op,args){var self=this,deferred=defer();return nextTick(function(){self.promiseDispatch(deferred.resolve,op,args)}),deferred.promise},Q.get=function(object,key){return Q(object).dispatch("get",[key])},Promise.prototype.get=function(key){return this.dispatch("get",[key])},Q.set=function(object,key,value){return Q(object).dispatch("set",[key,value])},Promise.prototype.set=function(key,value){return this.dispatch("set",[key,value])},Q.del=Q["delete"]=function(object,key){return Q(object).dispatch("delete",[key])},Promise.prototype.del=Promise.prototype["delete"]=function(key){return this.dispatch("delete",[key])},Q.mapply=Q.post=function(object,name,args){return Q(object).dispatch("post",[name,args])},Promise.prototype.mapply=Promise.prototype.post=function(name,args){return this.dispatch("post",[name,args])},Q.send=Q.mcall=Q.invoke=function(object,name){return Q(object).dispatch("post",[name,array_slice(arguments,2)])},Promise.prototype.send=Promise.prototype.mcall=Promise.prototype.invoke=function(name){return this.dispatch("post",[name,array_slice(arguments,1)])},Q.fapply=function(object,args){return Q(object).dispatch("apply",[void 0,args])},Promise.prototype.fapply=function(args){return this.dispatch("apply",[void 0,args])},Q["try"]=Q.fcall=function(object){return Q(object).dispatch("apply",[void 0,array_slice(arguments,1)])},Promise.prototype.fcall=function(){return this.dispatch("apply",[void 0,array_slice(arguments)])},Q.fbind=function(object){var promise=Q(object),args=array_slice(arguments,1);return function fbound(){return promise.dispatch("apply",[this,args.concat(array_slice(arguments))])}},Promise.prototype.fbind=function(){var promise=this,args=array_slice(arguments);return function fbound(){return promise.dispatch("apply",[this,args.concat(array_slice(arguments))])}},Q.keys=function(object){return Q(object).dispatch("keys",[])},Promise.prototype.keys=function(){return this.dispatch("keys",[])},Q.all=all,Promise.prototype.all=function(){return all(this)},Q.allResolved=deprecate(allResolved,"allResolved","allSettled"),Promise.prototype.allResolved=function(){return allResolved(this)},Q.allSettled=allSettled,Promise.prototype.allSettled=function(){return this.then(function(promises){return all(array_map(promises,function(promise){function regardless(){return promise.inspect()}return promise=Q(promise),promise.then(regardless,regardless)}))})},Q.fail=Q["catch"]=function(object,rejected){return Q(object).then(void 0,rejected)},Promise.prototype.fail=Promise.prototype["catch"]=function(rejected){return this.then(void 0,rejected)},Q.progress=progress,Promise.prototype.progress=function(progressed){return this.then(void 0,void 0,progressed)},Q.fin=Q["finally"]=function(object,callback){return Q(object)["finally"](callback)},Promise.prototype.fin=Promise.prototype["finally"]=function(callback){return callback=Q(callback),this.then(function(value){return callback.fcall().then(function(){return value})},function(reason){return callback.fcall().then(function(){throw reason})})},Q.done=function(object,fulfilled,rejected,progress){return Q(object).done(fulfilled,rejected,progress)},Promise.prototype.done=function(fulfilled,rejected,progress){var onUnhandledError=function(error){nextTick(function(){if(makeStackTraceLong(error,promise),Q.onerror)Q.onerror(error);else throw error})},promise=fulfilled||rejected||progress?this.then(fulfilled,rejected,progress):this;if("object"==typeof process&&process&&process.domain)onUnhandledError=process.domain.bind(onUnhandledError);promise.then(void 0,onUnhandledError)},Q.timeout=function(object,ms,message){return Q(object).timeout(ms,message)},Promise.prototype.timeout=function(ms,message){var deferred=defer(),timeoutId=setTimeout(function(){deferred.reject(new Error(message||"Timed out after "+ms+" ms"))},ms);return this.then(function(value){clearTimeout(timeoutId),deferred.resolve(value)},function(exception){clearTimeout(timeoutId),deferred.reject(exception)},deferred.notify),deferred.promise},Q.delay=function(object,timeout){if(void 0===timeout)timeout=object,object=void 0;return Q(object).delay(timeout)},Promise.prototype.delay=function(timeout){return this.then(function(value){var deferred=defer();return setTimeout(function(){deferred.resolve(value)},timeout),deferred.promise})},Q.nfapply=function(callback,args){return Q(callback).nfapply(args)},Promise.prototype.nfapply=function(args){var deferred=defer(),nodeArgs=array_slice(args);return nodeArgs.push(deferred.makeNodeResolver()),this.fapply(nodeArgs).fail(deferred.reject),deferred.promise},Q.nfcall=function(callback){var args=array_slice(arguments,1);return Q(callback).nfapply(args)},Promise.prototype.nfcall=function(){var nodeArgs=array_slice(arguments),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),this.fapply(nodeArgs).fail(deferred.reject),deferred.promise},Q.nfbind=Q.denodeify=function(callback){var baseArgs=array_slice(arguments,1);return function(){var nodeArgs=baseArgs.concat(array_slice(arguments)),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),Q(callback).fapply(nodeArgs).fail(deferred.reject),deferred.promise}},Promise.prototype.nfbind=Promise.prototype.denodeify=function(){var args=array_slice(arguments);return args.unshift(this),Q.denodeify.apply(void 0,args)},Q.nbind=function(callback,thisp){var baseArgs=array_slice(arguments,2);return function(){function bound(){return callback.apply(thisp,arguments)}var nodeArgs=baseArgs.concat(array_slice(arguments)),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),Q(bound).fapply(nodeArgs).fail(deferred.reject),deferred.promise}},Promise.prototype.nbind=function(){var args=array_slice(arguments,0);return args.unshift(this),Q.nbind.apply(void 0,args)},Q.nmapply=Q.npost=function(object,name,args){return Q(object).npost(name,args)},Promise.prototype.nmapply=Promise.prototype.npost=function(name,args){var nodeArgs=array_slice(args||[]),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),this.dispatch("post",[name,nodeArgs]).fail(deferred.reject),deferred.promise},Q.nsend=Q.nmcall=Q.ninvoke=function(object,name){var nodeArgs=array_slice(arguments,2),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),Q(object).dispatch("post",[name,nodeArgs]).fail(deferred.reject),deferred.promise},Promise.prototype.nsend=Promise.prototype.nmcall=Promise.prototype.ninvoke=function(name){var nodeArgs=array_slice(arguments,1),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),this.dispatch("post",[name,nodeArgs]).fail(deferred.reject),deferred.promise},Q.nodeify=nodeify,Promise.prototype.nodeify=function(nodeback){if(nodeback)this.then(function(value){nextTick(function(){nodeback(null,value)})},function(error){nextTick(function(){nodeback(error)})});else return this};var qEndingLine=captureLine();return Q}),define("js/core/origami",["jquery","underscore","backbone","require","js/lib/modals","js/core/confirmNavigation.html","i18n!js/core/nls/confirmNavigation","js/lib/q"],function($,_,Backbone,require,Modal,confirmNavigationTemplate,confirmNavigationTemplate_t,Q){Backbone.View.prototype._super=function(funcName){return this.constructor.__super__[funcName].apply(this,_.rest(arguments))};var _singleton=null,_private={current:null,body:"#origami",views:{},beforeUnloadMessage:"There are unsaved changes that will be lost if you reload or leave this page.",regionHasUnsavedModel:function(region){if(!region)return!1;var viewHasUnsavedModel=region.view.hasUnsavedModel?region.view.hasUnsavedModel():!1;if(viewHasUnsavedModel)return!0;else{for(var name in region.regions){var subRegion=region.regions[name];if(_private.regionHasUnsavedModel(subRegion))return!0}return!1}}};if(window.location.hash.match(/^#!/))window.location.hash=window.location.hash.replace(/^#!/,"#");var router=Backbone.Router.extend({initialize:function(){var self=this;self.routePrefix="",self.linkClass="internal",$("body").on("click","a.internal",function(e){if(!e.ctrlKey&&!e.metaKey)e.preventDefault(),self.navigate($(e.currentTarget).attr("href"),!0)
}),this.$confirmNavigation=$(confirmNavigationTemplate({_t:confirmNavigationTemplate_t})),$("body").append(this.$confirmNavigation),$(window).on("beforeunload.origami",function(){if(_private.regionHasUnsavedModel(_private.current))return _private.beforeUnloadMessage})},setupLinks:function(routePrefix,linkClass){var self=this;this.routePrefix=routePrefix,this.linkClass=linkClass,$("body").on("click","a."+this.linkClass,function(e){if(!e.ctrlKey&&!e.metaKey)e.preventDefault(),self.navigateTo($(e.currentTarget).attr("href"),!0)})},navigateTo:function(href,silent){this.navigate(href.replace(this.routePrefix,""),silent)},navigate:function(fragment,options){if(_private.current&&_private.regionHasUnsavedModel(_private.current)){var $message=$(".confirm-navigation-message");$message.text(_private.beforeUnloadMessage);var $leave=$(".confirm-navigation-leave");$leave.one("click",function(){Backbone.Router.prototype.navigate.call(this,fragment,options)});var modalOptions={"overlay.class":"coursera-overlay"};Modal(".confirm-navigation",modalOptions).open()}else Backbone.Router.prototype.navigate.call(this,fragment,options)},addRoutes:function(routes){var self=this;for(var route in routes)self.route(route,route,routes[route]),self.route(route+"/",route+"/",function(){var url=Backbone.history.getFragment(),rewrite=url.replace(/\/(?:\?.*)*$/,"");self.navigate(rewrite,{trigger:!0,replace:!0})})}}),animateManager={resize:function(outgoing,incoming,callback){$("body").append(incoming.$el.css({visibility:"hidden"}));var height={from:outgoing.$el.outerHeight(),to:incoming.$el.outerHeight()};outgoing.$el.animate({height:height.to},300,function(){if(outgoing.$el.replaceWith(incoming.$el.css({visibility:"visible"})),incoming.$el.find("img").on("load",function(){incoming.$el.animate({height:incoming.$el.outerHeight()})}),callback)callback()})},slideLeft:function(outgoing,incoming,callback){var going=outgoing.$el,coming=incoming.$el,position=going.position(),width=going.outerWidth(),height=going.outerHeight(),parent=$("<div>").css({position:"relative",width:width,height:height}),restoreIn={position:coming.css("absolute")||"static",width:coming.get(0).style.width,left:coming.get(0).style.left},restoreOut={position:going.css("absolute")||"static",width:going.get(0).style.width,left:going.get(0).style.left};going.wrap(parent),going.css({width:width,left:position.left,position:"absolute"}),coming.css({width:width,left:position.left+width,position:"absolute"}),going.parent().append(coming),going.animate({left:-width},{duration:500,step:function(moved){coming.css({left:position.left+width+moved})},complete:function(){if(coming.css(restoreIn),going.css(restoreOut).hide(),going.unwrap(),callback)callback()}})},slideRight:function(outgoing,incoming,callback){var going=outgoing.$el,coming=incoming.$el,position=going.position(),width=going.outerWidth(),height=going.outerHeight(),parent=$("<div>").css({position:"relative",width:width,height:height}),restoreIn={position:coming.css("absolute")||"static",width:coming.get(0).style.width,left:coming.get(0).style.left},restoreOut={position:going.css("absolute")||"static",width:going.get(0).style.width,left:going.get(0).style.left};going.wrap(parent),going.css({width:width,left:position.left,position:"absolute"}),coming.css({width:width,left:-(position.left+width),position:"absolute"}),going.parent().append(coming),going.animate({left:width},{duration:500,step:function(moved){coming.css({left:-(position.left+width)+moved})},complete:function(){if(coming.css(restoreIn),going.css(restoreOut).hide(),going.unwrap(),callback)callback()}})},replace:function(outgoing,incoming,callback){if(outgoing.$el.replaceWith(incoming.el),callback)callback()}},region=function(type,_options){var self=this,options=_options||{};self.type=type,self.animate=options.animate||{},self.regions=options.regions||{},self.initialize=options.initialize||{},self.options={},self.id=options.id||type.prototype.name,self.name=type.prototype.name,self.view=null,self.regions=$.extend(!0,{},type.prototype.subregions,options.regions||{})};region.prototype.close=function(keep){var self=this;if(_.each(self.regions,function(_region,key){delete self.regions[key],_region.close(keep)}),!keep)self.view.remove();self.view.undelegateEvents(),self.view.trigger("view:closed"),self.view.off("view")},region.prototype.closing=function(){this.view.trigger("view:closing"),delete _private.views[this.view.cid]},region.prototype.render=function(origami){var self=this;if(_.each(self.regions,function(view,key){if(!view)return;view.render(),view.parent=self}),self.view=new self.type(self.initialize),self.view.region=self,self.view.render(self.render),origami)self.view.on("view:appended",function(){origami.trigger("region:appended",{name:self.name})});return self},region.prototype.appended=function(){var that=this;if(that.view)setTimeout(function(){that.view.trigger("view:appended")},0)},region.prototype.append=function(view,options){var that=this,appended=Q.defer();if(!this.regions)this.regions={};var render_and_append=function(_region){for(var key=view,count=0,$el;that.regions[key];)key+=++count;if(that.regions[key]=_region,_region.render(_singleton),options.to)$el=_.isElement(options.to)?that.view.$(options.to):options.to;else $el=that.view.$el;$el.append(_region.view.el),_region.appended(),_singleton.trigger("region:rendered",{name:_region}),appended.resolve(_region)};if("string"==typeof view)_singleton.region.fetch(view,options,render_and_append);else render_and_append(new region(view,options));return appended.promise},region.prototype.is=function(_region){return _region.type==this.type&&_region.id==this.id},region.prototype.replace=function(incoming,callback){var outgoing=this,how="replace",animate={incoming:incoming.view.animate,outgoing:outgoing.view.animate};if(_.isString(animate.incoming))how=animate.incoming;else if(_.isFunction(animate.incoming))how=animate.incoming();else if(_.isString(animate.outgoing))how=animate.outgoing;else if(_.isFunction(animate.outgoing))how=animate.outgoing();if(!animateManager[how])how="replace";animateManager[how](outgoing.view,incoming.view,callback)},region.prototype.merge=function(incoming,origami){var self=this;if(self.is(incoming))_.each(incoming.regions,function(_region,view){self.regions[view].view.trigger("view:merging",_region.initialize),self.regions[view].merge(_region,origami),self.regions[view].view.trigger("view:merged",_region.initialize)});else if(self.name==incoming.name)self.closing(),incoming.render(origami),self.replace(incoming,function(){if(self.parent)self.parent.regions[incoming.name]=incoming,incoming.parent=self.parent,self.parent.appended();self.close(),incoming.appended()})};var Origami=function(body,current){if(_singleton)return _singleton;_singleton=this;var that=this;_private.body=body,_private.current=current,$(window).on("resize",function(){for(var cid in _private.views)_private.views[cid].trigger("view:resize")}),this.region={make:function(type,options){return new region(type,options)},fetch:function(_region,conf,callback){var uid=_.uniqueId();that.trigger("region:fetching",{name:_region,uid:uid}),require([_region],function(view){that.trigger("region:fetched",{name:_region,uid:uid}),callback(new region(view,conf))})},append:function(parent,view,options,callback){if(!parent)parent={regions:{}};var render_and_append=function(_region){for(var key=view,count=0;parent.regions[key];)key+=++count;if(parent.regions[key]=_region,_region.render(that),callback)callback(_region);return _region.appended(),that.trigger("region:rendered",{name:_region}),_region};if("string"==typeof view)that.region.fetch(view,options,render_and_append);else return render_and_append(new region(view,options))},open:function(name,callback){var view=name,conf={};if(_.isObject(name))view=_.keys(name)[0],conf=name[view];that.region.fetch(view,conf,callback||function(parent){var validRegions=_(parent.regions).filter(function(region){return region}),render=_.after(_.keys(validRegions||{}).length+1,function(){if(_private.current){if(_private.current.is(parent))return void _private.current.merge(parent,that);else if(_private.current.name==parent.name)return parent.render(that),void _private.current.replace(parent,function(){_private.current.close(),_private.current=parent,_private.current.appended()});_private.current.close(!0)}_private.current=parent,$(_private.body).html(_private.current.render(that).view.el),_private.current.appended(),_.each(_private.current.regions,function(_region){if(_region)_region.appended()})});render(that),_.each(parent.regions,function(subregion,name){if(!subregion)return;that.region.open(subregion,function(_region){parent.regions[name]=_region,render(that)})})})}},this.animate=animateManager,this.router=new router,this.store={},this.tracker=[]};return _.extend(Origami.prototype,Backbone.Events),Origami}),function(wndw){var config={environment:"production",out:"js/core/config.js",log:"error",debug:!1,url:{maestro:"/maestro/api/",base:"https://www.coursera.org/",api:"/maestro/api/",cloudfront_api:"https://d1hpa2gdx2lr6r.cloudfront.net/maestro/api/",accounts:"https://accounts.coursera.org/",assets:"https://d2wvvaown1ul17.cloudfront.net/site-static/",resource_assets:"https://coursera_assets.s3.amazonaws.com/",app_assets:"https://d2wvvaown1ul17.cloudfront.net/site-static/162b6b241cfca0269fd2fcc0376cc397d1a28fd6/"},version:"162b6b241cfca0269fd2fcc0376cc397d1a28fd6",dir:{home:"/"},gapi_eventing_data:{project_number:"274249572679",api_key:"",client_id:"274249572679-al8nc3ttcavj0n91due232a3h6s3r9vk.apps.googleusercontent.com"},bigquery:{dataset:"mydataset",table_prefix:"livedata_"}};if("function"==typeof define&&define.amd)define("js/core/config",[],function(){return config});else return wndw.configure=config}(window),define("js/lib/supports",[],function(){var supports={},prefix="supports-";if(document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"))document.documentElement.className=prefix+"svg",supports.svg=!0;if(window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest&&navigator.userAgent.indexOf("MSIE 10.0")<0)supports.cors=!0;var userAgent=navigator.userAgent.toLowerCase();if(/safari/.test(userAgent)&&!/chrome/.test(userAgent))supports.accepts=!1;else supports.accepts=!0;return supports}),!function(wndw){var module=function(_,$){var thirdparty={loadScript:function(url,success,body){var newScript=document.createElement("script"),scripts=document.getElementsByTagName("script");if(newScript.type="text/javascript",newScript.async=!0,newScript.src=url,body)newScript.innerHTML=body;if(success)newScript.onload=newScript.onreadystatechange=function(){newScript.onreadystatechange=newScript.onload=null,success()};if(scripts&&scripts.length)scripts[0].parentNode.insertBefore(newScript,scripts[0]);else if(window.document&&window.document.body)window.document.body.appendChild(newScript)},isDefined:function(parent,name){for(var parts=name.split("."),part=parts.shift(),cur=parent;part;)if(cur[part])cur=cur[part],part=parts.shift();else cur=null,part=null;return null!==cur},ready:function(global,callback){if(thirdparty.isDefined(window,global))callback.call();else{var base=global.split(".")[0];if(_.isArray(pool[global]))pool[global].push(callback);else pool[global]=[callback],third_party_globals[base].call(null,global)}}},pool={},poll=function(global){if(thirdparty.isDefined(window,global))for(var base=global.split(".")[0];pool[global]&&pool[global].length;)pool[global].pop().call();else window.setTimeout(function(){poll(global)},100)},third_party_globals={IN:function(x){var funcName="itsThirdPartyTime"+(new Date).getTime();window[funcName]=function(){delete window[funcName],poll(x)},thirdparty.loadScript("https://platform.linkedin.com/in.js",function(){},"onLoad:"+funcName+"\napi_key: v7ah6tdxsqt6")},google:function(x){var funcName;if(/^google\.maps.places/.test(x))funcName="itsThirdPartyTime"+(new Date).getTime(),window[funcName]=function(){delete window[funcName],poll(x)},thirdparty.loadScript("https://maps.googleapis.com/maps/api/js?sensor=false&key=AIzaSyC7XENXcXiE_oj0HvDUC_MiLY9zI3xTW0g&libraries=places&callback="+funcName);if(/^google\.maps\.Map/.test(x))funcName="itsThirdPartyTime"+(new Date).getTime(),window[funcName]=function(){delete window[funcName],poll(x)},thirdparty.loadScript("https://maps.googleapis.com/maps/api/js?sensor=false&key=AIzaSyCzodUI0p0hH-8n6tZ45vMNlaNfKEpuEMU&callback="+funcName)},FB:function(x){thirdparty.loadScript("https://connect.facebook.net/en_US/all.js#xfbml=1&appId=274998519252278",function(){poll(x)})},gapi:function(x){window.___gcfg={lang:"en-US",parsetags:"explicit"},thirdparty.loadScript("https://apis.google.com/js/plusone.js",function(){delete window.___gcfg,poll(x)})},twttr:function(x){thirdparty.loadScript("https://platform.twitter.com/widgets.js",function(){poll(x)})},MathJax:function(x){thirdparty.loadScript("https://d2265nx4vomwra.cloudfront.net/2.1/MathJax.js?delayStartupUntil=configured",function(){poll(x)})}};return thirdparty};if("function"==typeof define&&define.amd)define("js/lib/third-parties",["underscore","jquery"],function(_,$){return module(_,$)});else window.thirdparties=module(window._,window.$)}(window),!function(wndw){var module=function(){if(wndw.console=wndw.console||{},wndw.console.log=wndw.console.log||function(){},wndw.console.error=wndw.console.error||function(){},wndw.console.warn=wndw.console.warn||function(){},wndw.console.info=wndw.console.info||function(){},!wndw.console.log.apply)wndw.console.log=Function.prototype.bind.call(wndw.console.log,wndw.console),wndw.console.error=Function.prototype.bind.call(wndw.console.error,wndw.console),wndw.console.warn=Function.prototype.bind.call(wndw.console.warn,wndw.console),wndw.console.info=Function.prototype.bind.call(wndw.console.info,wndw.console);var Logger=function(options){this.options=options||{}};Logger.prototype.customize=function(options){return this.options=options||{},this},Logger.prototype.info=function(){if("info"==this.options.level)wndw.console.info.apply(wndw.console,arguments);return this},Logger.prototype.warn=function(){if(/info|warn/.test(this.options.level))wndw.console.warn.apply(wndw.console,arguments);return this},Logger.prototype.error=function(){if(/error|warn|info/.test(this.options.level))wndw.console.error.apply(wndw.console,arguments);return this};var exports=function(options){return new Logger(options)};return exports};if("function"==typeof define&&define.amd)define("js/lib/log",[],function(){return module()});else if("undefined"!=typeof wndw&&"undefined"==typeof ender)wndw.Log=module()}(window),!function(){var JSON;if(!JSON)JSON={};var json=function(){function f(n){return 10>n?"0"+n:n}function quote(string){return escapable.lastIndex=0,escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&"object"==typeof value&&"function"==typeof value.toJSON)value=value.toJSON(key);if("function"==typeof rep)value=rep.call(holder,key,value);switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===Object.prototype.toString.apply(value)){for(length=value.length,i=0;length>i;i+=1)partial[i]=str(i,value)||"null";return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&"object"==typeof rep){for(length=rep.length,i=0;length>i;i+=1)if("string"==typeof rep[i])if(k=rep[i],v=str(k,value))partial.push(quote(k)+(gap?": ":":")+v)}else for(k in value)if(Object.prototype.hasOwnProperty.call(value,k))if(v=str(k,value))partial.push(quote(k)+(gap?": ":":")+v);return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}if("function"!=typeof Date.prototype.toJSON)Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;if("function"!=typeof JSON.stringify)JSON.stringify=function(value,replacer,space){var i;if(gap="",indent="","number"==typeof space)for(i=0;space>i;i+=1)indent+=" ";else if("string"==typeof space)indent=space;if(rep=replacer,replacer&&"function"!=typeof replacer&&("object"!=typeof replacer||"number"!=typeof replacer.length))throw new Error("JSON.stringify");return str("",{"":value})};if("function"!=typeof JSON.parse)JSON.parse=function(text,reviver){function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)if(Object.prototype.hasOwnProperty.call(value,k))if(v=walk(value,k),void 0!==v)value[k]=v;else delete value[k];return reviver.call(holder,key,value)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text))text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}};if("function"==typeof define&&define.amd)define("js/lib/json2",[],function(){return json(),JSON});else if("undefined"!=typeof window&&"undefined"==typeof ender)json(),window.JSON=JSON}(),!function(wndw){var module=function(_){var MultiTracker=function(opts){var options=opts||{};this.trackers={},this.logger=options.logger||Log({level:"error"})};MultiTracker.prototype.register=function(name,queue,type,parser){this.trackers[name]={queue:queue||[],type:type||"key-value",parse:parser}},MultiTracker.prototype.get=function(name){return this.trackers[name]},MultiTracker.prototype.push=function(){for(var trackings=arguments,k=0;k<trackings.length;k++){var tracking=_.isArray(trackings[k])?trackings[k]:[trackings[k]];for(var tracker in this.trackers){var trackEvent,i,handler;if("google"==this.trackers[tracker].type){if("pageview"==tracking[0])for(trackEvent=["_trackPageview"],i=1;i<tracking.length;i++)trackEvent.push(_.isString(tracking[i])?tracking[i]:JSON.stringify(tracking[i]))}else if("key-value"==this.trackers[tracker].type){for(var value=[],a=1;a<tracking.length;a++)if("function"==typeof tracking[a])handler=tracking[a];else value.push(_.isString(tracking[a])?tracking[a]:JSON.stringify(tracking[a]));if(value.length)trackEvent={key:tracking[0],value:value.join(".")};else trackEvent={key:tracking[0]}}else if("custom"==this.trackers[tracker].type&&this.trackers[tracker].parse)trackEvent=this.trackers[tracker].parse.apply(this,tracking);if(trackEvent)if(handler)this.trackers[tracker].queue.push(["send",trackEvent,handler]);else this.trackers[tracker].queue.push(trackEvent)}this.logger.info.apply(this.logger,tracking)}};var external=function(options){return new MultiTracker(options)};return external};if("function"==typeof define&&define.amd)define("js/lib/multitracker",["underscore","js/lib/json2"],function(_){return module(_)});else wndw.MultiTracker=module(wndw._)}(window),define("js/lib/metatags",["jquery","underscore"],function($,_){function nameToType(name){return nameToTypeMapping[name]||"name"}function select(name){return $("meta["+nameToType(name)+"='"+name+"']")}function stripTags(str){return(str||"").replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")}function setMetaTag(name,value){var $metaTag=select(name);if(0===$metaTag.length){var metaHtml="<meta "+nameToType(name)+'="'+name+'" />';$metaTag=$(metaHtml).appendTo("head")}$metaTag.attr("content",stripTags(value))}function set(name,value){if("object"==typeof name)_.each(name,function(val,key){setMetaTag(key,val)});else setMetaTag(name,value)}function share(title,image,description,url){set({"og:title":title,"og:url":url,"og:image":image,"og:site_name":title,"og:description":description,description:description,image:image})}function setDocumentDefault(){set({"og:title":document.title,"og:url":window.location.href,"og:site_name":document.title,name:document.title})}function clear(name){var $metaTag=select(name);$metaTag.remove()}var nameToTypeMapping={"og:title":"property","og:url":"property","og:image":"property","og:site_name":"property","og:description":"property",description:"name",image:"name"};return{set:set,setDocumentDefault:setDocumentDefault,clear:clear,share:share}}),define("js/lib/language",["jquery","underscore"],function($,_){function shortenLanguageCode(code){return(normalizeLanguageCode(code)||"").split("-")[0]}function languageCodeCSVtoLanguages(csv){var subtitlesLangs=_.compact((csv||"").split(/,\s*/g));return _.reduce(subtitlesLangs,function(memo,code){return memo[code]=languageCodeToName(code),memo},{})}function isRightToLeft(language){var rightToLeftLanguages=["ar","he"];return _.contains(rightToLeftLanguages,shortenLanguageCode(language))}function languageCodeToName(code){code=normalizeLanguageCode(code||"");var components=code.split("-"),language,languageMappingExists=_.any(components,function(c,i){var codeToTest=components.slice(0,components.length-i).join("-");return language=languageCodeToNameObj[codeToTest],!!language});return languageMappingExists?language:code}function normalizeLanguageCode(languageCode){var code=(languageCode||"").toLowerCase().replace(/_/g,"-");return code.split(/[;=,]/)[0]}function getLanguageCode(){var code;try{code=window.require.s.contexts._.config.config.i18n.locale}catch(e){code=normalizeLanguageCode($("#_require").attr("data-locale"))||"en"}return code}function latinizeText(string){return string.replace(/[^A-Za-z0-9\[\] ]/g,function(a){return LATIN_MAP[a]||a})}var languageCodeToNameObj={ab:"Abkhaz",aa:"Afar",af:"Afrikaans",ak:"Akan",sq:"Albanian",am:"Amharic",ar:"Arabic",an:"Aragonese",hy:"Armenian",as:"Assamese",av:"Avaric",ae:"Avestan",ay:"Aymara",az:"Azerbaijani",bm:"Bambara",ba:"Bashkir",eu:"Basque",be:"Belarusian",bn:"Bengali",bh:"Bihari",bi:"Bislama",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",ny:"Chichewa",zh:"Chinese","zh-cn":"Chinese (Simplified)","zh-tw":"Chinese (Traditional)",cv:"Chuvash",kw:"Cornish",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",dv:"Divehi",nl:"Dutch",dz:"Dzongkha",en:"English",eo:"Esperanto",et:"Estonian",ee:"Ewe",fo:"Faroese",fj:"Fijian",fi:"Finnish",fr:"French",ff:"Fula",gl:"Galician",ka:"Georgian",de:"German",el:"Greek",gn:"Guaraní",gu:"Gujarati",ht:"Haitian",ha:"Hausa",he:"Hebrew",hz:"Herero",hi:"Hindi",ho:"Hiri Motu",hu:"Hungarian",ia:"Interlingua",id:"Indonesian",ie:"Interlingue",ga:"Irish",ig:"Igbo",ik:"Inupiaq",io:"Ido",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jv:"Javanese",kl:"Kalaallisut",kn:"Kannada",kr:"Kanuri",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ki:"Kikuyu",rw:"Kinyarwanda",ky:"Kyrgyz",kv:"Komi",kg:"Kongo",ko:"Korean",ku:"Kurdish",kj:"Kwanyama",la:"Latin",lb:"Luxembourgish",lg:"Ganda",li:"Limburgish",ln:"Lingala",lo:"Lao",lt:"Lithuanian",lu:"Luba-Katanga",lv:"Latvian",gv:"Manx",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Māori",mr:"Marathi",mh:"Marshallese",mn:"Mongolian",na:"Nauru",nv:"Navajo",nb:"Norwegian Bokmål",nd:"North Ndebele",ne:"Nepali",ng:"Ndonga",nn:"Norwegian Nynorsk",no:"Norwegian",ii:"Nuosu",nr:"South Ndebele",oc:"Occitan",oj:"Ojibwe",cu:"Old Church Slavonic",om:"Oromo",or:"Oriya",os:"Ossetian",pa:"Panjabi",pi:"Pāli",fa:"Persian",pl:"Polish",ps:"Pashto",pt:"Portuguese","pt-br":"Portuguese (Brazilian)",qu:"Quechua",rm:"Romansh",rn:"Kirundi",ro:"Romanian",ru:"Russian",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",se:"Northern Sami",sm:"Samoan",sg:"Sango",sr:"Serbian",gd:"Gaelic",sn:"Shona",si:"Sinhala",sk:"Slovak",sl:"Slovene",so:"Somali",st:"Southern Sotho",es:"Spanish",su:"Sundanese",sw:"Swahili",ss:"Swati",sv:"Swedish",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",bo:"Tibetan",tk:"Turkmen",tl:"Tagalog",tn:"Tswana",to:"Tonga",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ty:"Tahitian",ug:"Uighur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volapük",wa:"Walloon",cy:"Welsh",wo:"Wolof",fy:"Western Frisian",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang",zu:"Zulu"},LATIN_MAP={A:"Á Ă Ắ Ặ Ằ Ẳ Ẵ Ǎ Â Ấ Ậ Ầ Ẩ Ẫ Ä Ǟ Ȧ Ǡ Ạ Ȁ À Ả Ȃ Ā Ą Å Ǻ Ḁ Ⱥ Ã Ɐ ᴀ",AA:"Ꜳ",AE:"Æ Ǽ Ǣ ᴁ",AO:"Ꜵ",AU:"Ꜷ",AV:"Ꜹ Ꜻ",AY:"Ꜽ",B:"Ḃ Ḅ Ɓ Ḇ Ƀ Ƃ ʙ ᴃ",C:"Ć Č Ç Ḉ Ĉ Ċ Ƈ Ȼ Ꜿ ᴄ",D:"Ď Ḑ Ḓ Ḋ Ḍ Ɗ Ḏ ǲ ǅ Đ Ƌ Ꝺ ᴅ",DZ:"Ǳ Ǆ",E:"É Ĕ Ě Ȩ Ḝ Ê Ế Ệ Ề Ể Ễ Ḙ Ë Ė Ẹ Ȅ È Ẻ Ȇ Ē Ḗ Ḕ Ę Ɇ Ẽ Ḛ Ɛ Ǝ ᴇ ⱻ",ET:"Ꝫ",F:"Ḟ Ƒ Ꝼ ꜰ",G:"Ǵ Ğ Ǧ Ģ Ĝ Ġ Ɠ Ḡ Ǥ Ᵹ ɢ ʛ",H:"Ḫ Ȟ Ḩ Ĥ Ⱨ Ḧ Ḣ Ḥ Ħ ʜ",I:"Í Ĭ Ǐ Î Ï Ḯ İ Ị Ȉ Ì Ỉ Ȋ Ī Į Ɨ Ĩ Ḭ ɪ",R:"Ꞃ Ŕ Ř Ŗ Ṙ Ṛ Ṝ Ȑ Ȓ Ṟ Ɍ Ɽ ʁ ʀ ᴙ ᴚ",S:"Ꞅ Ś Ṥ Š Ṧ Ş Ŝ Ș Ṡ Ṣ Ṩ ꜱ",T:"Ꞇ Ť Ţ Ṱ Ț Ⱦ Ṫ Ṭ Ƭ Ṯ Ʈ Ŧ ᴛ",IS:"Ꝭ",J:"Ĵ Ɉ ᴊ",K:"Ḱ Ǩ Ķ Ⱪ Ꝃ Ḳ Ƙ Ḵ Ꝁ Ꝅ ᴋ",L:"Ĺ Ƚ Ľ Ļ Ḽ Ḷ Ḹ Ⱡ Ꝉ Ḻ Ŀ Ɫ ǈ Ł Ꞁ ʟ ᴌ",LJ:"Ǉ",M:"Ḿ Ṁ Ṃ Ɱ Ɯ ᴍ",N:"Ń Ň Ņ Ṋ Ṅ Ṇ Ǹ Ɲ Ṉ Ƞ ǋ Ñ ɴ ᴎ",NJ:"Ǌ",O:"Ó Ŏ Ǒ Ô Ố Ộ Ồ Ổ Ỗ Ö Ȫ Ȯ Ȱ Ọ Ő Ȍ Ò Ỏ Ơ Ớ Ợ Ờ Ở Ỡ Ȏ Ꝋ Ꝍ Ō Ṓ Ṑ Ɵ Ǫ Ǭ Ø Ǿ Õ Ṍ Ṏ Ȭ Ɔ ᴏ ᴐ",OI:"Ƣ",OO:"Ꝏ",OU:"Ȣ ᴕ",P:"Ṕ Ṗ Ꝓ Ƥ Ꝕ Ᵽ Ꝑ ᴘ",Q:"Ꝙ Ꝗ",V:"Ʌ Ꝟ Ṿ Ʋ Ṽ ᴠ",TZ:"Ꜩ",U:"Ú Ŭ Ǔ Û Ṷ Ü Ǘ Ǚ Ǜ Ǖ Ṳ Ụ Ű Ȕ Ù Ủ Ư Ứ Ự Ừ Ử Ữ Ȗ Ū Ṻ Ų Ů Ũ Ṹ Ṵ ᴜ",VY:"Ꝡ",W:"Ẃ Ŵ Ẅ Ẇ Ẉ Ẁ Ⱳ ᴡ",X:"Ẍ Ẋ",Y:"Ý Ŷ Ÿ Ẏ Ỵ Ỳ Ƴ Ỷ Ỿ Ȳ Ɏ Ỹ ʏ",Z:"Ź Ž Ẑ Ⱬ Ż Ẓ Ȥ Ẕ Ƶ ᴢ",IJ:"Ĳ",OE:"Œ ɶ",a:"á ă ắ ặ ằ ẳ ẵ ǎ â ấ ậ ầ ẩ ẫ ä ǟ ȧ ǡ ạ ȁ à ả ȃ ā ą ᶏ ẚ å ǻ ḁ ⱥ ã ɐ ₐ",aa:"ꜳ",ae:"æ ǽ ǣ ᴂ",ao:"ꜵ",au:"ꜷ",av:"ꜹ ꜻ",ay:"ꜽ",b:"ḃ ḅ ɓ ḇ ᵬ ᶀ ƀ ƃ",o:"ɵ ó ŏ ǒ ô ố ộ ồ ổ ỗ ö ȫ ȯ ȱ ọ ő ȍ ò ỏ ơ ớ ợ ờ ở ỡ ȏ ꝋ ꝍ ⱺ ō ṓ ṑ ǫ ǭ ø ǿ õ ṍ ṏ ȭ ɔ ᶗ ᴑ ᴓ ₒ",c:"ć č ç ḉ ĉ ɕ ċ ƈ ȼ ↄ ꜿ",d:"ď ḑ ḓ ȡ ḋ ḍ ɗ ᶑ ḏ ᵭ ᶁ đ ɖ ƌ ꝺ",i:"ı í ĭ ǐ î ï ḯ ị ȉ ì ỉ ȋ ī į ᶖ ɨ ĩ ḭ ᴉ ᵢ",j:"ȷ ɟ ʄ ǰ ĵ ʝ ɉ ⱼ",dz:"ǳ ǆ",e:"é ĕ ě ȩ ḝ ê ế ệ ề ể ễ ḙ ë ė ẹ ȅ è ẻ ȇ ē ḗ ḕ ⱸ ę ᶒ ɇ ẽ ḛ ɛ ᶓ ɘ ǝ ₑ",et:"ꝫ",f:"ḟ ƒ ᵮ ᶂ ꝼ",g:"ǵ ğ ǧ ģ ĝ ġ ɠ ḡ ᶃ ǥ ᵹ ɡ ᵷ",h:"ḫ ȟ ḩ ĥ ⱨ ḧ ḣ ḥ ɦ ẖ ħ ɥ ʮ ʯ",hv:"ƕ",r:"ꞃ ŕ ř ŗ ṙ ṛ ṝ ȑ ɾ ᵳ ȓ ṟ ɼ ᵲ ᶉ ɍ ɽ ɿ ɹ ɻ ɺ ⱹ ᵣ",s:"ꞅ ſ ẜ ẛ ẝ ś ṥ š ṧ ş ŝ ș ṡ ṣ ṩ ʂ ᵴ ᶊ ȿ",t:"ꞇ ť ţ ṱ ț ȶ ẗ ⱦ ṫ ṭ ƭ ṯ ᵵ ƫ ʈ ŧ ʇ",is:"ꝭ",k:"ḱ ǩ ķ ⱪ ꝃ ḳ ƙ ḵ ᶄ ꝁ ꝅ ʞ",l:"ĺ ƚ ɬ ľ ļ ḽ ȴ ḷ ḹ ⱡ ꝉ ḻ ŀ ɫ ᶅ ɭ ł ꞁ",lj:"ǉ",m:"ḿ ṁ ṃ ɱ ᵯ ᶆ ɯ ɰ",n:"ń ň ņ ṋ ȵ ṅ ṇ ǹ ɲ ṉ ƞ ᵰ ᶇ ɳ ñ",nj:"ǌ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ṕ ṗ ꝓ ƥ ᵱ ᶈ ꝕ ᵽ ꝑ",q:"ꝙ ʠ ɋ ꝗ",u:"ᴝ ú ŭ ǔ û ṷ ü ǘ ǚ ǜ ǖ ṳ ụ ű ȕ ù ủ ư ứ ự ừ ử ữ ȗ ū ṻ ų ᶙ ů ũ ṹ ṵ ᵤ",th:"ᵺ",oe:"ᴔ œ",v:"ʌ ⱴ ꝟ ṿ ʋ ᶌ ⱱ ṽ ᵥ",w:"ʍ ẃ ŵ ẅ ẇ ẉ ẁ ⱳ ẘ",y:"ʎ ý ŷ ÿ ẏ ỵ ỳ ƴ ỷ ỿ ȳ ẙ ɏ ỹ",tz:"ꜩ",ue:"ᵫ",um:"ꝸ",vy:"ꝡ",x:"ẍ ẋ ᶍ ₓ",z:"ź ž ẑ ʑ ⱬ ż ẓ ȥ ẕ ᵶ ᶎ ʐ ƶ ɀ",ff:"ﬀ",ffi:"ﬃ",ffl:"ﬄ",fi:"ﬁ",fl:"ﬂ",ij:"ĳ",st:"ﬆ"};return LATIN_MAP=_.chain(LATIN_MAP).map(function(value,key){return _.map(value.split(" "),function(v){return[v,key]})}).flatten(!0).reduce(function(memo,pair){return memo[pair[0]]=pair[1],memo},{}).value(),{shortenLanguageCode:shortenLanguageCode,languageCodeCSVtoLanguages:languageCodeCSVtoLanguages,languageCodeToName:languageCodeToName,latinizeText:latinizeText,isRightToLeft:isRightToLeft,normalizeLanguageCode:normalizeLanguageCode,getLanguageCode:getLanguageCode}}),function(undefined){function padToken(func,count){return function(a){return leftZeroFill(func.call(this,a),count)}}function ordinalizeToken(func,period){return function(a){return this.lang().ordinal(func.call(this,a),period)}}function Language(){}function Moment(config){checkOverflow(config),extend(this,config)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._input=duration,this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+36e5*hours,this._days=+days+7*weeks,this._months=+months+12*years,this._data={},this._bubble()}function extend(a,b){for(var i in b)if(b.hasOwnProperty(i))a[i]=b[i];if(b.hasOwnProperty("toString"))a.toString=b.toString;if(b.hasOwnProperty("valueOf"))a.valueOf=b.valueOf;return a}function absRound(number){if(0>number)return Math.ceil(number);else return Math.floor(number)}function leftZeroFill(number,targetLength){for(var output=number+"";output.length<targetLength;)output="0"+output;return output}function addOrSubtractDurationFromMoment(mom,duration,isAdding,ignoreUpdateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months,minutes,hours;if(milliseconds)mom._d.setTime(+mom._d+milliseconds*isAdding);if(days||months)minutes=mom.minute(),hours=mom.hour();if(days)mom.date(mom.date()+days*isAdding);if(months)mom.month(mom.month()+months*isAdding);if(milliseconds&&!ignoreUpdateOffset)moment.updateOffset(mom);if(days||months)mom.minute(minutes),mom.hour(hours)}function isArray(input){return"[object Array]"===Object.prototype.toString.call(input)}function isDate(input){return"[object Date]"===Object.prototype.toString.call(input)}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;len>i;i++)if(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))diffs++;return diffs+lengthDiff}function normalizeUnits(units){return units?unitAliases[units]||units.toLowerCase().replace(/(.)s$/,"$1"):units}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop,index;for(prop in inputObject)if(inputObject.hasOwnProperty(prop))if(normalizedProp=normalizeUnits(prop))normalizedInput[normalizedProp]=inputObject[prop];return normalizedInput}function makeList(field){var count,setter;if(0===field.indexOf("week"))count=7,setter="day";else if(0===field.indexOf("month"))count=12,setter="month";else return;moment[field]=function(format,index){var i,getter,method=moment.fn._lang[field],results=[];if("number"==typeof format)index=format,format=undefined;if(getter=function(i){var m=moment().utc().set(setter,i);return method.call(moment.fn._lang,m,format||"")},index)return getter(index);else{for(i=0;count>i;i++)results.push(getter(i));return results}}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(0!==coercedNumber&&isFinite(coercedNumber))if(coercedNumber>=0)value=Math.floor(coercedNumber);else value=Math.ceil(coercedNumber);return value}function daysInMonth(year,month){return moment.utc([year,month+1,0]).date()}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function checkOverflow(m){var overflow;if(m._a&&-2===m._pf.overflow){if(overflow=m._a[MONTH]<0||m._a[MONTH]>11?MONTH:m._a[DATE]<1||m._a[DATE]>daysInMonth(m._a[YEAR],m._a[MONTH])?DATE:m._a[HOUR]<0||m._a[HOUR]>23?HOUR:m._a[MINUTE]<0||m._a[MINUTE]>59?MINUTE:m._a[SECOND]<0||m._a[SECOND]>59?SECOND:m._a[MILLISECOND]<0||m._a[MILLISECOND]>999?MILLISECOND:-1,m._pf._overflowDayOfYear&&(YEAR>overflow||overflow>DATE))overflow=DATE;m._pf.overflow=overflow}}function initializeParsingFlags(config){config._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,userInvalidated:!1}}function isValid(m){if(null==m._isValid)if(m._isValid=!isNaN(m._d.getTime())&&m._pf.overflow<0&&!m._pf.empty&&!m._pf.invalidMonth&&!m._pf.nullInput&&!m._pf.userInvalidated,m._strict)m._isValid=m._isValid&&0===m._pf.charsLeftOver&&0===m._pf.unusedTokens.length;return m._isValid}function normalizeLanguage(key){return key?key.toLowerCase().replace("_","-"):key}function loadLang(key,values){if(values.abbr=key,!languages[key])languages[key]=new Language;
return languages[key].set(values),languages[key]}function unloadLang(key){delete languages[key]}function getLangDefinition(key){var i=0,j,lang,next,split,get=function(k){if(!languages[k]&&hasModule)try{require("./lang/"+k)}catch(e){}return languages[k]};if(!key)return moment.fn._lang;if(!isArray(key)){if(lang=get(key))return lang;key=[key]}for(;i<key.length;){for(split=normalizeLanguage(key[i]).split("-"),j=split.length,next=normalizeLanguage(key[i+1]),next=next?next.split("-"):null;j>0;){if(lang=get(split.slice(0,j).join("-")))return lang;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return moment.fn._lang}function removeFormattingTokens(input){if(input.match(/\[[\s\S]/))return input.replace(/^\[|\]$/g,"");return input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;length>i;i++)if(formatTokenFunctions[array[i]])array[i]=formatTokenFunctions[array[i]];else array[i]=removeFormattingTokens(array[i]);return function(mom){var output="";for(i=0;length>i;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}function formatMoment(m,format){if(!m.isValid())return m.lang().invalidDate();if(format=expandFormat(format,m.lang()),!formatFunctions[format])formatFunctions[format]=makeFormatFunction(format);return formatFunctions[format](m)}function expandFormat(format,lang){function replaceLongDateFormatTokens(input){return lang.longDateFormat(input)||input}var i=5;for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}function getParseRegexForToken(token,config){var a;switch(token){case"DDDD":return parseTokenThreeDigits;case"YYYY":return parseTokenFourDigits;case"YYYYY":return parseTokenSixDigits;case"S":case"SS":case"SSS":case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return parseTokenWord;case"a":case"A":return getLangDefinition(config._l)._meridiemParse;case"X":return parseTokenTimestampMs;case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return parseTokenOneOrTwoDigits;default:return a=new RegExp(regexpEscape(unescapeFormat(token.replace("\\","")),"i"))}}function timezoneMinutesFromString(string){var tzchunk=(parseTokenTimezone.exec(string)||[])[0],parts=(tzchunk+"").match(parseTimezoneChunker)||["-",0,0],minutes=+(60*parts[1])+toInt(parts[2]);return"+"===parts[0]?-minutes:minutes}function addTimeToArrayFromToken(token,input,config){var a,datePartArray=config._a;switch(token){case"M":case"MM":if(null!=input)datePartArray[MONTH]=toInt(input)-1;break;case"MMM":case"MMMM":if(a=getLangDefinition(config._l).monthsParse(input),null!=a)datePartArray[MONTH]=a;else config._pf.invalidMonth=input;break;case"D":case"DD":if(null!=input)datePartArray[DATE]=toInt(input);break;case"DDD":case"DDDD":if(null!=input)config._dayOfYear=toInt(input);break;case"YY":datePartArray[YEAR]=toInt(input)+(toInt(input)>68?1900:2e3);break;case"YYYY":case"YYYYY":datePartArray[YEAR]=toInt(input);break;case"a":case"A":config._isPm=getLangDefinition(config._l).isPM(input);break;case"H":case"HH":case"h":case"hh":datePartArray[HOUR]=toInt(input);break;case"m":case"mm":datePartArray[MINUTE]=toInt(input);break;case"s":case"ss":datePartArray[SECOND]=toInt(input);break;case"S":case"SS":case"SSS":datePartArray[MILLISECOND]=toInt(1e3*("0."+input));break;case"X":config._d=new Date(1e3*parseFloat(input));break;case"Z":case"ZZ":config._useUTC=!0,config._tzm=timezoneMinutesFromString(input)}}function dateFromConfig(config){var i,date,input=[],currentDate,yearToUse;if(config._d)return;if(currentDate=currentDateArray(config),config._dayOfYear){if(yearToUse=null==config._a[YEAR]?currentDate[YEAR]:config._a[YEAR],config._dayOfYear>(isLeapYear(yearToUse)?364:365))config._pf._overflowDayOfYear=!0;date=makeUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()}for(i=0;3>i&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;7>i;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];input[HOUR]+=toInt((config._tzm||0)/60),input[MINUTE]+=toInt((config._tzm||0)%60),config._d=(config._useUTC?makeUTCDate:makeDate).apply(null,input)}function dateFromObject(config){var normalizedInput;if(config._d)return;normalizedInput=normalizeObjectUnits(config._i),config._a=[normalizedInput.year,normalizedInput.month,normalizedInput.day,normalizedInput.hour,normalizedInput.minute,normalizedInput.second,normalizedInput.millisecond],dateFromConfig(config)}function currentDateArray(config){var now=new Date;if(config._useUTC)return[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()];else return[now.getFullYear(),now.getMonth(),now.getDate()]}function makeDateFromStringAndFormat(config){config._a=[],config._pf.empty=!0;var lang=getLangDefinition(config._l),string=""+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,lang).match(formattingTokens)||[],i=0;i<tokens.length;i++){if(token=tokens[i],parsedInput=(getParseRegexForToken(token,config).exec(string)||[])[0]){if(skipped=string.substr(0,string.indexOf(parsedInput)),skipped.length>0)config._pf.unusedInput.push(skipped);string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length}if(formatTokenFunctions[token]){if(parsedInput)config._pf.empty=!1;else config._pf.unusedTokens.push(token);addTimeToArrayFromToken(token,parsedInput,config)}else if(config._strict&&!parsedInput)config._pf.unusedTokens.push(token)}if(config._pf.charsLeftOver=stringLength-totalParsedInputLength,string.length>0)config._pf.unusedInput.push(string);if(config._isPm&&config._a[HOUR]<12)config._a[HOUR]+=12;if(config._isPm===!1&&12===config._a[HOUR])config._a[HOUR]=0;dateFromConfig(config),checkOverflow(config)}function unescapeFormat(s){return s.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4})}function regexpEscape(s){return s.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}function makeDateFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat=1e3,i,currentScore;for(i=0;i<config._f.length;i++){if(currentScore=0,tempConfig=extend({},config),initializeParsingFlags(tempConfig),tempConfig._f=config._f[i],makeDateFromStringAndFormat(tempConfig),!isValid(tempConfig))continue;if(currentScore+=tempConfig._pf.charsLeftOver,currentScore+=10*tempConfig._pf.unusedTokens.length,tempConfig._pf.score=currentScore,scoreToBeat>currentScore)scoreToBeat=currentScore,bestMoment=tempConfig}extend(config,bestMoment||tempConfig)}function makeDateFromString(config){var i,string=config._i,match=isoRegex.exec(string);if(match){for(config._f="YYYY-MM-DD"+(match[2]||" "),i=0;4>i;i++)if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break}if(parseTokenTimezone.exec(string))config._f+=" Z";makeDateFromStringAndFormat(config)}else config._d=new Date(string)}function makeDateFromInput(config){var input=config._i,matched=aspNetJsonRegex.exec(input);if(input===undefined)config._d=new Date;else if(matched)config._d=new Date(+matched[1]);else if("string"==typeof input)makeDateFromString(config);else if(isArray(input))config._a=input.slice(0),dateFromConfig(config);else if(isDate(input))config._d=new Date(+input);else if("object"==typeof input)dateFromObject(config);else config._d=new Date(input)}function makeDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(1970>y)date.setFullYear(y);return date}function makeUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(1970>y)date.setUTCFullYear(y);return date}function substituteTimeAgo(string,number,withoutSuffix,isFuture,lang){return lang.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime(milliseconds,withoutSuffix,lang){var seconds=round(Math.abs(milliseconds)/1e3),minutes=round(seconds/60),hours=round(minutes/60),days=round(hours/24),years=round(days/365),args=45>seconds&&["s",seconds]||1===minutes&&["m"]||45>minutes&&["mm",minutes]||1===hours&&["h"]||22>hours&&["hh",hours]||1===days&&["d"]||25>=days&&["dd",days]||45>=days&&["M"]||345>days&&["MM",round(days/30)]||1===years&&["y"]||["yy",years];return args[2]=withoutSuffix,args[3]=milliseconds>0,args[4]=lang,substituteTimeAgo.apply({},args)}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day(),adjustedMoment;if(daysToDayOfWeek>end)daysToDayOfWeek-=7;if(end-7>daysToDayOfWeek)daysToDayOfWeek+=7;return adjustedMoment=moment(mom).add("d",daysToDayOfWeek),{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function makeMoment(config){var input=config._i,format=config._f;if("undefined"==typeof config._pf)initializeParsingFlags(config);if(null===input)return moment.invalid({nullInput:!0});if("string"==typeof input)config._i=input=getLangDefinition().preparse(input);if(moment.isMoment(input))config=extend({},input),config._d=new Date(+input._d);else if(format)if(isArray(format))makeDateFromStringAndArray(config);else makeDateFromStringAndFormat(config);else makeDateFromInput(config);return new Moment(config)}function makeGetterAndSetter(name,key){moment.fn[name]=moment.fn[name+"s"]=function(input){var utc=this._isUTC?"UTC":"";if(null!=input)return this._d["set"+utc+key](input),moment.updateOffset(this),this;else return this._d["get"+utc+key]()}}function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}function makeDurationAsGetter(name,factor){moment.duration.fn["as"+name]=function(){return+this/factor}}function makeGlobal(){if("undefined"==typeof ender)this.moment=moment}for(var moment,VERSION="2.2.1",round=Math.round,i,YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,languages={},hasModule="undefined"!=typeof module&&module.exports,aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,aspNetTimeSpanJsonRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,isoDurationRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{1,4}/,parseTokenSixDigits=/[+\-]?\d{1,6}/,parseTokenWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/i,parseTokenT=/T/i,parseTokenTimestampMs=/[\+\-]?\d+(\.\d{1,3})?/,isoRegex=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?$/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoTimes=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,proxyGettersAndSetters="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),unitMillisecondFactors={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},unitAliases={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",W:"isoweek",M:"month",y:"year"},formatFunctions={},ordinalizeTokens="DDD w W M D d".split(" "),paddedTokens="M D H h m s w W".split(" "),formatTokenFunctions={M:function(){return this.month()+1},MMM:function(format){return this.lang().monthsShort(this,format)},MMMM:function(format){return this.lang().months(this,format)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(format){return this.lang().weekdaysMin(this,format)},ddd:function(format){return this.lang().weekdaysShort(this,format)},dddd:function(format){return this.lang().weekdays(this,format)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},gg:function(){return leftZeroFill(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return leftZeroFill(this.weekYear(),5)},GG:function(){return leftZeroFill(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return leftZeroFill(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return toInt(this.milliseconds()/100)},SS:function(){return leftZeroFill(toInt(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";if(0>a)a=-a,b="-";return b+leftZeroFill(toInt(a/60),2)+":"+leftZeroFill(toInt(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";if(0>a)a=-a,b="-";return b+leftZeroFill(toInt(10*a/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},lists=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ordinalizeTokens.length;)i=ordinalizeTokens.pop(),formatTokenFunctions[i+"o"]=ordinalizeToken(formatTokenFunctions[i],i);for(;paddedTokens.length;)i=paddedTokens.pop(),formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2);for(formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3),extend(Language.prototype,{set:function(config){var prop,i;for(i in config)if(prop=config[i],"function"==typeof prop)this[i]=prop;else this["_"+i]=prop},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(m){return this._months[m.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(m){return this._monthsShort[m.month()]},monthsParse:function(monthName){var i,mom,regex;if(!this._monthsParse)this._monthsParse=[];for(i=0;12>i;i++){if(!this._monthsParse[i])mom=moment.utc([2e3,i]),regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i");if(this._monthsParse[i].test(monthName))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(m){return this._weekdays[m.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(m){return this._weekdaysShort[m.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(m){return this._weekdaysMin[m.day()]},weekdaysParse:function(weekdayName){var i,mom,regex;if(!this._weekdaysParse)this._weekdaysParse=[];for(i=0;7>i;i++){if(!this._weekdaysParse[i])mom=moment([2e3,1]).day(i),regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i");if(this._weekdaysParse[i].test(weekdayName))return i}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(key){var output=this._longDateFormat[key];if(!output&&this._longDateFormat[key.toUpperCase()])output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key]=output;return output},isPM:function(input){return"p"===(input+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(hours,minutes,isLower){if(hours>11)return isLower?"pm":"PM";else return isLower?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(key,mom){var output=this._calendar[key];return"function"==typeof output?output.apply(mom):output},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return"function"==typeof output?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},pastFuture:function(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return"function"==typeof format?format(output):format.replace(/%s/i,output)},ordinal:function(number){return this._ordinal.replace("%d",number)},_ordinal:"%d",preparse:function(string){return string},postformat:function(string){return string},week:function(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),moment=function(input,format,lang,strict){if("boolean"==typeof lang)strict=lang,lang=undefined;return makeMoment({_i:input,_f:format,_l:lang,_strict:strict,_isUTC:!1})},moment.utc=function(input,format,lang,strict){var m;if("boolean"==typeof lang)strict=lang,lang=undefined;return m=makeMoment({_useUTC:!0,_isUTC:!0,_l:lang,_i:input,_f:format,_strict:strict}).utc()},moment.unix=function(input){return moment(1e3*input)},moment.duration=function(input,key){var isDuration=moment.isDuration(input),isNumber="number"==typeof input,duration=isDuration?input._input:isNumber?{}:input,match=null,sign,ret,parseIso,timeEmpty,dateTimeEmpty;if(isNumber)if(key)duration[key]=input;else duration.milliseconds=input;else if(match=aspNetTimeSpanJsonRegex.exec(input))sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign};else if(match=isoDurationRegex.exec(input))sign="-"===match[1]?-1:1,parseIso=function(inp){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign},duration={y:parseIso(match[2]),M:parseIso(match[3]),d:parseIso(match[4]),h:parseIso(match[5]),m:parseIso(match[6]),s:parseIso(match[7]),w:parseIso(match[8])};if(ret=new Duration(duration),isDuration&&input.hasOwnProperty("_lang"))ret._lang=input._lang;return ret},moment.version=VERSION,moment.defaultFormat=isoFormat,moment.updateOffset=function(){},moment.lang=function(key,values){var r;if(!key)return moment.fn._lang._abbr;if(values)loadLang(normalizeLanguage(key),values);else if(null===values)unloadLang(key),key="en";else if(!languages[key])getLangDefinition(key);return r=moment.duration.fn._lang=moment.fn._lang=getLangDefinition(key),r._abbr},moment.langData=function(key){if(key&&key._lang&&key._lang._abbr)key=key._lang._abbr;return getLangDefinition(key)},moment.isMoment=function(obj){return obj instanceof Moment},moment.isDuration=function(obj){return obj instanceof Duration},i=lists.length-1;i>=0;--i)makeList(lists[i]);for(moment.normalizeUnits=function(units){return normalizeUnits(units)},moment.invalid=function(flags){var m=moment.utc(0/0);if(null!=flags)extend(m._pf,flags);else m._pf.userInvalidated=!0;return m},moment.parseZone=function(input){return moment(input).parseZone()},extend(moment.fn=Moment.prototype,{clone:function(){return moment(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return formatMoment(moment(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var m=this;return[m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds()]},isValid:function(){return isValid(this)},isDSTShifted:function(){if(this._a)return this.isValid()&&compareArrays(this._a,(this._isUTC?moment.utc(this._a):moment(this._a)).toArray())>0;return!1},parsingFlags:function(){return extend({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(inputString){var output=formatMoment(this,inputString||moment.defaultFormat);return this.lang().postformat(output)},add:function(input,val){var dur;if("string"==typeof input)dur=moment.duration(+val,input);else dur=moment.duration(input,val);return addOrSubtractDurationFromMoment(this,dur,1),this},subtract:function(input,val){var dur;if("string"==typeof input)dur=moment.duration(+val,input);else dur=moment.duration(input,val);return addOrSubtractDurationFromMoment(this,dur,-1),this},diff:function(input,units,asFloat){var that=this._isUTC?moment(input).zone(this._offset||0):moment(input).local(),zoneDiff=6e4*(this.zone()-that.zone()),diff,output;if(units=normalizeUnits(units),"year"===units||"month"===units){if(diff=432e5*(this.daysInMonth()+that.daysInMonth()),output=12*(this.year()-that.year())+(this.month()-that.month()),output+=(this-moment(this).startOf("month")-(that-moment(that).startOf("month")))/diff,output-=6e4*(this.zone()-moment(this).startOf("month").zone()-(that.zone()-moment(that).startOf("month").zone()))/diff,"year"===units)output/=12}else diff=this-that,output="second"===units?diff/1e3:"minute"===units?diff/6e4:"hour"===units?diff/36e5:"day"===units?(diff-zoneDiff)/864e5:"week"===units?(diff-zoneDiff)/6048e5:diff;return asFloat?output:absRound(output)},from:function(time,withoutSuffix){return moment.duration(this.diff(time)).lang(this.lang()._abbr).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(){var diff=this.diff(moment().zone(this.zone()).startOf("day"),"days",!0),format=-6>diff?"sameElse":-1>diff?"lastWeek":0>diff?"lastDay":1>diff?"sameDay":2>diff?"nextDay":7>diff?"nextWeek":"sameElse";return this.format(this.lang().calendar(format,this))},isLeapYear:function(){return isLeapYear(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=input){if("string"==typeof input)if(input=this.lang().weekdaysParse(input),"number"!=typeof input)return this;return this.add({d:input-day})}else return day},month:function(input){var utc=this._isUTC?"UTC":"",dayOfMonth;if(null!=input){if("string"==typeof input)if(input=this.lang().monthsParse(input),"number"!=typeof input)return this;return dayOfMonth=this.date(),this.date(1),this._d["set"+utc+"Month"](input),this.date(Math.min(dayOfMonth,this.daysInMonth())),moment.updateOffset(this),this}else return this._d["get"+utc+"Month"]()},startOf:function(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoweek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if("week"===units)this.weekday(0);else if("isoweek"===units)this.isoWeekday(1);return this},endOf:function(units){return units=normalizeUnits(units),this.startOf(units).add("isoweek"===units?"week":units,1).subtract("ms",1)},isAfter:function(input,units){return units="undefined"!=typeof units?units:"millisecond",+this.clone().startOf(units)>+moment(input).startOf(units)},isBefore:function(input,units){return units="undefined"!=typeof units?units:"millisecond",+this.clone().startOf(units)<+moment(input).startOf(units)},isSame:function(input,units){return units="undefined"!=typeof units?units:"millisecond",+this.clone().startOf(units)===+moment(input).startOf(units)},min:function(other){return other=moment.apply(null,arguments),this>other?this:other},max:function(other){return other=moment.apply(null,arguments),other>this?this:other},zone:function(input){var offset=this._offset||0;if(null!=input){if("string"==typeof input)input=timezoneMinutesFromString(input);if(Math.abs(input)<16)input=60*input;if(this._offset=input,this._isUTC=!0,offset!==input)addOrSubtractDurationFromMoment(this,moment.duration(offset-input,"m"),1,!0)}else return this._isUTC?offset:this._d.getTimezoneOffset();return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){if("string"==typeof this._i)this.zone(this._i);return this},hasAlignedHourOffset:function(input){if(!input)input=0;else input=moment(input).zone();return(this.zone()-input)%60===0},daysInMonth:function(){return daysInMonth(this.year(),this.month())},dayOfYear:function(input){var dayOfYear=round((moment(this).startOf("day")-moment(this).startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add("d",input-dayOfYear)},weekYear:function(input){var year=weekOfYear(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==input?year:this.add("y",input-year)},isoWeekYear:function(input){var year=weekOfYear(this,1,4).year;return null==input?year:this.add("y",input-year)},week:function(input){var week=this.lang().week(this);return null==input?week:this.add("d",7*(input-week))},isoWeek:function(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add("d",7*(input-week))},weekday:function(input){var weekday=(this.day()+7-this.lang()._week.dow)%7;return null==input?weekday:this.add("d",input-weekday)},isoWeekday:function(input){return null==input?this.day()||7:this.day(this.day()%7?input:input-7)},get:function(units){return units=normalizeUnits(units),this[units.toLowerCase()]()},set:function(units,value){return units=normalizeUnits(units),this[units.toLowerCase()](value),this},lang:function(key){if(key===undefined)return this._lang;else return this._lang=getLangDefinition(key),this}}),i=0;i<proxyGettersAndSetters.length;i++)makeGetterAndSetter(proxyGettersAndSetters[i].toLowerCase().replace(/s$/,""),proxyGettersAndSetters[i]);makeGetterAndSetter("year","FullYear"),moment.fn.days=moment.fn.day,moment.fn.months=moment.fn.month,moment.fn.weeks=moment.fn.week,moment.fn.isoWeeks=moment.fn.isoWeek,moment.fn.toJSON=moment.fn.toISOString,extend(moment.duration.fn=Duration.prototype,{_bubble:function(){var milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data,seconds,minutes,hours,years;data.milliseconds=milliseconds%1e3,seconds=absRound(milliseconds/1e3),data.seconds=seconds%60,minutes=absRound(seconds/60),data.minutes=minutes%60,hours=absRound(minutes/60),data.hours=hours%24,days+=absRound(hours/24),data.days=days%30,months+=absRound(days/30),data.months=months%12,years=absRound(months/12),data.years=years},weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)},humanize:function(withSuffix){var difference=+this,output=relativeTime(difference,!withSuffix,this.lang());if(withSuffix)output=this.lang().pastFuture(difference,output);return this.lang().postformat(output)},add:function(input,val){var dur=moment.duration(input,val);return this._milliseconds+=dur._milliseconds,this._days+=dur._days,this._months+=dur._months,this._bubble(),this},subtract:function(input,val){var dur=moment.duration(input,val);return this._milliseconds-=dur._milliseconds,this._days-=dur._days,this._months-=dur._months,this._bubble(),this},get:function(units){return units=normalizeUnits(units),this[units.toLowerCase()+"s"]()},as:function(units){return units=normalizeUnits(units),this["as"+units.charAt(0).toUpperCase()+units.slice(1)+"s"]()},lang:moment.fn.lang,toIsoString:function(){var years=Math.abs(this.years()),months=Math.abs(this.months()),days=Math.abs(this.days()),hours=Math.abs(this.hours()),minutes=Math.abs(this.minutes()),seconds=Math.abs(this.seconds()+this.milliseconds()/1e3);if(!this.asSeconds())return"P0D";return(this.asSeconds()<0?"-":"")+"P"+(years?years+"Y":"")+(months?months+"M":"")+(days?days+"D":"")+(hours||minutes||seconds?"T":"")+(hours?hours+"H":"")+(minutes?minutes+"M":"")+(seconds?seconds+"S":"")}});for(i in unitMillisecondFactors)if(unitMillisecondFactors.hasOwnProperty(i))makeDurationAsGetter(i,unitMillisecondFactors[i]),makeDurationGetter(i.toLowerCase());if(makeDurationAsGetter("Weeks",6048e5),moment.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},moment.lang("en",{ordinal:function(number){var b=number%10,output=1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return number+output}}),hasModule)module.exports=moment,makeGlobal();else if("function"==typeof define&&define.amd)define("js/lib/moment",[],function(){return moment});else makeGlobal()}.call(this),define("js/lib/nls/moment.lang",{es:!0,fr:!0,pt:!0,ru:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),define("js/core/coursera",["js/core/origami","js/core/config","jquery","underscore","backbone","js/lib/supports","js/lib/third-parties","js/lib/log","js/lib/multitracker","js/lib/metatags","js/lib/language","js/lib/moment","i18n!js/lib/nls/moment.lang"],function(Origami,config,$,_,Backbone,supports,thirdparty,Logger,MultiTracker,metatags,language,moment){moment.lang(language.getLanguageCode());var Coursera=new Origami("#origami");if(Coursera.config=config,Coursera.supports=supports,Coursera.log=Logger({level:config.log}),window.onerror=function(message,url,lineNum){if(url=url||window.location.href,void 0===lineNum||null==lineNum)return;if(message.target&&message.type)message=message.type;if(!message.indexOf)message="Non-string, non-event error: "+typeof message;var errorDescrip={message:message,script:url,line:lineNum,url:document.URL};Coursera.multitracker.push(["page.error.javascript",errorDescrip])},"production"==config.environment)requirejs.onError=function(Error){Coursera.multitracker.push(["page.error.requirejs",{url:location.href,message:Error.message,type:Error.requireType,modules:Error.requireModules}]),Coursera.log.error(Error);var match=Error.message.match(/context:\s*(.*)\s*\n/);if(match&&"_"==match[1]){var message="<div>oooops! something unexpected happened, please <a href='"+location.href+"'>refresh</a> your browser</div>",$screen=$("<div>").addClass("fullscreen");Coursera.message.add($(message).addClass("message")),$screen.appendTo("body").show()}};return Coursera.multitracker=MultiTracker({logger:Coursera.log}),Coursera.multitracker.register("204",[]),Coursera.multitracker.register("ga",window._gaq=[],"google"),$(document).ready(function(){if(/staging|production/.test(Coursera.config.environment))requirejs.config({context:"204js",paths:{_204:"https://eventing.coursera.org/204.min"}})(["_204"],function(_204){if(!_204)return;for(var parts=location.host.split(".");parts.length>2;)parts.shift();Coursera.multitracker.get("204").queue.push(["domain","."+parts.join(".")]),Coursera.multitracker.get("204").queue=_204.batch(Coursera.multitracker.get("204").queue)}),Coursera.multitracker.get("ga").queue.push(["_setAccount","UA-28377374-1"],["_setDomainName","coursera.org"],["_setAllowLinker",!0],["_trackPageview"]),thirdparty.loadScript(("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",function(){Coursera.multitracker.get("ga").queue=window._gaq});var routerEvent="0.9.2"==Backbone.VERSION?"all":"route";Coursera.router.on(routerEvent,function(){var currentURL=Coursera.config.dir.home+Backbone.history.getFragment();metatags.share("Coursera","http://s3.amazonaws.com/coursera/media/Coursera_Computer_Narrow.png","Take free online classes from 80+ top universities and organizations. Coursera is a social entrepreneurship company partnering with Stanford University, Yale University, Princeton University and others around the world to offer courses online for anyone to take, for free. We believe in connecting people to a great education so that anyone around the world can learn without limits.",currentURL),Coursera.multitracker.push(["pageview",currentURL])
});var $window=$(window),scrollTracker=function(){var source=_.compact((window.location.pathname||"").split("/")).join("-")||"homepage";Coursera.multitracker.push(["user.scroll."+source,$window.scrollTop()])};$window.scroll(_.throttle(scrollTracker,2e3))}),Coursera}),!function(wndw){var cookie=function($){var cookie=function(key,value,options){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(value))||null===value||void 0===value)){if(options=$.extend({},options),null===value||void 0===value)options.expires=-1;if(!options.path)options.path="/";if("number"==typeof options.expires){var days=options.expires,t=options.expires=new Date;t.setDate(t.getDate()+days)}return value=String(value),wndw.document.cookie=[encodeURIComponent(key),"=",options.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}options=value||{};for(var decode=options.raw?function(s){return s}:decodeURIComponent,pairs=wndw.document.cookie.split("; "),i=0,pair;pairs[i];i++)if(pair=pairs[i].split("="),decode(pair[0])===key)return decode(pair[1]||"");return null};return{get:cookie,set:cookie,clear:function(key,options){for(var cookies=wndw.document.cookie.split("; "),i=0;i<cookies.length;i++){var equals=cookies[i].indexOf("="),name=equals>-1?cookies[i].substr(0,equals):cookies[i];if(!key||key==name)cookie(name,null,options)}}}};if("function"==typeof define&&define.amd)define("js/lib/cookie",["jquery"],function($){return cookie($)});else if("undefined"!=typeof wndw&&"undefined"==typeof ender)wndw.Cookie=cookie(wndw.$)}(window),!function(wndw){var globalActiveAjaxCount=0,api=function($,_,cookie,Backbone){var _private={defaults:{type:"normal","csrf.token":"X-CSRFToken","csrf.cookie":"csrftoken","csrf.path":null,"csrf.domain":null,"csrf2.token_header":"X-CSRF2-Token","csrf2.cookie_name_header":"X-CSRF2-Cookie","csrf2.cookie_prefix":"csrf2_token_","emulate.patch":!0,"emulate.put":!1,"emulate.delete":!1,"custom.header.name":null,"custom.header.value":null},csrfGet:function(){var token=cookie.get(this.options["csrf.cookie"]);if(token)return token;else return _private.csrfSet.call(this,_private.csrfMake())},csrfClear:function(){cookie.clear(this.options["csrf.cookie"],{secure:this.options["csrf.secure"],path:this.options["csrf.path"],domain:this.options["csrf.domain"]})},csrfSet:function(token){return cookie.set(this.options["csrf.cookie"],token,{secure:this.options["csrf.secure"],path:this.options["csrf.path"],domain:this.options["csrf.domain"],expires:new Date((new Date).getTime()+6e4)}),token},csrfMake:function(length,chars){var output=[];chars=chars||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",length=length||24;for(var i=0;length>i;i++)output.push(chars[Math.floor(Math.random()*chars.length)]);return output.join("")},csrf2SetUp:function(ajaxOptions){if("GET"==ajaxOptions.type)return{};var cookieName=this.options["csrf2.cookie_prefix"]+_private.csrfMake(8),token=_private.csrfMake();cookie.set(cookieName,token,{secure:this.options["csrf.secure"],path:this.options["csrf.path"],domain:this.options["csrf.domain"],expires:new Date((new Date).getTime()+6e4)}),ajaxOptions.headers[this.options["csrf2.cookie_name_header"]]=cookieName,ajaxOptions.headers[this.options["csrf2.token_header"]]=token},csrf2TearDown:function(ajaxHeaders){var cookieName=ajaxHeaders[this.options["csrf2.cookie_name_header"]];if(cookieName)cookie.clear(cookieName,{secure:this.options["csrf.secure"],path:this.options["csrf.path"],domain:this.options["csrf.domain"]})},invoke:function(path,_options){_options=_.extend({},_options);var options=_options||{},url;if(0!==path.indexOf("http"))url=this.root+path;else url=path;this.trigger("before",url,options);var params="GET"==options.type?options.data:null,remove=function(e,item){this.remove(item.options.id)},message=options.message||{},codes=message.codes?_.keys(message.codes):[],asyncMessage=this.options.message,that=this;if(delete options.message,"GET"!=options.type&&_.isUndefined(options.processData)&&"rest"==this.options.type)options.contentType="application/json; charset=utf-8",options.processData=!1,options.data=JSON.stringify(options.data);options.beforeSend=function(){globalActiveAjaxCount++};var jqXHR=$.ajax(url,options);if(asyncMessage){if(message.waiting){var waitID=asyncMessage.add($("<div>").append(message.waiting).addClass("waiting"),{delay:100});jqXHR.always(function(jqXHR,textStatus){asyncMessage.remove(waitID)})}if(message.success||message.codes&&_.min(codes)<300)jqXHR.done(function(jqXHR,textStatus){if(message.codes&&message.codes[jqXHR.status])asyncMessage.add($("<div>").append(message.codes[jqXHR.status]).addClass("success"),{timeout:500});else if(message.success)asyncMessage.add($("<div>").append(message.success).addClass("success"),{timeout:500})});if(message.error||message.timeout||message.codes&&_.max(codes)>=300)jqXHR.fail(function(jqXHR,textStatus){if(message.timeout&&"timeout"==textStatus)asyncMessage.add($("<div>").append(message.timeout).addClass("error"),{events:{click:remove}});else if(message.codes&&message.codes[jqXHR.status])asyncMessage.add($("<div>").append(message.codes[jsXHR.status]).addClass("error"),{events:{click:remove}});else if(message.error)asyncMessage.add($("<div>").append(message.error).addClass("error"),{events:{click:remove}})})}var start=(new Date).getTime();return that.trigger("send",{xhr:jqXHR,url:url}),jqXHR.always(function(){if(0===--globalActiveAjaxCount)_private.csrfClear.call(that);_private.csrf2TearDown.call(that,options.headers||{}),that.trigger("always",{xhr:jqXHR,url:url,params:params,timing:(new Date).getTime()-start})}),jqXHR.fail(function(){that.trigger("fail",{xhr:jqXHR,url:url,params:params})}),jqXHR},restify:function(method,_options){var options=_options||{};switch(options.data=options.data||{},options.headers=options.headers||{},method){case"POST":options.type="POST";break;case"PATCH":if(this.options["emulate.patch"])options.type="POST",options.headers["X-HTTP-Method-Override"]="PATCH";else options.type="PATCH";break;case"PUT":if(this.options["emulate.put"])options.type="POST",options.headers["X-HTTP-Method-Override"]="PUT";else options.type="PUT";break;case"DELETE":if(this.options["emulate.delete"])options.type="POST",options.headers["X-HTTP-Method-Override"]="DELETE";else options.type="DELETE";break;default:options.type="GET"}if("GET"!=options.type)options.headers[this.options["csrf.token"]]=_private.csrfGet.call(this),_private.csrf2SetUp.call(this,options);if(this.options["custom.header.name"])options.headers[this.options["custom.header.name"]]=this.options["custom.header.value"];return options}},api=function(root,options){this.root=root,this.options=_.extend({},_private.defaults,options)};return api.prototype.customize=function(options){return this.options=_.extend(this.options,options),this},api.prototype.get=function(path,options){return _private.invoke.call(this,path,_private.restify.call(this,"GET",options))},api.prototype.patch=function(path,options){return _private.invoke.call(this,path,_private.restify.call(this,"PATCH",options))},api.prototype["delete"]=function(path,options){return _private.invoke.call(this,path,_private.restify.call(this,"DELETE",options))},api.prototype.post=function(path,options){return _private.invoke.call(this,path,_private.restify.call(this,"POST",options))},api.prototype.put=function(path,options){return _private.invoke.call(this,path,_private.restify.call(this,"PUT",options))},_.extend(api.prototype,Backbone.Events),function(root,options){return new api(root,options)}};if("function"==typeof define&&define.amd)define("js/lib/api",["jquery","underscore","js/lib/cookie","backbone","js/lib/json2"],function($,_,Cookie,Backbone){return api($,_,Cookie,Backbone)});else wndw.API=api(wndw.$,wndw._,wndw.Cookie,wndw.Backbone)}(window),define("pages/home/api",["js/core/coursera","js/lib/api"],function(Coursera,API){var homeApi=API(Coursera.config.url.api,{message:Coursera.message,"csrf.secure":!Coursera.config.debug});return homeApi.on("always",function(api){if(api.xhr.status>=400)Coursera.multitracker.push(["api.error."+api.xhr.status,{timing:api.timing,url:api.url,params:api.params,status:api.xhr.status,response:api.xhr.responseText}]);else Coursera.multitracker.push(["api.ok."+api.xhr.status,{timing:api.timing,url:api.url,params:api.params,status:api.xhr.status,cf_age:api.xhr.getResponseHeader("Age"),cf_hit:api.xhr.getResponseHeader("X-Cache")}])}),homeApi}),define("js/lib/asyncMessages",["jquery","underscore","js/lib/cookie","backbone"],function($,_,cookie,Backbone){var _private={defaults:{selector:null},defaults_item:{timeout:0},item_remove:function(item){var index=_.indexOf(this.stack,item.options.id);if(-1!=index){this.stack.splice(index,1);for(var _event in item.options.events)item.$ele.off(_event+".asyncMessage");item.$ele.remove()}delete this.items[item.options.id]},item_show:function(item){var that=this;if(this.stack.length){var previous=this.items[this.stack[0]];if(previous)previous.$ele.remove()}if(this.$container.append(item.$ele),this.trigger("showing",item.$ele),this.$container.show(),this.stack.unshift(item.options.id),this.trigger("show",item),item.options.timeout)setTimeout(function(){that.trigger("hiding",item),that.remove(item.options.id),that.trigger("hide",item)},item.options.timeout);for(var _event in item.options.events)item.$ele.on(_event+".asyncMessage",function(e){item.options.events[_event].call(that,e,item)})}},asyncMessage=function(ele,options){this.options=$.extend({},_private.defaults,options),this.$ele=$(ele||$("<div>").appendTo("body")),this.$container=this.options.selector?this.$ele.find(this.options.selector):this.$ele,this.stack=[],this.items={}};return asyncMessage.prototype.add=function(ele,_options){var $item=$(ele),options=$.extend({},_private.defaults_item,_options),that=this;if(options.id=options.id||_.uniqueId(),_.has(this.items,options.id))return options.id;this.items[options.id]={$ele:$item,options:options,timer:null};var show=function(){if(!that.stack.length)that.trigger("opening");if(_private.item_show.call(that,that.items[options.id]),1==that.stack.length)that.trigger("open")};if(options.delay)this.items[options.id].timer=setTimeout(show,options.delay);else show();return options.id},asyncMessage.prototype.remove=function(id){var item=this.items[id];if(item)if(clearTimeout(item.timer),1==this.stack.length)this.trigger("closing"),_private.item_remove.call(this,item),this.$container.hide(),this.trigger("close");else{if(this.stack.length){var toShow=this.items[this.stack.shift()];if(toShow)_private.item_show.call(this,toShow)}_private.item_remove.call(this,item)}},_.extend(asyncMessage.prototype,Backbone.Events),{create:function(ele,options){return new asyncMessage(ele,options)}}}),define("js/json/constants",[],function(){return{openCourses:["childnutrition"],flexjoin_course_ids:[970641,972058,971830,971921,971981,972197,972476,972475,972296,972242,972189,972750,5e6,5000001],student_stories_topics:{88:[{text:"I've begun using Python for data analysis. My Certificate not only gave me commitmment to complete the course but also something to highlight in school applications.",student:"Timothy W.",title:"Business Analyst at Boeing"},{text:"The course material made me a better data analyst. I was able to get a promotion and raise within weeks of completing my first course. I am just thrilled!",student:"Corey K.",title:"IT & Support Professional"},{text:"I needed to upgrade my programming skills to cope with the ever-increasing software-defined infrastructure in the industry. I know the Verified Certificate will help my career.",student:"Bernard T.",title:"Hardware Engineer at Cisco"},{text:"I took this course to better prepare myself for upcoming projects at work. The Certificate helps to verify my effort. It reassures my employer that I’m capable to take on Python-related tasks.",student:"Andy L.",title:"Systems Administrator - Florida Museum of History"}],168:[{text:"The course improved my knowledge in the field, and the Verified Certificate gives me a lot more credibility.",student:"Clayton S.",title:"Business Development Manager"},{text:"I'm using what I learned in the course to develop new products in my company, one of the oldest and most respected newspapers in Brazil.",student:"Nelson P.",title:"CIO from Brazil"},{text:"After the course, I was inspired to write the business plan for my start-up. My certificate proves what I’ve accomplished!",student:"Florian A.",title:"Account Manager from Switzerland"},{text:"By showing my Verified Certificate to my employer, I was able to get support to turn my idea into a new project.",student:"Sebastian S.",title:"Programmer from Costa Rica"}],747:[{text:"This course helped me identify a target market and understand aspects of marketing that I hadn't been aware of, and for that I am grateful. I'll use the certificate I received from Coursera as a seal of approval for my work.",student:"Bartholomew N.",title:"Director of Fundraising at WQED in Pittsburgh, PA"},{text:"The course validated the analytics functions we’ve instituted within our company. And the Verified Certificate validates my skill set.",student:"Michael D.",title:"Director of Sales from Portland"},{text:"Learning is a never-ending process. Now I know what needs to get done before I start rebranding my company.",student:"Saundra L.",title:"CEO from Miami, Florida"},{text:"My employers were happy to hear that I'd completed the course. The Verified Certificate shows my dedication to performing better at my current position.",student:"Stephanie N.",title:"Marketing Communications Manager from Newark, Delaware"}]}}}),define("js/lib/util",["jquery","underscore","js/lib/moment","js/lib/cookie","js/core/coursera"],function($,_,moment,cookie,Coursera){function handleAPIError(err,requestUrl){if(404==err)Coursera.router.trigger("error",404,requestUrl,{message:"this page does not exist"});else if(500==err)Coursera.router.trigger("error",500,requestUrl,{message:"backend server has seen an error"});else if(401==err)location.href=Coursera.config.url.accounts+"signin?post_redirect="+page;else if(403==err)Coursera.router.trigger("error",403,requestUrl,{message:"you do not have permission to view this page"})}function handleRedirect(redirect){if(!redirect)return;var parse=/^(?:https?:\/\/)?((?:[\d\w\-]+?\.)?[\w\d-]+(?:\.[\w]+)?)(\/.*|$)/,parts=parse.exec(redirect),host=(parts&&parts.length?parts[1]:"").split("."),hostm=parse.exec(location.host)[1].split(".");if(host&&host.length&&host[host.length-1]==hostm[hostm.length-1]&&host[host.length-2]==hostm[hostm.length-2])location.href=redirect;else if(/^\/.*/.test(redirect))location.href=redirect;else Coursera.router.navigate(Coursera.config.dir.home,!0)}function redirectToAccounts(page){location.href=Coursera.config.url.accounts+page}function createAccountsUrl(page,params){if(void 0!==params){if(void 0!==params.r)params.post_redirect=params.r,delete params.r;var urlParams=$.param(params);return Coursera.config.url.accounts+page+"?"+urlParams.split("+").join("%20")}return Coursera.config.url.accounts+page}function scrollToInternalLink($dom,section){var $target=$dom.find('[data-section="'+section+'"]');if(!$target.length)return;var newTop=$target.position().top,scrollDiff=Math.abs($(document).scrollTop()-newTop);if(scrollDiff>1e3)$("html,body").scrollTop(newTop);else $("html,body").animate({scrollTop:newTop});if(Coursera.multitracker)Coursera.multitracker.push([document.title.split(" |")[0]+" "+section,"Open"])}function setupInternalLinks(view){view.bind("view:appended",function(){scrollToInternalLink(view.$el,this.options.section)}),view.$el.on("click","a.internal-page",function(e){if(!e.ctrlKey&&!e.metaKey){var linkPath=e.currentTarget.pathname,section=linkPath.substr(linkPath.lastIndexOf("/")+1);if(view.$("[data-section="+section+"]").length)e.preventDefault(),scrollToInternalLink(view.$el,section),Coursera.router.navigateTo(linkPath,{trigger:!1})}})}function getToday(){return new Date}function prettyJoin(items){if(items)if(items.length>1)return items.slice(0,-1).join(", ")+" and "+items[items.length-1];else return items.toString()}function addCommas(numberStr){return numberStr.replace(/(^|[^\w.])(\d{4,})/g,function($0,$1,$2){return $1+$2.replace(/\d(?=(?:\d\d\d)+(?!\d))/g,"$&,")})}function makeHttps(url){return url.replace(/^http:\/\//i,"https://")}function getUrlParam(url,name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&]"+name+"=([^&#]*)",regex=new RegExp(regexS),results=regex.exec(unescape(url));if(null===results)return null;else return results[1]}function changeUrlParam(uri,key,value){var re=new RegExp("([?&])"+key+"=[^&]*(&|$)","i");if(separator=-1!==uri.indexOf("?")?"&":"?",uri.match(re))return uri.replace(re,"$1"+key+"="+value+"$2");else return uri+separator+key+"="+value}function getUrlPath(url){return(url||"").replace(Coursera.config.url.base,"/")}function setupFormSave($form,xhrOptions,autoSave){function changeButtonText(message){var messageText=$saveButton.attr("data-"+message+"-message");$saveButton.html(messageText)}function resetButton(){var $requiredCheckboxes=$form.find('input[type="checkbox"]').filter("[required]");if($requiredCheckboxes.length&&!$requiredCheckboxes.is(":checked"))return void $saveButton.attr("disabled","disabled");$saveButton.removeAttr("disabled"),changeButtonText("default")}function sendXHR(){lastFormData=$form.serialize();var type=(xhrOptions.type||"POST").toLowerCase();if(Coursera.api[type])Coursera.api[type](xhrOptions.url,{data:xhrOptions.data||$form.serialize()||null,headers:xhrOptions.headers||{},dataType:xhrOptions.dataType||"json"}).done(function(responseJSON,textStatus,xhr){if(xhrOptions.success)xhrOptions.success(responseJSON,textStatus,xhr);changeButtonText("success"),$saveStatus.html("(Saved!)"),renderAllErrors($form,null)}).fail(function(xhr,textStatus,errorThrown){var data=$.parseJSON(xhr.responseText);if(xhrOptions.error)xhrOptions.error(xhr,textStatus,errorThrown);resetButton(),$form.find("input").off(".validate"),renderAllErrors($form,data)})}function triggerSave(){if($form.serialize()!=lastFormData)$saveButton.trigger("click"),$saveStatus.html("(Saving...)")}xhrOptions=xhrOptions||{};var lastFormData=$form.serialize();xhrOptions.url=xhrOptions.url||$form.attr("action"),xhrOptions.type=xhrOptions.type||$form.attr("type");var $saveButton=$form.find('button[type="submit"]'),$saveStatus=$($saveButton.attr("data-update"));$form.find("input, select").on("change",resetButton),$form.find("input, textarea").on("keyup",resetButton);var $allInputs=$form.find("input, select");$allInputs.each(function(ind,elem){if(ind!=$allInputs.length-1)$(elem).on("keypress",function(event){return 13!=event.keyCode})});var shouldValidateForm="true"==$form.attr("data-validate");if(shouldValidateForm)$form.find("input").each(function(){var $field=$(this);if("checkbox"==$field.attr("type"))return;$field.on("keyup.validate",function(){if(!validateField($field))renderFieldErrors($field,null)}),$field.on("blur.validate paste.validate",function(){renderFieldErrors($field,validateField($field))})});if($saveButton.on("click",function(event){if(event.preventDefault(),!shouldValidateForm||shouldValidateForm&&!validateForm($form))changeButtonText("inflight"),$saveButton.attr("disabled","disabled"),sendXHR(xhrOptions)}),autoSave){var triggerSaveD=_.debounce(triggerSave,1e3);$form.find("input, select").on("change.autosave",triggerSaveD),$form.find("input, textarea").on("keyup.autosave",triggerSaveD),$form.find("input, select, blur").on("blur.autosave paste.autosave",triggerSave)}}function validateForm($form){var foundError=null;if($form.find("input").each(function(){var $field=$(this),fieldError=validateField($field);if(renderFieldErrors($field,fieldError),foundError=foundError||fieldError,fieldError&&!foundError&&0===$("input:focus").length)$field.focus()}),foundError){var invalidMessage=$form.attr("data-invalid-message")||"Uh-oh, please check the form!";renderFormError($form,invalidMessage),$form.find('button[type="submit"]').animate({opacity:.4},100).animate({"margin-left":"-=10"},100).animate({"margin-left":"+=20"},100).animate({"margin-left":"-=20"},100).animate({"margin-left":"+=10"},100).animate({opacity:1},100)}return foundError}function validateField($field){var fieldType=$field.attr("type"),fieldValue=$field.val(),fieldPattern=$field.attr("pattern"),error=null,regEx=null;if("email"==fieldType)regEx=new RegExp(/[a-zA-Z0-9!#$%&'*+\/=?\^_`{|}~\-]+(?:\.[a-zA-Z0-9!#$%&'*+\/=?\^_`{|}~\-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?/);else if(fieldPattern)regEx=new RegExp(fieldPattern);if(regEx)if(!regEx.test(fieldValue))error=$field.attr("data-invalid-message")||"Invalid field";if($field.attr("required")){if("text"==fieldType&&0===fieldValue.length)error="This field is required.";if("checkbox"==fieldType&&!$field.is(":checked"))error="⬆ Please check this!"}return error}function renderAllErrors($form,data){var $errorsDom;if($form.find(".form-errors").remove(),$form.find(".error .help-inline").remove(),$form.find(".error").removeClass("error"),!data)return;if(data.error_message)renderFormError($form,data.error_message);if(data.field_errors)for(var fieldName in data.field_errors){var $fieldDom=$form.find('*[name="'+fieldName+'"]');renderFieldErrors($fieldDom,data.field_errors[fieldName]),$fieldDom.focus()}}function renderFormError($form,error){if($form.find(".form-errors").remove(),$errorsDom=$("<span></span>").addClass("form-errors").attr("role","alert").attr("aria-live","assertive").html(error),$form.find(".actions").length)$form.find(".actions").children(":last").after($errorsDom);else if($form.find(".modal-footer").length)$form.find(".modal-footer").children(":last").after($errorsDom);else if($form.find('button[type="submit"]'))$form.find('button[type="submit"]').after($errorsDom)}function renderFieldErrors($fieldDom,fieldErrors){var $parentGroup=$fieldDom.parents(".control-mini-group").length&&$fieldDom.parents(".control-mini-group")||$fieldDom.parents(".control-group");if($parentGroup.removeClass("error"),$parentGroup.find(".help-inline.error").remove(),fieldErrors){var errorId=($fieldDom.attr("id")||"")+"-form-field-error-"+(new Date).getTime(),describedBy=($fieldDom.attr("aria-describedby")||"").split(",");if(describedBy.push(errorId),$fieldDom.attr("aria-describedby",describedBy.join(",")),$errorsDom=$("<span></span>").addClass("help-inline error").attr("role","alert").attr("aria-live","assertive").attr("id",errorId),fieldErrors instanceof Array)for(var i=0;i<fieldErrors.length;i++)$errorsDom.append("<span>"+fieldErrors[i]+"</span>");else $errorsDom.append(fieldErrors);if($parentGroup.addClass("error"),"checkbox"==$fieldDom.attr("type"))$parentGroup.find(".controls").append($errorsDom);else $fieldDom.after($errorsDom)}}function isMobileDevice(){var ua=navigator.userAgent||navigator.vendor||window.opera;return/iPhone|iPod|iPad|Android|BlackBerry|Opera Mini|IEMobile/.test(ua)}function isIOS(){var ua=navigator.userAgent||navigator.vendor||window.opera;return/iPhone|iPod|iPad/.test(ua)}function isTouchSupported(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function isCanvasSupported(){var elem=document.createElement("canvas");return!(!elem.getContext||!elem.getContext("2d"))}function getViewportHeight(){var height=window.innerHeight,mode=document.compatMode;if(mode||!$.support.boxModel)height="CSS1Compat"==mode?document.documentElement.clientHeight:document.body.clientHeight;return height}function inView($elem,nearThreshold){nearThreshold=nearThreshold||0;var viewportHeight=getViewportHeight(),scrollTop=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,startRange=scrollTop-nearThreshold,endRange=scrollTop+viewportHeight+nearThreshold,elemTop=$elem.offset().top,elemHeight=$elem.height(),elemBottom=elemTop+elemHeight;return endRange>elemBottom&&elemBottom>startRange}function countCS(courses){var numCS=0,csCats=["cs-programming","cs-systems","cs-theory","cs-ai","cs","fmgb"];return courses.each(function(course){if(course.get("topic")&&_.intersection(course.get("topic").get("category-ids"),csCats).length>0)numCS++}),numCS}function setupPromos(){var $promos=$("[data-promo-id]");$promos.each(function(){var $promo=$(this);if($promo.find(".close").length){var promoId=$promo.attr("data-promo-id");if(cookie.get(promoId))$promo.hide();else $promo.show(),$promo.find(".close").on("click",function(){$promo.hide(),cookie.set(promoId,"closed")})}})}function prettifyTime($dom){var dateTime=moment.unix($dom.attr("datetime"));if(Math.abs(moment().diff(dateTime))<6e4)$dom.text("just now");else $dom.text(dateTime.fromNow());$dom.attr("title",dateTime.format("dddd, MMMM Do YYYY, h:mm a Z"))}function prettifyUrl(url){return url=url.replace(/^.*:\/\//,""),url=url.replace(/\/$/,"")}function extractFirstSubdir(url){var urlRegex=/(.*\/).*\//;return urlRegex.exec(url)[1]}function linkifyText(string){if(string)string=string.replace(/((https?\:\/\/)|(www\.))(\S+)(\w{2,4})(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,function(url){var full_url=url;if(!full_url.match("^https?://"))full_url="http://"+full_url;return'<a target="_blank" href="'+full_url+'">'+url+"</a>"});return string}function rgbToHsl(r,g,b){r/=255,g/=255,b/=255;var max=Math.max(r,g,b),min=Math.min(r,g,b),h,s,l=(max+min)/2;if(max==min)h=s=0;else{var d=max-min;switch(s=l>.5?d/(2-max-min):d/(max+min),max){case r:h=(g-b)/d+(b>g?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return[h,s,l]}function hslToRgb(h,s,l){var r,g,b;if(0===s)r=g=b=l;else{var hue2rgb=function(p,q,t){if(0>t)t+=1;if(t>1)t-=1;if(1/6>t)return p+6*(q-p)*t;if(.5>t)return q;if(2/3>t)return p+(q-p)*(2/3-t)*6;return p},q=.5>l?l*(1+s):l+s-l*s,p=2*l-q;r=hue2rgb(p,q,h+1/3),g=hue2rgb(p,q,h),b=hue2rgb(p,q,h-1/3)}return[Math.round(255*r),Math.round(255*g),Math.round(255*b)]}function rgbToHsv(r,g,b){r/=255,g/=255,b/=255;var max=Math.max(r,g,b),min=Math.min(r,g,b),h,s,v=max,d=max-min;if(s=0===max?0:d/max,max==min)h=0;else{switch(max){case r:h=(g-b)/d+(b>g?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return[h,s,v]}function hsvToRgb(h,s,v){var r,g,b,i=Math.floor(6*h),f=6*h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s);switch(i%6){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;case 5:r=v,g=p,b=q}return[Math.round(255*r),Math.round(255*g),Math.round(255*b)]}function sortedGroupBy(list,groupByIter,sortByIter){var groups=_.groupBy(list,groupByIter);return groups=_.sortBy(groups,sortByIter)}function splitIntoGroups(list,nGroups){var groups=[];if(!list)return groups;for(var groupSize=Math.ceil(list.length/nGroups),i=0;i<list.length;i+=groupSize)groups.push(list.slice(i,i+groupSize));return groups}function verticalCenterEl($container,$el){$el.css("position","relative"),$el.css("top",$container.height()/2-$el.height()/2)}function concatName(nameObj){var full_name=nameObj.first_name;if(nameObj.middle_name)full_name=full_name+" "+nameObj.middle_name;if(nameObj.last_name)full_name=full_name+" "+nameObj.last_name;return full_name}function removeDiacritics(str){for(var i=0;i<defaultDiacriticsRemovalMap.length;i++)str=str.replace(defaultDiacriticsRemovalMap[i].letters,defaultDiacriticsRemovalMap[i].base);return str}function getCourseName(home_link){if(!_.isString(home_link))return null;var regexp=new RegExp("^https://([^.]+)\\.[^.]+\\.org/(.*)$"),match=regexp.exec(home_link);if(null===match)return null;else return{courseDomain:match[1],courseName:match[2]}}function isChina(){var subdomain=window.location.hostname.split(".")[0];return["cn","staging-china"].indexOf(subdomain)>=0}function styleRightToLeft($el){$el.find("[data-user-generated]").attr("dir","auto"),$el.find("[data-user-generated] code").attr("dir","ltr"),$el.find("[data-user-generated] > ol,ul").attr("dir","rtl"),$el.find("[data-user-generated] a,li").wrapInner("<bdi></bdi>")}function makeCheckCertFn(filename){return function(universityShortName){var deferred=$.Deferred();if(universityShortName=universityShortName||"_generic",universityShortName in ST_CERT_CACHE){if(ST_CERT_CACHE[universityShortName])deferred.resolve("https://s3.amazonaws.com/coursera/universities/"+universityShortName+"/"+filename);else deferred.resolve("https://s3.amazonaws.com/coursera/universities/_generic/"+filename);return deferred}var img=new Image;return img.onload=function(){ST_CERT_CACHE[universityShortName]=!0,deferred.resolve("https://s3.amazonaws.com/coursera/universities/"+universityShortName+"/"+filename)},img.onerror=function(){ST_CERT_CACHE[universityShortName]=!1,deferred.resolve("https://s3.amazonaws.com/coursera/universities/_generic/"+filename)},img.src="https://s3.amazonaws.com/coursera/universities/"+universityShortName+"/"+filename,deferred}}var defaultDiacriticsRemovalMap=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],ST_CERT_CACHE={_generic:!0};
return{handleAPIError:handleAPIError,handleRedirect:handleRedirect,redirectToAccounts:redirectToAccounts,createAccountsUrl:createAccountsUrl,setupInternalLinks:setupInternalLinks,setupFormSave:setupFormSave,renderAllErrors:renderAllErrors,renderFieldErrors:renderFieldErrors,isMobileDevice:isMobileDevice,isIOS:isIOS,isTouchSupported:isTouchSupported,isCanvasSupported:isCanvasSupported,scrollToInternalLink:scrollToInternalLink,makeHttps:makeHttps,getToday:getToday,prettyJoin:prettyJoin,getUrlParam:getUrlParam,changeUrlParam:changeUrlParam,getUrlPath:getUrlPath,inView:inView,countCS:countCS,setupPromos:setupPromos,prettifyTime:prettifyTime,prettifyUrl:prettifyUrl,addCommas:addCommas,extractFirstSubdir:extractFirstSubdir,linkifyText:linkifyText,rgbToHsl:rgbToHsl,hslToRgb:hslToRgb,rgbToHsv:rgbToHsv,hsvToRgb:hsvToRgb,verticalCenterEl:verticalCenterEl,sortedGroupBy:sortedGroupBy,splitIntoGroups:splitIntoGroups,concatName:concatName,removeDiacritics:removeDiacritics,getCourseName:getCourseName,isChina:isChina,styleRightToLeft:styleRightToLeft,getSTCertCorner:makeCheckCertFn("signature-cert-corner.png"),getSTCertIcon:makeCheckCertFn("signature-cert-icon.png")}}),define("js/models/course",["require","jquery","backbone","underscore","js/core/coursera","js/lib/util","js/lib/moment"],function(require,$,Backbone,_,Coursera,util,moment){var MomentCache={moments:{},today:null,formats:{},fromNows:{},diffs:{},getMomentFor:function(arr){var key=arr.join("/");if(!MomentCache.moments[key]){var momentFor=moment(arr);if(momentFor.isValid())MomentCache.moments[key]=momentFor}return MomentCache.moments[key]},getFormatted:function(momentObj,formatString){var key=momentObj.valueOf()+"|"+formatString;if(!MomentCache.formats[key])MomentCache.formats[key]=momentObj.format(formatString);return MomentCache.formats[key]},getDiffFromToday:function(momentObj){if(!MomentCache.today)MomentCache.today=moment(util.getToday());var key=momentObj.valueOf();if(!MomentCache.diffs[key])MomentCache.diffs[key]=momentObj.diff(MomentCache.today,"days");return MomentCache.diffs[key]},getFromNow:function(momentObj,withoutSuffix){if(!MomentCache.today)MomentCache.today=moment(util.getToday());var key=momentObj.valueOf();if(!MomentCache.fromNows[key])MomentCache.fromNows[key]=momentObj.from(MomentCache.today,withoutSuffix);return MomentCache.fromNows[key]}},course=Backbone.Model.extend({defaults:{},initialize:function(){this.bind("change",this.updateComputed,this),this.updateComputed()},updateComputed:function(){var Topic=require("js/models/topic");if(this.get("topic")&&!(this.get("topic")instanceof Topic))this.set("topic",new Topic(this.get("topic")),{silent:!0});if(this.get("topic")&&this.get("topic").get("self_service_course_id")==this.get("id"))this.set("self_study",!0,{silent:!0});if(this.get("topic"))this.set("optin_link",Coursera.config.dir.home+"signature/course/"+this.get("topic").get("short_name")+"/"+this.get("id"),{silent:!0});if(this.get("home_link"))this.set("class_link",this.get("home_link")+"auth/auth_redirector?type=login&subtype=normal",{silent:!0});if(this.get("signature_track_price")){var realPrice=this.get("signature_track_price");this.set("signature_track_price_display",Number(realPrice).toFixed(2),{silent:!0});var regularPrice=this.get("signature_track_regular_price");this.set("signature_track_regular_price",Number(regularPrice).toFixed(2),{silent:!0});var discountAmount=regularPrice-realPrice;if(discountAmount>0)this.set("signature_track_price_discount",Number(discountAmount).toFixed(2),{silent:!0})}this.set("duration",this.get("duration_string"),{silent:!0})},getsSignatureTrackCert:function(){var courseRecord=this.get("record"),certsReady=this.certificateIsReady(),isSigTrack=this.get("eligible_for_signature_track")&&courseRecord&&courseRecord.signature_track;if(certsReady&&isSigTrack){var normalOrDistinction=!_.isUndefined(courseRecord.achievement_level)&&courseRecord.achievement_level&&courseRecord.achievement_level>0,passedACE=courseRecord.passed_ace&&courseRecord.is_enrolled_for_proctored_exam;return courseRecord.authenticated_overall&&(normalOrDistinction||passedACE)}else return!1},getsSOA:function(){return this.certificateIsReady()&&this.get("record")&&!_.isNull(this.get("record").achievement_level)&&!_.isUndefined(this.get("record").achievement_level)&&this.get("record").achievement_level>0},hasGrade:function(){return this.getsSOA()||this.getsSignatureTrackCert()},hasStatement:function(){return this.certificateIsReady()&&this.get("record")&&this.get("record").achievement_level>0},isEligibleForTrack:function(){return this.get("eligible_for_signature_track")},getDurationWeeks:function(){var durationWeeks=1e3;if(this.get("duration_string")){var durationStr=this.get("duration_string"),durationWeeksNum=parseInt(durationStr.split(" ")[0],10);if(!isNaN(durationWeeksNum)&&durationWeeksNum>=1)durationWeeks=durationWeeksNum}return durationWeeks},hasPartialDate:function(){return!(!this.get("start_year")||!this.get("start_month")||this.get("start_day"))},hasFullDate:function(){return!!(this.get("start_year")&&this.get("start_month")&&this.get("start_day"))},getStartDateMoment:function(){var startDateM=null;if(this.hasPartialDate())startDateM=MomentCache.getMomentFor([this.get("start_year"),this.get("start_month")-1]);else if(this.hasFullDate())startDateM=MomentCache.getMomentFor([this.get("start_year"),this.get("start_month")-1,this.get("start_day"),0,0,0]);return startDateM},getEndDateMoment:function(){var endDateM=null;return endDateM=moment(this.getStartDateMoment()).add("weeks",this.getDurationWeeks())},getStartTime:function(){var startTime=41007456e5,startDateM=this.getStartDateMoment();if(startDateM)startTime=startDateM.valueOf();return startTime},getStartDisplay:function(){var startDisplay="Date to be announced";if(this.get("self_study"))startDisplay="Self study";else if(this.hasPartialDate())startDisplay=MomentCache.getFormatted(this.getStartDateMoment(),"MMMM YYYY");else if(this.hasFullDate())startDisplay=MomentCache.getFormatted(this.getStartDateMoment(),"MMM Do YYYY");return startDisplay},getStartDisplayShort:function(){var startDisplayShort="Date TBA";if(this.get("self_study"))startDisplayShort="Self study";else if(this.hasPartialDate())startDisplayShort=MomentCache.getFormatted(this.getStartDateMoment(),"MMM YYYY");else if(this.hasFullDate())startDisplayShort=MomentCache.getFormatted(this.getStartDateMoment(),"MMM Do");return startDisplayShort},getEndTime:function(){var startTimeM=this.getStartDateMoment(),endDateM=moment(this.getStartDateMoment()).add("weeks",this.getDurationWeeks());return endDateM.valueOf()},getEndDisplay:function(){var startDisplay="Date to be announced";if(this.get("self_study"))startDisplay="Self study";else if(this.hasPartialDate())startDisplay=MomentCache.getFormatted(this.getEndDateMoment(),"MMMM YYYY");else if(this.hasFullDate())startDisplay=MomentCache.getFormatted(this.getEndDateMoment(),"MMM Do YYYY");return startDisplay},getEndDisplayShort:function(fmt){if(!fmt)fmt="MMM Do";var endDisplayShort="";if(this.hasFullDate()&&1e3!=this.getDurationWeeks()){var endDateM=moment(this.getStartDateMoment()).add("weeks",this.getDurationWeeks());endDisplayShort=MomentCache.getFormatted(endDateM,fmt)}return endDisplayShort},getStartDiff:function(){var startDiff=99999999,startDateM=this.getStartDateMoment();if(startDateM)startDiff=MomentCache.getDiffFromToday(startDateM);return startDiff},getEndDiff:function(){var endDiff=99999999,endDateM=this.getEndDateMoment();if(endDateM)endDiff=MomentCache.getDiffFromToday(endDateM);return endDiff},getStartPercent:function(){var startPercent=0,startDateM=this.getStartDateMoment(),durationWeeks=this.getDurationWeeks(),startStatus=this.getStartStatus(),startDiff;if(startDateM)startDiff=MomentCache.getDiffFromToday(startDateM),startPercent=Math.min(Math.abs(Math.ceil(startDiff/(7*durationWeeks)*100)),100);return startPercent},getStartCountdown:function(){var startCountdown="",startDateM=this.getStartDateMoment(),startStatus=this.getStartStatus();if(startDateM)if(startDiff=MomentCache.getDiffFromToday(startDateM),"present"==startStatus&&0===startDiff)startCountdown="Starting soon";else if("present"==startStatus&&0>startDiff)startCountdown="Started "+MomentCache.getFromNow(startDateM);else if("past"==startStatus)startCountdown="Ended "+MomentCache.getFromNow(moment(startDateM).add("weeks",this.getDurationWeeks()));else startCountdown="Starts "+MomentCache.getFromNow(startDateM);return startCountdown},getStartStatus:function(){if(this.get("self_study"))return"present";var startDateM=this.getStartDateMoment();if(null===startDateM)return"future";var endDateM=startDateM.clone().add("w",this.getDurationWeeks()),startDiff=MomentCache.getDiffFromToday(startDateM),endDiff=MomentCache.getDiffFromToday(endDateM);if(startDiff>0&&endDiff>0)return"future";else if(0>startDiff&&0>endDiff)return"past";else if(0>=startDiff&&endDiff>=0)return"present"},getDashboardStartStatus:function(){var EXTRA_WEEKS_PRESENT_DASH=2,startStatus=this.getStartStatus();if("future"===startStatus||"present"===startStatus)return startStatus;else if("past"===startStatus){var startDateM=this.getStartDateMoment(),startDiff=MomentCache.getDiffFromToday(startDateM),endDateM=startDateM.clone().add("w",this.getDurationWeeks()+EXTRA_WEEKS_PRESENT_DASH),endDiff=MomentCache.getDiffFromToday(endDateM);if(0>startDiff&&0>endDiff)return"past";else if(0>=startDiff&&endDiff>=0)return"present"}},getCourseButtonState:function(){var startStatus=this.getStartStatus(),isActive=this.get("active"),isUserEnrolled=this.get("user_is_enrolled"),isSelfStudy=this.get("self_study"),isPast="past"===startStatus,isPresent="present"===startStatus,isFuture="future"===startStatus,isCertReady=this.certificateIsReady(),userGetsSigtrack=this.getsSignatureTrackCert(),isCertEligible=this.get("eligible_for_certificates")||userGetsSigtrack,courseHasSOA=this.hasStatement(),courseRecordLink="/account/records",priorities={GO_TO_CLASS:1,JOIN:2,VIEW_CLASS_ARCHIVE:3,COUNTDOWN:4,VIEW_COURSE_RECORD:5,GRADING_IN_PROGRESS:6,GRADING_IN_PROGRESS_VIEW_ARCHIVE:7},state={link:this.get("class_link"),text:"JOIN",color:"blue",disabled:!1,tooltip:"",priority:4};if(!isUserEnrolled)return state;else if(isSelfStudy||isActive&&!isPast)if(state.color="green",isPast)state.text="VIEW_CLASS_ARCHIVE";else state.text="GO_TO_CLASS";else if(!isActive&&(isFuture||isPresent))state.text="COUNTDOWN",state.color="green",state.disabled=!0;else if(isPast)if(state.color="blue",state.text="VIEW_COURSE_RECORD",state.link=courseRecordLink,isCertEligible)if(isCertReady)if(userGetsSigtrack)state.tooltip="CONGRATS_GET_VC";else if(courseHasSOA)state.tooltip="CONGRATS_GET_SOA";else state.tooltip="DID_NOT_GET_SOA_GET_GRADE";else if(isActive)state.link=this.get("class_link"),state.text="GRADING_IN_PROGRESS_VIEW_ARCHIVE",state.tooltip="GRADING_IN_PROGRESS_VIEW_ARCHIVE";else state.text="GRADING_IN_PROGRESS",state.tooltip="GRADING_IN_PROGRESS",state.disabled=!0;else if(isCertReady)state.tooltip="GET_YOUR_GRADE";else state.tooltip="COURSE_NO_SOA",state.disabled=!0;return state.priority=priorities[state.text],state},getSignatureTrackRegistrationTimeLeft:function(){return MomentCache.getFromNow(moment(this.get("signature_track_close_time")),!0)},getSignatureTrackRegistrationEndDate:function(){return MomentCache.getFormatted(moment(this.get("signature_track_close_time")),"MMM Do YYYY")},getSignatureTrackRefundEndDate:function(){return MomentCache.getFormatted(moment(this.get("signature_track_close_time")).add("weeks",2),"MMM Do YYYY")},getSignatureTrackProfileCompletionDate:function(){return MomentCache.getFormatted(moment(this.get("signature_track_close_time")).add("days",10),"MMM Do YYYY")},certificateIsReady:function(){return this.get("certificates_ready")&&null!=this.get("auth_review_completion_date")&&null!=this.get("end_of_class_emails_sent")}});return course}),define("js/collections/courses",["backbone","underscore","js/models/course","js/core/coursera","jquery"],function(Backbone,_,Course,Coursera,$){var Courses=Backbone.Collection.extend({model:Course});return Courses.toArray=function(courses){return courses instanceof Backbone.Collection?courses.toArray():courses},Courses.withRecords=function(courses,withAuthentication,withStatements){var coursesWithRecords=_.filter(Courses.toArray(courses),function(course){var courseRecord=course.get("record");if(course.certificateIsReady()&&courseRecord){var getsSTCert=course.getsSignatureTrackCert(),getsSOA=course.getsSOA();if(withStatements)if(withAuthentication)return getsSTCert;else return!getsSTCert&&getsSOA;else return!getsSOA}return!1});return coursesWithRecords},Courses.byTime=function(courses){var sortedCourses=_.sortBy(Courses.toArray(courses),function(course){if("past"==course.getStartStatus())return course.getStartTime()+220752e6;return course.getStartTime()});return sortedCourses},Courses.byTimeDescending=function(courses){var sortedCourses=_.sortBy(Courses.toArray(courses),function(course){return-course.getStartTime()});return sortedCourses},Courses.byTimeFromNow=function(courses){var sortedCourses=_.sortBy(Courses.toArray(courses),function(course){return Math.abs(course.getStartTime()-(new Date).getTime())});return sortedCourses},Courses.byPrimaryButtonRelevance=function(courses){var sortedCourses=_.sortBy(Courses.toArray(courses),function(course){return course.getCourseButtonState().priority});return sortedCourses},Courses.forId=function(courses,id){return _.find(Courses.toArray(courses),function(course){if(course.get("id")==id)return course})},Courses.haveActiveSignatureTrack=function(courses){return _.filter(Courses.toArray(courses),function(course){return course.get("status")&&course.get("signature_track_registration_open")})},Courses}),define("js/lib/path",[],function(){var path={};return path.join=function(parts){var args=parts instanceof Array?parts:Array.prototype.slice.call(arguments);return args.join("/").replace(/([^:])[\/]{2,}|^\/\//g,"$1/")},path}),define("js/models/topic",["jquery","backbone","underscore","js/core/coursera","js/json/constants","js/collections/courses","js/lib/util","js/lib/language","js/lib/path"],function($,Backbone,_,Coursera,constants,Courses,util,language,path){var ST_CERT_EXCEPTIONS={},Topic=Backbone.Model.extend({defaults:{},idAttribute:"short_name",initialize:function(){this.bind("change",this.updateComputed,this),this.updateComputed()},updateComputed:function(){var self=this;if(this.get("universities")&&1==this.get("universities").length&&!this.get("universities")[0])this.set("universities",[]);if(!(this.get("courses")&&this.get("courses")instanceof Courses))this.set("courses",new Courses(this.get("courses")),{silent:!0}),this.get("courses").each(function(course){if(!(course.get("topic")&&course.get("topic")instanceof Topic))course.set("topic",self)});if(this.get("short_description"))this.set("short_description",this.get("short_description").replace(/(<([^>]+)>)/gi,""),{silent:!0});if(this.set("social_link",Coursera.config.url.base+"course/"+this.get("short_name"),{silent:!0}),!this.get("hash_tag")){var hashTag=this.get("short_name");if("gamification"==hashTag)hashTag="gamification14";if("totalleadership"==hashTag)hashTag="TotalLeadership14";this.set("hash_tag",hashTag,{silent:!0})}if(this.get("universities")&&1==this.get("universities").length)this.set("uni_twitter",this.get("universities")[0].website_twitter,{silent:!0});var coursesByTime=Courses.byTime(this.get("courses")),openCourse=_.find(coursesByTime,function(course){return 1==course.get("status")});this.set("open_course",openCourse,{silent:!0});var instructors=[];if(!openCourse)_.each(coursesByTime,function(course){if(course.get("instructors")&&course.get("instructors").length)instructors=course.get("instructors")});else instructors=openCourse.get("instructors");this.set("instructors",instructors,{silent:!0}),this.set("universities_display",util.prettyJoin(_.pluck(this.get("universities"),"name")),{silent:!0});var language_group=language.shortenLanguageCode(this.get("language"));this.set("language_group",language_group,{silent:!0}),this.set("language_name",language.languageCodeToName(language_group),{silent:!0});var nativeAndSubtitles=language_group+","+(this.get("subtitle_languages_csv")||"");if(this.set("subtitle_language_groups",nativeAndSubtitles,{silent:!0}),_(constants.openCourses).contains(this.get("short_name")))this.set("flex_course",!0,{silent:!0})},sync:function(callback){var that=this;if(this.get("has_full_data"))callback();else if(this.get("short_name"))$.when(Coursera.api.get("topic/information",{data:{"topic-id":that.get("short_name")},message:{waiting:"loading course details ..."}}),Coursera.api.get("user/instructorprofile",{data:{topic_short_name:that.get("short_name"),exclude_topics:1},message:{waiting:"loading course details..."}})).done(function(data,instructorData){that.set(data[0]),that.set("instructor_profiles",instructorData[0]),callback()}).fail(function(jqXHR){callback(jqXHR.status)})},isUpcoming:function(){if(this.get("open_course"))return this.get("open_course").getStartDiff()>0&&this.get("open_course").getStartDiff()<30;else return!1},getCourseById:function(courseId){return this.get("courses").find(function(course){return course.get("id")==courseId})},getLink:function(){return path.join(Coursera.config.url.base,this.getRelativeLink())},getLinkClass:function(){if(this.get("flex_course"))return"";else return"internal-home"},getRelativeLink:function(){if(this.get("flex_course"))return path.join("/learn",this.get("short_name"));else return path.join("/course",this.get("short_name"))},getTwitterText:function(startPhrase){startPhrase=startPhrase||"I'm taking";var start=startPhrase+" "+this.get("name"),end=" on @Coursera!",tweetLength=start.length+end.length;if(this.get("social_link"))tweetLength+=this.get("social_link").length;if(this.get("hash_tag"))tweetLength+=this.get("hash_tag").length;if(this.get("uni_twitter")&&140>tweetLength)end=" from @"+this.get("uni_twitter")+end;return start+end},getFacebookText:function(){return"I'm taking "+this.get("name")+" on Coursera!"},getUniqueUniversities:function(){return _.uniq(this.get("universities"),!1,function(u){return u.id})},hasEligibleForSignatureTrack:function(){return this.get("courses").find(function(course){return course.isEligibleForTrack()})?!0:!1},hasOpenEnrollForSignatureTrack:function(){return this.get("courses").find(function(course){return course.get("status")&&course.get("signature_track_registration_open")})?!0:!1},getSTCertCorner:function(){var deferred=$.Deferred();if(this.get("short_name")in ST_CERT_EXCEPTIONS)deferred.resolve(ST_CERT_EXCEPTIONS[this.get("short_name")].corner);else if(this.get("universities")&&this.get("universities").length>0)return util.getSTCertCorner(this.get("universities")[0].short_name);else deferred.resolve("https://s3.amazonaws.com/coursera/universities/_generic/signature-cert-corner.png");return deferred},getSTCertIcon:function(){var deferred=$.Deferred();if(this.get("short_name")in ST_CERT_EXCEPTIONS)deferred.resolve(ST_CERT_EXCEPTIONS[this.get("short_name")].icon);else if(this.get("universities")&&this.get("universities").length>0)return util.getSTCertIcon(this.get("universities")[0].short_name);else deferred.resolve("https://s3.amazonaws.com/coursera/universities/_generic/signature-cert-icon.png");return deferred}});return Topic.getByShortName=function(shortName){var topic=new Topic({short_name:shortName});return topic},Topic}),!function(wndw){var cloudfrontApi=function(_,Supports){var CloudfrontApi=function(api,config){this.api=api,this.config=config,this.cloudfrontEnabled=Supports.cors&&0===config.url.cloudfront_api.indexOf("http")};return CloudfrontApi.prototype.get=function(path,options){if(this.cloudfrontEnabled)if(0!==path.indexOf("http"))path=this.config.url.cloudfront_api+path;if(options=options||{},options.data=options.data||{},options.data.__cf_version=this.config.version,!wndw.location.origin)wndw.location.origin=wndw.location.protocol+"//"+wndw.location.host;return options.data.__cf_origin=wndw.location.origin,this.api.get(path,options)},function(api,config){return new CloudfrontApi(api,config)}};if("function"==typeof define&&define.amd)define("js/lib/cloudfront.api",["underscore","js/lib/supports"],function(_,Supports){return cloudfrontApi(_,Supports)});else if("undefined"!=typeof wndw)wndw.CloudfrontApi=cloudfrontApi(wndw._,wndw.Supports)}(window),define("js/collections/topics",["jquery","backbone","underscore","js/models/topic","js/core/coursera","require","js/lib/util","js/lib/cloudfront.api"],function($,Backbone,_,Topic,Coursera,require,util,CloudfrontApi){var Topics=Backbone.Collection.extend({model:Topic,retrieve:function(filter,callback){var self=this;if(self.length)callback(null,self);else{var TopicSearch=require("js/models/topicsearch"),ts=new TopicSearch;ts.set("collection",this),ts.set({orderby:"new","page-size":1e3}),ts.on("finishLoad",function(){callback(null,self)}),ts.fetchPage()}},getByShortName:function(name,callback){var self=this,topic=self.find(function(topic){return topic.get("short_name")==name});if(topic)callback(null,topic);else if(self.length)callback(null,null);else self.retrieve({},function(err,topics){if(!err)self.getByShortName(name,callback);else callback(err)})},getByUniversity:function(name,callback){var self=this,topics=self.filter(function(topic){return _.any(topic.get("universities"),function(university){return university.short_name==name})});if(topics&&topics.length)callback(topics);else if(self.length)callback(null);else self.retrieve({},function(err,topics){if(!err)self.getByUniversity(name,callback);else callback(err)})},getByCategory:function(name,callback){var self=this,topics=self.filter(function(topic){return _.any(topic.get("categories"),function(category){return category.short_name==name})});if(topics&&topics.length)callback(topics);else if(self.length)callback(null);else self.retrieve({},function(err,topics){if(!err)self.getByCategory(name,callback);else callback(err)})},getByInstructor:function(id,callback){var self=this,topics=self.filter(function(topic){return _.contains(topic.get("instructors"),id)});if(topics&&topics.length)callback(topics);else if(self.length)callback(null);else self.retrieve({},function(err,topics){if(!err)self.getByInstructor(id,callback);else callback(err)})}});Topics.toArray=function(topics){return topics instanceof Backbone.Collection?topics.toArray():topics},Topics.byTime=function(topics){var FAR_AWAY_TIME=new Date(2100,12,30).getTime();return _.sortBy(Topics.toArray(topics),function(topic){if(topic.get("open_course"))return topic.get("open_course").getStartTime();return FAR_AWAY_TIME})},Topics.byCurrentlyRunning=function(topics){var groups=_.groupBy(Topics.toArray(topics),function(topic){if(topic.get("flex_course"))return"flex";else if(topic.get("open_course")){var course=topic.get("open_course");if(course.getStartDiff()<=0&&course.getEndDiff()>0)return"current";else if(course.getEndDiff()<=0)return"ended";else return"tba"}return"other"}),current=_.sortBy(groups.current,function(topic){return-topic.get("open_course").getStartDiff()}),ended=_.sortBy(groups.ended,function(topic){return-topic.get("open_course").getEndDiff()});if(groups.flex)current=groups.flex.concat(groups.current||[]);return _.union(current,ended)},Topics.byUpcoming=function(topics){var MANY_DAYS_IN_FUTURE=1e6;return _.sortBy(Topics.toArray(topics),function(topic){if(topic.get("flex_course"))return-21;else if(topic.get("open_course"))if(topic.get("open_course").getStartDiff()>-14)return topic.get("open_course").getStartDiff();else return topic.get("open_course").getStartDiff()+MANY_DAYS_IN_FUTURE;return 2*MANY_DAYS_IN_FUTURE})},Topics.byUpcomingWithCount=function(topics,days){var MANY_DAYS_IN_FUTURE=1e6,count=0,upcomingTopics=_.sortBy(Topics.toArray(topics),function(topic){if(topic.get("open_course")){var startDiff=topic.get("open_course").getStartDiff();if(startDiff>0&&days>startDiff)return count++,topic.get("open_course").getStartDiff();else return topic.get("open_course").getStartDiff()+MANY_DAYS_IN_FUTURE}return 2*MANY_DAYS_IN_FUTURE});return{topics:upcomingTopics,count:count}},Topics.byName=function(topics){return _.sortBy(Topics.toArray(topics),function(topic){return topic.get("name")})},Topics.byDuration=function(topics){return _.sortBy(Topics.toArray(topics),function(topic){if(topic.get("open_course"))return topic.get("open_course").getDurationWeeks();return 1e3})},Topics.byAdded=function(topics){return _.sortBy(Topics.toArray(topics),function(topic){return-topic.get("id")})},Topics.matchingSearch=function(topics,search){var searchWords=search.match(/\w+|"[^"]+"/g);searchWords=_.map(searchWords,function(word){return word.replace(/"/g,"")});var searchPatterns=_.map(searchWords,function(word){var regexString="\\b"+word+(1==word.length?"\\b":"");return new RegExp(regexString,"i")}),matchingTopics=_.filter(Topics.toArray(topics),function(topic){var uninames=_.pluck(topic.get("universities"),"name"),unis=uninames.join(" "),shortUnis=_.pluck(topic.get("universities"),"short_name").join(" "),cats=_.pluck(topic.get("categories"),"name").join(" "),shortDescription=(topic.get("short_description")||"").split(/\W+/).join(" ");return _.all(searchPatterns,function(pattern){return pattern.test(topic.get("name"))||pattern.test(unis)||pattern.test(cats)||pattern.test(topic.get("short_description"))||pattern.test(shortUnis)||pattern.test(shortDescription)||_.any(topic.get("instructors"),function(instructor){return pattern.test(util.concatName(instructor))})})});return matchingTopics},Topics.forUniversity=function(topics,shortName){var matchingTopics=_.filter(Topics.toArray(topics),function(topic){var unis=_.pluck(topic.get("universities"),"short_name");return-1!=unis.indexOf(shortName)});return matchingTopics},Topics.forCategory=function(topics,shortName){var matchingTopics=_.filter(Topics.toArray(topics),function(topic){var cats=_.pluck(topic.get("categories"),"short_name");return-1!=cats.indexOf(shortName)});return matchingTopics};var parseRelatedModel=function(rootModels,relatedModels,relatedKey,relatedKey2,relatedIdName){_.each(rootModels,function(rootModel){if(rootModel[relatedKey]){var relatedIds=rootModel[relatedKey];rootModel[relatedKey2]=[],_.each(relatedIds,function(relatedId){var relatedModel=_.find(relatedModels,function(testModel){return testModel[relatedIdName]==relatedId});rootModel[relatedKey2].push(relatedModel)})}})};Topics.parse=function(response){parseRelatedModel(response.topics,response.unis,"unis","universities","id"),parseRelatedModel(response.topics,response.cats,"cats","categories","id"),_.each(response.courses,function(course){response.topics[course.topic_id].courses=response.topics[course.topic_id].courses||[],parseRelatedModel([course],response.insts,"instructors","instructors","instructor_id"),response.topics[course.topic_id].courses.push(course)});var topics=_.values(response.topics);return topics};var deferredListJson;return Topics.singletonReadAll=function(){if(deferredListJson)return deferredListJson;deferredListJson=$.Deferred();var fetchUrl="topic/list2",cloudfrontApi=CloudfrontApi(Coursera.api,Coursera.config),data={unis:["id","name","short_name","partner_type","favicon","home_link","display","abbr_name"].join(),topics:["id","language","name","short_name","subtitle_languages_csv","self_service_course_id","small_icon_hover","large_icon","short_description"].join(),cats:["id","name","short_name"].join(),insts:["id","first_name","middle_name","last_name","short_name","user_profile__user__instructor__id"].join(),courses:["id","start_day","start_month","start_year","status","signature_track_open_time","signature_track_close_time","eligible_for_signature_track","duration_string","home_link","topic_id","active"].join()};return cloudfrontApi.get(fetchUrl,{data:data}).done(function(data){Topics.nonblockingBackbonify(data,deferredListJson)}).fail(function(){deferredListJson.reject()}),deferredListJson},Topics.similarTopics=function(topicIds,maxN,getAllTopicData,flavor,nLeadingDays,nTrailingDays){var fetchUrl="topic/similartopics",options={data:{topic_ids:topicIds.join(),max_to_return:maxN,get_all_topic_data:getAllTopicData}};if(void 0!==flavor)options.data.flavor=flavor;if(void 0!==nLeadingDays)options.data.n_leading_days=nLeadingDays;if(void 0!==nTrailingDays)options.data.n_trailing_days=nTrailingDays;return Coursera.api.get(fetchUrl,options)},Topics.nonblockingBackbonify=function(rawJson,deferred){function worker(){for(var startTime=(new Date).getTime(),loopStart=i;i<parsedJson.length&&(new Date).getTime()<startTime+100;)topics.add(parsedJson[i]),i++;if(i<parsedJson.length)setTimeout(worker,0);else deferred.resolve(topics,rawJson)}var i=0,topics=new Topics,parsedJson=Topics.parse(rawJson);worker()},Topics}),define("js/models/instructor",["backbone","underscore","js/core/coursera","js/collections/topics","js/models/topic","js/lib/util"],function(Backbone,_,Coursera,Topics,Topic,util){var instructor=Backbone.Model.extend({initialize:function(){this.updateComputed(),this.on("change",this.updateComputed,this)},updateComputed:function(){if(!(this.get("topics")&&this.get("topics")instanceof Topics))this.set("topics",new Topics(this.get("topics")),{silent:!0});this.set("full_name",util.concatName({first_name:this.get("first_name"),middle_name:this.get("middle_name"),last_name:this.get("last_name")}),{silent:!0})},getDecoratedName:function(){var decoratedName="";if(this.get("prefix_name"))decoratedName+=this.get("prefix_name")+" ";if(decoratedName+=this.get("full_name"),this.get("suffix_name"))decoratedName+=", "+this.get("suffix_name");return decoratedName},getPrettyWebsiteUrl:function(){return util.prettifyUrl(this.get("website"))},getLink:function(){return Coursera.config.url.base+"instructor/"+(this.get("short_name")||"~"+this.get("id"))},shouldDisplay:function(){return this.get("first_name")?!0:!1},sync:function(callback){var self=this;if(!_.isUndefined(self.get("bio")))callback();else if(this.get("short_name")||this.get("profile_id"))Coursera.api.get("user/instructorprofile",{data:{id:this.get("profile_id"),short_name:this.get("short_name")}}).done(function(data){self.set(data[0]),callback()}).fail(function(jqXHR){callback(jqXHR.status)})}});return instructor}),define("js/collections/instructors",["backbone","js/models/instructor"],function(Backbone,Instructor){var Instructors=Backbone.Collection.extend({model:Instructor,byLastName:function(){return new Instructors(this.sortBy(function(t){return t.get("last_name")}))}});return Instructors}),define("js/models/university",["jquery","backbone","js/core/coursera","js/lib/util","js/collections/topics","js/models/instructor","js/collections/instructors"],function($,Backbone,Coursera,util,Topics,Instructor,Instructors){var university=Backbone.Model.extend({defaults:{},initialize:function(){this.updateComputed(),this.on("change",this.updateComputed,this)},updateComputed:function(){if(!(this.get("topics")&&this.get("topics")instanceof Topics))this.set("topics",new Topics(this.get("topics")),{silent:!0});if(!(this.get("instructors")&&this.get("instructors")instanceof Instructors))this.set("instructors",new Instructors(this.get("instructors")),{silent:!0})},getPrettyWebsiteUrl:function(){return util.prettifyUrl(this.get("website"))},getLink:function(){return this.get("home_link")||Coursera.config.dir.home+"university/"+this.get("short_name")}});return university}),define("js/collections/universities",["backbone","underscore","jquery","js/models/university","js/core/coursera","js/lib/cloudfront.api","js/lib/language"],function(Backbone,_,$,University,Coursera,CloudfrontApi,language){var Universities=Backbone.Collection.extend({model:University,comparator:function(university){return language.latinizeText(university.get("name")).toLowerCase()}}),deferred;return Universities.singletonRead=function(){if(deferred)return deferred;deferred=$.Deferred();var cloudfrontApi=CloudfrontApi(Coursera.api,Coursera.config);return cloudfrontApi.get("university/list").done(function(jsonData){deferred.resolve(new Universities(jsonData))
}).fail(function(xhr,status,err){deferred.reject(xhr,status,err),Coursera.router.trigger("error",500,location.href,{message:"error loading universities: "+err})}),deferred},Universities.groupByPartnerType=function(universities){return _.groupBy(universities.toArray(),function(uni){return uni.get("partner_type")||1})},Universities.getNormalPartners=function(universities){return Universities.groupByPartnerType(universities)[1]||[]},Universities.getStateSystems=function(universities){return Universities.groupByPartnerType(universities)[2]||[]},Universities}),define("js/models/specialization",["require","jquery","backbone","underscore","js/core/coursera","js/lib/util","js/lib/cookie","js/collections/topics","js/models/topic","js/models/university","js/collections/universities","js/models/instructor","js/collections/instructors","js/lib/cloudfront.api"],function(require,$,Backbone,_,Coursera,util,Cookie,Topics,Topic,University,Universities,Instructor,Instructors,CloudfrontApi){var Specialization=Backbone.Model.extend({initialize:function(){this.bind("change",this.updateComputed,this),this.updateComputed()},updateComputed:function(){var self=this,topicCollection=new Topics;if(this.get("topics"))_.each(this.get("topics"),function(topic){topicCollection.add(topic),_.each(topic.courses,function(course){if(!course.eligible_for_signature_track)return;if(!topic.is_capstone)self.set("courseCost",course.signature_track_price,{silent:!0});else if(course.signature_track_price)self.set("capstoneCost",course.signature_track_price,{silent:!0})})});this.set("topics",topicCollection,{silent:!0});var nextOpenCourse=null,nextOpenDateM=null;if(this.get("topics").each(function(topic){if(topic.get("open_course")){var startDateM=topic.get("open_course").getStartDateMoment();if(null==nextOpenDateM||startDateM&&nextOpenDateM>startDateM)nextOpenDateM=startDateM,nextOpenCourse=topic.get("open_course")}}),nextOpenCourse)this.set("next_open_course",nextOpenCourse,{silent:!0});var universityCollection=new Universities;universityCollection.comparator=null,_.each(this.get("universities"),function(university){universityCollection.add(university,{sort:!1})}),this.set("universities",universityCollection,{silent:!0});var instructorCollection=new Instructors;if(instructorCollection.comparator=null,this.get("instructors"))_.each(this.get("instructors"),function(instructor){instructorCollection.add(instructor)});if(this.set("instructors",instructorCollection,{silent:!0}),this.get("what_youll_learn"))this.set("what_youll_learn",JSON.parse(this.get("what_youll_learn")),{silent:!0});if(this.get("recommended_background"))this.set("recommended_background",JSON.parse(this.get("recommended_background")),{silent:!0});if(this.get("aux_info")){var auxInfo=JSON.parse(this.get("aux_info"));if(!auxInfo.capstone)auxInfo.capstone={};else if(!this.get("capstoneCost")&&auxInfo.capstone.cost)this.set("capstoneCost",auxInfo.capstone.cost,{silent:!0});this.set("aux_info",auxInfo,{silent:!0})}else this.set("aux_info",{capstone:{}},{silent:!0})},getTotalCost:function(){return this.get("courseCost")*(this.get("topics").length-1)+this.get("capstoneCost")},sync:function(callback){var that=this,data={data:{currency:Cookie.get("ip_currency"),origin:Cookie.get("ip_origin")},message:{waiting:"loading specialization details ..."}};if(this.get("has_full_data"))callback();else if(this.get("preview"))Coursera.api.get("specialization/preview_info/"+this.get("id"),data).done(function(data){that.set("has_full_data",!0,{silent:!0}),that.set(data),callback()}).fail(function(jqXHR){callback(jqXHR.status)});else if(this.get("id")){var cloudfrontApi=CloudfrontApi(Coursera.api,Coursera.config);cloudfrontApi.get("specialization/info/"+this.get("id"),data).done(function(data){that.set("has_full_data",!0,{silent:!0}),that.set(data),callback()}).fail(function(jqXHR){callback(jqXHR.status)})}}});return Specialization.getByID=function(id){var specialization=new Specialization({id:id});return specialization},Specialization}),!function(wndw){var sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(message){this.toString=function(){return"CORRUPT: "+this.message},this.message=message},invalid:function(message){this.toString=function(){return"INVALID: "+this.message},this.message=message},bug:function(message){this.toString=function(){return"BUG: "+this.message},this.message=message},notReady:function(message){this.toString=function(){return"NOT READY: "+this.message},this.message=message}}};if("function"==typeof define&&define.amd)define("js/lib/sjcl",[],function(){return sjcl});else wndw.sjcl=sjcl}(window),!function(wndw){var addBitArray=function(sjcl){sjcl.bitArray={bitSlice:function(a,bstart,bend){return a=sjcl.bitArray._shiftRight(a.slice(bstart/32),32-(31&bstart)).slice(1),void 0===bend?a:sjcl.bitArray.clamp(a,bend-bstart)},extract:function(a,bstart,blength){var x,sh=Math.floor(-bstart-blength&31);if(-32&(bstart+blength-1^bstart))x=a[bstart/32|0]<<32-sh^a[bstart/32+1|0]>>>sh;else x=a[bstart/32|0]>>>sh;return x&(1<<blength)-1},concat:function(a1,a2){if(0===a1.length||0===a2.length)return a1.concat(a2);var out,i,last=a1[a1.length-1],shift=sjcl.bitArray.getPartial(last);if(32===shift)return a1.concat(a2);else return sjcl.bitArray._shiftRight(a2,shift,0|last,a1.slice(0,a1.length-1))},bitLength:function(a){var l=a.length,x;if(0===l)return 0;return x=a[l-1],32*(l-1)+sjcl.bitArray.getPartial(x)},clamp:function(a,len){if(32*a.length<len)return a;a=a.slice(0,Math.ceil(len/32));var l=a.length;if(len=31&len,l>0&&len)a[l-1]=sjcl.bitArray.partial(len,a[l-1]&2147483648>>len-1,1);return a},partial:function(len,x,_end){if(32===len)return x;return(_end?0|x:x<<32-len)+1099511627776*len},getPartial:function(x){return Math.round(x/1099511627776)||32},equal:function(a,b){if(sjcl.bitArray.bitLength(a)!==sjcl.bitArray.bitLength(b))return!1;var x=0,i;for(i=0;i<a.length;i++)x|=a[i]^b[i];return 0===x},_shiftRight:function(a,shift,carry,out){var i,last2=0,shift2;if(void 0===out)out=[];for(;shift>=32;shift-=32)out.push(carry),carry=0;if(0===shift)return out.concat(a);for(i=0;i<a.length;i++)out.push(carry|a[i]>>>shift),carry=a[i]<<32-shift;return last2=a.length?a[a.length-1]:0,shift2=sjcl.bitArray.getPartial(last2),out.push(sjcl.bitArray.partial(shift+shift2&31,shift+shift2>32?carry:out.pop(),1)),out},_xor4:function(x,y){return[x[0]^y[0],x[1]^y[1],x[2]^y[2],x[3]^y[3]]}}};if("function"==typeof define&&define.amd)define("js/lib/sjcl-bitArray",["js/lib/sjcl"],function(sjcl){addBitArray(sjcl)});else addBitArray(wndw.sjcl)}(window),!function(wndw){var addCodecHex=function(sjcl){sjcl.codec.hex={fromBits:function(arr){var out="",i,x;for(i=0;i<arr.length;i++)out+=((0|arr[i])+0xf00000000000).toString(16).substr(4);return out.substr(0,sjcl.bitArray.bitLength(arr)/4)},toBits:function(str){var i,out=[],len;for(str=str.replace(/\s|0x/g,""),len=str.length,str+="00000000",i=0;i<str.length;i+=8)out.push(0^parseInt(str.substr(i,8),16));return sjcl.bitArray.clamp(out,4*len)}}};if("function"==typeof define&&define.amd)define("js/lib/sjcl-codecHex",["js/lib/sjcl"],function(sjcl){return addCodecHex(sjcl)});else addCodecHex(wndw.sjcl)}(window),!function(wndw){var addCodecString=function(sjcl){sjcl.codec.utf8String={fromBits:function(arr){var out="",bl=sjcl.bitArray.bitLength(arr),i,tmp;for(i=0;bl/8>i;i++){if(0===(3&i))tmp=arr[i/4];out+=String.fromCharCode(tmp>>>24),tmp<<=8}return decodeURIComponent(escape(out))},toBits:function(str){str=unescape(encodeURIComponent(str));var out=[],i,tmp=0;for(i=0;i<str.length;i++)if(tmp=tmp<<8|str.charCodeAt(i),3===(3&i))out.push(tmp),tmp=0;if(3&i)out.push(sjcl.bitArray.partial(8*(3&i),tmp));return out}}};if("function"==typeof define&&define.amd)define("js/lib/sjcl-codecString",["js/lib/sjcl","js/lib/sjcl-bitArray"],function(sjcl,bitArray){addCodecString(sjcl)});else addCodecString(wndw.sjcl)}(window),!function(wndw){var addSHA1=function(sjcl){sjcl.hash.sha1=function(hash){if(hash)this._h=hash._h.slice(0),this._buffer=hash._buffer.slice(0),this._length=hash._length;else this.reset()},sjcl.hash.sha1.hash=function(data){return(new sjcl.hash.sha1).update(data).finalize()},sjcl.hash.sha1.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(data){if("string"==typeof data)data=sjcl.codec.utf8String.toBits(data);var i,b=this._buffer=sjcl.bitArray.concat(this._buffer,data),ol=this._length,nl=this._length=ol+sjcl.bitArray.bitLength(data);for(i=this.blockSize+ol&-this.blockSize;nl>=i;i+=this.blockSize)this._block(b.splice(0,16));return this},finalize:function(){var i,b=this._buffer,h=this._h;for(b=sjcl.bitArray.concat(b,[sjcl.bitArray.partial(1,1)]),i=b.length+2;15&i;i++)b.push(0);for(b.push(Math.floor(this._length/4294967296)),b.push(0|this._length);b.length;)this._block(b.splice(0,16));return this.reset(),h},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(t,b,c,d){if(19>=t)return b&c|~b&d;else if(39>=t)return b^c^d;else if(59>=t)return b&c|b&d|c&d;else if(79>=t)return b^c^d},_S:function(n,x){return x<<n|x>>>32-n},_block:function(words){var t,tmp,a,b,c,d,e,w=words.slice(0),h=this._h,k=this._key;for(a=h[0],b=h[1],c=h[2],d=h[3],e=h[4],t=0;79>=t;t++){if(t>=16)w[t]=this._S(1,w[t-3]^w[t-8]^w[t-14]^w[t-16]);tmp=this._S(5,a)+this._f(t,b,c,d)+e+w[t]+this._key[Math.floor(t/20)]|0,e=d,d=c,c=this._S(30,b),b=a,a=tmp}h[0]=h[0]+a|0,h[1]=h[1]+b|0,h[2]=h[2]+c|0,h[3]=h[3]+d|0,h[4]=h[4]+e|0}}};if("function"==typeof define&&define.amd)define("js/lib/sjcl-sha1",["js/lib/sjcl","js/lib/sjcl-codecString","js/lib/sjcl-bitArray"],function(sjcl,codecString,bitArray){addSHA1(sjcl)});else addSHA1(wndw.sjcl)}(window),!function(wndw){var Experiments={},ExperimentInstances={},ABCingletons=null,MAX_SYNC_TIME=3e3,sendConversionEvents=function(experimentNames,attribute,$convert,callback){var after;if(callback){var max_sync_time=parseInt($convert.attr(attribute+"-convert-time")||MAX_SYNC_TIME,10);if(max_sync_time>0)setTimeout(callback,max_sync_time);after=_.after(experimentNames.length,callback)}_.each(experimentNames,function(experimentName){var types=_.keys(ABCingletons),called=!1;if(_.each(types,function(type){var experiment=ABCingletons[type].getExperiment(experimentName);if(experiment)experiment.convert($convert.attr(attribute+"-convert"),after),called=!0}),!called&&after)after()})},extractExperimentNames=function($convert,attribute){var experimentNames=$convert.attr(attribute)||"";return experimentNames.split(",")},convertIfNotAlready=function($convert,attribute){var activeAttr=attribute+"-convert-for-sync-active",converted=$convert.data(activeAttr)===!0;if(!converted)$convert.data(activeAttr,!0);return converted},AB=function($,_,Log,Cookie,sjcl){var _private={listenForConversion:function(attribute){$("body").on("click.ab","["+attribute+"-convert-for]",function(){var $convert=$(this),experimentNames=extractExperimentNames($convert,attribute+"-convert-for");sendConversionEvents(experimentNames,attribute,$convert)}),$("body").on("submit.ab","form["+attribute+"-convert-for-sync]",function(e){var $convert=$(this);if(!convertIfNotAlready($convert,attribute)){e.preventDefault();var experimentNames=extractExperimentNames($convert,attribute+"-convert-for-sync"),goto=function(){$convert.submit()};sendConversionEvents(experimentNames,attribute,$convert,goto)}}),$("body").on("click.ab","a["+attribute+"-convert-for-sync]",function(e){var $convert=$(this);if(!convertIfNotAlready($convert,attribute)){e.preventDefault();var experimentNames=extractExperimentNames($convert,attribute+"-convert-for-sync"),href=$convert.attr("href");if(href){var goto=function(){window.location.href=href};sendConversionEvents(experimentNames,attribute,$convert,goto)}}})},chooseVariant:function(){var that=this;if(!that.valid)return null;if(that.options.debug){var overrideString="ab-"+that.type+"-"+that.name+"-override",chosen=Cookie.get(overrideString)||$(wndw.document).find("body").attr("data-"+overrideString);if(null!=chosen){var variant=_.find(that.options.variants,function(variant){return variant.name==chosen});if(variant)return variant;else that.options.logger.error("Invalid variant: "+chosen)}}var key=that.id+"_"+that.name,digest=sjcl.codec.hex.fromBits(sjcl.hash.sha1.hash(key)),hashValue=parseInt(digest.substr(digest.length-8),16),maxHashValue=Math.pow(2,32),totalWeight=0,i;for(i=0;i<that.weights.length;i++)totalWeight+=that.weights[i];var targetWeight=hashValue/maxHashValue*totalWeight;for(i=0;i<that.weights.length;i++)if(targetWeight-=that.weights[i],0>targetWeight)return that.options.variants[i];return that.options.variants[that.weights.length-1]}},module=function(id,type,_options){for(var that=this,options=_options||{},parts=location.host.split(".");parts.length>2;)parts.shift();this.id=id,this.type=type,this.options={},this.options.domain=options.domain||"."+parts.join("."),this.options.logger=options.logger||Log({level:"error"}),this.options.tracker=options.tracker||[],this.options.debug=options.debug||!1,this.options.attribute="data-ab-"+this.type,this.experiments={},Experiments[this.type]={},ExperimentInstances[this.type]={}};module.prototype.setId=function(id){if(!this.id)this.id=id;else if(this.id!==id)this.options.logger.error("can't change an existing id, create new AB test instead")},module.prototype.addExperiment=function(name,options){if(!Experiments[this.type][name])if(options&&options.variants){var variants=_.filter(options.variants,function(option){return option.baseline}),weights=_.reduce(_.pluck(options.variants,"weight"),function(memo,num){return memo+num},0);if(variants&&1==variants.length&&1==weights.toFixed(10))Experiments[this.type][name]=options;else if(variants.length>1)this.options.logger.error("experiment "+name+" contains more than one baseline variants");else if(1>weights)this.options.logger.error("experiment "+name+" contains variants that don't sum to 1.0");else this.options.logger.error("experiment "+name+" has no baseline variant")}else this.options.logger.error("experiment "+name+" has no variants");else this.options.logger.error("experiment "+name+" already exists")},module.prototype.addExperiments=function(experiments){var that=this,keys=_.keys(experiments);_.each(keys,function(name){that.addExperiment(name,experiments[name])})},module.prototype.getExperiment=function(name){if(Experiments[this.type][name]){if(!ExperimentInstances[this.type][name]){var options=Experiments[this.type][name];ExperimentInstances[this.type][name]=new Experiment(this.id,name,{type:this.type,variants:Experiments[this.type][name].variants,logger:this.options.logger,debug:this.options.debug,tracker:this.options.tracker,domain:this.options.domain})}return ExperimentInstances[this.type][name]}else return null},module.prototype.runExperimentsOn=function(dom){var that=this,$variants=$(dom).find("["+this.options.attribute+"-variant-for]");$variants.hide();var experimentNames=[];$variants.each(function(){$variant=$(this),experimentNames.push($variant.attr(that.options.attribute+"-variant-for"))}),experimentNames=_.uniq(experimentNames),_.each(experimentNames,function(experimentName){var experiment=that.getExperiment(experimentName);if(experiment){var chosen=experiment.getChosenVariant(),$chosen=$variants.filter("["+that.options.attribute+"-variant-for="+experimentName+"]").filter("["+that.options.attribute+"-variant="+chosen+"]");if($chosen.size())$chosen.show();else that.options.logger.error("variants "+chosen+" for "+that.type+" experiment "+experimentName+" not found in the dom")}else that.options.logger.error(that.type+" experiment "+experimentName+" found on page but not added yet")})};var Experiment=function(id,name,options){var self=this;if(self.id=id,self.options=options,self.name=name,self.type=self.options.type,self.weights=_.pluck(self.options.variants,"weight"),self.valid=self.sanityCheck(name,self.weights),self.valid)self.options.logger.info("Created experiment ["+name+"] with "+self.options.variants.length+" variants.");else self.options.logger.info("Error in experiment ["+name+"]; resorting to fail-safe.")};Experiment.prototype.sanityCheck=function(name,weights){var self=this,i;if("string"!=typeof name)return self.options.logger.error("name should be a string!"),!1;if("ab-"==name.substr(0,3))return self.options.logger.error('name should not begin with "ab-"!'),!1;if(!$.isArray(weights))return self.options.logger.error("weights should be an array!"),!1;else for(i=0;i<weights.length;i++)if(weights[i]<0)return self.options.logger.error("All weights must be non-negative!"),!1;return!0},Experiment.prototype.getChosenVariant=function(){var that=this,experimentName=that.name,memory=Cookie.get("ab-experiments-"+that.type)||"";if(-1==memory.indexOf(experimentName)){if(memory.length>0)memory=memory+","+experimentName;else memory=experimentName;Cookie.clear("ab-experiments-"+that.type),Cookie.set("ab-experiments-"+that.type,memory,{expires:365,domain:that.options.domain})}if(_.isUndefined(this.chosen))if(this.chosen=_private.chooseVariant.call(this),this.valid){var variant_detail=this.chosen.baseline?this.chosen.name+",baseline":this.chosen.name;this.options.tracker.push(["ab.show",this.type+","+this.name+","+variant_detail+":"+this.id])}else this.options.tracker.push(["ab.fail",this.type+","+this.name+":"+this.id]);return this.chosen.name},Experiment.prototype.convert=function(value,callback){var experimentNames=(Cookie.get("ab-experiments-"+this.type)||"").split(",");if(experimentNames&&-1!=experimentNames.indexOf(this.name)&&this.valid){if(_.isUndefined(this.chosen))this.chosen=_private.chooseVariant.call(this);var variant_detail=this.chosen.baseline?this.chosen.name+",baseline":this.chosen.name;if(_.isUndefined(value))value="default";var data=["ab.convert",this.type+","+this.name+","+variant_detail+","+value+":"+this.id];if(callback)data.push(callback);this.options.tracker.push(data)}else if(callback)callback()};var external=function(id,type,options){if(!ABCingletons)ABCingletons={};if(!ABCingletons[type]){var ab=ABCingletons[type]=new module(id,type,options);return _private.listenForConversion(ab.options.attribute),ab}else return ABCingletons[type].setId(id),ABCingletons[type]};return external.makeSession=function(name,options){var sessionId=Cookie.get(name);if(!sessionId)sessionId=(1e10*Math.random()).toFixed()+"-"+(new Date).getTime(),Cookie.set(name,sessionId,options||{expires:14,domain:options.domain});return sessionId},external};if("function"==typeof define&&define.amd)define("js/lib/ab",["jquery","underscore","js/lib/log","js/lib/cookie","js/lib/sjcl","js/lib/sjcl-bitArray","js/lib/sjcl-codecHex","js/lib/sjcl-codecString","js/lib/sjcl-sha1","js/lib/json2"],function($,_,Log,Cookie,sjcl,bitArray,codecHex,codecString,sha1){return AB($,_,Log,Cookie,sjcl)});else wndw.AB=AB(wndw.$,wndw._,wndw.Log,wndw.Cookie,wndw.sjcl)}(window),!function(){var experiments={session:{homepage_hardcode_data_science_specialization:{variants:[{name:"no",baseline:!0,weight:.1},{name:"yes",weight:.9}]},homepage_user_count:{variants:[{name:"show",baseline:!0,weight:.5},{name:"hide",weight:.5}]},coursepage_compress_language:{variants:[{name:"10px",weight:.5,baseline:!0},{name:"0px",weight:.5}]},coursepage_catalog_link:{variants:[{name:"no_arrow",weight:.5,baseline:!0},{name:"arrow",weight:.5}]},sigtrack_price_display_anchor:{variants:[{name:"no_display",weight:.3,baseline:!0},{name:"display",weight:.3},{name:"display_alot",weight:.4}]},sigtrack_checkout_button:{variants:[{name:"join",weight:.75,baseline:!0},{name:"checkout",weight:.25}]},specializations_list_subheader:{variants:[{name:"master",weight:.2,baseline:!0},{name:"focused",weight:.2},{name:"cert",weight:.2},{name:"further",weight:.2},{name:"leap",weight:.2}]},specializations_landing_swap:{variants:[{name:"base",weight:.5,baseline:!0},{name:"swap",weight:.5}]},sigtrack_student_stories:{variants:[{name:"disabled",weight:.33,baseline:!0},{name:"enabled",weight:.33},{name:"enabled-nexttocard",weight:.34}]},sigtrack_demonstrated_uses2:{variants:[{name:"base",weight:.071,baseline:!0},{name:"show-qualifications",weight:.071},{name:"further-qualifications",weight:.071},{name:"list-resume",weight:.071},{name:"list-cv",weight:.071},{name:"add-linkedin",weight:.071},{name:"official-rec",weight:.071},{name:"rec-achievement",weight:.071},{name:"link-identity",weight:.072},{name:"commitment-complete",weight:.072},{name:"share-certificate",weight:.072},{name:"share-records",weight:.072},{name:"advance-career",weight:.072},{name:"present-employer",weight:.072}]},specializations_subhead_field:{variants:[{name:"base",weight:.5,baseline:!0},{name:"learn-capstone",weight:.5}]},specializations_landing_detail:{variants:[{name:"base",weight:.2,baseline:!0},{name:"logo-image",weight:.2},{name:"instructors-images",weight:.2},{name:"context-text",weight:.2},{name:"school-cover-image",weight:.2}]}},user:{upcoming_window_leading2:{variants:[{name:"0",weight:.25,baseline:!0},{name:"7",weight:.25},{name:"14",weight:.25},{name:"21",weight:.25}]},upcoming_window_trailing2:{variants:[{name:"7",weight:.25,baseline:!0},{name:"14",weight:.25},{name:"21",weight:.25},{name:"28",weight:.25}]},honorcode_to_welcome2:{variants:[{name:"baseline",weight:.25,baseline:!0},{name:"no_welcome",weight:.25},{name:"no_intent",weight:.25},{name:"optional_intent",weight:.25}]},sigtrack_show_cert_name:{variants:[{name:"baseline",weight:.5,baseline:!0},{name:"show",weight:.5}]},specializations_list_subheader:{variants:[{name:"master",weight:.2,baseline:!0},{name:"focused",weight:.2},{name:"cert",weight:.2},{name:"further",weight:.2},{name:"leap",weight:.2}]},st_userprofile_after_payment:{variants:[{name:"baseline",weight:.4,baseline:!0},{name:"show_after",weight:.6}]},localized_prices2:{variants:[{name:"usd",weight:.5,baseline:!0},{name:"localized",weight:.5}]},specialization_course_link:{variants:[{name:"baseline",weight:.5,baseline:!0},{name:"link",weight:.5}]},painted_door_alipay2:{variants:[{name:"dont_show_alipay",weight:.5,baseline:!0},{name:"show_alipay",weight:.5}]},course_page_skills:{variants:[{name:"baseline",weight:.5,baseline:!0},{name:"showskills",weight:.5}]}}};if("function"==typeof define&&define.amd)define("js/json/experiments.ab",[],function(){return experiments});else window.CourseraABExperiments=experiments}(),!function(global){var module=function(AB,Coursera,Cookie,experiments,UserJSON){var init=function(){for(var parts=location.host.split(".");parts.length>2;)parts.shift();var domain="."+parts.join("."),_204SessionId=Cookie.get("__204u"),sessionId=AB.makeSession("__204u",{expires:365,domain:domain});if(!_204SessionId)Cookie.set("__204u",sessionId,{expires:365,domain:domain});var ab={user:null,session:null};if(ab.session=AB(sessionId,"session",{debug:!0,tracker:Coursera.multitracker,logger:Coursera.log,domain:domain}),experiments.session)ab.session.addExperiments(experiments.session);if(ab.user=AB(null,"user",{debug:!0,tracker:Coursera.multitracker,logger:Coursera.log,domain:domain}),experiments.user)ab.user.addExperiments(experiments.user);return ab};return init()};if("function"==typeof define&&define.amd)define("js/lib/coursera.ab",["js/lib/ab","js/core/coursera","js/lib/cookie","js/json/experiments.ab"],function(AB,Coursera,Cookie,experiments){return module(AB,Coursera,Cookie,experiments)});else;}(window),define("js/models/user",["jquery","backbone","js/core/coursera","js/lib/cookie","underscore","js/collections/topics","js/collections/courses","js/models/specialization","js/models/topic","js/lib/util","js/lib/cloudfront.api","js/lib/coursera.ab"],function($,Backbone,Coursera,cookie,_,Topics,Courses,Specialization,Topic,util,CloudfrontApi,AB){var cookieFields=["id","email_address","external_id","photo_24","photo_60","photo_120","display_name","full_name","privacy","groups","is_superuser","is_staff","identity_verified","universities","locale","timezone"],User=Backbone.Model.extend({defaults:{display_name:"",full_name:"",email_address:"",id:"",locale:"",ip_country:"",timezone:"",authenticated:!1,signature_track:{},topics:null,courses:null,subscriptions:null,specializations:{},signature_topic:null},initialize:function(data){var self=this,linkedin=self.get("website_linkedin");if(linkedin&&/^in\/|^pub\//.test(linkedin))self.set("website_linkedin","http://linkedin.com/"+linkedin);else if(linkedin&&!/^http/.test(linkedin))self.set("website_linkedin",null);if(self.get("photo_120"))self.set("photo_120",util.makeHttps(self.get("photo_120")));if(!self.get("signature_track"))self.set("signature_track",{})},sync:function(callback){this.resync(callback)},resync:function(callback){var self=this;Coursera.api.post("user/login").done(function(data){self.login(data),callback.call(self,null)}).fail(function(){self.set({authenticated:!1}),callback.call(self,!0)})},login:function(data){var self=this;self.set(data),self.initialize(),self.set({authenticated:!0}),AB.user.setId(self.get("id")),Coursera.multitracker.get("204").queue.push(["user",self.get("id")])},logout:function(){return this.set(this.defaults),cookie.clear("maestro_login"),cookie.clear("maestro_login_flag"),cookie.clear("sessionid"),cookie.clear("maestro_user"),Coursera.multitracker.get("204").queue.push(["user",null]),Coursera.api.get("user/logout").done(function(){window.location.href=Coursera.config.url.base}),this},getTopics:function(forceRefresh){var self=this,deferred=$.Deferred(),getTopicsDone=function(topics){topics=_.reject(topics,function(topic){return"__courserainternal"==topic.short_name||"students"==topic.short_name}),topics=new Topics(topics),self.set("topics",topics);var courses=[];topics.each(function(topic){courses=_.union(courses,topic.get("courses").toArray())}),self.set("courses",new Courses(courses)),deferred.resolve(topics)},getTopicsFail=function(xhr){if(deferred.reject(xhr),401==xhr.status)Coursera.multitracker.push(["api.list_my.fail","logout"]),self.set({authenticated:!1}),util.redirectToAccounts("signin");else Coursera.multitracker.push(["api.list_my.fail","unknown"])},buildListMy=function(enrollments,list2){var enrollmentDict={};_.each(enrollments,function(e){if(!(e.course__topic_id in enrollmentDict))enrollmentDict[e.course__topic_id]={};enrollmentDict[e.course__topic_id][e.course_id]=e});var uniDict={};_.each(list2.unis,function(u){uniDict[u.id]=u});var catDict={};_.each(list2.cats,function(c){catDict[c.id]=c});var courseDict={};_.each(list2.courses,function(c){courseDict[c.id]=c});var topics=[];return _.each(_.keys(enrollmentDict),function(topic_id){if(topic_id in list2.topics)topics.push(list2.topics[topic_id])}),_.each(topics,function(t){t["university-ids"]=t.unis,t.universities=[],_.each(t.unis,function(u){t.universities.push(uniDict[u])}),t["category-ids"]=t.cats,t.categories=[],_.each(t.cats,function(c){t.categories.push(catDict[c])}),t["course-ids"]=_.keys(enrollmentDict[t.id]),t.courses=[],_.each(t["course-ids"],function(course_id){var course=courseDict[course_id];course.record={},_.each(enrollmentDict[t.id][course_id],function(value,key){var pos=key.lastIndexOf("__");if(pos>0)key=key.substring(pos+2);course.record[key]=value}),course.record.signature_track=course.record.authenticated_track,t.courses.push(course)})}),topics},url;if(Coursera.user.get("id")===this.get("id")&&this.get("id"))url="topic/list_2_combined";else url="topic/list_user";if(null===self.get("topics")||forceRefresh)if("topic/list_2_combined"==url)Coursera.api.get("topic/list2_combined").done(function(combined){var enrollments=combined.enrollments,list2=combined.list2;self.set("specializations",list2.specializations);var topics=buildListMy(enrollments,list2);getTopicsDone(topics)}).fail(getTopicsFail);else Coursera.api.get(url,{data:{user_id:self.get("id")}}).done(getTopicsDone).fail(getTopicsFail);else deferred.resolve(self.get("topics"));return deferred},getEnrollmentList:function(forceRefresh){var url="enrollment/list",deferred=$.Deferred(),self=this;if(!self.has("enrollmentList")||forceRefresh)Coursera.api.get(url,{data:{include_course_records:!0}}).done(function(result){self.set("enrollmentList",result&&result.enrollments),deferred.resolve(result)}).fail(function(xhr){if(deferred.reject(xhr),401==xhr.status)self.set({authenticated:!1}),util.redirectToAccounts("signin")});else deferred.resolve(self.get("enrollmentList"));return deferred},getPublicCourses:function(callback){var self=this;self.getTopics().done(function(){var publicCourses=self.get("courses").filter(function(course){return course.get("topic").get("display")});callback(new Courses(publicCourses))})},isEnrolledInCourse:function(courseId){var enrollments=this.get("enrollmentList");if(enrollments)return _.any(enrollments,function(enrollment){return enrollment.course_id==courseId});if(this.get("courses")&&this.get("courses").get(courseId))return!0;return!1},getSpecializationBulkVoucher:function(specID){var specializationBulkVoucher=null,specValue=this.get("specializations")[specID];if(specValue&&specValue.bulk_voucher)specializationBulkVoucher=specValue.bulk_voucher;return specializationBulkVoucher},oneClickSigtrack:function(id,voucherId,callback){var self=this;Coursera.api.post("payments/redeem_free_course_voucher",{data:{"course-id":id,"voucher-id":voucherId}}).done(function(data){cookie.set("just_enrolled_sigtrack",id,{expires:1}),self.getTopics(!0).done(function(){callback(null,self)})}).fail(function(xhr){callback(!0)})},enroll:function(id,enrollInSignatureTrack,callback){var self=this;Coursera.api.post("course/enroll",{data:{"course-id":id,"enroll-in-signature-track":enrollInSignatureTrack}}).done(function(data){cookie.set("just_enrolled",id,{expires:15e3}),callback(null,self),self.getTopics(!0)}).fail(function(xhr){callback(!0,xhr)})},unenroll:function(id,callback){var self=this;Coursera.multitracker.push(["user.unenroll.api",id]),Coursera.api.post("course/unenroll",{data:{"course-id":id}}).done(function(data){callback(null,self),self.getTopics(!0)}).fail(function(xhr){callback(!0)})},isSubscribedToTopic:function(topic){var self=this;return _.find(self.get("subscriptions"),function(subscription){return subscription.identifier=="topic."+topic.get("id")})},subscribeToTopic:function(topicId){var self=this;return Coursera.api.post("user/subscribe",{data:{identifier:"topic."+topicId},message:{waiting:"Watching course...",success:"Watching!"}})},unsubscribeFromTopic:function(topicId){var self=this;return Coursera.api.post("user/unsubscribe",{data:{identifier:"topic."+topicId},message:{waiting:"Removing course from watchlist...",success:"Removed."}})},shouldEnroll:function(){return!(this.get("is_staff")||this.get("is_superuser"))},getSubscriptions:function(){var self=this;return Coursera.api.get("user/subscriptions").done(function(data){self.set("subscriptions",data)})},canEditTopic:function(topic){var self=this;if(!this.get("is_staff"))return!1;else if(this.get("is_superuser"))return!0;else if(this.isInstructorForTopic(topic))return!0;else if(this.isAdminForTopic(topic))return!0;else return!1},isInstructorForTopic:function(topic){var that=this;if(_.contains(this.get("groups"),"instructor")){var instructors;if(topic.get("courses")instanceof Backbone.Collection)instructors=topic.get("courses").reduce(function(memo,course){return memo.concat(course.get("instructors"))},[]);else instructors=topic.get("instructors");return _.some(instructors,function(instructor){return instructor&&instructor==that.get("id")})}return!1},isAdminForTopic:function(topic){if(_.contains(this.get("groups"),"university_admin")){var universities=this.get("universities");if(!universities)return!1;var topicUniversitiesIds,topicUniversities=topic.get("universities");if(_.isArray(topicUniversities)&&topicUniversities.length&&_.isObject(topicUniversities[0]))topicUniversitiesIds=_.pluck(topicUniversities,"id");else topicUniversitiesIds=topicUniversities;return _.some(topicUniversitiesIds,function(university_id){return _.contains(universities,university_id)})}return!1},canEditInstructorProfile:function(instructorprofile){var self=this;
if(this.get("is_superuser"))return!0;if(!this.get("is_staff"))return!1;if(instructorprofile.get("userid")==this.get("id"))return!0;if(_.include(this.get("groups"),"university_admin")){var universities=this.get("universities");if(!universities)return!1;return _.find(instructorprofile.get("universities"),function(uni){return _.include(universities,uni.id)})}return!1},canEditUniversity:function(university){if(this.get("is_superuser"))return!0;if(!this.get("is_staff"))return!1;if(_.include(this.get("groups"),"university_admin")){var universities=this.get("universities");if(!universities)return!1;return _.include(universities,university.get("id"))}},isSuperUser:function(){return this.get("is_superuser")},getRoles:function(){var GROUP_ROLES={university_admin:"university admin",teaching_assistant:"teaching staff",instructor:"instructor"},roles=_.map(this.get("groups"),function(group){return GROUP_ROLES[group]});return util.prettyJoin(roles)},isUniversityAdmin:function(){return _.include(this.get("groups"),"university_admin")},isInstructor:function(){return _.include(this.get("groups"),"instructor")},isTeachingAssistant:function(){return _.include(this.get("groups"),"teaching_assistant")},isOnlyATeachingAssistant:function(){return 1==this.get("groups").length&&_.include(this.get("groups"),"teaching_assistant")},isAdmin:function(){return this.get("groups")&&this.get("groups").length>0},getSignatureCookie:function(){if(cookie.get("signature_course_id")&&cookie.get("signature_topic"))return{courseId:cookie.get("signature_course_id"),shortName:cookie.get("signature_topic")};else return null},completedAllSTProfile:function(){return(this.skipKeystroke()||this.completedSignaturePhrase())&&this.completedSignaturePhoto()&&this.completedSignatureInfo()},completedSignaturePhrase:function(){return this.get("signature_track").keystrokes_verified},isDraftSignaturePhrase:function(){return this.get("signature_track").keystrokes_editable},isDraftSignaturePhotoId:function(){return this.get("signature_track").photo_id_editable},isDraftSignaturePhotoFace:function(){return this.get("signature_track").photo_face_editable},isDraftSignatureInfo:function(){return this.get("signature_track").profile_info_editable},skipKeystroke:function(){return this.get("signature_track").keystrokes_skip},completedSignaturePhoto:function(){return this.get("signature_track").photo_id&&this.get("signature_track").photo_face&&-1!==this.get("signature_track").photos_verified},completedSignatureInfo:function(){var sig_profile=this.get("signature_track");return sig_profile.first_name&&sig_profile.last_name&&sig_profile.address_country&&sig_profile.dob},isSignatureTrackStudent:function(){var hasSigtrackEnroll=_.any(this.get("enrollmentList"),function(enrollment){return enrollment.authenticated_track}),hasSpecEnroll=_.any(this.get("specializations"),function(specialization){return specialization&&specialization.bulk_voucher});return hasSigtrackEnroll||hasSpecEnroll},enrolledInSignatureCourse:function(courseId){var enrollments=this.get("enrollmentList");if(enrollments)return _.any(enrollments,function(enrollment){return enrollment.course_id==courseId&&enrollment.authenticated_track});var enrollment=Courses.forId(this.get("courses"),courseId);if(enrollment&&enrollment.get("record"))return enrollment.get("record").signature_track;return!1},getSignatureTrackNotes:function(){var studentNotes={};if(this.get("signature_track").photos_verification_notes)studentNotes=JSON.parse(this.get("signature_track").photos_verification_notes);return studentNotes},isIdentityVerified:function(){return this.get("identity_verified")}});return User}),define("pages/home/app",["jquery","underscore","backbone","pages/home/api","js/core/coursera","js/lib/asyncMessages","js/lib/cookie","js/models/user"],function($,_,Backbone,homeApi,Coursera,asyncMessages,cookie,User){var $message=$("<div>").appendTo("body").addClass("coursera-async-message");return Coursera.message=asyncMessages.create($message),Coursera.api=homeApi,Coursera.on("region:fetching",function(region){Coursera.message.add($("<div>loading page</div>").addClass("waiting"),{id:region.name+region.uid})}),Coursera.on("region:fetched",function(region){Coursera.message.remove(region.name+region.uid)}),Coursera.user=new User,Coursera}),!function(global){function decode(s){if(s)s=decodeURIComponent(s),s=s.replace(re.pluses," ");return s}function parseUri(str){var parser=re.uri_parser,parserKeys=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],m=parser.exec(str||""),parts={};return parserKeys.forEach(function(key,i){parts[key]=m[i]||""}),parts}function parseQuery(str){var i,ps,p,n,k,v,pairs=[];if("undefined"==typeof str||null===str||""===str)return pairs;if(0===str.indexOf("?"))str=str.substring(1);for(ps=str.toString().split(re.query_separator),i=0;i<ps.length;i++)if(p=ps[i],n=p.indexOf("="),0!==n)k=decodeURIComponent(p.substring(0,n)),v=decodeURIComponent(p.substring(n+1)),pairs.push(-1===n?[p,null]:[k,v]);return pairs}function Uri(str){this.uriParts=parseUri(str),this.queryPairs=parseQuery(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}var re={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};if(!Array.prototype.forEach)Array.prototype.forEach=function(fn,scope){for(var i=0,len=this.length;len>i;++i)fn.call(scope||this,this[i],i,this)};if(["protocol","userInfo","host","port","path","anchor"].forEach(function(key){Uri.prototype[key]=function(val){if("undefined"!=typeof val)this.uriParts[key]=val;return this.uriParts[key]}}),Uri.prototype.hasAuthorityPrefix=function(val){if("undefined"!=typeof val)this.hasAuthorityPrefixUserPref=val;if(null===this.hasAuthorityPrefixUserPref)return-1!==this.uriParts.source.indexOf("//");else return this.hasAuthorityPrefixUserPref},Uri.prototype.query=function(val){var s="",i,param;if("undefined"!=typeof val)this.queryPairs=parseQuery(val);for(i=0;i<this.queryPairs.length;i++){if(param=this.queryPairs[i],s.length>0)s+="&";if(null===param[1])s+=param[0];else if(s+=param[0],s+="=",param[1])s+=encodeURIComponent(param[1])}return s.length>0?"?"+s:s},Uri.prototype.getQueryParamValue=function(key){var param,i;for(i=0;i<this.queryPairs.length;i++)if(param=this.queryPairs[i],key===param[0])return param[1]},Uri.prototype.getQueryParamValues=function(key){var arr=[],i,param;for(i=0;i<this.queryPairs.length;i++)if(param=this.queryPairs[i],key===param[0])arr.push(param[1]);return arr},Uri.prototype.deleteQueryParam=function(key,val){var arr=[],i,param,keyMatchesFilter,valMatchesFilter;for(i=0;i<this.queryPairs.length;i++)if(param=this.queryPairs[i],keyMatchesFilter=decode(param[0])===decode(key),valMatchesFilter=param[1]===val,1===arguments.length&&!keyMatchesFilter||2===arguments.length&&(!keyMatchesFilter||!valMatchesFilter))arr.push(param);return this.queryPairs=arr,this},Uri.prototype.addQueryParam=function(key,val,index){if(3===arguments.length&&-1!==index)index=Math.min(index,this.queryPairs.length),this.queryPairs.splice(index,0,[key,val]);else if(arguments.length>0)this.queryPairs.push([key,val]);return this},Uri.prototype.replaceQueryParam=function(key,newVal,oldVal){var index=-1,i,param;if(3===arguments.length){for(i=0;i<this.queryPairs.length;i++)if(param=this.queryPairs[i],decode(param[0])===decode(key)&&decodeURIComponent(param[1])===decode(oldVal)){index=i;break}this.deleteQueryParam(key,oldVal).addQueryParam(key,newVal,index)}else{for(i=0;i<this.queryPairs.length;i++)if(param=this.queryPairs[i],decode(param[0])===decode(key)){index=i;break}this.deleteQueryParam(key),this.addQueryParam(key,newVal,index)}return this},["protocol","hasAuthorityPrefix","userInfo","host","port","path","query","anchor"].forEach(function(key){var method="set"+key.charAt(0).toUpperCase()+key.slice(1);Uri.prototype[method]=function(val){return this[key](val),this}}),Uri.prototype.scheme=function(){var s="";if(this.protocol()){if(s+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1)s+=":";s+="//"}else if(this.hasAuthorityPrefix()&&this.host())s+="//";return s},Uri.prototype.origin=function(){var s=this.scheme();if("file://"==s)return s+this.uriParts.authority;if(this.userInfo()&&this.host())if(s+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1)s+="@";if(this.host())if(s+=this.host(),this.port())s+=":"+this.port();return s},Uri.prototype.addTrailingSlash=function(){var path=this.path()||"";if("/"!==path.substr(-1))this.path(path+"/");return this},Uri.prototype.toString=function(){var path,s=this.origin();if(this.path()){if(path=this.path(),!re.ends_with_slashes.test(s)&&!re.starts_with_slashes.test(path))s+="/";else{if(s)s.replace(re.ends_with_slashes,"/");path=path.replace(re.starts_with_slashes,"/")}s+=path}else if(this.host()&&(this.query().toString()||this.anchor()))s+="/";if(this.query().toString()){if(0!==this.query().toString().indexOf("?"))s+="?";s+=this.query().toString()}if(this.anchor()){if(0!==this.anchor().indexOf("#"))s+="#";s+=this.anchor()}return s},Uri.prototype.clone=function(){return new Uri(this.toString())},"function"==typeof define&&define.amd)define("js/lib/uri",[],function(){return Uri});else if("undefined"!=typeof module&&"undefined"!=typeof module.exports)module.exports=Uri;else global.Uri=Uri}(this),!function(wndw){define("js/lib/coursera.redirect",["jquery","underscore","js/lib/uri"],function($,_,Uri){var sanitize=function(redirect){if(!redirect)return;var uri=new Uri(redirect),host=uri.host(),hostm=new Uri(wndw.location.host).host();if(""===host||host==hostm)wndw.location.href=redirect;else if(/^\/.*/.test(redirect))wndw.location.href=redirect;else wndw.location.href="/"};return{sanitize:sanitize}})}(window),define("js/lib/backbone.queryparams",["backbone","underscore"],function(Backbone,_){var queryStringParam=/^\?(.*)/,namedParam=/:([\w\d]+)/g,splatParam=/\*([\w\d]+)/g,escapeRegExp=/[\-\[\]{}()+?.,\\\^$|#\s]/g;_.extend(Backbone.Router.prototype,{getFragment:function(fragment,forcePushState,excludeQueryString){if(null===fragment)if(this._hasPushState||forcePushState){fragment=window.location.pathname;var search=window.location.search;if(search)fragment+=search}else fragment=window.location.hash;if(fragment=fragment.replace(hashStrip,""),excludeQueryString)fragment=fragment.replace(queryStrip,"");if(!fragment.indexOf(this.options.root))fragment=fragment.substr(this.options.root.length);return fragment},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(namedParam,"([^\\/?]*)").replace(splatParam,"([^\\?]*)"),route+="([\\?]{1}.*)?",new RegExp("^"+route+"$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1),match=params.length&&params[params.length-1]&&params[params.length-1].match(queryStringParam);if(match){var queryString=match[1],data={};if(queryString){var keyValues=queryString.split("&"),self=this;_.each(keyValues,function(keyValue){var arr=keyValue.split("=");if(arr.length>1&&arr[1])self._setParamValue(arr[0],arr[1],data)})}params[params.length-1]=data}for(var i=0;i<params.length;i++)if(_.isString(params[i]))params[i]=decodeURIComponent(params[i]);return params},_setParamValue:function(key,value,data){for(var parts=key.split("."),_data=data,i=0;i<parts.length;i++){var part=parts[i];if(i===parts.length-1)_data[part]=this._decodeParamValue(value,_data[part]);else _data=_data[part]=_data[part]||{}}},_decodeParamValue:function(value,currentValue){if(value.indexOf("|")>=0){for(var values=value.split("|"),i=values.length-1;i>=0;i--)if(!values[i])values.splice(i,1);else values[i]=decodeURIComponent(values[i]);return values}if(!currentValue)return decodeURIComponent(value);else if(_.isArray(currentValue))return currentValue.push(value),currentValue;else return[currentValue,value]},toFragment:function(route,queryParameters){if(queryParameters){if(!_.isString(queryParameters))queryParameters=this._toQueryString(queryParameters);route+="?"+queryParameters}return route},_toQueryString:function(val,namePrefix){if(!val)return"";namePrefix=namePrefix||"";var rtn="";for(var name in val){var _val=val[name];if(_.isString(_val)||_.isNumber(_val)||_.isBoolean(_val)||_.isDate(_val)){if(_val=this._toQueryParam(_val),_.isBoolean(_val)||_val)rtn+=(rtn?"&":"")+this._toQueryParamName(name,namePrefix)+"="+encodeURIComponent(_val).replace("|","%7C")}else if(_.isArray(_val)){var str="";for(var i in _val){var param=this._toQueryParam(_val[i]);if(_.isBoolean(param)||param)str+="|"+encodeURIComponent(param).replace("|","%7C")}if(str)rtn+=(rtn?"&":"")+this._toQueryParamName(name,namePrefix)+"="+str}else{var result=this._toQueryString(_val,this._toQueryParamName(name,namePrefix,!0));if(result)rtn+=(rtn?"&":"")+result}}return rtn},_toQueryParamName:function(name,prefix,isPrefix){return prefix+name+(isPrefix?".":"")},_toQueryParam:function(param){if(_.isNull(param)||_.isUndefined(param))return null;if(_.isDate(param))return param.getDate().getTime();return param}})}),define("pages/home/template/nls/page",{}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp;return buf.push('<div><div class="coursera-page"><div class="coursera-header"></div><div class="coursera-banner"></div><div class="coursera-body"></div></div><div class="coursera-footer"></div></div>'),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/template/page.html",["js/lib/jade","i18n!pages/home/template/nls/page"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.template.page"]=jadify(wndw.jade.helpers)}(window),define("pages/home/template/page",["jquery","backbone","underscore","js/core/coursera","pages/home/template/page.html"],function($,Backbone,_,Coursera,template){var page=Backbone.View.extend({name:"page",subregions:{header:"pages/home/template/header",footer:"pages/home/template/footer",body:"pages/home/template/body",banner:"pages/home/template/banner"},initialize:function(){this.bind("view:appended",this.scroll),this.bind("view:updated",this.scroll)},scroll:function(){$("html, body").scrollTop(0)},render:function(){var regions=this.region.regions,self=this,page=$(template());return self.$el.append(page),_.each(["header","banner","body","footer"],function(type){if(!regions[type])return void page.find(".coursera-"+type).hide();page.find(".coursera-"+type).replaceWith(regions[type].view.el)}),self}});return page}),define("pages/home/template/banner",["underscore","backbone","js/core/coursera"],function(_,Backbone,Coursera){var banner=Backbone.View.extend({name:"banner",className:"coursera-banner",attributes:{role:"navigation"}});return banner}),define("pages/home/template/nls/footer",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t,config){buf.push('<!-- WARNING: We currently have the same footer implemented in pages/open-course/common/footer.js.jade--><!-- If you make any changes, please make them in both places.--><!-- TODO: Unify footers (FLEX-27)--><div class="container"><div class="row-fluid"><div class="coursera-footer-content-primary span5"><a class="coursera-footer-link coursera-logo"></a><p>'+jade.escape(null==(jade_interp=_t("Coursera empowers people to improve their lives, the lives of their families, and the"))?"":jade_interp)+"\n"+jade.escape(null==(jade_interp=_t("communities they live in with education."))?"":jade_interp)+'</p><p class="coursera-footer-copyright">'+jade.escape(null==(jade_interp=_t("© 2014 Coursera Inc. All rights reserved."))?"":jade_interp)+'</p></div><div class="span7"><div class="row-fluid"><div class="coursera-footer-content-column span3"><h6>'+jade.escape(null==(jade_interp=_t("Company"))?"":jade_interp)+"</h6><a"+jade.attr("href",config.dir.home+"about/",!0,!1)+' class="internal-about coursera-footer-link">'+jade.escape(null==(jade_interp=_t("About"))?"":jade_interp)+"</a><a"+jade.attr("href",config.dir.home+"about/people",!0,!1)+' class="internal-about coursera-footer-link">'+jade.escape(null==(jade_interp=_t("People"))?"":jade_interp)+"</a><a"+jade.attr("href",config.dir.home+"about/leadership",!0,!1)+' class="internal-about coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Leadership"))?"":jade_interp)+"</a><a"+jade.attr("href",config.dir.home+"about/careers",!0,!1)+' class="internal-about coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Careers"))?"":jade_interp)+'</a></div><div class="coursera-footer-content-column span3"><h6>'+jade.escape(null==(jade_interp=_t("Friends"))?"":jade_interp)+"</h6><a"+jade.attr("href",config.dir.home+"about/partners",!0,!1)+' class="internal-about coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Partners"))?"":jade_interp)+"</a><a"+jade.attr("href",config.dir.home+"about/community",!0,!1)+' class="internal-about coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Community"))?"":jade_interp)+"</a><a"+jade.attr("href",config.dir.home+"about/programs",!0,!1)+' class="internal-about coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Programs"))?"":jade_interp)+'</a><a href="http://tech.coursera.org/app-platform" class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Developers"))?"":jade_interp)+"</a><a"+jade.attr("href",config.dir.home+"about/translate",!0,!1)+' class="internal-about coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Translate"))?"":jade_interp)+'</a></div><div class="coursera-footer-content-column span3"><h6>'+jade.escape(null==(jade_interp=_t("Connect"))?"":jade_interp)+'</h6><a target="_blank" href="https://plus.google.com/+Coursera" title="Follow Coursera on Google Plus" class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Google+"))?"":jade_interp)+'</a><a target="_blank" href="http://twitter.com/coursera" title="Follow Coursera on Twitter" class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Twitter"))?"":jade_interp)+'</a><a target="_blank" href="http://facebook.com/Coursera" title="Follow Coursera on Facebook" class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Facebook"))?"":jade_interp)+'</a><a target="_blank" href="http://blog.coursera.org" title="Read the Coursera blog" class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Blog"))?"":jade_interp)+'</a><a href="http://tech.coursera.org" class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Tech Blog"))?"":jade_interp)+'</a></div><div class="coursera-footer-content-column span3"><h6>'+jade.escape(null==(jade_interp=_t("More"))?"":jade_interp)+"</h6><a"+jade.attr("href",config.dir.home+"about/terms",!0,!1)+' class="internal-about coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Terms"))?"":jade_interp)+"</a><a"+jade.attr("href",config.dir.home+"about/privacy",!0,!1)+' class="internal-about coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Privacy"))?"":jade_interp)+'</a><a href="http://help.coursera.org">'+jade.escape(null==(jade_interp=_t("Help"))?"":jade_interp)+"</a><a"+jade.attr("href",config.dir.home+"about/press",!0,!1)+' class="internal-about coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Press"))?"":jade_interp)+"</a><a"+jade.attr("href",config.dir.home+"about/contact",!0,!1)+' class="internal-about coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Contact"))?"":jade_interp)+"</a></div></div></div></div></div>")}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/template/footer.html",["js/lib/jade","i18n!pages/home/template/nls/footer"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.template.footer"]=jadify(wndw.jade.helpers)}(window),define("pages/home/template/footer",["underscore","backbone","js/core/coursera","pages/home/template/footer.html","i18n!pages/home/template/nls/footer","js/lib/util"],function(_,Backbone,Coursera,template,_t,util){var footer=Backbone.View.extend({name:"footer",className:"coursera-footer",attributes:{role:"menubar"},events:{"click .coursera-footer a":"onFooterLinkClick"},onFooterLinkClick:function(e){var href=e.target&&e.target.getAttribute("href")||"";if(href)Coursera.multitracker.push(["user.click.footer-link",href])},render:function(){return this.$el.html(template({_t:_t,config:Coursera.config,isChina:util.isChina})),this}});return footer}),define("pages/home/template/nls/header",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(config,showNormalPartners,showStateSystems,_t,minimal,user,klass,showSignatureTrack){if(buf.push('<!-- WARNING: We currently have the same header implemented in pages/open-course/common/layout/header.js.jade--><!-- If you make any changes, please make them in both places.--><!-- TODO: Unify headers (FLEX-27)--><div class="container"><div class="row"><div class="coursera-header-primary"><a'+jade.attr("href",config.dir.home,!0,!1)+' class="internal-home coursera-logo"></a></div>'),showNormalPartners||showStateSystems){if(buf.push('<div style="float:left;" class="coursera-header-secondary"><span style="margin:0px 0px 0px 37px;color:#717171;"> |</span>'),showNormalPartners)buf.push('<span class="coursera-header-university-label">'+jade.escape(null==(jade_interp=_t("Global Partners"))?"":jade_interp)+"</span>");if(showStateSystems)buf.push('<span class="coursera-header-university-label">'+jade.escape(null==(jade_interp=_t("U.S. State Institutions"))?"":jade_interp)+"</span>");buf.push("</div>")}if(buf.push('<div class="coursera-header-secondary">'),!minimal)buf.push("<a"+jade.attr("href",config.dir.home+"courses",!0,!1)+' class="coursera-header-link internal-home">'+jade.escape(null==(jade_interp=_t("Courses"))?"":jade_interp)+"</a><a"+jade.attr("href",config.dir.home+"specializations?utm_medium=topnav",!0,!1)+' class="coursera-header-link internal-home">'+jade.escape(null==(jade_interp=_t("Specializations"))?"":jade_interp)+"</a><a"+jade.attr("href",config.dir.home+"about/partners",!0,!1)+' class="coursera-header-link internal-about">'+jade.escape(null==(jade_interp=_t("Institutions"))?"":jade_interp)+'</a><a tabindex="0" role="button" aria-haspopup="true" aria-expanded="false" aria-owns="coursera-header-about-popup" data-popup="#coursera-header-about-popup" data-popup-bind-open="mouseenter" data-popup-item="a" data-popup-direction="se" class="coursera-header-link coursera-header-account">'+jade.escape(null==(jade_interp=_t("About"))?"":jade_interp)+'<span>&nbsp;▾</span></a><span style="margin:0px -2px 0px 2px;color:#717171;"> |</span>');if(user&&user.get("authenticated"))buf.push('<a tabindex="0" role="button" aria-haspopup="true" aria-expanded="false" aria-owns="coursera-header-account-popup" data-popup="#coursera-header-account-popup" data-popup-bind-open="mouseenter" data-popup-item="a" data-popup-direction="se" class="coursera-header-link coursera-header-account"><span class="coursera-header-account-name">'+(null==(jade_interp=_t("&nbsp;#{user.get('headerName')}",{"user.get('headerName')":user.get("headerName")}))?"":jade_interp)+"</span><span>&nbsp;▾</span></a>");else buf.push("<a"+jade.attr("href",config.url.accounts+"signin",!0,!1)+' class="coursera-header-link coursera-header-link-special">'+jade.escape(null==(jade_interp=_t("Sign In"))?"":jade_interp)+"</a>"),klass="coursera-header-link coursera-header-link-special",buf.push("<a"+jade.attr("href",config.url.accounts+"signup",!0,!1)+jade.cls([klass],[!0])+">"+jade.escape(null==(jade_interp=_t("Sign Up"))?"":jade_interp)+"</a>");if(buf.push('</div></div></div><div id="coursera-header-about-popup" class="hide coursera-header-popup"><a data-popup-close="data-popup-close"'+jade.attr("href",config.dir.home+"about/",!0,!1)+' class="internal-about">'+jade.escape(null==(jade_interp=_t("Overview"))?"":jade_interp)+'</a><a data-popup-close="data-popup-close"'+jade.attr("href",config.dir.home+"about/careers",!0,!1)+' class="internal-about">'+jade.escape(null==(jade_interp=_t("Careers"))?"":jade_interp)+'</a><a data-popup-close="data-popup-close"'+jade.attr("href",config.dir.home+"about/people",!0,!1)+' class="internal-about">'+jade.escape(null==(jade_interp=_t("People"))?"":jade_interp)+'</a><a data-popup-close="data-popup-close"'+jade.attr("href",config.dir.home+"about/contact",!0,!1)+' class="internal-about">'+jade.escape(null==(jade_interp=_t("Contact"))?"":jade_interp)+'</a></div><div id="coursera-header-account-popup" class="hide coursera-header-popup"><a data-popup-close="data-popup-close"'+jade.attr("href",config.dir.home,!0,!1)+' class="internal-home">'+jade.escape(null==(jade_interp=_t("Course Dashboard"))?"":jade_interp)+"</a>"),user&&user.get("is_staff"))buf.push('<a data-popup-close="data-popup-close"'+jade.attr("href",config.dir.home+"admin/",!0,!1)+' class="internal-site-admin">'+jade.escape(null==(jade_interp=_t("Admin"))?"":jade_interp)+'</a><a data-popup-close="data-popup-close" href="http://support.coursera.org">'+jade.escape(null==(jade_interp=_t("Support"))?"":jade_interp)+"</a>");if(user)buf.push('<a data-popup-close="data-popup-close"'+jade.attr("href",config.dir.home+user.get("profileUrl"),!0,!1)+' class="internal-home">'+jade.escape(null==(jade_interp=_t("Profile"))?"":jade_interp)+"</a>");if(buf.push('<a data-popup-close="data-popup-close"'+jade.attr("href",config.dir.home+"account/records",!0,!1)+' class="internal-home coursera-header-records">'+jade.escape(null==(jade_interp=_t("Course Records"))?"":jade_interp)+'</a><a data-popup-close="data-popup-close"'+jade.attr("href",config.dir.home+"account/settings",!0,!1)+' class="internal-home">'+jade.escape(null==(jade_interp=_t("Settings"))?"":jade_interp)+"</a>"),user&&showSignatureTrack)buf.push('<a data-popup-close="data-popup-close"'+jade.attr("href",config.dir.home+"account/settings/signature",!0,!1)+' class="internal-home coursera-header-signature">'+jade.escape(null==(jade_interp=_t("Signature Track"))?"":jade_interp)+"</a>");buf.push('<a data-popup-close="data-popup-close"'+jade.attr("href",config.dir.home+"account/logout",!0,!1)+' class="internal-home">'+jade.escape(null==(jade_interp=_t("Sign Out"))?"":jade_interp)+"</a></div>")}("config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0,"showNormalPartners"in locals_for_with?locals_for_with.showNormalPartners:"undefined"!=typeof showNormalPartners?showNormalPartners:void 0,"showStateSystems"in locals_for_with?locals_for_with.showStateSystems:"undefined"!=typeof showStateSystems?showStateSystems:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"minimal"in locals_for_with?locals_for_with.minimal:"undefined"!=typeof minimal?minimal:void 0,"user"in locals_for_with?locals_for_with.user:"undefined"!=typeof user?user:void 0,"klass"in locals_for_with?locals_for_with.klass:"undefined"!=typeof klass?klass:void 0,"showSignatureTrack"in locals_for_with?locals_for_with.showSignatureTrack:"undefined"!=typeof showSignatureTrack?showSignatureTrack:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/template/header.html",["js/lib/jade","i18n!pages/home/template/nls/header"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.template.header"]=jadify(wndw.jade.helpers)}(window),define("js/models/category",["backbone"],function(Backbone){var category=Backbone.Model.extend({});return category}),define("js/collections/categories",["backbone","underscore","jquery","js/models/category","js/core/coursera","js/lib/cloudfront.api"],function(Backbone,_,$,Category,Coursera,CloudfrontApi){var Categories=Backbone.Collection.extend({model:Category,comparator:function(category){return category.get("name")}}),deferred;return Categories.singletonRead=function(){if(deferred)return deferred;deferred=$.Deferred();var cloudfrontApi=CloudfrontApi(Coursera.api,Coursera.config);return cloudfrontApi.get("category/list").done(function(jsonData){deferred.resolve(new Categories(jsonData))}).fail(function(xhr,status,err){deferred.reject(xhr,status,err),Coursera.router.trigger("error",500,location.href,{message:"error loading categories: "+err})}),deferred},Categories}),!function(wndw){var popup=function($,_,LucidJS,DataAttributes){var UP_ARROW=38,DOWN_ARROW=40,SPACE_BAR=32,ESCAPE=27,ENTER=13,OPENED=1,CLOSED=0,_private={defaults:{"bind.open":"click","bind.close":"click","bind.cancel.document":"mousemove","bind.cancel":"mouseleave","bind.uncancel":"mouseenter","bind.keydown":"keydown",direction:"sw","offset.x":0,"offset.y":0,timeout:450,"timeout.intent":350,resize:!1,width:!1,"attribute.open":"data-popup","attribute.close":"data-popup-close","attribute.item":"data-popup-item",position:"absolute"},prevPopup:null,prevTimeout:null,timeout:null,timeoutClear:null,getPopup:function(el,options){var pop=$(el).data("popup.me");if(pop&&pop.constructor==Popup.prototype.constructor)if(options)return pop.customize(options);else return pop;else return null},getPopupForAnchor:function($anchor,options){var selector=$anchor.attr(_private.defaults["attribute.open"]),$pop=$(selector),pop=_private.makePopup($pop,options);return pop},closeOlderPopups:function(){if(_private.prevPopup)_private.prevPopup.close(),_private.prevPopup=null},isTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,makePopup:function(el,settings){var $el=$(el),pop;if($el.attr("data-popup"))pop=_private.getPopupForAnchor($el);else pop=_private.getPopup($el);if(!pop)pop=new Popup($el,settings),$el.data("popup.me",pop);return pop},monitorKeys:function(e){if(_.contains([UP_ARROW,DOWN_ARROW],e.keyCode))e.preventDefault(),e.stopPropagation(),_private.changeFocus.call(this,e);else if(e.keyCode==ESCAPE)this.$anchor.focus(),this.close();else if(e.keyCode==ENTER)this.emitter.trigger("enter",this)},monitorActions:function(e){var el=this.$el[0],$target=$(e.target),that=this;if("mouseleave"!=e.type){if($target.closest(this.$el).size()>0||$target.closest(this.$anchor).size()>0)return void window.clearTimeout(_private.timeout)}else _private.timeout=window.setTimeout(function(){if(that.state==OPENED)that.close()},this.options.timeout)},intentOpen:function(e,popup,$anchor){var anchor=$anchor[0],x=e.pageX,y=e.pageY;if(_private.prevTimeout)$(document).off(".popup"),window.clearTimeout(_private.prevTimeout);_private.prevTimeout=window.setTimeout(function(){if(window.clearTimeout(_private.prevTimeout),$(document).off(".popup"),!popup.isOpen())popup.open($anchor)},popup.options["timeout.intent"]),$(document).on("mousemove.popup mouseleave.popup",function(e){if("mouseleave"==e.type||e.target!=anchor&&0===$(e.target).closest(anchor).size())$(document).off(".popup"),window.clearTimeout(_private.prevTimeout)})},changeFocus:function(e){if(!this.$anchor)return;var item_selector=this.$anchor.attr(this.options["attribute.item"]),$items=this.$el.children(":visible");if(item_selector)$items=$items.filter(item_selector);if(!$items.length)return;if(index=$items.index($items.filter(":focus")),e.keyCode==UP_ARROW)index--;
if(e.keyCode==DOWN_ARROW)index++;if(0>index||index>=$items.length)this.$anchor.focus();else if(index<$items.length)$items.eq(index).focus()}},Popup=function(el,settings){this.$el=$(el),this.$parent=this.$el.parent(),this.$anchor=null,this.emitter=LucidJS.emitter(this),this.customize(settings)};Popup.prototype.customize=function(settings){return this.options=_.extend({},DataAttributes.parse(this.$el,_private.defaults,"data-popup-"),settings),this},Popup.prototype.get=function(){return this.$el},Popup.prototype.open=function(anchor){if(this.state==OPENED)return;var that=this,$anchor=$(anchor);if(!this.$anchor||this.$anchor[0]!=$anchor[0]){var position=$anchor.position();if(this.options=DataAttributes.parse($anchor,this.options,"data-popup-"),this.$anchor=$anchor,this.$anchor.parent().append(this.$el),this.$anchor.attr("aria-expanded","true"),that.options.resize)this.$el.width(this.$anchor.outerWidth());if(that.options.width)this.$el.css("width",that.options.width);this.emitter.trigger("opening",this.$anchor);var offset={x:parseInt(this.options["offset.x"],10),y:parseInt(this.options["offset.y"],10)};if(this.$el.css({position:this.options.position}),!this.options.direction||"sw"==this.options.direction)this.move(position.left+offset.x,position.top+$anchor.outerHeight()+offset.y);else if("se"==this.options.direction)this.move(position.left+$anchor.outerWidth()+offset.x-this.$el.outerWidth(),position.top+$anchor.outerHeight()+offset.y);else if("ne"==this.options.direction)this.move(position.left+$anchor.outerWidth()+offset.x-this.$el.outerWidth(),position.top-this.$el.outerHeight()-offset.y);else if("s"==this.options.direction)this.move(position.left+$anchor.outerWidth()/2+offset.x-this.$el.outerWidth()/2,position.top+$anchor.outerHeight()+offset.y);else if("n"==this.options.direction)this.move(position.left+$anchor.outerWidth()/2+offset.x-this.$el.outerWidth()/2,position.top-this.$el.outerHeight()+offset.y);else if("w"==this.options.direction)this.move(position.left+offset.x-this.$el.outerWidth(),position.top+offset.y);this.$el.show(),window.setTimeout(function(){if(_private.closeOlderPopups(),$anchor.addClass("popup-opened"),!$anchor.is(":focus"))$anchor.focus();if(that.emitter.trigger("opened",that.$anchor),that.state=OPENED,_private.prevPopup=that,that.options["bind.cancel"])that.$el.on(that.options["bind.cancel"]+".popup",_.bind(_private.monitorActions,that)),that.$anchor.on(that.options["bind.cancel"]+".popup",_.bind(_private.monitorActions,that)),that.$el.on(that.options["bind.uncancel"]+".popup",_.bind(_private.monitorActions,that)),that.$anchor.on(that.options["bind.uncancel"]+".popup",_.bind(_private.monitorActions,that));if($(document).on(that.options["bind.cancel.document"]+".popup",_.bind(_private.monitorActions,that)).on(that.options["bind.keydown"]+".popup",_.bind(_private.monitorKeys,that)),that.options["attribute.close"])that.$el.on(that.options["bind.close"]+".popup","["+that.options["attribute.close"]+"]",function(e){if("disabled"!=$(e.currentTarget).attr("disabled"))that.close()})},0)}return this},Popup.prototype.move=function(x,y,z){return this.$el.css({left:x,top:y,"z-index":z||1e4}),this},Popup.prototype.close=function(){return $(document).off(".popup"),this.$anchor.attr("aria-expanded","false"),this.$anchor.removeClass("popup-opened"),this.emitter.trigger("closing",this.$anchor),this.$el.off(".popup").hide(),this.$anchor.off(".popup"),this.$parent.append(this.$el),this.emitter.trigger("closed",this.$anchor),this.$anchor=null,this.state=CLOSED,window.clearTimeout(this.timeout),_private.prevPopup=null,this},Popup.prototype.isOpen=function(){return this.$el.is(":visible")};var external=function(){return _private.getPopup.apply(null,arguments)||_private.makePopup.apply(this,arguments)};return external.start=function(view,options){function openPopup(pop,$anchor){if(!pop.isOpen())pop.open($anchor)}var $view=$(view);if($view.data("popups-initialized"))return;else $view.data("popups-initialized",1);$view.on("click.popup mouseenter.popup keydown.popup","["+_private.defaults["attribute.open"]+"]",function(e){var $anchor=$(this),bind=$anchor.attr("data-popup-bind-open");if("disabled"==$anchor.attr("disabled"))return;var pop=_private.getPopupForAnchor($anchor,options);if("keydown"==e.type&&_.contains([UP_ARROW,DOWN_ARROW,SPACE_BAR],e.keyCode))if(e.preventDefault(),e.stopPropagation(),e.keyCode==DOWN_ARROW||e.keyCode==SPACE_BAR){if(!pop.isOpen())openPopup(pop,$anchor);_private.changeFocus.call(pop,e)}else if(e.keyCode==UP_ARROW&&pop.isOpen())pop.close();if(e.type==bind||!bind&&"click"==e.type||_private.isTouch&&"click"==e.type)if("mouseover"==e.type||"mouseenter"==e.type)_private.intentOpen(e,pop,$anchor);else openPopup(pop,$anchor)}),$($view.find("["+_private.defaults["attribute.open"]+"]")).each(function(index){var $elem=$(this);if("true"==$elem.attr("aria-expanded")){var pop=_private.getPopupForAnchor($elem,options);openPopup(pop,$elem),window.setTimeout(function(){pop.close($elem)},3e3)}})},external.stop=function(view){var $view=$(view);$view.data("popups-initialized",0),$view.off(".popup"),_private.closeOlderPopups()},external.start("body"),external};if("function"==typeof define&&define.amd)define("js/lib/popups",["jquery","underscore","js/lib/lucid","js/lib/data.attributes"],function($,_,LucidJS,DataAttributes){return popup($,_,LucidJS,DataAttributes)});else wndw.Popup=popup(wndw.$,wndw._,wndw.LucidJS,wndw.DataAttributes)}(window),define("js/lib/truncate",["jquery","underscore"],function($,_){function byLength(string,nMaxChars){if(!string)return"";if(string.length<=nMaxChars)return string;var xMaxFit=nMaxChars-3,xTruncateAt=string.lastIndexOf(" ",xMaxFit);if(-1==xTruncateAt||nMaxChars/2>xTruncateAt)xTruncateAt=xMaxFit;return string.substr(0,xTruncateAt)+"..."}function byUTF8Bytes(string,nMaxChars){var toBytesUTF8=function(chars){return unescape(encodeURIComponent(chars))},fromBytesUTF8=function(bytes){return decodeURIComponent(escape(bytes))};if(toBytesUTF8(string).length<=nMaxChars)return string;for(var nMaxFit=nMaxChars-3,bytes=toBytesUTF8(string).substring(0,nMaxFit);;){try{return fromBytesUTF8(bytes)+"..."}catch(e){}bytes=bytes.substring(0,bytes.length-1)}}function byElemText($el){var originalText=$el.text(),truncateChars=0,iteration=function(){if($el.prop("scrollHeight")>$el.height()+6)truncateChars+=1,$el.text(originalText.slice(0,originalText.length-truncateChars)),$el.append("&hellip;"),_.defer(iteration)};_.defer(iteration)}function byElemHtml($el){var originalText=$el.html(),truncateChars=0,iteration=function(){if($el.prop("scrollHeight")>$el.height()+6)truncateChars+=1,$el.html(originalText.slice(0,originalText.length-truncateChars)),$el.append("&nbsp;&hellip;"),_.defer(iteration)};_.defer(iteration)}return{byLength:byLength,byUTF8Bytes:byUTF8Bytes,byElemText:byElemText,byElemHtml:byElemHtml}}),!function(wndw){function UserAgent(source){if(void 0===source)source=navigator.userAgent;this.source=source.replace(/^\s*/,"").replace(/\s*$/,""),this.browser_name=browser_name(this.source),this.browser_version=browser_version(this.source),this.os=os(this.source),this.platform=platform(this.source)}var Browsers,OS,Platform,Versions,browser_name,browser_version,os,platform;if(Versions={Firefox:/firefox\/([\d\w\.\-]+)/i,IE:/msie\s([\d\.]+[\d])/i,Chrome:/chrome\/([\d\w\.\-]+)/i,Safari:/version\/([\d\w\.\-]+)/i,Ps3:/([\d\w\.\-]+)\)\s*$/i,Psp:/([\d\w\.\-]+)\)?\s*$/i},Browsers={Konqueror:/konqueror/i,Chrome:/chrome/i,Safari:/safari/i,IE:/msie/i,Opera:/opera/i,PS3:/playstation 3/i,PSP:/playstation portable/i,Firefox:/firefox/i},OS={WindowsVista:/windows nt 6\.0/i,Windows7:/windows nt 6\.\d+/i,Windows2003:/windows nt 5\.2/i,WindowsXP:/windows nt 5\.1/i,Windows2000:/windows nt 5\.0/i,OSX:/os x (\d+)[._](\d+)/i,Linux:/linux/i,Wii:/wii/i,PS3:/playstation 3/i,PSP:/playstation portable/i,Ipad:/\(iPad.*os (\d+)[._](\d+)/i,Iphone:/\(iPhone.*os (\d+)[._](\d+)/i},Platform={Windows:/windows/i,Mac:/macintosh/i,Linux:/linux/i,Wii:/wii/i,Playstation:/playstation/i,Ipad:/ipad/i,Ipod:/ipod/i,Iphone:/iphone/i,Android:/android/i,Blackberry:/blackberry/i},browser_name=function(string){if(Browsers.Konqueror.test(string))return"Konqueror";else if(Browsers.Chrome.test(string))return"Chrome";else if(Browsers.Safari.test(string))return"Safari";else if(Browsers.IE.test(string))return"IE";else if(Browsers.Opera.test(string))return"Opera";else if(Browsers.PS3.test(string))return"PS3";else if(Browsers.PSP.test(string))return"PSP";else if(Browsers.Firefox.test(string))return"Firefox";else return"unknown"},browser_version=function(string){var regex;switch(browser_name(string)){case"Chrome":if(Versions.Chrome.test(string))return RegExp.$1;break;case"Safari":if(Versions.Safari.test(string))return RegExp.$1;break;case"Firefox":if(Versions.Firefox.test(string))return RegExp.$1;break;case"IE":if(Versions.IE.test(string))return RegExp.$1;break;case"PS3":if(Versions.Ps3.test(string))return RegExp.$1;break;case"PSP":if(Versions.Psp.test(string))return RegExp.$1;break;default:if(regex=/#\{name\}[\/ ]([\d\w\.\-]+)/i,regex.test(string))return RegExp.$1}},os=function(string){if(OS.WindowsVista.test(string))return"Windows Vista";else if(OS.Windows7.test(string))return"Windows 7";else if(OS.Windows2003.test(string))return"Windows 2003";else if(OS.WindowsXP.test(string))return"Windows XP";else if(OS.Windows2000.test(string))return"Windows 2000";else if(OS.Linux.test(string))return"Linux";else if(OS.Wii.test(string))return"Wii";else if(OS.PS3.test(string))return"Playstation";else if(OS.PSP.test(string))return"Playstation";else if(OS.OSX.test(string))return string.match(OS.OSX)[0].replace("_",".");else if(OS.Ipad.test(string))return string.match(OS.Ipad)[0].replace("_",".").replace("(","");else if(OS.Iphone.test(string))return string.match(OS.Iphone)[0].replace("_",".").replace("(","");else return"unknown"},platform=function(string){if(Platform.Windows.test(string))return"Microsoft Windows";else if(Platform.Mac.test(string))return"Apple Mac";else if(Platform.Android.test(string))return"Android";else if(Platform.Blackberry.test(string))return"Blackberry";else if(Platform.Linux.test(string))return"Linux";else if(Platform.Wii.test(string))return"Wii";else if(Platform.Playstation.test(string))return"Playstation";else if(Platform.Ipad.test(string))return"iPad";else if(Platform.Ipod.test(string))return"iPod";else if(Platform.Iphone.test(string))return"iPhone";else return"unknown"},"function"==typeof define&&define.amd)define("js/lib/useragent",[],function(){return UserAgent});else window.UserAgent=UserAgent}(window),!function(wndw){function BrowserBanner($,UserAgent){function browserFileAccept(inputButton){var userAgent=new UserAgent;if("safari"==userAgent.browser_name.toLowerCase())$(inputButton).removeAttr("accept")}function isSupportedBrowser(){var userAgent=new UserAgent;if("ie"==userAgent.browser_name.toLowerCase()&&userAgent.browser_version<9)return!1;if("firefox"==userAgent.browser_name.toLowerCase()&&userAgent.browser_version<12)return!1;if("safari"==userAgent.browser_name.toLowerCase()&&userAgent.browser_version<5)return!1;return!0}function maybeShowBanner(){if(!isSupportedBrowser())showBanner()}function showBanner(){if($(".coursera-browser-banner").length>0)return;var $browserBanner=$('<div class="coursera-browser-banner">');$browserBanner.css({"text-align":"center","font-size":"16px",padding:"10px 0px",background:"#FFEEA9","margin-top":"-100px","border-bottom":"1px solid #CCC"}),$browserBanner.html('You are using an unsupported browser, so some features may not work. <br> Please upgrade to a <a href="http://help.coursera.org/customer/portal/articles/823684-what-kind-of-computer-and-web-browser-do-i-need-">modern browser</a>.'),$(document.body).prepend($browserBanner),$browserBanner.animate({"margin-top":"+=100px"},1e3)}return $(document).ready(maybeShowBanner),{isSupportedBrowser:isSupportedBrowser,browserFileAccept:browserFileAccept,showBanner:showBanner}}if("function"==typeof define&&define.amd)define("js/lib/browser",["jquery","js/lib/useragent"],function($,UserAgent){return new BrowserBanner($,UserAgent)});else new BrowserBanner(wndw.$,wndw.UserAgent)}(window),define("pages/home/template/header",["underscore","backbone","js/core/coursera","pages/home/template/header.html","i18n!pages/home/template/nls/header","js/collections/universities","js/collections/categories","js/lib/cookie","js/lib/popups","js/lib/truncate","js/lib/language","jquery","js/lib/browser","js/lib/coursera.ab"],function(_,Backbone,Coursera,template,_t,Universities,Categories,cookie,Popups,truncate,language,$,browser,AB){var header=Backbone.View.extend({name:"header",className:"coursera-header",attributes:{role:"menubar"},initialize:function(options){this.options=options;var self=this;self.bind("view:appended",function(){}),self.bind("view:closed",function(){})},events:{"click .coursera-header .coursera-header-link, .internal-home":"onHeaderLinkClick"},onHeaderLinkClick:function(e){var href=e.target&&e.target.getAttribute("href")||"";if(href)Coursera.multitracker.push(["user.click.header-link",href])},render:function(){var self=this,showSigtrack=!1;if(Coursera.user&&Coursera.user.get("authenticated")){Coursera.user.set("profileUrl","-1"==Coursera.user.get("privacy")?"account/profile":"user/i/"+Coursera.user.get("external_id")),Coursera.user.set("headerName",truncate.byLength(Coursera.user.get("display_name"),15));var sigtrackObject=Coursera.user.get("signature_track");if(sigtrackObject.first_name||sigtrackObject.last_name||sigtrackObject.has_vouchers)showSigtrack=!0}var showNormalPartners=!1,showStateSystems=!1;if(this.options.universityPartnerType)showNormalPartners=2!=this.options.universityPartnerType,showStateSystems=2==this.options.universityPartnerType;return self.$el.html(template({_t:_t,config:Coursera.config,user:Coursera.user,showSignatureTrack:showSigtrack,showNormalPartners:showNormalPartners,showSigtrack:showSigtrack,showStateSystems:showStateSystems,minimal:_.has(this.options,"minimal")?this.options.minimal:!1})),self}});return header}),define("pages/home/front/nls/frontSearchBanner",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(config,searchBanner,generic,_t,hideUserCount){if(buf.push('<div class="coursera-front-search-banner-hero-container"><div'+jade.attr("style","background-image: url('"+config.url.assets+"pages/home/front/university-banners/"+searchBanner.shortname+".jpg')",!0,!1)+' class="coursera-hero-banner"></div><div class="container coursera-front-search-banner-container"><div class="coursera-front-search-banner-main-group">'),generic)buf.push('<h1 class="coursera-front-search-banner-tagline">'+jade.escape(null==(jade_interp=_t("Take the world's best courses, online, for free."))?"":jade_interp)+"</h1>");else buf.push('<h1 class="coursera-front-search-banner-tagline">'+jade.escape(null==(jade_interp=_t("Welcome to Coursera!"))?"":jade_interp)+'</h1><h3 class="coursera-front-search-banner-byline">'+jade.escape(null==(jade_interp=_t("Take the world's best courses, online, for free."))?"":jade_interp)+"</h3>");if(buf.push('<div class="coursera-front-search-banner-input-group"><form class="coursera-front-search-banner-form"><label for="coursera-front-search-banner-input" style="display:none;">'+jade.escape(null==(jade_interp=_t("What would you like to learn about?"))?"":jade_interp)+'</label><div class="coursera-front-search-banner-input-container"><input id="coursera-front-search-banner-input" type="search"'+jade.attr("placeholder",_t("What would you like to learn about?"),!0,!1)+' name="search"/><button id="coursera-front-search-button" type="submit" class="icon-search coursera-front-search-button"><span class="hidden-label">'+jade.escape(null==(jade_interp=_t("Search"))?"":jade_interp)+'</span></button></div></form></div><div style="display: none" class="coursera-front-search-banner-hide2"><div style="display: none" class="coursera-front-search-banner-join">'),!hideUserCount)buf.push("<span>"+(null==(jade_interp=_t("Join&nbsp;"))?"":jade_interp)+'</span><span class="coursera-front-search-banner-students-count"></span><span>'+(null==(jade_interp=_t("&nbsp;Courserians."))?"":jade_interp)+"</span><br/>");buf.push("<span>"+(null==(jade_interp=_t("Learn from&nbsp;"))?"":jade_interp)+'</span><span class="coursera-front-search-banner-courses-count"></span><span>'+(null==(jade_interp=_t("&nbsp;courses, from our&nbsp;"))?"":jade_interp)+'</span><span class="coursera-front-search-banner-universities-count"></span><span>'+(null==(jade_interp=_t("&nbsp;partners."))?"":jade_interp)+'</span><br/><a href="/about" class="internal-about">'+jade.escape(null==(jade_interp=_t("How it works »"))?"":jade_interp)+'</a></div></div></div></div><div class="coursera-front-unilink"><a'+jade.attr("href","/"+searchBanner.shortname,!0,!1)+' class="internal-home">'+jade.escape(null==(jade_interp=_t(searchBanner.name))?"":jade_interp)+" »</a></div></div>")}("config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0,"searchBanner"in locals_for_with?locals_for_with.searchBanner:"undefined"!=typeof searchBanner?searchBanner:void 0,"generic"in locals_for_with?locals_for_with.generic:"undefined"!=typeof generic?generic:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"hideUserCount"in locals_for_with?locals_for_with.hideUserCount:"undefined"!=typeof hideUserCount?hideUserCount:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/front/frontSearchBanner.html",["js/lib/jade","i18n!pages/home/front/nls/frontSearchBanner"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.front.frontSearchBanner"]=jadify(wndw.jade.helpers)}(window),define("js/json/nls/universities",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),define("js/lib/backbone.api",["backbone","underscore","js/lib/api"],function(Backbone,_,API){var apiModel={sync:function(method,model,options){options=_.extend({},options);var that=this,action=[],id=this.urlId||this.idAttribute||"id",query="",url=options.url?options.url:_.isFunction(this.url)?this.url():this.url;if(options.query){var qs=[];for(var p in options.query)qs.push(encodeURIComponent(p)+"="+encodeURIComponent(options.query[p]));query+=-1==url.indexOf("?")?"?"+qs.join("&"):"&"+qs.join("&")}if(!this.api){var urlRoot=url||(_.isFunction(this.urlRoot)?this.urlRoot():this.urlRoot);this.api=API(urlRoot)}if("create"==method)return options.data=_.extend(this.toJSON(),options.data||{}),this.api.post(url+query,options);else if("update"==method)if(this.partialUpdate){if(options.data=_.extend(this.changedAttributes()||{},options.data||{}),options.force)if(_.isArray(options.force))_.each(options.force,function(force){options.data[force]=that.get(force)});else options.data[options.force]=this.get(options.force);return this.api.patch(url+"/"+this.get(id)+query,options)}else return options.data=_.extend(this.toJSON(),options.data||{}),this.api.put(url+"/"+this.get(id)+query,options);else if("delete"==method)return this.api["delete"](url+"/"+this.get(id)+query,options);else if("read"==method)if(this instanceof Backbone.Collection||void 0===this.get(id))return this.api.get(url+query,options);else return this.api.get(url+"/"+this.get(id)+query,options)},create:function(options,callback){var that=this;return this.save(null,options).done(function(data){if(callback)callback.call(that,null,data)}).fail(function(jqXHR,textStatus){if(callback)callback.call(that,textStatus)})},update:function(attributes,_options,callback){var that=this,options=_options||{};if(attributes&&!this.isNew())options.silent=void 0!==options.silent?options.silent:!0;return this.save(attributes,options).done(function(data){if(callback)callback.call(that,null,data)}).fail(function(jqXHR,textStatus){if(callback)callback.call(that,textStatus)})},read:function(options,callback){var that=this;return this.fetch(options).done(function(data){if(callback)callback.call(that,null,data)}).fail(function(jqXHR,textStatus){if(callback)callback.call(that,textStatus)})},"delete":function(options,callback){var that=this;return this.destroy(options).done(function(data){if(callback)callback.call(that,null,data)}).fail(function(jqXHR,textStatus){if(callback)callback.call(that,textStatus)})}};return apiModel}),define("js/models/frontdata",["jquery","underscore","backbone","js/core/coursera","js/lib/backbone.api","js/lib/cloudfront.api","js/collections/topics","pages/home/api"],function($,_,Backbone,Coursera,BackboneApi,CloudfrontApi,Topics,homeApi){var FrontData=Backbone.Model.extend({url:"topic/listfront",api:CloudfrontApi(homeApi,Coursera.config),parse:function(response){return response.upcoming=new Topics(Topics.parse(response.upcoming)),response.upcoming_sigtrack=new Topics(Topics.parse(response.upcoming_sigtrack)),response}});_.extend(FrontData.prototype,BackboneApi);var deferred;return FrontData.singletonRead=function(){if(deferred)return deferred;deferred=$.Deferred();var frontData=new FrontData;return frontData.read().done(function(rawData){deferred.resolve(frontData)}).fail(function(xhr,status,err){deferred.reject(xhr,status,err),Coursera.router.trigger("error",500,location.href,{message:"error retrieving topics"})}),deferred},FrontData}),define("js/json/searchBanners",[],function(){return[{name:"Relay Graduate School of Education",shortname:"relay"},{name:"California Institute of the Arts",shortname:"calarts"},{name:"California Institute of Technology",shortname:"caltech"},{name:"Case Western Reserve University",shortname:"casewestern"},{name:"Curtis Institute of Music",shortname:"curtis"},{name:"Duke University",shortname:"duke"},{name:"École Polytechnique Fédérale de Lausanne",shortname:"epfl"},{name:"Georgia Institute of Technology",shortname:"gatech"},{name:"Ludwig-Maximilians-Universität München",shortname:"lmu"},{name:"Northwestern University",shortname:"northwestern"},{name:"Pennsylvania State University",shortname:"psu"},{name:"Princeton University",shortname:"princeton"},{name:"National University of Singapore",shortname:"nus"},{name:"Tecnológico de Monterrey",shortname:"tecdemonterrey"},{name:"The University of North Carolina at Chapel Hill",shortname:"unc"},{name:"Universiteit Leiden",shortname:"leiden"},{name:"University of California, Irvine",shortname:"uci"},{name:"University of California, Santa Cruz",shortname:"ucsc"},{name:"University of Colorado Boulder",shortname:"boulder"},{name:"University of Copenhagen",shortname:"ucph"},{name:"University of Geneva",shortname:"unige"},{name:"University of London International Programmes",shortname:"london"},{name:"University of Michigan",shortname:"umich"},{name:"University of Minnesota",shortname:"minnesota"},{name:"University of Pittsburgh",shortname:"pitt"},{name:"University of Wisconsin–Madison",shortname:"wisconsin"},{name:"Vanderbilt University",shortname:"vanderbilt"},{name:"Wesleyan University",shortname:"wesleyan"},{name:"University of Pennsylvania",shortname:"penn"}]}),define("pages/home/front/nls/frontAutocompleteEntries",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(searchString,_t,suggestions){buf.push('<li><ul><li class="active"><a'+jade.attr("href","courses?search="+searchString,!0,!1)+' class="internal-home">'+jade.escape(null==(jade_interp=_t("See all results..."))?"":jade_interp)+"</a></li></ul></li>"),function(){var $$obj=suggestions;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var suggestionGroup=$$obj[$index];if(suggestionGroup.items.length>0){if(buf.push("<li>"),suggestionGroup.label)buf.push("<h5>"+jade.escape(null==(jade_interp=_t(suggestionGroup.label))?"":jade_interp)+"</h5>");buf.push("<ul>"),function(){var $$obj=suggestionGroup.items;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var suggestionItem=$$obj[$index];if(buf.push("<li>"),suggestionItem.external)buf.push("<a"+jade.attr("href",suggestionItem.url,!0,!1)+' tabindex="-1"'+jade.cls(["coursera-autocomplete-match-"+suggestionItem.id],[!0])+">"+(null==(jade_interp=_t(suggestionItem.nameHilighted))?"":jade_interp)+"</a>");else buf.push("<a"+jade.attr("href",suggestionItem.url,!0,!1)+' tabindex="-1"'+jade.cls(["internal-home","coursera-autocomplete-match-"+suggestionItem.id],[null,!0])+">"+(null==(jade_interp=_t(suggestionItem.nameHilighted))?"":jade_interp)+"</a>");buf.push("</li>")}else{var $$l=0;for(var $index in $$obj){$$l++;var suggestionItem=$$obj[$index];if(buf.push("<li>"),suggestionItem.external)buf.push("<a"+jade.attr("href",suggestionItem.url,!0,!1)+' tabindex="-1"'+jade.cls(["coursera-autocomplete-match-"+suggestionItem.id],[!0])+">"+(null==(jade_interp=_t(suggestionItem.nameHilighted))?"":jade_interp)+"</a>");else buf.push("<a"+jade.attr("href",suggestionItem.url,!0,!1)+' tabindex="-1"'+jade.cls(["internal-home","coursera-autocomplete-match-"+suggestionItem.id],[null,!0])+">"+(null==(jade_interp=_t(suggestionItem.nameHilighted))?"":jade_interp)+"</a>");buf.push("</li>")}}}.call(this),buf.push("</ul></li>")}}else{var $$l=0;for(var $index in $$obj){$$l++;var suggestionGroup=$$obj[$index];if(suggestionGroup.items.length>0){if(buf.push("<li>"),suggestionGroup.label)buf.push("<h5>"+jade.escape(null==(jade_interp=_t(suggestionGroup.label))?"":jade_interp)+"</h5>");buf.push("<ul>"),function(){var $$obj=suggestionGroup.items;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var suggestionItem=$$obj[$index];if(buf.push("<li>"),suggestionItem.external)buf.push("<a"+jade.attr("href",suggestionItem.url,!0,!1)+' tabindex="-1"'+jade.cls(["coursera-autocomplete-match-"+suggestionItem.id],[!0])+">"+(null==(jade_interp=_t(suggestionItem.nameHilighted))?"":jade_interp)+"</a>");else buf.push("<a"+jade.attr("href",suggestionItem.url,!0,!1)+' tabindex="-1"'+jade.cls(["internal-home","coursera-autocomplete-match-"+suggestionItem.id],[null,!0])+">"+(null==(jade_interp=_t(suggestionItem.nameHilighted))?"":jade_interp)+"</a>");buf.push("</li>")}else{var $$l=0;for(var $index in $$obj){$$l++;var suggestionItem=$$obj[$index];if(buf.push("<li>"),suggestionItem.external)buf.push("<a"+jade.attr("href",suggestionItem.url,!0,!1)+' tabindex="-1"'+jade.cls(["coursera-autocomplete-match-"+suggestionItem.id],[!0])+">"+(null==(jade_interp=_t(suggestionItem.nameHilighted))?"":jade_interp)+"</a>");else buf.push("<a"+jade.attr("href",suggestionItem.url,!0,!1)+' tabindex="-1"'+jade.cls(["internal-home","coursera-autocomplete-match-"+suggestionItem.id],[null,!0])+">"+(null==(jade_interp=_t(suggestionItem.nameHilighted))?"":jade_interp)+"</a>");buf.push("</li>")}}}.call(this),buf.push("</ul></li>")}}}}.call(this)}("searchString"in locals_for_with?locals_for_with.searchString:"undefined"!=typeof searchString?searchString:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"suggestions"in locals_for_with?locals_for_with.suggestions:"undefined"!=typeof suggestions?suggestions:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/front/frontAutocompleteEntries.html",["js/lib/jade","i18n!pages/home/front/nls/frontAutocompleteEntries"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.front.frontAutocompleteEntries"]=jadify(wndw.jade.helpers)}(window),define("js/lib/lunr",[],function(){var lunr=function(config){var idx=new lunr.Index;if(idx.pipeline.add(lunr.stopWordFilter,lunr.stemmer),config)config.call(idx,idx);return idx};return lunr.version="0.3.0",lunr.tokenizer=function(str){if(Array.isArray(str))return str;for(var str=str.replace(/^\s+/,""),i=str.length-1;i>=0;i--)if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break}return str.split(/\s+/).map(function(token){return token.replace(/^\W+/,"").replace(/\W+$/,"").toLowerCase()})},lunr.Pipeline=function(){this._stack=[]},lunr.Pipeline.registeredFunctions={},lunr.Pipeline.registerFunction=function(fn,label){if(console&&console.warn&&label in this.registeredFunctions)console.warn("Overwriting existing registered function: "+label);fn.label=label,lunr.Pipeline.registeredFunctions[fn.label]=fn},lunr.Pipeline.warnIfFunctionNotRegistered=function(fn){var isRegistered=fn.label&&fn.label in this.registeredFunctions;if(!isRegistered&&console&&console.warn)console.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",fn)},lunr.Pipeline.load=function(serialised){var pipeline=new lunr.Pipeline;return serialised.forEach(function(fnName){var fn=lunr.Pipeline.registeredFunctions[fnName];if(fn)pipeline.add(fn);else throw new Error("Cannot load un-registered function: "+fnName)}),pipeline},lunr.Pipeline.prototype.add=function(){var fns=Array.prototype.slice.call(arguments);fns.forEach(function(fn){lunr.Pipeline.warnIfFunctionNotRegistered(fn),this._stack.push(fn)},this)},lunr.Pipeline.prototype.after=function(existingFn,newFn){lunr.Pipeline.warnIfFunctionNotRegistered(newFn);var pos=this._stack.indexOf(existingFn)+1;this._stack.splice(pos,0,newFn)},lunr.Pipeline.prototype.before=function(existingFn,newFn){lunr.Pipeline.warnIfFunctionNotRegistered(newFn);var pos=this._stack.indexOf(existingFn);this._stack.splice(pos,0,newFn)},lunr.Pipeline.prototype.remove=function(fn){var pos=this._stack.indexOf(fn);this._stack.splice(pos,1)},lunr.Pipeline.prototype.run=function(tokens){for(var out=[],tokenLength=tokens.length,stackLength=this._stack.length,i=0;tokenLength>i;i++){for(var token=tokens[i],j=0;stackLength>j&&(token=this._stack[j](token,i,tokens),void 0!==token);j++);if(void 0!==token)out.push(token)}return out},lunr.Pipeline.prototype.toJSON=function(){return this._stack.map(function(fn){return lunr.Pipeline.warnIfFunctionNotRegistered(fn),fn.label})},lunr.Vector=function(elements){this.elements=elements;for(var i=0;i<elements.length;i++)if(!(i in this.elements))this.elements[i]=0},lunr.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var sumOfSquares=0,elems=this.elements,len=elems.length,el,i=0;len>i;i++)el=elems[i],sumOfSquares+=el*el;return this._magnitude=Math.sqrt(sumOfSquares)},lunr.Vector.prototype.dot=function(otherVector){for(var elem1=this.elements,elem2=otherVector.elements,length=elem1.length,dotProduct=0,i=0;length>i;i++)dotProduct+=elem1[i]*elem2[i];return dotProduct},lunr.Vector.prototype.similarity=function(otherVector){return this.dot(otherVector)/(this.magnitude()*otherVector.magnitude())},lunr.Vector.prototype.toArray=function(){return this.elements},lunr.SortedSet=function(){this.length=0,this.elements=[]},lunr.SortedSet.load=function(serialisedData){var set=new this;return set.elements=serialisedData,set.length=serialisedData.length,set},lunr.SortedSet.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(element){if(~this.indexOf(element))return;this.elements.splice(this.locationFor(element),0,element)},this),this.length=this.elements.length},lunr.SortedSet.prototype.toArray=function(){return this.elements.slice()},lunr.SortedSet.prototype.map=function(fn,ctx){return this.elements.map(fn,ctx)},lunr.SortedSet.prototype.forEach=function(fn,ctx){return this.elements.forEach(fn,ctx)},lunr.SortedSet.prototype.indexOf=function(elem,start,end){var start=start||0,end=end||this.elements.length,sectionLength=end-start,pivot=start+Math.floor(sectionLength/2),pivotElem=this.elements[pivot];if(1>=sectionLength)if(pivotElem===elem)return pivot;
else return-1;if(elem>pivotElem)return this.indexOf(elem,pivot,end);if(pivotElem>elem)return this.indexOf(elem,start,pivot);if(pivotElem===elem)return pivot},lunr.SortedSet.prototype.locationFor=function(elem,start,end){var start=start||0,end=end||this.elements.length,sectionLength=end-start,pivot=start+Math.floor(sectionLength/2),pivotElem=this.elements[pivot];if(1>=sectionLength){if(pivotElem>elem)return pivot;if(elem>pivotElem)return pivot+1}if(elem>pivotElem)return this.locationFor(elem,pivot,end);if(pivotElem>elem)return this.locationFor(elem,start,pivot)},lunr.SortedSet.prototype.intersect=function(otherSet){for(var intersectSet=new lunr.SortedSet,i=0,j=0,a_len=this.length,b_len=otherSet.length,a=this.elements,b=otherSet.elements;!(i>a_len-1||j>b_len-1);){if(a[i]===b[j]){intersectSet.add(a[i]),i++,j++;continue}if(a[i]<b[j]){i++;continue}if(a[i]>b[j]){j++;continue}}return intersectSet},lunr.SortedSet.prototype.clone=function(){var clone=new lunr.SortedSet;return clone.elements=this.toArray(),clone.length=clone.elements.length,clone},lunr.SortedSet.prototype.union=function(otherSet){var longSet,shortSet,unionSet;if(this.length>=otherSet.length)longSet=this,shortSet=otherSet;else longSet=otherSet,shortSet=this;return unionSet=longSet.clone(),unionSet.add.apply(unionSet,shortSet.toArray()),unionSet},lunr.SortedSet.prototype.toJSON=function(){return this.toArray()},lunr.Index=function(){this._fields=[],this._ref="id",this.pipeline=new lunr.Pipeline,this.documentStore=new lunr.Store,this.tokenStore=new lunr.TokenStore,this.corpusTokens=new lunr.SortedSet},lunr.Index.load=function(serialisedData){if(serialisedData.version!==lunr.version&&console&&console.warn)console.warn("version mismatch: current "+lunr.version+" importing "+serialisedData.version);var idx=new this;return idx._fields=serialisedData.fields,idx._ref=serialisedData.ref,idx.documentStore=lunr.Store.load(serialisedData.documentStore),idx.tokenStore=lunr.TokenStore.load(serialisedData.tokenStore),idx.corpusTokens=lunr.SortedSet.load(serialisedData.corpusTokens),idx.pipeline=lunr.Pipeline.load(serialisedData.pipeline),idx},lunr.Index.prototype.field=function(fieldName,opts){var opts=opts||{},field={name:fieldName,boost:opts.boost||1};return this._fields.push(field),this},lunr.Index.prototype.ref=function(refName){return this._ref=refName,this},lunr.Index.prototype.add=function(doc){var docTokens={},allDocumentTokens=new lunr.SortedSet,docRef=doc[this._ref];this._fields.forEach(function(field){var fieldTokens=this.pipeline.run(lunr.tokenizer(doc[field.name]));docTokens[field.name]=fieldTokens,lunr.SortedSet.prototype.add.apply(allDocumentTokens,fieldTokens)},this),this.documentStore.set(docRef,allDocumentTokens),lunr.SortedSet.prototype.add.apply(this.corpusTokens,allDocumentTokens.toArray());for(var i=0;i<allDocumentTokens.length;i++){var token=allDocumentTokens.elements[i],tf=this._fields.reduce(function(memo,field){var tokenCount=docTokens[field.name].filter(function(t){return t===token}).length,fieldLength=docTokens[field.name].length;return memo+tokenCount/fieldLength*field.boost},0);this.tokenStore.add(token,{ref:docRef,tf:tf})}},lunr.Index.prototype.remove=function(doc){var docRef=doc[this._ref],docTokens=this.documentStore.get(docRef);this.documentStore.remove(docRef),docTokens.forEach(function(token){this.tokenStore.remove(token,docRef)},this)},lunr.Index.prototype.update=function(doc){this.remove(doc),this.add(doc)},lunr.Index.prototype.idf=function(term){var documentFrequency=Object.keys(this.tokenStore.get(term)).length;if(0===documentFrequency)return 1;else return 1+Math.log(this.tokenStore.length/documentFrequency)},lunr.Index.prototype.search=function(query){var queryTokens=this.pipeline.run(lunr.tokenizer(query)),queryArr=new Array(this.corpusTokens.length),documentSets=[],fieldBoosts=this._fields.reduce(function(memo,f){return memo+f.boost},0),hasSomeToken=queryTokens.some(function(token){return this.tokenStore.has(token)},this);if(!hasSomeToken)return[];queryTokens.forEach(function(token,i,tokens){var tf=1/tokens.length*this._fields.length*fieldBoosts,self=this,set=this.tokenStore.expand(token).reduce(function(memo,key){var pos=self.corpusTokens.indexOf(key),idf=self.idf(key),exactMatchBoost=key===token?10:1,set=new lunr.SortedSet;if(pos>-1)queryArr[pos]=tf*idf*exactMatchBoost;return Object.keys(self.tokenStore.get(key)).forEach(function(ref){set.add(ref)}),memo.union(set)},new lunr.SortedSet);documentSets.push(set)},this);var documentSet=documentSets.reduce(function(memo,set){return memo.intersect(set)}),queryVector=new lunr.Vector(queryArr);return documentSet.map(function(ref){return{ref:ref,score:queryVector.similarity(this.documentVector(ref))}},this).sort(function(a,b){return b.score-a.score})},lunr.Index.prototype.documentVector=function(documentRef){for(var documentTokens=this.documentStore.get(documentRef),documentTokensLength=documentTokens.length,documentArr=new Array(this.corpusTokens.length),i=0;documentTokensLength>i;i++){var token=documentTokens.elements[i],tf=this.tokenStore.get(token)[documentRef].tf,idf=this.idf(token);documentArr[this.corpusTokens.indexOf(token)]=tf*idf}return new lunr.Vector(documentArr)},lunr.Index.prototype.toJSON=function(){return{version:lunr.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},lunr.Store=function(){this.store={},this.length=0},lunr.Store.load=function(serialisedData){var store=new this;return store.length=serialisedData.length,store.store=Object.keys(serialisedData.store).reduce(function(memo,key){return memo[key]=lunr.SortedSet.load(serialisedData.store[key]),memo},{}),store},lunr.Store.prototype.set=function(id,tokens){this.store[id]=tokens,this.length=Object.keys(this.store).length},lunr.Store.prototype.get=function(id){return this.store[id]},lunr.Store.prototype.has=function(id){return id in this.store},lunr.Store.prototype.remove=function(id){if(!this.has(id))return;delete this.store[id],this.length--},lunr.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},lunr.stemmer=function(){var step2list={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},step3list={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},c="[^aeiou]",v="[aeiouy]",C=c+"[^aeiouy]*",V=v+"[aeiou]*",mgr0="^("+C+")?"+V+C,meq1="^("+C+")?"+V+C+"("+V+")?$",mgr1="^("+C+")?"+V+C+V+C,s_v="^("+C+")?"+v;return function(w){var stem,suffix,firstch,re,re2,re3,re4;if(w.length<3)return w;if(firstch=w.substr(0,1),"y"==firstch)w=firstch.toUpperCase()+w.substr(1);if(re=/^(.+?)(ss|i)es$/,re2=/^(.+?)([^s])s$/,re.test(w))w=w.replace(re,"$1$2");else if(re2.test(w))w=w.replace(re2,"$1$2");if(re=/^(.+?)eed$/,re2=/^(.+?)(ed|ing)$/,re.test(w)){var fp=re.exec(w);if(re=new RegExp(mgr0),re.test(fp[1]))re=/.$/,w=w.replace(re,"")}else if(re2.test(w)){var fp=re2.exec(w);if(stem=fp[1],re2=new RegExp(s_v),re2.test(stem))if(w=stem,re2=/(at|bl|iz)$/,re3=new RegExp("([^aeiouylsz])\\1$"),re4=new RegExp("^"+C+v+"[^aeiouwxy]$"),re2.test(w))w+="e";else if(re3.test(w))re=/.$/,w=w.replace(re,"");else if(re4.test(w))w+="e"}if(re=/^(.+?)y$/,re.test(w)){var fp=re.exec(w);if(stem=fp[1],re=new RegExp(s_v),re.test(stem))w=stem+"i"}if(re=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,re.test(w)){var fp=re.exec(w);if(stem=fp[1],suffix=fp[2],re=new RegExp(mgr0),re.test(stem))w=stem+step2list[suffix]}if(re=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,re.test(w)){var fp=re.exec(w);if(stem=fp[1],suffix=fp[2],re=new RegExp(mgr0),re.test(stem))w=stem+step3list[suffix]}if(re=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,re2=/^(.+?)(s|t)(ion)$/,re.test(w)){var fp=re.exec(w);if(stem=fp[1],re=new RegExp(mgr1),re.test(stem))w=stem}else if(re2.test(w)){var fp=re2.exec(w);if(stem=fp[1]+fp[2],re2=new RegExp(mgr1),re2.test(stem))w=stem}if(re=/^(.+?)e$/,re.test(w)){var fp=re.exec(w);if(stem=fp[1],re=new RegExp(mgr1),re2=new RegExp(meq1),re3=new RegExp("^"+C+v+"[^aeiouwxy]$"),re.test(stem)||re2.test(stem)&&!re3.test(stem))w=stem}if(re=/ll$/,re2=new RegExp(mgr1),re.test(w)&&re2.test(w))re=/.$/,w=w.replace(re,"");if("y"==firstch)w=firstch.toLowerCase()+w.substr(1);return w}}(),lunr.Pipeline.registerFunction(lunr.stemmer,"stemmer"),lunr.stopWordFilter=function(token){if(-1===lunr.stopWordFilter.stopWords.indexOf(token))return token},lunr.stopWordFilter.stopWords=new lunr.SortedSet,lunr.stopWordFilter.stopWords.length=119,lunr.stopWordFilter.stopWords.elements=["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"],lunr.Pipeline.registerFunction(lunr.stopWordFilter,"stopWordFilter"),lunr.TokenStore=function(){this.root={docs:{}},this.length=0},lunr.TokenStore.load=function(serialisedData){var store=new this;return store.root=serialisedData.root,store.length=serialisedData.length,store},lunr.TokenStore.prototype.add=function(token,doc,root){var root=root||this.root,key=token[0],rest=token.slice(1);if(!(key in root))root[key]={docs:{}};if(0===rest.length)return root[key].docs[doc.ref]=doc,void(this.length+=1);else return this.add(rest,doc,root[key])},lunr.TokenStore.prototype.has=function(token,root){var root=root||this.root,key=token[0],rest=token.slice(1);if(!(key in root))return!1;if(0===rest.length)return!0;else return this.has(rest,root[key])},lunr.TokenStore.prototype.getNode=function(token,root){var root=root||this.root,key=token[0],rest=token.slice(1);if(!(key in root))return{};if(0===rest.length)return root[key];else return this.getNode(rest,root[key])},lunr.TokenStore.prototype.get=function(token,root){return this.getNode(token,root).docs||{}},lunr.TokenStore.prototype.remove=function(token,ref,root){var root=root||this.root,key=token[0],rest=token.slice(1);if(!(key in root))return;if(0===rest.length)delete root[key].docs[ref];else return this.remove(rest,ref,root[key])},lunr.TokenStore.prototype.expand=function(token,memo){var root=this.getNode(token),docs=root.docs||{},memo=memo||[];if(Object.keys(docs).length)memo.push(token);return Object.keys(root).forEach(function(key){if("docs"===key)return;memo.concat(this.expand(token+key,memo))},this),memo},lunr.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},lunr}),define("js/collections/specializations",["jquery","backbone","underscore","js/lib/cookie","js/models/specialization","js/core/coursera","js/lib/cloudfront.api"],function($,Backbone,_,Cookie,Specialization,Coursera,CloudfrontApi){var Specializations=Backbone.Collection.extend({model:Specialization});Specializations.toArray=function(specializations){return specializations instanceof Backbone.Collection?specializations.toArray():specializations},Specializations.matchingSearch=function(search){return[]},Specializations.specsHasTopic=function(specs,topic){var topicId=topic.get("id");return void 0!==_.find(specs.toArray(),function(spec){return void 0!==_.find(spec.get("topics").toArray(),function(topic){if(topic.get("id")===topicId)return!0})})},Specializations.annotateTopics=function(specializations,topics){if(topics.first().has("spec_info"))return;var specTopics={};specializations.each(function(spec){spec.get("topics").each(function(topic){specTopics[topic.get("id")]={id:spec.get("id"),shortName:spec.get("short_name")}})}),topics.each(function(topic){var topicId=topic.get("id");if(topicId in specTopics)topic.set("spec_info",specTopics[topicId],{silent:!0});else topic.set("spec_info",{id:0},{silent:!0})})},Specializations.matchingSearch=function(specializations,search){var searchWords=search.match(/\w+|"[^"]+"/g);searchWords=_.map(searchWords,function(word){return word.replace(/"/g,"")});var searchPatterns=_.map(searchWords,function(word){var regexString="\\b"+word+(1==word.length?"\\b":"");return new RegExp(regexString,"i")}),matchingSpecs=specializations.filter(function(spec){return _.all(searchPatterns,function(pattern){return pattern.test(spec.get("name"))})});return matchingSpecs},Specializations.backbonify=function(data,deferred){for(var specializations=new Specializations,i=0;i<data.length;i++)specializations.add(data[i]);deferred.resolve(specializations,data)};var deferredListJson;return Specializations.singletonReadAll=function(){if(deferredListJson)return deferredListJson;deferredListJson=$.Deferred();var fetchUrl="specialization/list?currency="+Cookie.get("ip_currency"),cloudfrontApi=CloudfrontApi(Coursera.api,Coursera.config);return cloudfrontApi.get(fetchUrl).done(function(data){Specializations.backbonify(data,deferredListJson)}).fail(function(){deferredListJson.reject()}),deferredListJson},Specializations}),define("js/models/autocomplete",["jquery","backbone","underscore","js/lib/lunr","js/collections/topics","js/collections/specializations","js/lib/util"],function($,Backbone,_,lunr,Topics,Specializations,util){var itemTypes=[{id:"topic",label:"Courses",numDisplay:5},{id:"category",label:"Topics",numDisplay:3},{id:"instructor",label:"Instructors",numDisplay:3},{id:"university",label:"Universities",numDisplay:3},{id:"specialization",label:"Specializations",numDisplay:3}],additionalSearchData={"University of Pennsylvania":"Wharton Business School"},autocomplete=Backbone.Model.extend({_topicWeight:function(topic){var minWeight=.1,futureDecay=60,pastDecay=20;if(topic.get("flex_course"))return 1;if(!topic.get("open_course"))return minWeight;var days=topic.get("open_course").getStartDiff(),absDay=Math.abs(days);if(days>=0)return(1-minWeight)*Math.exp(-absDay/futureDecay)+minWeight;if(0>days)return(1-minWeight)*Math.exp(-absDay/pastDecay)+minWeight},loadData:function(){var self=this;if(this.get("deferredData"))return;var deferredData=$.Deferred();$.when(Topics.singletonReadAll(),Specializations.singletonReadAll()).then(function(topicsD,specsD){var topics=topicsD[0],rawJson=topicsD[1],specializationsJson=specsD[1],items=[],i,item;for(topics.each(function(topic){var unis=_.pluck(topic.get("universities"),"name"),additionalSearch=unis.concat(_.chain(unis).map(function(uni){return additionalSearchData[uni]}).compact().value());item={id:items.length,type:"topic",name:topic.get("name"),url:topic.getRelativeLink(),additionalSearch:additionalSearch.join(" "),weight:self._topicWeight(topic),external:topic.get("flex_course")},items.push(item)}),i=0;i<rawJson.insts.length;i++){var inst=rawJson.insts[i];item={id:items.length,type:"instructor",name:util.concatName(inst),url:inst.short_name?"instructor/"+inst.short_name:"instructor/~"+inst.id,weight:1},items.push(item)}for(i=0;i<rawJson.cats.length;i++){var c=rawJson.cats[i];item={id:items.length,type:"category",name:c.name,url:"courses?cats="+c.short_name,weight:1},items.push(item)}for(i=0;i<rawJson.unis.length;i++){var u=rawJson.unis[i];if(!u.display)continue;var additionalSearch=[u.short_name];additionalSearch.push(additionalSearchData[u.name]),item={id:items.length,type:"university",name:u.name,additionalSearch:additionalSearch.join(" "),url:"/"+u.short_name,weight:1},items.push(item)}for(i=0;i<specializationsJson.length;i++){var s=specializationsJson[i],shortName=s.short_name,specId=s.id;item={id:items.length,type:"specialization",name:s.name,url:"specialization/"+s.short_name+"/"+s.id+"?utm_medium=heroSearch",weight:1,external:!0},items.push(item)}_.each(items,function(item){item.nameLatinized=util.removeDiacritics(item.name),item.searchString=item.nameLatinized+" "+(item.additionalSearch||"")});var searchIndex=new lunr.Index;searchIndex.field("searchString"),searchIndex.ref("id"),_.each(items,function(item){searchIndex.add(item)}),deferredData.resolve({items:items,searchIndex:searchIndex})}),this.set("deferredData",deferredData)},search:function(searchString){return this.loadData(),this.get("deferredData").pipe(function(deferredData){var items=deferredData.items,searchIndex=deferredData.searchIndex,results=[],matchIdxs=searchIndex.search(util.removeDiacritics(searchString)),matches=_.map(matchIdxs,function(matchIdx){return items[matchIdx.ref].score=matchIdx.score*items[matchIdx.ref].weight,items[matchIdx.ref]}),matchGroups=_.groupBy(matches,"type");results=results.concat(_.map(itemTypes,function(type){return matchGroups[type.id]=matchGroups[type.id]||[],matchGroups[type.id]=_.sortBy(matchGroups[type.id],function(match){return-match.score}),{label:type.label,items:_.first(matchGroups[type.id],type.numDisplay)}}));var searchTokens=lunr.tokenizer(util.removeDiacritics(searchString));return _.each(_.flatten(_.pluck(results,"items")),function(match){match.positions=[];for(var i=0;i<match.name.length;i++)match.positions.push(!1);_.each(searchTokens,function(token){for(var matchLength=token.length;matchLength>=1;matchLength--){for(var matchFound=!1,regexp=new RegExp("(^| )"+token.substr(0,matchLength),"gi");m=regexp.exec(match.nameLatinized);){for(var j=0;matchLength>j;j++)match.positions[m.index+j+(" "==m[1]?1:0)]=!0;matchFound=!0}if(matchFound)break}});for(var nameHilighted="",hilightSection=!1,k=0;k<match.name.length;k++){if(match.positions[k]&&!hilightSection)nameHilighted+="<strong>",hilightSection=!0;if(!match.positions[k]&&hilightSection)nameHilighted+="</strong>",hilightSection=!1;nameHilighted+=match.name[k]}if(hilightSection)nameHilighted+="</strong>";match.nameHilighted=nameHilighted}),results})}});return autocomplete}),define("pages/home/front/frontAutocomplete",["js/core/coursera","backbone","jquery","underscore","pages/home/front/frontAutocompleteEntries.html","i18n!pages/home/front/nls/frontAutocompleteEntries","js/models/autocomplete","js/lib/coursera.ab"],function(Coursera,Backbone,$,_,entriesTemplate,entriesTemplate_t,autocompleteModel,AB){var menu=Backbone.View.extend({events:{"mouseover li>ul>li":"_mouseover","click li>ul>li":"_click"},tagName:"ul",className:"coursera-front-autocomplete-menu",render:function(suggestions,searchString){var self=this;this.$el.empty(),this.$el.append(entriesTemplate({_t:entriesTemplate_t,suggestions:suggestions,searchString:searchString}))},move:function(dir){var activeIdx=this.$("li>ul>li").index(this.$(".active"));this.$("li>ul>li").removeClass("active");var newActiveIdx=activeIdx+dir;if(-1==newActiveIdx)newActiveIdx=this.$("li>ul>li").length-1;if(newActiveIdx==this.$("li>ul>li").length)newActiveIdx=0;if(newActiveIdx>=0)this.$("li>ul>li").eq(newActiveIdx).addClass("active")},navigateActive:function(searchString){var activeIdx=this.$("li>ul>li").index(this.$(".active")),$active=this.$(".active");if(0===$active.length)return!1;var url=$active.find("a").attr("href");if(this.trigger("navigateTo",url,activeIdx),url.indexOf("specialization")>=0||/^\/learn\//.test(url))window.location.href=url;else Coursera.router.navigate(url,{trigger:!0});return!0},_mouseover:function(e){this.$("li>ul>li").removeClass("active"),$(e.currentTarget).addClass("active")},_click:function(e){this.$("li>ul>li").removeClass("active"),$(e.currentTarget).addClass("active"),this.navigateActive()}}),autocomplete=Backbone.View.extend({events:{keydown:"_keydown",focus:"_focus",blur:"_blur"},initialize:function(){var self=this;this.menu=new menu,this.model=new autocompleteModel,this._searchDebounce=_.debounce(_.bind(this._search,this),20),this.lastSearch="",this._trackDebounce=_.debounce(_.bind(function(){if(this.lastSearch)Coursera.multitracker.push(["user.coursera.front.autocomplete.input",this.lastSearch])},this),400),this.menu.on("navigateTo",function(url,activeIdx){Coursera.multitracker.push(["user.coursera.front.autocomplete.navigate",url+"|"+self.$el.val()+"|"+activeIdx]),self._closeMenu()})},render:function(){this.$el.attr("autocomplete","off"),this.menu.$el.hide(),this.$el.after(this.menu.$el)},_closeMenu:function(){this.menu.$el.hide()},_suggest:function(suggestions,searchString){this.menu.render(suggestions,searchString),this.menu.$el.show()},_search:function(forceRedo){var self=this,searchString=this.$el.val();if(searchString==this.lastSearch&&!forceRedo)return;if(this.lastSearch=searchString,this._trackDebounce(),searchString.length>=3)this.model.search(searchString).done(function(searchResults){self._suggest(searchResults,searchString)});else this._closeMenu()},_keydown:function(e){switch(e.which){case 13:return!this.menu.navigateActive();case 27:this._searchDebounce(!0);break;case 38:return this.menu.move(-1),!1;case 40:return this.menu.move(1),!1;default:this._searchDebounce()}},_blur:function(e){setTimeout(_.bind(this._closeMenu,this),400)},_focus:function(e){this._searchDebounce(!0)}});return autocomplete}),define("js/lib/placeholder",["jquery"],function($){var c="placeholder",hasNativeSupport=c in document.createElement("input")&&c in document.createElement("textarea");$.fn.placeholder=function(){if(!this.length)return;return this.each(function(){function hideInput(el){el.css({position:"absolute",left:"-9999em",tabindex:-1})}function showInput(el){el.css({position:"",left:""}).removeAttr("tabindex")}function placeholderOnFocus(ev){if(!hasNativeSupport&&e.data("placeholder")){var el=ispassword?fakePassw.get(0):e.get(0);if(el.createTextRange){var range=el.createTextRange();range.moveStart("character",0),range.collapse(),range.select()}else if(el.setSelectionRange)el.setSelectionRange(0,0)}}function invisibleKeyCode(k){return k>-1&&48>k&&32!=k||k>90&&96>k||k>111&&186>k||k>192&&219>k||k>219&&220>k}function placeholderOnKeyDown(ev){if(e.hasClass(c)&&!invisibleKeyCode(ev.which)){if(!hasNativeSupport&&e.data("placeholder"))if(e.val(""),e.data("placeholder",!1),ispassword)hideInput(fakePassw),showInput(e),e.focus();e.removeClass(c)}}function placeholderOnKeyUp(ev){if(!hasNativeSupport&&""===e.attr("value")){if(e.data("placeholder",!0),ispassword)hideInput(e),showInput(fakePassw),fakePassw.focus();else e.addClass(c),e.val(d);if(e.get(0).createTextRange){var range=e.get(0).createTextRange();range.moveStart("character",0),range.collapse(),range.select()}else if(e.get(0).setSelectionRange)e.get(0).setSelectionRange(0,0)}}function placeholderOnBlur(ev){if(""===e.val())if(e.addClass(c),!hasNativeSupport)if(e.data("placeholder",!0),!ispassword)e.val(d);else showInput(fakePassw),hideInput(e)}var e=$(this),d=e.attr("placeholder"),ispassword="password"===e.attr("type"),fakePassw,inputCssClass,size;if(ispassword&&!hasNativeSupport)fakePassw=$("<input>").attr({type:"text",value:d,"class":e.attr("class"),style:e.attr("style")}),e.before(fakePassw),fakePassw.bind("keydown.placeholder",placeholderOnKeyDown),fakePassw.bind("focus.placeholder",placeholderOnFocus);else e.bind("keydown.placeholder",placeholderOnKeyDown);e.data("placeholder",!0),e.bind("blur.placeholder",placeholderOnBlur).trigger("blur.placeholder"),e.bind("focus.placeholder",placeholderOnFocus),e.bind("keyup.placeholder",placeholderOnKeyUp)})};var $val;if(!hasNativeSupport)$val=$.fn.val,$.fn.val=function(value){if(!arguments.length){var input=$(this);return input.data("placeholder")&&input.attr("value")==input.attr("placeholder")?"":$val.call(this)}return $val.call(this,value)}}),define("pages/home/front/frontSearchBanner",["js/core/coursera","backbone","underscore","jquery","pages/home/front/frontSearchBanner.html","i18n!pages/home/front/nls/frontSearchBanner","i18n!js/json/nls/universities","js/models/frontdata","js/json/searchBanners","pages/home/front/frontAutocomplete","js/lib/placeholder","js/lib/util","js/lib/coursera.ab"],function(Coursera,Backbone,_,$,template,_t,universities_t,FrontData,searchBanners,autocomplete,placeholder,util,AB){_t=_t.merge(universities_t);var frontSearchBanner=Backbone.View.extend({events:{"submit form.coursera-front-search-banner-form":"searchSubmit","click .coursera-front-search-banner-join a":"onLinkClick","click .coursera-front-unilink a":"onLinkClick"},onLinkClick:function(e){var href=$(e.currentTarget).attr("href");Coursera.multitracker.push(["user.click.search-banner-link",href])},initialize:function(){var self=this;this.generic=!("signedInUser"in self.options&&self.options.signedInUser),this.bind("view:closing",function(){window.clearInterval(self.joinTimer)}),this.bind("view:appended",function(){self.$("input[placeholder]").placeholder(),self.$("#coursera-front-search-banner-input").focus()})},render:function(){var self=this,bannerIndex=Math.floor(Math.random()*searchBanners.length),searchBanner=searchBanners[bannerIndex],show_user_count=AB.session.getExperiment("homepage_user_count").getChosenVariant();if(self.$el.append(template({_t:_t,config:Coursera.config,searchBanner:searchBanner,generic:self.generic,hideUserCount:show_user_count.indexOf("hide")>=0})),new autocomplete({el:this.$("#coursera-front-search-banner-input")}).render(),self.generic)FrontData.singletonRead().done(function(frontData){self.$(".coursera-front-search-banner-courses-count").text(frontData.get("total_courses")),self.$(".coursera-front-search-banner-universities-count").text(frontData.get("total_universities")),self.$(".coursera-front-search-banner-hide2").show();var signupStats=frontData.get("signup_stats");self.startNum=signupStats.total,self.joinRate=signupStats.rate,self.startDate=new Date(1e3*signupStats.updated)}).always(function(){if(!self.startNum)self.startNum=1001956,self.joinRate=.1123,self.startDate=new Date(1344451016235);self.joinTimer=window.setInterval(_.bind(self.updateJoinNum,self),1e4),self.updateJoinNum()})},searchSubmit:function(e){e.preventDefault();var searchBannerInput=this.$("#coursera-front-search-banner-input");Coursera.multitracker.push(["user.coursera.front.search",searchBannerInput.val()]),Coursera.router.navigate(Coursera.config.dir.home+"courses?search="+searchBannerInput.val(),{trigger:!0})},updateJoinNum:function(){var self=this,secondsSince=((new Date).getTime()-self.startDate.getTime())/1e3,numJoined=Math.ceil(secondsSince*self.joinRate),currentNum=self.startNum+numJoined;currentNum=currentNum.toString().replace(/(\d)(?=(\d{3})+$)/g,"$1,"),this.$(".coursera-front-search-banner-join").show(),this.$(".coursera-front-search-banner-students-count").text(currentNum)}});return frontSearchBanner}),define("pages/home/template/body",["underscore","backbone"],function(_,Backbone){var body=Backbone.View.extend({name:"body",attributes:{role:"article"},className:"coursera-body"});return body}),define("pages/home/front/nls/frontBody",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp;return buf.push('<div class="coursera-front-search-banner"></div><div class="container"><div class="coursera-front-sections"><div class="coursera-front-courses"></div></div><div class="coursera-endpage"></div></div>'),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/front/frontBody.html",["js/lib/jade","i18n!pages/home/front/nls/frontBody"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.front.frontBody"]=jadify(wndw.jade.helpers)}(window),define("pages/home/front/frontBody",["pages/home/template/body","js/core/coursera","js/lib/moment","js/lib/coursera.ab","underscore","backbone","jquery","pages/home/front/frontBody.html","i18n!pages/home/front/nls/frontBody","js/collections/topics"],function(body,Coursera,moment,AB,_,Backbone,$,template,template_t,Topics){var frontBody=body.extend({initialize:function(){var self=this;document.title="Coursera"},events:{"click .coursera-front-promos .coursera-front-promos-listing a":"onPromoClick","click .coursera-front-promos .coursera-front-section-header-link a":"onPromoClick"},onPromoClick:function(e){var href=$(e.currentTarget).attr("href");Coursera.multitracker.push(["user.click.recent-news-link",href])},render:function(){var self=this;return self.$el.append(template({_t:template_t,config:Coursera.config})),Coursera.region.append(self.region,"pages/home/front/frontSearchBanner",{},function(region){self.$(".coursera-front-search-banner").append(region.view.el)}),Coursera.region.append(self.region,"pages/home/front/frontCourse",{},function(region){self.$(".coursera-front-courses").append(region.view.el)}),self}});return frontBody}),define("pages/home/front/nls/frontCourse",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(showBrowseTop,_t,config){var klass="coursera-front-course-listing coursera-front-course-soon"+(showBrowseTop?" no-margin":"");buf.push("<div"+jade.cls([klass],[!0])+"><span>"+(null==(jade_interp=_t("Loading&nbsp;&nbsp;"))?"":jade_interp)+"</span><img"+jade.attr("src",config.url.assets+"images/icons/loading.gif",!0,!1)+' width="12" height="12"/></div><a href="/courses" class="internal-home coursera-view-all-link coursera-to-catalog-link">'+jade.escape(null==(jade_interp=_t("View all courses"))?"":jade_interp)+"</a>")}("showBrowseTop"in locals_for_with?locals_for_with.showBrowseTop:"undefined"!=typeof showBrowseTop?showBrowseTop:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/front/frontCourse.html",["js/lib/jade","i18n!pages/home/front/nls/frontCourse"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.front.frontCourse"]=jadify(wndw.jade.helpers)}(window),define("pages/home/front/nls/frontTopicIcon",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(topic,_t,config,language,showNative,showSubtitle){if(buf.push('<div class="coursera-course-card"><div class="coursera-course-card-image"><a'+jade.attr("href",topic.getLink(),!0,!1)+jade.cls(["coursera-front-to-course-link",topic.getLinkClass()],[null,!0])+"><img"+jade.attr("src",topic.get("large_icon"),!0,!1)+'/></a></div><div class="coursera-course-card-details"><a'+jade.attr("href",topic.getLink(),!0,!1)+jade.cls(["coursera-front-to-course-link",topic.getLinkClass()],[null,!0])+'><h3 class="coursera-course-card-name">'+jade.escape(null==(jade_interp=_t(topic.get("name")))?"":jade_interp)+'</h3></a><div style="line-height:17px;">'),function(){var $$obj=topic.getUniqueUniversities();if("number"==typeof $$obj.length)for(var idx=0,$$l=$$obj.length;$$l>idx;idx++){var university=$$obj[idx];if(idx>0)buf.push(", ");buf.push("<a"+jade.attr("href",university.home_link||config.dir.home+university.short_name,!0,!1)+jade.cls([university.home_link?"":"internal-home"],[!0])+'><span class="coursera-course-card-uni">'+jade.escape(null==(jade_interp=_t(university.abbr_name))?"":jade_interp)+"</span></a>")
}else{var $$l=0;for(var idx in $$obj){$$l++;var university=$$obj[idx];if(idx>0)buf.push(", ");buf.push("<a"+jade.attr("href",university.home_link||config.dir.home+university.short_name,!0,!1)+jade.cls([university.home_link?"":"internal-home"],[!0])+'><span class="coursera-course-card-uni">'+jade.escape(null==(jade_interp=_t(university.abbr_name))?"":jade_interp)+"</span></a>")}}}.call(this),buf.push(' • <span class="coursera-course-card-startdate">'),topic.get("flex_course"))buf.push(""+jade.escape(null==(jade_interp=_t("Always Open"))?"":jade_interp));else if(topic.get("open_course"))buf.push(""+jade.escape(null==(jade_interp=_t(topic.get("open_course").getStartDisplayShort()))?"":jade_interp));else buf.push(""+jade.escape(null==(jade_interp=_t("Date TBA"))?"":jade_interp));if(buf.push("</span>"),language){if(buf.push('<br/><span class="coursera-course-card-language">'),showNative)buf.push(""+jade.escape(null==(jade_interp=_t("Taught in #{language}",{language:language}))?"":jade_interp));if(showSubtitle)buf.push(""+jade.escape(null==(jade_interp=_t("#{language} subtitle available",{language:language}))?"":jade_interp));buf.push("</span>")}buf.push("</div></div></div>")}("topic"in locals_for_with?locals_for_with.topic:"undefined"!=typeof topic?topic:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0,"language"in locals_for_with?locals_for_with.language:"undefined"!=typeof language?language:void 0,"showNative"in locals_for_with?locals_for_with.showNative:"undefined"!=typeof showNative?showNative:void 0,"showSubtitle"in locals_for_with?locals_for_with.showSubtitle:"undefined"!=typeof showSubtitle?showSubtitle:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/front/frontTopicIcon.html",["js/lib/jade","i18n!pages/home/front/nls/frontTopicIcon"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.front.frontTopicIcon"]=jadify(wndw.jade.helpers)}(window),define("js/json/nls/topics",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),define("js/json/nls/languages",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),define("pages/home/front/frontCourse",["underscore","jquery","backbone","js/core/coursera","js/collections/topics","js/models/frontdata","pages/home/front/frontCourse.html","i18n!pages/home/front/nls/frontCourse","pages/home/front/frontTopicIcon.html","i18n!pages/home/front/nls/frontTopicIcon","i18n!js/json/nls/universities","i18n!js/json/nls/topics","i18n!js/json/nls/languages","js/lib/truncate","js/lib/cookie","js/lib/language","js/lib/coursera.ab"],function(_,$,Backbone,Coursera,Topics,FrontData,template,template_t,topicIconTemplate,topicIconTemplate_t,universities_t,topics_t,languages_t,truncate,cookie,language,AB){topicIconTemplate_t=topicIconTemplate_t.merge(universities_t,topics_t,languages_t);var numCoursesToDisplay=12,getValue=function(e){var $target=$(e.currentTarget),link=$target.attr("href"),index=$target.parents(".coursera-course-card").index();return index>=0?{link:link,index:index}:link},fourWeeksAgo=Date.now()-24192e5,byStartDate=function(arr){return _.chain(arr).filter(function(topic){return topic.get("open_course")&&topic.get("open_course").getStartTime()>=fourWeeksAgo}).sortBy(function(topic){return topic.get("open_course").getStartTime()}).value()},langCode=language.shortenLanguageCode(language.getLanguageCode()),byLanguage=function(arr){return _.sortBy(byStartDate(arr),function(topic,i){var langs=topic.get("language")+","+topic.get("subtitle_languages_csv");return langs.indexOf(langCode)>=0?-arr.length+i:i})},frontCourse=Backbone.View.extend({events:{"click .coursera-front-to-catalog-link, .coursera-to-catalog-link":"onCatalogLinkClick","click .coursera-front-course-soon .coursera-front-to-course-link":"onStartingSoonCourseLinkClick"},onCatalogLinkClick:function(e){var $target=$(e.currentTarget);if($target.hasClass("browse-all"))Coursera.multitracker.push(["user.click.browse-all-link",getValue(e)]);else Coursera.multitracker.push(["user.click.catalog-link",getValue(e)])},onStartingSoonCourseLinkClick:function(e){Coursera.multitracker.push(["user.click.starting-soon-course-link",getValue(e)])},render:function(){var self=this;this.$el.html(template({_t:template_t,config:Coursera.config}));var $renderTemplate=function(topic){var nativeLanguage=topic.get("language")||"",subtitles=topic.get("subtitle_languages_csv")||"";return $(topicIconTemplate({_t:topicIconTemplate_t,topic:topic,config:Coursera.config,language:language.languageCodeToName(langCode),showNative:nativeLanguage.indexOf(langCode)>=0&&"en"!=langCode,showSubtitle:subtitles.indexOf(langCode)>=0})).get(0)},onLoad=function(topics){topics=_.first(topics,numCoursesToDisplay),self.$(".coursera-front-course-soon").empty().append(topics.map($renderTemplate)),self.$(".coursera-course-card-name").each(function(i,el){truncate.byElemText($(el))})};return Topics.singletonReadAll().done(function(topics){var recentlyViewed=(cookie.get("recently_viewed")||"").split(",");recentlyViewed=_.map(recentlyViewed,function(shortName){return topics.get(shortName)});var topicArray=topics.toArray(),hardcode=AB.session.getExperiment("homepage_hardcode_data_science_specialization").getChosenVariant(),hardCodedSpecializations=[];if("yes"==hardcode)hardCodedSpecializations=_.filter(topicArray,function(topic){return 1298==topic.get("id")});topics=_.union(hardCodedSpecializations,_.compact(recentlyViewed),byLanguage(topicArray)),onLoad(topics)}),this}});return frontCourse}),define("pages/error/nls/errorBody",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(status,_t,message){if(buf.push('<div class="container"><div class="coursera-full-canvas"><div class="row"><div class="span12"><div class="heading-banner">'),status)buf.push('<h1 style="font-size:46px;">'+jade.escape(null==(jade_interp=_t("HTTP #{status}",{status:status}))?"":jade_interp)+"</h1><h3>"+jade.escape(null==(jade_interp=_t("...oops!"))?"":jade_interp)+"</h3>");else buf.push("<h3>"+jade.escape(null==(jade_interp=_t("...oops!"))?"":jade_interp)+"</h3>");if(buf.push('</div><div style="font-size:18px;line-height:30px; margin-top:20px;">'),message)buf.push("<p>"+jade.escape(null==(jade_interp=_t(message))?"":jade_interp)+"</p>");else buf.push("<p>"+jade.escape(null==(jade_interp=_t("Sorry, but we ran into an error trying to process your request!"))?"":jade_interp)+" \n"+jade.escape(null==(jade_interp=_t("We'll notify the nearest Coursera Caribou to look into it."))?"":jade_interp)+"\n"+jade.escape(null==(jade_interp=_t("If you'd like to give us more information about the error,"))?"":jade_interp)+"\n"+(null==(jade_interp=_t('please <a href="http://help.coursera.org/customer/portal/emails/new">contact us</a>.'))?"":jade_interp)+"</p><p>"+(null==(jade_interp=_t('You can also visit our <a href="http://help.coursera.org">help site</a> for answers'))?"":jade_interp)+"\n"+jade.escape(null==(jade_interp=_t("to common questions."))?"":jade_interp)+"</p>");buf.push("</div></div></div></div></div>")}("status"in locals_for_with?locals_for_with.status:"undefined"!=typeof status?status:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"message"in locals_for_with?locals_for_with.message:"undefined"!=typeof message?message:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/error/errorBody.html",["js/lib/jade","i18n!pages/error/nls/errorBody"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.error.errorBody"]=jadify(wndw.jade.helpers)}(window),define("pages/error/nls/error404",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t,page){if(buf.push('<div class="container"><div class="coursera-full-canvas"><div class="row-fluid"><div class="span12"><h1>'+jade.escape(null==(jade_interp=_t("ooops... HTTP 404"))?"":jade_interp)+'</h1></div></div><div class="coursera-full-page-divider">              </div><div class="row-fluid"><div class="span12"><p>'+jade.escape(null==(jade_interp=_t("Looks like you found a page that does not exist or the URL was mistyped by accident."))?"":jade_interp)+"</p>"),-1!=page.indexOf("?"))buf.push("<p><span>"+(null==(jade_interp=_t("May we suggest trying the following URL:&nbsp;"))?"":jade_interp)+"</span><a"+jade.attr("href",page.substring(0,page.indexOf("?")),!0,!1)+">"+jade.escape(null==(jade_interp=_t(page.substring(0,page.indexOf("?"))))?"":jade_interp)+"</a></p>");buf.push("<p>"+(null==(jade_interp=_t('If you feel this was an error, please visit our <a href="http://help.coursera.org">help site</a> to contact us.'))?"":jade_interp)+"</p></div></div></div></div>")}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"page"in locals_for_with?locals_for_with.page:"undefined"!=typeof page?page:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/error/error404.html",["js/lib/jade","i18n!pages/error/nls/error404"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.error.error404"]=jadify(wndw.jade.helpers)}(window),define("pages/error/errorBody",["pages/home/template/body","js/core/coursera","pages/error/errorBody.html","i18n!pages/error/nls/errorBody","pages/error/error404.html","i18n!pages/error/nls/error404"],function(body,Coursera,template,_t,template404,_t404){var error=body.extend({initialize:function(options){if(options)this.options=options},render:function(){if(Coursera.multitracker.push(["page.error",{status:this.options.status,url:location.href}]),404==this.options.status)this.$el.append(template404({_t:_t404,page:location.href}));else this.$el.append(template({_t:_t,status:this.options.status,message:this.options.message}));return this}});return error}),define("pages/home/account/nls/settings",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t,user){buf.push('<div class="container"><div class="coursera-full-canvas"><div class="row"><div class="span12"><div class="heading-banner"><h1>'+jade.escape(null==(jade_interp=_t("Account Settings"))?"":jade_interp)+'</h1></div></div></div><div class="coursera-settings"><div style="position:relative" class="row"><div style="font-size:smaller; top:5px; right: 5px; position: absolute" class="coursera-signature-track-settings-link hide"><a href="settings/signature">'+(null==(jade_interp=_t("Looking for your Signature Track settings? &raquo;"))?"":jade_interp)+'</a></div><div class="span6"><div style="width: 445px;"><div style="width: 200px; float: right; margin-top 10px; font-size: 12px; line-height: 1.4em; color: #468847; margin-bottom: 10px;">'+jade.escape(null==(jade_interp=_t("This name will appear on your course statements."))?"":jade_interp)+'</div><form id="coursera-settings-name-change-form" style="margin-top:10px;" action="user/change_name" enctype="multipart/form-data" method="POST"><div class="control-group"><label for="coursera-settings-name">'+jade.escape(null==(jade_interp=_t("Full Name"))?"":jade_interp)+'</label><div class="controls"><input id="coursera-settings-name" name="full_name" type="text"'+jade.attr("value",user.get("full_name"),!0,!1)+' style="margin-bottom:0px;"/></div></div><button type="submit"'+jade.attr("data-default-message",_t("Change Name"),!0,!1)+jade.attr("data-inflight-message",_t("Saving..."),!0,!1)+jade.attr("data-success-message",_t("Saved!"),!0,!1)+' disabled="disabled" class="btn coursera-settings-name-change">'+jade.escape(null==(jade_interp=_t("Change Name"))?"":jade_interp)+'</button></form></div></div></div><div class="row"><div class="span12"><form id="coursera-settings-timezone-change-form" style="margin-top:10px;" action="user/change_timezone" enctype="multipart/form-data" method="POST"><div class="control-group"><label for="coursera-settings-timezone-change">'+jade.escape(null==(jade_interp=_t("Timezone"))?"":jade_interp)+'</label><div class="controls"><select name="timezone" id="coursera-settings-timezone-change"><optgroup label="Africa"><option value="Africa/Abidjan">Abidjan</option><option value="Africa/Accra">Accra</option><option value="Africa/Addis_Ababa">Addis Ababa</option><option value="Africa/Algiers">Algiers</option><option value="Africa/Asmara">Asmara</option><option value="Africa/Bamako">Bamako</option><option value="Africa/Bangui">Bangui</option><option value="Africa/Banjul">Banjul</option><option value="Africa/Bissau">Bissau</option><option value="Africa/Blantyre">Blantyre</option><option value="Africa/Brazzaville">Brazzaville</option><option value="Africa/Bujumbura">Bujumbura</option><option value="Africa/Cairo">Cairo</option><option value="Africa/Casablanca">Casablanca</option><option value="Africa/Ceuta">Ceuta</option><option value="Africa/Conakry">Conakry</option><option value="Africa/Dakar">Dakar</option><option value="Africa/Dar_es_Salaam">Dar es Salaam</option><option value="Africa/Djibouti">Djibouti</option><option value="Africa/Douala">Douala</option><option value="Africa/El_Aaiun">El Aaiun</option><option value="Africa/Freetown">Freetown</option><option value="Africa/Gaborone">Gaborone</option><option value="Africa/Harare">Harare</option><option value="Africa/Johannesburg">Johannesburg</option><option value="Africa/Juba">Juba</option><option value="Africa/Kampala">Kampala</option><option value="Africa/Khartoum">Khartoum</option><option value="Africa/Kigali">Kigali</option><option value="Africa/Kinshasa">Kinshasa</option><option value="Africa/Lagos">Lagos</option><option value="Africa/Libreville">Libreville</option><option value="Africa/Lome">Lome</option><option value="Africa/Luanda">Luanda</option><option value="Africa/Lubumbashi">Lubumbashi</option><option value="Africa/Lusaka">Lusaka</option><option value="Africa/Malabo">Malabo</option><option value="Africa/Maputo">Maputo</option><option value="Africa/Maseru">Maseru</option><option value="Africa/Mbabane">Mbabane</option><option value="Africa/Mogadishu">Mogadishu</option><option value="Africa/Monrovia">Monrovia</option><option value="Africa/Nairobi">Nairobi</option><option value="Africa/Ndjamena">Ndjamena</option><option value="Africa/Niamey">Niamey</option><option value="Africa/Nouakchott">Nouakchott</option><option value="Africa/Ouagadougou">Ouagadougou</option><option value="Africa/Porto-Novo">Porto-Novo</option><option value="Africa/Sao_Tome">Sao Tome</option><option value="Africa/Tripoli">Tripoli</option><option value="Africa/Tunis">Tunis</option><option value="Africa/Windhoek">Windhoek</option></optgroup><optgroup label="America"><option value="America/Adak">Adak</option><option value="America/Anchorage">Anchorage</option><option value="America/Anguilla">Anguilla</option><option value="America/Antigua">Antigua</option><option value="America/Araguaina">Araguaina</option><option value="America/Argentina/Buenos_Aires">Buenos Aires</option><option value="America/Argentina/Catamarca">Catamarca</option><option value="America/Argentina/Cordoba">Cordoba</option><option value="America/Argentina/Jujuy">Jujuy</option><option value="America/Argentina/La_Rioja">La Rioja</option><option value="America/Argentina/Mendoza">Mendoza</option><option value="America/Argentina/Rio_Gallegos">Rio Gallegos</option><option value="America/Argentina/Salta">Salta</option><option value="America/Argentina/San_Juan">San Juan</option><option value="America/Argentina/San_Luis">San Luis</option><option value="America/Argentina/Tucuman">Tucuman</option><option value="America/Argentina/Ushuaia">Ushuaia</option><option value="America/Aruba">Aruba</option><option value="America/Asuncion">Asuncion</option><option value="America/Atikokan">Atikokan</option><option value="America/Bahia">Bahia</option><option value="America/Bahia_Banderas">Bahia Banderas</option><option value="America/Barbados">Barbados</option><option value="America/Belem">Belem</option><option value="America/Belize">Belize</option><option value="America/Blanc-Sablon">Blanc-Sablon</option><option value="America/Boa_Vista">Boa Vista</option><option value="America/Bogota">Bogota</option><option value="America/Boise">Boise</option><option value="America/Cambridge_Bay">Cambridge Bay</option><option value="America/Campo_Grande">Campo Grande</option><option value="America/Cancun">Cancun</option><option value="America/Caracas">Caracas</option><option value="America/Cayenne">Cayenne</option><option value="America/Cayman">Cayman</option><option value="America/Chicago">Chicago</option><option value="America/Chihuahua">Chihuahua</option><option value="America/Costa_Rica">Costa Rica</option><option value="America/Creston">Creston</option><option value="America/Cuiaba">Cuiaba</option><option value="America/Curacao">Curacao</option><option value="America/Danmarkshavn">Danmarkshavn</option><option value="America/Dawson">Dawson</option><option value="America/Dawson_Creek">Dawson Creek</option><option value="America/Denver">Denver</option><option value="America/Detroit">Detroit</option><option value="America/Dominica">Dominica</option><option value="America/Edmonton">Edmonton</option><option value="America/Eirunepe">Eirunepe</option><option value="America/El_Salvador">El Salvador</option><option value="America/Fortaleza">Fortaleza</option><option value="America/Glace_Bay">Glace Bay</option><option value="America/Godthab">Godthab</option><option value="America/Goose_Bay">Goose Bay</option><option value="America/Grand_Turk">Grand Turk</option><option value="America/Grenada">Grenada</option><option value="America/Guadeloupe">Guadeloupe</option><option value="America/Guatemala">Guatemala</option><option value="America/Guayaquil">Guayaquil</option><option value="America/Guyana">Guyana</option><option value="America/Halifax">Halifax</option><option value="America/Havana">Havana</option><option value="America/Hermosillo">Hermosillo</option><option value="America/Indiana/Indianapolis">Indianapolis</option><option value="America/Indiana/Knox">Knox</option><option value="America/Indiana/Marengo">Marengo</option><option value="America/Indiana/Petersburg">Petersburg</option><option value="America/Indiana/Tell_City">Tell City</option><option value="America/Indiana/Vevay">Vevay</option><option value="America/Indiana/Vincennes">Vincennes</option><option value="America/Indiana/Winamac">Winamac</option><option value="America/Inuvik">Inuvik</option><option value="America/Iqaluit">Iqaluit</option><option value="America/Jamaica">Jamaica</option><option value="America/Juneau">Juneau</option><option value="America/Kentucky/Louisville">Louisville</option><option value="America/Kentucky/Monticello">Monticello</option><option value="America/Kralendijk">Kralendijk</option><option value="America/La_Paz">La Paz</option><option value="America/Lima">Lima</option><option selected="selected" value="America/Los_Angeles">Los Angeles</option><option value="America/Lower_Princes">Lower Princes</option><option value="America/Maceio">Maceio</option><option value="America/Managua">Managua</option><option value="America/Manaus">Manaus</option><option value="America/Marigot">Marigot</option><option value="America/Martinique">Martinique</option><option value="America/Matamoros">Matamoros</option><option value="America/Mazatlan">Mazatlan</option><option value="America/Menominee">Menominee</option><option value="America/Merida">Merida</option><option value="America/Metlakatla">Metlakatla</option><option value="America/Mexico_City">Mexico City</option><option value="America/Miquelon">Miquelon</option><option value="America/Moncton">Moncton</option><option value="America/Monterrey">Monterrey</option><option value="America/Montevideo">Montevideo</option><option value="America/Montreal">Montreal</option><option value="America/Montserrat">Montserrat</option><option value="America/Nassau">Nassau</option><option value="America/New_York">New York</option><option value="America/Nipigon">Nipigon</option><option value="America/Nome">Nome</option><option value="America/Noronha">Noronha</option><option value="America/North_Dakota/Beulah">Beulah</option><option value="America/North_Dakota/Center">Center</option><option value="America/North_Dakota/New_Salem">New Salem</option><option value="America/Ojinaga">Ojinaga</option><option value="America/Panama">Panama</option><option value="America/Pangnirtung">Pangnirtung</option><option value="America/Paramaribo">Paramaribo</option><option value="America/Phoenix">Phoenix</option><option value="America/Port-au-Prince">Port-au-Prince</option><option value="America/Port_of_Spain">Port of Spain</option><option value="America/Porto_Velho">Porto Velho</option><option value="America/Puerto_Rico">Puerto Rico</option><option value="America/Rainy_River">Rainy River</option><option value="America/Rankin_Inlet">Rankin Inlet</option><option value="America/Recife">Recife</option><option value="America/Regina">Regina</option><option value="America/Resolute">Resolute</option><option value="America/Rio_Branco">Rio Branco</option><option value="America/Santa_Isabel">Santa Isabel</option><option value="America/Santarem">Santarem</option><option value="America/Santiago">Santiago</option><option value="America/Santo_Domingo">Santo Domingo</option><option value="America/Sao_Paulo">Sao Paulo</option><option value="America/Scoresbysund">Scoresbysund</option><option value="America/Shiprock">Shiprock</option><option value="America/Sitka">Sitka</option><option value="America/St_Barthelemy">St Barthelemy</option><option value="America/St_Johns">St Johns</option><option value="America/St_Kitts">St Kitts</option><option value="America/St_Lucia">St Lucia</option><option value="America/St_Thomas">St Thomas</option><option value="America/St_Vincent">St Vincent</option><option value="America/Swift_Current">Swift Current</option><option value="America/Tegucigalpa">Tegucigalpa</option><option value="America/Thule">Thule</option><option value="America/Thunder_Bay">Thunder Bay</option><option value="America/Tijuana">Tijuana</option><option value="America/Toronto">Toronto</option><option value="America/Tortola">Tortola</option><option value="America/Vancouver">Vancouver</option><option value="America/Whitehorse">Whitehorse</option><option value="America/Winnipeg">Winnipeg</option><option value="America/Yakutat">Yakutat</option><option value="America/Yellowknife">Yellowknife</option></optgroup><optgroup label="Antarctica"><option value="Antarctica/Casey">Casey</option><option value="Antarctica/Davis">Davis</option><option value="Antarctica/DumontDUrville">DumontDUrville</option><option value="Antarctica/Macquarie">Macquarie</option><option value="Antarctica/Mawson">Mawson</option><option value="Antarctica/McMurdo">McMurdo</option><option value="Antarctica/Palmer">Palmer</option><option value="Antarctica/Rothera">Rothera</option><option value="Antarctica/South_Pole">South Pole</option><option value="Antarctica/Syowa">Syowa</option><option value="Antarctica/Vostok">Vostok</option></optgroup><optgroup label="Arctic"><option value="Arctic/Longyearbyen">Longyearbyen</option></optgroup><optgroup label="Asia"><option value="Asia/Aden">Aden</option><option value="Asia/Almaty">Almaty</option><option value="Asia/Amman">Amman</option><option value="Asia/Anadyr">Anadyr</option><option value="Asia/Aqtau">Aqtau</option><option value="Asia/Aqtobe">Aqtobe</option><option value="Asia/Ashgabat">Ashgabat</option><option value="Asia/Baghdad">Baghdad</option><option value="Asia/Bahrain">Bahrain</option><option value="Asia/Baku">Baku</option><option value="Asia/Bangkok">Bangkok</option><option value="Asia/Beirut">Beirut</option><option value="Asia/Bishkek">Bishkek</option><option value="Asia/Brunei">Brunei</option><option value="Asia/Choibalsan">Choibalsan</option><option value="Asia/Chongqing">Chongqing</option><option value="Asia/Colombo">Colombo</option><option value="Asia/Damascus">Damascus</option><option value="Asia/Dhaka">Dhaka</option><option value="Asia/Dili">Dili</option><option value="Asia/Dubai">Dubai</option><option value="Asia/Dushanbe">Dushanbe</option><option value="Asia/Gaza">Gaza</option><option value="Asia/Harbin">Harbin</option><option value="Asia/Hebron">Hebron</option><option value="Asia/Ho_Chi_Minh">Ho Chi Minh</option><option value="Asia/Hong_Kong">Hong Kong</option><option value="Asia/Hovd">Hovd</option><option value="Asia/Irkutsk">Irkutsk</option><option value="Asia/Jakarta">Jakarta</option><option value="Asia/Jayapura">Jayapura</option><option value="Asia/Jerusalem">Jerusalem</option><option value="Asia/Kabul">Kabul</option><option value="Asia/Kamchatka">Kamchatka</option><option value="Asia/Karachi">Karachi</option><option value="Asia/Kashgar">Kashgar</option><option value="Asia/Kathmandu">Kathmandu</option><option value="Asia/Kolkata">Kolkata</option><option value="Asia/Krasnoyarsk">Krasnoyarsk</option><option value="Asia/Kuala_Lumpur">Kuala Lumpur</option><option value="Asia/Kuching">Kuching</option><option value="Asia/Kuwait">Kuwait</option><option value="Asia/Macau">Macau</option><option value="Asia/Magadan">Magadan</option><option value="Asia/Makassar">Makassar</option><option value="Asia/Manila">Manila</option><option value="Asia/Muscat">Muscat</option><option value="Asia/Nicosia">Nicosia</option><option value="Asia/Novokuznetsk">Novokuznetsk</option><option value="Asia/Novosibirsk">Novosibirsk</option><option value="Asia/Omsk">Omsk</option><option value="Asia/Oral">Oral</option><option value="Asia/Phnom_Penh">Phnom Penh</option><option value="Asia/Pontianak">Pontianak</option><option value="Asia/Pyongyang">Pyongyang</option><option value="Asia/Qatar">Qatar</option><option value="Asia/Qyzylorda">Qyzylorda</option><option value="Asia/Rangoon">Rangoon</option><option value="Asia/Riyadh">Riyadh</option><option value="Asia/Sakhalin">Sakhalin</option><option value="Asia/Samarkand">Samarkand</option><option value="Asia/Seoul">Seoul</option><option value="Asia/Shanghai">Shanghai</option><option value="Asia/Singapore">Singapore</option><option value="Asia/Taipei">Taipei</option><option value="Asia/Tashkent">Tashkent</option><option value="Asia/Tbilisi">Tbilisi</option><option value="Asia/Tehran">Tehran</option><option value="Asia/Thimphu">Thimphu</option><option value="Asia/Tokyo">Tokyo</option><option value="Asia/Ulaanbaatar">Ulaanbaatar</option><option value="Asia/Urumqi">Urumqi</option><option value="Asia/Vientiane">Vientiane</option><option value="Asia/Vladivostok">Vladivostok</option><option value="Asia/Yakutsk">Yakutsk</option><option value="Asia/Yekaterinburg">Yekaterinburg</option><option value="Asia/Yerevan">Yerevan</option></optgroup><optgroup label="Atlantic"><option value="Atlantic/Azores">Azores</option><option value="Atlantic/Bermuda">Bermuda</option><option value="Atlantic/Canary">Canary</option><option value="Atlantic/Cape_Verde">Cape Verde</option><option value="Atlantic/Faroe">Faroe</option><option value="Atlantic/Madeira">Madeira</option><option value="Atlantic/Reykjavik">Reykjavik</option><option value="Atlantic/South_Georgia">South Georgia</option><option value="Atlantic/St_Helena">St Helena</option><option value="Atlantic/Stanley">Stanley</option></optgroup><optgroup label="Australia"><option value="Australia/Adelaide">Adelaide</option><option value="Australia/Brisbane">Brisbane</option><option value="Australia/Broken_Hill">Broken Hill</option><option value="Australia/Currie">Currie</option><option value="Australia/Darwin">Darwin</option><option value="Australia/Eucla">Eucla</option><option value="Australia/Hobart">Hobart</option><option value="Australia/Lindeman">Lindeman</option><option value="Australia/Lord_Howe">Lord Howe</option><option value="Australia/Melbourne">Melbourne</option><option value="Australia/Perth">Perth</option><option value="Australia/Sydney">Sydney</option></optgroup><optgroup label="Europe"><option value="Europe/Amsterdam">Amsterdam</option><option value="Europe/Andorra">Andorra</option><option value="Europe/Athens">Athens</option><option value="Europe/Belgrade">Belgrade</option><option value="Europe/Berlin">Berlin</option><option value="Europe/Bratislava">Bratislava</option><option value="Europe/Brussels">Brussels</option><option value="Europe/Bucharest">Bucharest</option><option value="Europe/Budapest">Budapest</option><option value="Europe/Chisinau">Chisinau</option><option value="Europe/Copenhagen">Copenhagen</option><option value="Europe/Dublin">Dublin</option><option value="Europe/Gibraltar">Gibraltar</option><option value="Europe/Guernsey">Guernsey</option><option value="Europe/Helsinki">Helsinki</option><option value="Europe/Isle_of_Man">Isle of Man</option><option value="Europe/Istanbul">Istanbul</option><option value="Europe/Jersey">Jersey</option><option value="Europe/Kaliningrad">Kaliningrad</option><option value="Europe/Kiev">Kiev</option><option value="Europe/Lisbon">Lisbon</option><option value="Europe/Ljubljana">Ljubljana</option><option value="Europe/London">London</option><option value="Europe/Luxembourg">Luxembourg</option><option value="Europe/Madrid">Madrid</option><option value="Europe/Malta">Malta</option><option value="Europe/Mariehamn">Mariehamn</option><option value="Europe/Minsk">Minsk</option><option value="Europe/Monaco">Monaco</option><option value="Europe/Moscow">Moscow</option><option value="Europe/Oslo">Oslo</option><option value="Europe/Paris">Paris</option><option value="Europe/Podgorica">Podgorica</option><option value="Europe/Prague">Prague</option><option value="Europe/Riga">Riga</option><option value="Europe/Rome">Rome</option><option value="Europe/Samara">Samara</option><option value="Europe/San_Marino">San Marino</option><option value="Europe/Sarajevo">Sarajevo</option><option value="Europe/Simferopol">Simferopol</option><option value="Europe/Skopje">Skopje</option><option value="Europe/Sofia">Sofia</option><option value="Europe/Stockholm">Stockholm</option><option value="Europe/Tallinn">Tallinn</option><option value="Europe/Tirane">Tirane</option><option value="Europe/Uzhgorod">Uzhgorod</option><option value="Europe/Vaduz">Vaduz</option><option value="Europe/Vatican">Vatican</option><option value="Europe/Vienna">Vienna</option><option value="Europe/Vilnius">Vilnius</option><option value="Europe/Volgograd">Volgograd</option><option value="Europe/Warsaw">Warsaw</option><option value="Europe/Zagreb">Zagreb</option><option value="Europe/Zaporozhye">Zaporozhye</option><option value="Europe/Zurich">Zurich</option></optgroup><optgroup label="Indian"><option value="Indian/Antananarivo">Antananarivo</option><option value="Indian/Chagos">Chagos</option><option value="Indian/Christmas">Christmas</option><option value="Indian/Cocos">Cocos</option><option value="Indian/Comoro">Comoro</option><option value="Indian/Kerguelen">Kerguelen</option><option value="Indian/Mahe">Mahe</option><option value="Indian/Maldives">Maldives</option><option value="Indian/Mauritius">Mauritius</option><option value="Indian/Mayotte">Mayotte</option><option value="Indian/Reunion">Reunion</option></optgroup><optgroup label="Pacific"><option value="Pacific/Apia">Apia</option><option value="Pacific/Auckland">Auckland</option><option value="Pacific/Chatham">Chatham</option><option value="Pacific/Chuuk">Chuuk</option><option value="Pacific/Easter">Easter</option><option value="Pacific/Efate">Efate</option><option value="Pacific/Enderbury">Enderbury</option><option value="Pacific/Fakaofo">Fakaofo</option><option value="Pacific/Fiji">Fiji</option><option value="Pacific/Funafuti">Funafuti</option><option value="Pacific/Galapagos">Galapagos</option><option value="Pacific/Gambier">Gambier</option><option value="Pacific/Guadalcanal">Guadalcanal</option><option value="Pacific/Guam">Guam</option><option value="Pacific/Honolulu">Honolulu</option><option value="Pacific/Johnston">Johnston</option><option value="Pacific/Kiritimati">Kiritimati</option><option value="Pacific/Kosrae">Kosrae</option><option value="Pacific/Kwajalein">Kwajalein</option><option value="Pacific/Majuro">Majuro</option><option value="Pacific/Marquesas">Marquesas</option><option value="Pacific/Midway">Midway</option><option value="Pacific/Nauru">Nauru</option><option value="Pacific/Niue">Niue</option><option value="Pacific/Norfolk">Norfolk</option><option value="Pacific/Noumea">Noumea</option><option value="Pacific/Pago_Pago">Pago Pago</option><option value="Pacific/Palau">Palau</option><option value="Pacific/Pitcairn">Pitcairn</option><option value="Pacific/Pohnpei">Pohnpei</option><option value="Pacific/Port_Moresby">Port Moresby</option><option value="Pacific/Rarotonga">Rarotonga</option><option value="Pacific/Saipan">Saipan</option><option value="Pacific/Tahiti">Tahiti</option><option value="Pacific/Tarawa">Tarawa</option><option value="Pacific/Tongatapu">Tongatapu</option><option value="Pacific/Wake">Wake</option><option value="Pacific/Wallis">Wallis</option></optgroup><optgroup label="UTC"><option value="UTC">UTC</option></optgroup></select></div></div><button type="submit"'+jade.attr("data-default-message",_t("Change Timezone"),!0,!1)+jade.attr("data-inflight-message",_t("Saving..."),!0,!1)+jade.attr("data-success-message",_t("Saved!"),!0,!1)+' disabled="disabled" class="btn coursera-settings-timezone-change">'+jade.escape(null==(jade_interp=_t("Change Timezone"))?"":jade_interp)+'</button></form></div></div><div class="row"><div class="span12"><form id="coursera-settings-locale-change-form" style="margin-top:10px;" action="user/change_locale" enctype="multipart/form-data" method="POST"><div class="control-group"><label for="coursera-settings-locale-change">'+jade.escape(null==(jade_interp=_t("Language"))?"":jade_interp)+'</label><div class="controls"><select name="locale" id="coursera-settings-locale-change"><option>'+jade.escape(null==(jade_interp=_t("Select a language"))?"":jade_interp)+'</option><option value="ar_EG">'+jade.escape(null==(jade_interp=_t("Arabic"))?"":jade_interp)+'</option><option value="zh_CN">'+jade.escape(null==(jade_interp=_t("Chinese (Simplified)"))?"":jade_interp)+'</option><option value="zh_TW">'+jade.escape(null==(jade_interp=_t("Chinese (Traditional)"))?"":jade_interp)+'</option><option value="en_US">'+jade.escape(null==(jade_interp=_t("English"))?"":jade_interp)+'</option><option value="fr_FR">'+jade.escape(null==(jade_interp=_t("French"))?"":jade_interp)+'</option><option value="de_DE">'+jade.escape(null==(jade_interp=_t("German"))?"":jade_interp)+'</option><option value="pt_BR">'+jade.escape(null==(jade_interp=_t("Portuguese"))?"":jade_interp)+'</option><option value="ru_RU">'+jade.escape(null==(jade_interp=_t("Russian"))?"":jade_interp)+'</option><option value="es_ES">'+jade.escape(null==(jade_interp=_t("Spanish"))?"":jade_interp)+'</option><option value="tr_TR">'+jade.escape(null==(jade_interp=_t("Turkish"))?"":jade_interp)+'</option></select></div></div><button type="submit"'+jade.attr("data-default-message",_t("Change Language"),!0,!1)+jade.attr("data-inflight-message",_t("Saving..."),!0,!1)+jade.attr("data-success-message",_t("Saved!"),!0,!1)+' disabled="disabled" class="btn coursera-settings-locale-change">'+jade.escape(null==(jade_interp=_t("Change Language"))?"":jade_interp)+'</button></form></div></div><div class="row"><div class="span12"><h3>'+jade.escape(null==(jade_interp=_t("Change Email Address"))?"":jade_interp)+'</h3><form id="coursera-settings-email-change-form" style="margin-top:10px;" action="user/change_email" enctype="multipart/form-data" method="POST"><div class="control-group"><label for="coursera-settings-email-change">'+jade.escape(null==(jade_interp=_t("New Email Address"))?"":jade_interp)+'</label><div class="controls"><input id="coursera-settings-email-change" name="email_address" type="text" title="Enter new email address"'+jade.attr("value",user.get("email_address"),!0,!1)+' style="margin-bottom:0px;" class="coursera-settings-email-input"/></div></div><button type="submit"'+jade.attr("data-default-message",_t("Change Email"),!0,!1)+jade.attr("data-inflight-message",_t("Changing..."),!0,!1)+jade.attr("data-success-message",_t("Changed!"),!0,!1)+' disabled="disabled" class="btn coursera-settings-email-change">'+jade.escape(null==(jade_interp=_t("Change Email"))?"":jade_interp)+'</button></form></div></div><div class="row"><div class="span12"><h3>'+jade.escape(null==(jade_interp=_t("Change Password"))?"":jade_interp)+'</h3><p style="margin-top:10px;" class="coursera-settings-password-change-success hide">'+jade.escape(null==(jade_interp=_t("Your password was successfully changed."))?"":jade_interp)+'</p><form id="coursera-settings-password-change-form" style="margin-top:10px;" action="user/change_password" enctype="multipart/form-data" method="POST"><div class="control-group"><label for="coursera-settings-oldpassword-change">'+jade.escape(null==(jade_interp=_t("Old Password"))?"":jade_interp)+'</label><div class="controls"><input id="coursera-settings-oldpassword-change" type="password" name="password" class="coursera-settings-oldpassword-input"/></div></div><div class="control-group"><label for="coursera-settings-password-change">'+jade.escape(null==(jade_interp=_t("New Password"))?"":jade_interp)+'</label><div class="controls"><input id="coursera-settings-password-change" type="password" name="new_password" class="coursera-settings-password-input"/></div></div><div class="control-group"><label for="coursera-settings-newpassword-change">'+jade.escape(null==(jade_interp=_t("Confirm New Password"))?"":jade_interp)+'</label><div class="controls"><input id="coursera-settings-newpassword-change" type="password" class="coursera-settings-newpassword-input"/><span id="coursera-settings-password-error" style="color:red;" class="help-inline hide">'+jade.escape(null==(jade_interp=_t("Passwords must match!"))?"":jade_interp)+'</span></div></div><button type="submit"'+jade.attr("data-default-message",_t("Change Password"),!0,!1)+jade.attr("data-inflight-message",_t("Changing..."),!0,!1)+jade.attr("data-success-message",_t("Changed!"),!0,!1)+' disabled="disabled" class="btn coursera-settings-password-change">'+jade.escape(null==(jade_interp=_t("Change Password"))?"":jade_interp)+'</button></form></div></div></div><div data-modal-overlay-class="coursera-overlay-dark" class="modal coursera-settings-email-change-modal hide"><div class="modal-header"><h3>'+jade.escape(null==(jade_interp=_t("Your email change has been submitted."))?"":jade_interp)+'</h3></div><div class="modal-body"><div><span>'+jade.escape(null==(jade_interp=_t("We will send you a confirmation email, which will contain a link for you to complete the email change."))?"":jade_interp)+'</span><br/><br/></div></div><div class="modal-footer"><button data-modal-close="data-modal-close" class="btn btn-primary">'+jade.escape(null==(jade_interp=_t("OK"))?"":jade_interp)+"</button></div></div></div></div>")
}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"user"in locals_for_with?locals_for_with.user:"undefined"!=typeof user?user:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/account/settings.html",["js/lib/jade","i18n!pages/home/account/nls/settings"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.account.settings"]=jadify(wndw.jade.helpers)}(window),define("pages/home/account/settings",["jquery","backbone","underscore","pages/home/template/body","pages/home/account/settings.html","i18n!pages/home/account/nls/settings","js/core/coursera","js/lib/util","js/lib/cookie","js/lib/modals","js/lib/api","js/models/topic","js/lib/moment"],function($,Backbone,_,body,template,_t,Coursera,util,cookie,Modal,api,Topic,Moment){var settingsBody=body.extend({initialize:function(){this.ajaxPayments=api("/maestro/api/payments/",{"csrf.secure":!0});var self=this;document.title="My Account Settings | Coursera",self.bind("view:appended",function(){if(self.$("#coursera-settings-timezone-change").val(Coursera.user.get("timezone")),self.$("#coursera-settings-locale-change").val(Coursera.user.get("locale")),util.setupFormSave(self.$("#coursera-settings-name-change-form"),{success:_.bind(this.onNameChange,this)}),util.setupFormSave(self.$("#coursera-settings-timezone-change-form"),{success:_.bind(this.onTimezoneChange,this)}),util.setupFormSave(self.$("#coursera-settings-locale-change-form"),{success:_.bind(this.onLocaleChange,this)}),util.setupFormSave(self.$("#coursera-settings-email-change-form"),{success:_.bind(this.onEmailChange,this),error:function(){self.$(".coursera-settings-email-input").val(Coursera.user.get("email_address"))}}),util.setupFormSave(self.$("#coursera-settings-password-change-form"),{success:_.bind(this.onPasswordChange,this)}),Coursera.user.get("signature_track").first_name)self.$(".coursera-signature-track-settings-link").show()}),self.bind("view:closing",function(){Modal(this.$el.find(".modal")).close()})},events:{"keyup .coursera-settings-newpassword-input":"editPasswordEnable","keyup .coursera-settings-password-input":"editPasswordEnable"},render:function(){var self=this;return self.$el.html(template({_t:_t,user:Coursera.user})),self},onNameChange:function(data){Coursera.user.set(data),$(".coursera-header-account-name").text(Coursera.user.get("display_name"))},onTimezoneChange:function(data){Coursera.user.set(data)},onLocaleChange:function(data){Coursera.user.set(data),window.location.href=window.location.href},onEmailChange:function(data){Coursera.user.set(data),Modal(this.$(".coursera-settings-email-change-modal")).open()},onPasswordChange:function(){},editPasswordEnable:function(){var password=this.$(".coursera-settings-password-input").val(),newpassword=this.$(".coursera-settings-newpassword-input").val();if(password==newpassword&&password.length>=2)this.$("#coursera-settings-password-error").hide(),this.$(".coursera-settings-password-change").removeAttr("disabled");else this.$("#coursera-settings-password-error").show(),this.$(".coursera-settings-password-change").attr({disabled:"disabled"})}});return settingsBody}),define("js/lib/schema",["underscore"],function(_){var Rules=function(param,rules){this.param=param,this.rules=rules};Rules.prototype.Error=function(message,rule,value){switch(typeof this.rules.error){case"string":message=this.rules.error;break;case"object":if(this.rules.error[rule])message=this.rules.error[rule];else if(this.rules.error["default"])message=this.rules.error["default"]}if(_.isString(value))message=message.replace(/%v/,value.toString());if(_.isString(rule))message=message.replace(/%r/,rule);return message.replace(/%p/,this.param).replace(/%v/,"value").replace(/%r/,"rule")},Rules.prototype.apply=function(value){if(_.isEmpty(value)&&!_.isUndefined(this.rules["default"]))value=this.rules["default"];if(this.rules.required){if(this.rules.required&&(_.isUndefined(value)||_.isUndefined(this.rules.type)&&/^\s*$/.test(value)))throw this.Error("%p is a required parameter","required",value)}else if(_.isUndefined(value))return value;if(this.rules.filters)value=this.filter(value);if(this.rules.type)if("string"==typeof this.rules.type&&"function"==typeof is[this.rules.type]){if(!is[this.rules.type](value))throw this.Error("%p is not a "+this.rules.type,"type",value)}else if(!0){if(!this.rules.type(value))throw this.Error("%p is not a valid type","type",value)}else throw this.Error("%p is not a valid type","type",value);if(this.rules.properties)this.check(value);return value},Rules.prototype.filter=function(value){switch(typeof this.rules.filters){case"function":value=this.rules.filters(value);break;case"string":if("function"==typeof filters[this.rules.filters])value=filters[this.rules.filters](value);break;case"object":if(_.isArray(this.rules.filters))this.rules.filters.forEach(function(filter){value=filters[filter](value)})}return value},Rules.prototype.check=function(value){switch(typeof this.rules.properties){case"function":if(!this.rules.properties(value))throw this.Error("%p is not valid");break;case"object":for(var properties=_.keys(this.rules.properties),i=0;i<properties.length;i++){var property=properties[i];if("function"==typeof checks[property]){var args=this.rules.properties[property];if(!checks[property].apply(null,[value,args]))throw this.Error("%p failed %r with %v",property)}else if("function"==typeof this.rules.properties[property])if(!this.rules.properties[property].apply(null,[value]))throw this.Error("%p failed on %r with %v",property)}}};var checks={max:function(value,length){if(_.isArray(value)||"string"==typeof value)return value.length<=length;else if("number"==typeof value)return length>=value;else return!1},min:function(value,length){if(_.isArray(value)||"string"==typeof value)return value.length>=length;else if("number"==typeof value)return value>=length;else return!1},regex:function(value,regex){return regex.test(value)},"in":function(value,list){return-1!=list.indexOf(value)}},is={"string+":function(value){return"string"==typeof value&&""!==value},string:function(value){return"string"==typeof value},alphanum:function(value){return/^[a-zA-Z0-9]+$/i.test(value)},alpha:function(value){return/^[a-zA-Z]+$/i.test(value)},object:function(value){return"object"==typeof value&&!_.isArray(value)},array:function(value){return _.isArray(value)},date:function(value){return _.isDate(value)&&!isNaN(value.getTime())},number:function(value){return"number"==typeof value&&!isNaN(value)},"int":function(value){return"number"==typeof value&&value%1===0&&!isNaN(value)},"boolean":function(value){return _.isBoolean(value)},"float":function(value){return"number"==typeof value&&!isNaN(value)},email:function(value){return/[a-zA-Z0-9!#$%&'*+\/=?\^_`{|}~\-]+(?:\.[a-zA-Z0-9!#$%&'*+\/=?\^_`{|}~\-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z])?$/.test(value)},url:function(value){return/^(http(s)?:\/\/)?([\w\-]+\.{1})*(([\w\-]*){1}(\.{1}[A-Za-z]{2,4}){1}){1}(\:{1}\d*)?([\?\/|\#]+[\@\~\;\+\'\#\,\.\%\-\/\&\?\=\w\$\s]*)*$/i.test(value)},zipcode:function(value){return/\d{5}/.test(value)}},filters={toInt:function(value){return parseInt(value,10)},toFloat:function(value){return parseFloat(value,10)},toString:function(value){return value.toString()},toDate:function(value){return new Date(value)},toBoolean:function(value){if(1===value||value===!0||/true|on|yes|1/.test(value))return!0;else if(0===value||value===!1||/false|off|no|0/.test(value))return!1;else return value},trim:function(value){return _.isString(value)?value.replace(/^\s\s*/,"").replace(/\s\s*$/,""):value},lowercase:function(value){return _.isString(value)?value.toLowerCase():value},uppercase:function(value){return _.isString(value)?value.toUpperCase():value}},rules={create:function(param,rules){return new Rules(param,rules)},types:is,filters:filters,properties:checks},Schema=function(schema){this.schema=schema};Schema.prototype.validate=function(data){for(var params=_.keys(this.schema),errors={},values={},value,get="function"==typeof data?data:function(p){return data[p]},i=0;i<params.length;i++){var schema=this.schema[params[i]];try{if(value=rules.create(params[i],schema).apply(get(params[i])),!_.isUndefined(value))values[params[i]]=value;if("object"==typeof schema.schema&&!_.isArray(schema.schema)&&_.keys(schema.schema).length&&!_.isUndefined(values[params[i]]))if("object"==schema.type)_.keys(schema.schema).forEach(function(param){try{if(value=rules.create(params[i]+"."+param,schema.schema[param]).apply(get(params[i])[param]),!_.isUndefined(value))values[params[i]][param]=value}catch(error){if(!errors[params[i]]||"object"!=typeof errors[params[i]])errors[params[i]]={};errors[params[i]][param]=error}});else if("array"==schema.type)values[params[i]].forEach(function(value,index){try{values[params[i]][index]=rules.create(params[i]+"["+index+"]",schema.schema).apply(value)}catch(error){if(!_.isArray(errors[params[i]]))errors[params[i]]=[];errors[params[i]][index]=error}})}catch(error){errors[params[i]]=error}}return{data:values,errors:errors,valid:0===_.keys(errors).length}};var schema={test:function(value,schema){return new Schema({input:schema}).validate({input:value})},create:function(schema){return new Schema(schema)},rules:rules};return schema}),define("js/lib/forms",["jquery","underscore","js/lib/schema","js/lib/lucid","js/lib/json2"],function($,_,Schema,Lucid){var defaults={"attribute.prefix":"data-form","attribute.ignore":"ignore","attribute.previous":"prev-value","attribute.schema":"schema","attribute.filter":"filter","attribute.properties":"properties","attribute.required":"required","class.warn":"warn"},getForm=function(el,options){var form=$(el).data("form.me");if(form&&form.constructor===Form.prototype.constructor)if(form)return form.customize(options);else return form;else return null},makeForm=function(el,settings){var $el=$(el),form=getForm($el);if(!form)form=new Form($el,settings),$el.data("form.me",form);return form},validate=function($input,_rules){var rules=_rules||{},rule={},test={},value=$input.val(),id=$input.attr("name")||$input.attr("id"),type=$input.attr("type");if(rules.schema)rule.type=rules.schema;if(rules.filter)rule.filters=_.isString(rules.filter)?(rules.filter||"").split(","):rules.filter;if(rules.required)rule.required=!0;if(rules.properties)rule.properties=_.isString(rules.properties)?JSON.parse(rules.properties):rules.properties;if(rules.schema||rules.filter||rules.required||rules.properties){if(rule.trim=!0,test=Schema.test(value,rule),/^checkbox|radio$/.test(type)&&rule.required&&!$input[0].checked)test.valid=!1;if(!test.valid)if(rules.required||""!==value)throw test.errors.input;else value=null;else if(_.isString(test.data.input)&&value!==test.data.input)value=test.data.input,$input.val(value)}return value},process=function(){var that=this,inputs=this.$form.find(":input"),result={},errors={},valid=!0,pattern=/^([^\[\]]+)(?:\[(.*)\])?$/;return _.each(inputs,function(input){var $input=$(input),type=$input.attr("type"),value=$input.val(),node=$input.prop("nodeName"),id=$input.attr("name")||$input.attr("id"),names=(id||"").split("."),part=result,name=names[0],ignore=$input.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.ignore"])||/button|submit/.test(type)||/button/i.test(node),schema=$input.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.schema"])||$input.data(that.options["attribute.prefix"]+"-"+that.options["attribute.schema"]),filter=$input.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.filter"])||$input.data(that.options["attribute.prefix"]+"-"+that.options["attribute.filter"]),props=$input.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.properties"])||$input.data(that.options["attribute.prefix"]+"-"+that.options["attribute.properties"]),required=void 0!==$input.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.required"]);if(!ignore&&(value!==$input.data(that.options["attribute.prefix"]+"-prev-value")||1!==names.length||/\[.*\]/.test(id))){if($input.data(that.options["attribute.prefix"]+"-dirty"))try{value=validate($input,{schema:schema,filter:filter,required:required,properties:props})}catch(e){valid=!1,errors[id]=e}else if(errors[id]=$input.data(that.options["attribute.prefix"]+"-error"),valid)valid=$input.data(that.options["attribute.prefix"]+"-valid");for(var i=0,match=null;i<names.length;i++){var last=i===names.length-1;if(match=names[i].match(pattern),name=match?match[1]:names[i],match){var index=match[2];if(void 0===part[name])if(!last)part[name]=void 0===index?{}:[];else if(void 0===index)part[name]=value;else part[name]=[],part[name][index]=value;if(!last)if(void 0!==index)if(part[name][index])part=part[name][index];else part=part[name][index]={};else part=part[name];else part[name]=value}}}return{data:result,errors:errors}}),{valid:valid,errors:errors,data:result}},prepare=function(){var that=this,inputs=this.$form.find(":input");_.each(inputs,function(input){var $input=$(input);if(!$input.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.ignore"])&&!/button|submit/.test($input.attr("type")))$input.data(that.options["attribute.prefix"]+"-"+that.options["attribure.previous"],$input.val()),$input.data(that.options["attribute.prefix"]+"-dirty",!0)});var validateIt=function(e){that.validate(e.currentTarget)},blurIt=function(e){var $el=$(e.currentTarget);that.emitter.trigger("blur",e,{valid:$el.data(that.options["attribute.prefix"]+"-valid"),error:$el.data(that.options["attribute.prefix"]+"-error")})};this.$form.on("change",":input",validateIt),this.$form.on("blur",":input",blurIt),this.$form.on("keydown cut paste",":input",_.debounce(validateIt,500)),this.$form.on("submit",function(e){that.emitter.trigger("submit",e,process.call(that))})},Form=function(form,_options){var that=this;this.$form=$(form),this.customize(_options),_.bindAll(this,"validate"),prepare.call(this,this.$form),this.emitter=Lucid.emitter(this)};Form.prototype.customize=function(_options){return this.options=_.extend({},defaults,_options||{}),this},Form.prototype.process=function(){return process.call(this)},Form.prototype.validate=function(el){var that=this,$el=$(el),schema=$el.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.schema"])||$el.data(that.options["attribute.prefix"]+"-"+that.options["attribute.schema"]),filter=$el.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.filter"])||$el.data(that.options["attribute.prefix"]+"-"+that.options["attribute.filter"]),props=$el.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.properties"])||$el.data(that.options["attribute.prefix"]+"-"+that.options["attribute.properties"]),required=void 0!==$el.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.required"]),event=$.Event(null,{currentTarget:$el.get(0)});try{if(validate($el,{schema:schema,filter:filter,required:required,properties:props}),$el.hasClass(that.options["class.warn"]))$el.removeClass(that.options["class.warn"]),event.type="forms:corrected",that.emitter.trigger("corrected",event);$el.data(that.options["attribute.prefix"]+"-valid",!0),$el.data(that.options["attribute.prefix"]+"-error",null),event.type="forms:change",that.emitter.trigger("change",event,{valid:!0})}catch(error){if(!$el.hasClass(that.options["class.warn"]))$el.addClass(that.options["class.warn"]),event.type="forms:error",that.emitter.trigger("error",event,error);$el.data(that.options["attribute.prefix"]+"-valid",!1),$el.data(that.options["attribute.prefix"]+"-error",error),event.type="forms:change",that.emitter.trigger("change",event,{valid:!1,error:error})}$el.data(that.options["attribute.prefix"]+"-dirty",!1)};var external=function(){return getForm.apply(null,arguments)||makeForm.apply(this,arguments)};return external}),define("pages/home/account/signedIn",["pages/home/template/body","underscore","js/core/coursera","js/lib/forms","jquery","js/lib/cookie","js/lib/coursera.ab","js/lib/util"],function(body,_,Coursera,Form,$,cookie,AB,util){var signUp=body.extend({initialize:function(){var that=this;document.title="Signing in... | Coursera"},getTopicShortName:function(courseId,success,fail){return Coursera.api.get("topic/short_name",{data:{course_id:courseId}})},handleCoursePageRedirect:function(courseId,redirect){this.getTopicShortName(courseId).done(function(shortName){var courseInfoUrl=Coursera.config.dir.home+"course/"+shortName+"?from_restricted_preview=1&course_id="+courseId+"&r="+encodeURIComponent(redirect);Coursera.router.navigate(courseInfoUrl,{trigger:!0,replace:!0})}).fail(function(){var signInUrl=Coursera.config.dir.home+"account/signin?r="+encodeURIComponent(redirect);Coursera.router.navigate(signInUrl,{trigger:!0,replace:!0})})},redirectToCoursePage:function(courseId,redirect){var that=this;if(!Coursera.user.get("authenticated"))that.handleCoursePageRedirect(courseId,redirect);else Coursera.user.getTopics(!0).done(function(){if(Coursera.user.isEnrolledInCourse(courseId))util.handleRedirect(redirect);else that.handleCoursePageRedirect(courseId,redirect)}).fail(function(){util.handleRedirect(redirect)})},trackConversionEvent:function(e){AB.session.getExperiment("coursepage_compress_language").convert(e),AB.session.getExperiment("coursepage_catalog_link").convert(e),AB.session.getExperiment("homepage_user_count").convert(e)},handleRegistrationTracking:function(){if(Coursera.multitracker.push(["user.register",Coursera.user.get("id")]),this.trackConversionEvent("register"),cookie.get("linked_lecture"))Coursera.multitracker.push(["user.register.afterLinkedLecture",cookie.get("linked_lecture")])},enrollUser:function(courseId,topicShortName,sigTrack){var self=this;Coursera.user.enroll(courseId,sigTrack,function(err){if(!err)Coursera.multitracker.push(["user.course.enroll",courseId]),Coursera.multitracker.push(["user.enroll.redirect",courseId]),self.trackConversionEvent("enroll"),Coursera.router.navigate(Coursera.config.dir.home+"course/"+topicShortName,!0);else Coursera.router.trigger("error",500,{message:"couldn't enroll"})})},subscribeUser:function(topicId,topicShortName){var self=this;Coursera.user.subscribeToTopic(topicId).done(function(){Coursera.multitracker.push(["user.course.subscribe",topicId]),Coursera.multitracker.push(["user.subscribe.redirect",topicId]),self.trackConversionEvent("subscribe"),Coursera.router.navigate(Coursera.config.dir.home+"course/"+topicShortName,!0)})},render:function(){var params=this.options.params,userAction=params&&params.user_action?params.user_action:null,topicId=params&&params.topic_id?params.topic_id:null,topicShortName=params&&params.topic_shortname?params.topic_shortname:null,topicName=params&&params.topic_name?params.topic_name:null,courseId=params&&params.course_id?params.course_id:null,registered=params&&params.registered?params.registered:null,redirect=params&&params.r?params.r:null,post_redirect=params&&params.post_redirect?params.post_redirect:null;if(null===redirect)redirect=post_redirect;if(null!==registered)this.handleRegistrationTracking();if(courseId&&"class"==userAction)this.redirectToCoursePage(courseId,redirect);else if(!Coursera.user.get("authenticated"))Coursera.router.navigate(Coursera.config.dir.home,!0);else if(courseId&&topicShortName&&"enroll"==userAction){var enrollInSignatureTrack=0;this.enrollUser(courseId,topicShortName,enrollInSignatureTrack)}else if(topicId&&topicShortName&&"subscribe"==userAction)this.subscribeUser(topicId,topicShortName);else if(redirect)util.handleRedirect(redirect);else Coursera.router.navigate(Coursera.config.dir.home,!0)}});return signUp}),define("pages/home/course/nls/courseBody",{de:!0,es:!0,fr:!0,it:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(config,catalog_link_variant,topic,_t,user,Courses,query,encodeURIComponent,isChina,videos,twitterUrl){if(jade_mixins.courvideo=function(id,attrs,videos,subtitles){var block=this&&this.block,attributes=this&&this.attributes||{},klass="video-js vjs-coursera-skin "+(attrs.className||"");buf.push("<video"+jade.attr("id",id,!0,!1)+jade.attr("width",attrs.width,!0,!1)+jade.attr("height",attrs.height,!0,!1)+jade.attr("autoplay",attrs.autoplay===!0,!0,!1)+jade.attr("preload",attrs.preload,!0,!1)+jade.attr("style",attrs.style||"",!0,!1)+jade.attr("poster",attrs.poster||"",!0,!1)+jade.cls([klass],[!0])+">"),function(){var $$obj=videos;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var video=$$obj[$index];buf.push("<source"+jade.attr("type",video.type,!0,!1)+jade.attr("src",video.source,!0,!1)+"/>")}else{var $$l=0;for(var $index in $$obj){$$l++;var video=$$obj[$index];buf.push("<source"+jade.attr("type",video.type,!0,!1)+jade.attr("src",video.source,!0,!1)+"/>")}}}.call(this),buf.push("</video>")},jade_mixins.shareButton=function(topic){var block=this&&this.block,attributes=this&&this.attributes||{};buf.push('<div style="margin-top:15px;font-size:1.5em;"'+jade.attr("data-url",topic.get("social_link"),!0,!1)+jade.attr("data-text",topic.getFacebookText(),!0,!1)+jade.attr("data-facebook-picture",topic.get("small_icon_hover"),!0,!1)+jade.attr("data-facebook-name",topic.getFacebookText(),!0,!1)+' data-facebook-redirect="https://www.coursera.org/"'+jade.attr("data-twitter-text",topic.getTwitterText(),!0,!1)+jade.attr("data-weibo-text",topic.getTwitterText(),!0,!1)+' data-eventing-key="user.click.link.social" data-eventing-value="course-mini" class="coursera-share-buttons coursera-course-share"></div>')},jade_mixins.universityLogo=function(university,logoUrl){var block=this&&this.block,attributes=this&&this.attributes||{},link=university.home_link||config.dir.home+university.short_name,klass=university.home_link?"":"internal-home";buf.push("<a"+jade.attr("href",link,!0,!1)+jade.cls(["coursera-university-logo",klass],[null,!0])+"><img"+jade.attr("src",logoUrl,!0,!1)+jade.attr("alt",university.name,!0,!1)+' class="coursera-course-school-logo"/></a>')},buf.push('<div class="container">'),"arrow"===catalog_link_variant)buf.push('<div class="coursera-course-catalog-link-container"><a href="/courses" class="coursera-course-catalog-link"><div class="coursera-course-catalog-link-arrow-container"><div class="coursera-course-catalog-link-arrow"></div></div></a></div>');if(buf.push('<div class="coursera-full-canvas"><div class="row-fluid"><div class="coursera-edit-page"><div class="coursera-edit-page-button"></div>'),topic.get("display")===!1)buf.push('<div class="coursera-visibility-warning">'+jade.escape(null==(jade_interp=_t("This is a private page that only course administrators can preview."))?"":jade_interp)+"</div>");if(user.canEditTopic(topic)){if(buf.push('<span class="coursera-edit-page-container"><span style="display: none;" class="coursera-edit-page-admin">'+jade.escape(null==(jade_interp=_t("Admins only:"))?"":jade_interp)+'</span><span><a target="_blank"'+jade.attr("href",config.dir.home+"admin/data/courses/"+topic.get("id"),!0,!1)+">"+jade.escape(null==(jade_interp=_t("Edit Course Description"))?"":jade_interp)+"</a></span>"),topic.get("courses").size()>0)buf.push('<span class="coursera-edit-page-container"><a data-popup=".coursera-edit-desc-popup" href="javascript:void(0);"><span class="dropdown-label">'+jade.escape(null==(jade_interp=_t("Edit Session Descriptions"))?"":jade_interp)+'</span><span class="carrot">▾</span></a><span class="coursera-header-popup coursera-edit-desc-popup hide">'),function(){var $$obj=Courses.byTimeDescending(topic.get("courses"));if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var course=$$obj[$index];buf.push("<span><a"+jade.attr("href",config.dir.home+"admin/data/sessions/"+course.get("id"),!0,!1)+">"+jade.escape(null==(jade_interp=_t(course.get("home_link")))?"":jade_interp)+"<br/> ("+jade.escape(null==(jade_interp=_t(course.getStartDisplay()))?"":jade_interp)+")</a></span>")}else{var $$l=0;for(var $index in $$obj){$$l++;var course=$$obj[$index];buf.push("<span><a"+jade.attr("href",config.dir.home+"admin/data/sessions/"+course.get("id"),!0,!1)+">"+jade.escape(null==(jade_interp=_t(course.get("home_link")))?"":jade_interp)+"<br/> ("+jade.escape(null==(jade_interp=_t(course.getStartDisplay()))?"":jade_interp)+")</a></span>")}}}.call(this),buf.push('</span></span><span class="coursera-edit-page-container"><a data-popup=".coursera-edit-materials-popup" href="javascript:void(0);"><span class="dropdown-label">'+jade.escape(null==(jade_interp=_t("Edit Session Materials"))?"":jade_interp)+'</span><span class="carrot">▾</span></a><span class="coursera-header-popup coursera-edit-materials-popup hide">'),function(){var $$obj=Courses.byTimeDescending(topic.get("courses"));if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var course=$$obj[$index];buf.push('<span><a target="_blank"'+jade.attr("href",course.get("home_link"),!0,!1)+">"+jade.escape(null==(jade_interp=_t(course.get("home_link")))?"":jade_interp)+"<br/> ("+jade.escape(null==(jade_interp=_t(course.getStartDisplay()))?"":jade_interp)+")</a></span>")}else{var $$l=0;for(var $index in $$obj){$$l++;var course=$$obj[$index];buf.push('<span><a target="_blank"'+jade.attr("href",course.get("home_link"),!0,!1)+">"+jade.escape(null==(jade_interp=_t(course.get("home_link")))?"":jade_interp)+"<br/> ("+jade.escape(null==(jade_interp=_t(course.getStartDisplay()))?"":jade_interp)+")</a></span>")}}}.call(this),buf.push("</span></span>");buf.push("</span>")}if(buf.push("</div></div>"),query.from_restricted_preview){if(buf.push('<div class="row-fluid coursera-course-restricted-box"><div class="span8 coursera-course-restricted-message"><h3>'+jade.escape(null==(jade_interp=_t("Looks like you are not enrolled in this course!"))?"":jade_interp)+'</h3><span style="display:none;" class="coursera-course-restricted-opensessions">'+jade.escape(null==(jade_interp=_t("Enroll for free in one of the sessions below to access all the course content!"))?"":jade_interp)+'</span><span style="display:none;" class="coursera-course-restricted-noopensessions">'+jade.escape(null==(jade_interp=_t("There are no sessions open for enrollment. While you wait for a new session of this course, you could"))?"":jade_interp)+'<a href="/courses">'+jade.escape(null==(jade_interp=_t("browse our other course offerings."))?"":jade_interp)+"</a></span></div>"),!user.get("authenticated")){var redirectToCourseLink="/account/signin?cid="+query.cid+"&r="+encodeURIComponent(query.r);buf.push('<div class="span4 coursera-course-restricted-login"><h3>'+jade.escape(null==(jade_interp=_t("Already enrolled?"))?"":jade_interp)+"</h3><p>"+jade.escape(null==(jade_interp=_t("If you have already enrolled in this course, then"))?"":jade_interp)+"<a"+jade.attr("href","/account/signin?r="+encodeURIComponent(redirectToCourseLink),!0,!1)+">"+jade.escape(null==(jade_interp=_t("sign in here."))?"":jade_interp)+"</a></p></div>")}else buf.push('<div class="span4"></div>');buf.push("</div>")}if(buf.push('<div class="coursera-course-content"><div style="margin-bottom:20px;" class="row-fluid"><div class="span6">'),topic.get("university_logo")&&1==topic.get("universities").length){var university=topic.get("universities")[0];jade_mixins.universityLogo(university,topic.get("university_logo"))}else(function(){var $$obj=topic.get("universities");if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var university=$$obj[$index];jade_mixins.universityLogo(university,university.class_logo||university.logo)}else{var $$l=0;for(var $index in $$obj){$$l++;var university=$$obj[$index];jade_mixins.universityLogo(university,university.class_logo||university.logo)}}}).call(this);if(buf.push('<h1 style="font-size:36px;line-height:1.2em;" data-user-generated="data-user-generated">'+jade.escape(null==(jade_interp=_t(topic.get("name")))?"":jade_interp)+"</h1>"),topic.get("specializations").length){var specialization=topic.get("specializations")[0];buf.push('<h3 data-user-generated="data-user-generated">'+(null==(jade_interp=_t("Part of the&nbsp;"))?"":jade_interp)+"<a"+jade.attr("href",config.dir.home+"specialization/"+specialization.short_name+"/"+specialization.id+"?utm_medium=courseDescripTop",!0,!1)+' target="_blank">'+(null==(jade_interp=_t('"#{specialization.name}" Specialization &raquo;',{"specialization.name":specialization.name}))?"":jade_interp)+"</a></h3>")}if(buf.push('<p style="margin-top:12px;" data-user-generated="data-user-generated">'+jade.escape(null==(jade_interp=_t(topic.get("short_description")))?"":jade_interp)+"</p>"),topic.get("preview_link"))buf.push("<a"+jade.attr("href",topic.get("preview_link"),!0,!1)+' target="_blank" class="btn btn-preview">'+jade.escape(null==(jade_interp=_t("Preview Lectures"))?"":jade_interp)+"</a>");if(buf.push('</div><div class="span6"><div style="position:relative;">'),topic.get("video")&&!isChina)jade_mixins.courvideo("coursera-course-video",{width:"451px",height:"254px",autoplay:!1,preload:"metadata",poster:topic.get("large_icon")},videos);else buf.push('<div class="shadow-corners"><div class="coursera-course-logo-no-video"><img'+jade.attr("src",topic.get("large_icon"),!0,!1)+' style="width:100%;" alt=""/></div></div>');if(buf.push('</div></div></div><hr style="clear:both;" class="coursera-full-page-divider-no_padding"/><div class="row-fluid"><div class="span7">'),topic.get("description"))buf.push('<div style="clear:both;margin:auto;" data-user-generated="data-user-generated" class="coursera-course-description">'+(null==(jade_interp=_t(topic.get("description")))?"":jade_interp)+"</div>");else{if(buf.push("<div>"),topic.get("about_the_course"))buf.push('<h2 data-msg="coursera-course-about" class="coursera-course-heading">'+jade.escape(null==(jade_interp=_t("About the Course"))?"":jade_interp)+'</h2><div data-user-generated="data-user-generated" class="coursera-course-detail">'+(null==(jade_interp=_t(topic.get("about_the_course")))?"":jade_interp)+"</div>");if(topic.get("course_syllabus"))buf.push('<h2 data-msg="coursera-course-syllabus" style="clear:both;" class="coursera-course-heading">'+jade.escape(null==(jade_interp=_t("Course Syllabus"))?"":jade_interp)+'</h2><div data-user-generated="data-user-generated" class="coursera-course-detail">'+(null==(jade_interp=_t(topic.get("course_syllabus")))?"":jade_interp)+"</div>");if(topic.get("recommended_background"))buf.push('<h2 data-msg="coursera-course-background" class="coursera-course-heading">'+jade.escape(null==(jade_interp=_t("Recommended Background"))?"":jade_interp)+'</h2><div data-user-generated="data-user-generated" class="coursera-course-detail">'+(null==(jade_interp=_t(topic.get("recommended_background")))?"":jade_interp)+"</div>");if(buf.push('<div style="display:none;" class="coursera-course-free-textbooks"><h2 data-msg="coursera-course-free-textbooks">'+jade.escape(null==(jade_interp=_t("In-course Textbooks"))?"":jade_interp)+"</h2><p>"+jade.escape(null==(jade_interp=_t("As a student enrolled in this course, you will have free access to selected chapters and content for the duration of the course. All chapters were selected by the instructor specifically for this course. You will be able to access the Coursera edition of the e-textbook via an e-reader in the class site hosted by Chegg. If you click on “Buy this book”, you will be able to purchase the full version of the textbook, rather than the limited chapter selection in the Coursera edition. This initiative is made possible by Coursera’s collaboration with textbook publishers and Chegg."))?"":jade_interp)+'</p></div><div class="coursera-course-textbook-list"></div>'),topic.get("suggested_readings"))buf.push('<h2 data-msg="coursera-course-readings" class="coursera-course-heading">'+jade.escape(null==(jade_interp=_t("Suggested Readings"))?"":jade_interp)+'</h2><div data-user-generated="data-user-generated" class="coursera-course-detail">'+(null==(jade_interp=_t(topic.get("suggested_readings")))?"":jade_interp)+"</div>");
if(topic.get("course_format"))buf.push('<h2 data-msg="coursera-course-format" class="coursera-course-heading">'+jade.escape(null==(jade_interp=_t("Course Format"))?"":jade_interp)+'</h2><div data-user-generated="data-user-generated" class="coursera-course-detail">'+(null==(jade_interp=_t(topic.get("course_format")))?"":jade_interp)+"</div>");if(topic.get("other_description"))buf.push('<div data-user-generated="data-user-generated" class="coursera-course-detail">'+(null==(jade_interp=_t(topic.get("other_description")))?"":jade_interp)+"</div>");if(topic.get("faq"))buf.push('<h2 data-msg="coursera-course-faq" class="coursera-course-heading">'+jade.escape(null==(jade_interp=_t("FAQ"))?"":jade_interp)+'</h2><div data-user-generated="data-user-generated" class="coursera-course-detail">'+(null==(jade_interp=_t(topic.get("faq")))?"":jade_interp)+"</div>");buf.push("</div>")}if(buf.push('</div><div class="span1"></div><div class="span4"><div class="coursera-course-listings"><span>'+(null==(jade_interp=_t("Loading upcoming session dates&nbsp;&nbsp;"))?"":jade_interp)+"</span><img"+jade.attr("src",config.url.assets+"images/icons/loading.gif",!0,!1)+' width="12" height="12"/></div>'),topic.get("categories").length)buf.push('<div class="coursera-course2-data coursera-course-categories"><h2 data-msg="coursera-course-categories" class="coursera-course-heading">'+jade.escape(null==(jade_interp=_t("Categories"))?"":jade_interp)+"</h2>"),function(){var $$obj=topic.get("categories");if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var category=$$obj[$index];buf.push("<a"+jade.attr("href",config.dir.home+"courses?cats="+category.short_name,!0,!1)+' class="internal-home">'+jade.escape(null==(jade_interp=_t(category.name))?"":jade_interp)+"</a><br/>")}else{var $$l=0;for(var $index in $$obj){$$l++;var category=$$obj[$index];buf.push("<a"+jade.attr("href",config.dir.home+"courses?cats="+category.short_name,!0,!1)+' class="internal-home">'+jade.escape(null==(jade_interp=_t(category.name))?"":jade_interp)+"</a><br/>")}}}.call(this),buf.push("</div>");if(buf.push('<div class="coursera-course2-data"><h2 style="margin-bottom: 5px" class="coursera-course-heading">'+jade.escape(null==(jade_interp=_t("Share"))?"":jade_interp)+'</h2><div class="hide social">'),!isChina)buf.push('<div style="float:left;" class="social-facebook"><div'+jade.attr("data-href",topic.get("social_link"),!0,!1)+' data-type="box_count" class="fb-share-button"></div></div><div style="float:left;margin-left:10px;" class="social-google"><div data-size="tall"'+jade.attr("data-href",topic.get("social_link"),!0,!1)+' class="g-plusone"></div></div><div style="float:left; margin-left:10px;" class="social-twitter"><iframe allowtransparency="true" frameborder="0" scrolling="no"'+jade.attr("src","//platform.twitter.com/widgets/tweet_button.html?url="+twitterUrl+"&count=vertical&size=s",!0,!1)+' style="width:58px; height:65px; margin-right:10px;"></iframe></div>');else jade_mixins.shareButton(topic);if(buf.push('</div></div></div></div><div class="row-fluid coursera-similartopics-container hide"></div><div class="row-fluid"><div class="span12"><a'+jade.attr("href",config.dir.home+"courses",!0,!1)+' class="internal-home coursera-view-all-link coursera-to-catalog-link">'+jade.escape(null==(jade_interp=_t("Browse more courses"))?"":jade_interp)+'</a></div></div></div></div></div><div data-modal-overlay-class="coursera-overlay-dark" class="modal hide coursera-course-watch-modal"><div class="modal-header"><a href="javascript:void(0)" data-modal-close="data-modal-close" class="close">×</a><h3>'+jade.escape(null==(jade_interp=_t("Thanks for watching!"))?"":jade_interp)+'</h3></div><div class="modal-body"><div><p>'+jade.escape(null==(jade_interp=_t("We'll email you if there are new session dates announced for this course. In the meantime,"))?"":jade_interp)+"\n"+jade.escape(null==(jade_interp=_t("let your friends know about this course, so that you'll all be ready to take it together!"))?"":jade_interp)+"</p>"),!isChina)buf.push('<div data-size="small"'+jade.attr("data-href",topic.get("social_link"),!0,!1)+' class="g-plusone"></div><iframe style="height:20px;width:90px; vertical-align:middle; margin-top:7px;" allowtransparency="true" frameborder="0" scrolling="no"'+jade.attr("src","//platform.twitter.com/widgets/tweet_button.html?url="+twitterUrl+"&size=s",!0,!1)+"></iframe><div"+jade.attr("data-href",topic.get("social_link"),!0,!1)+' data-type="box_count" style="top:4px" class="fb-share-button"></div>');else jade_mixins.shareButton(topic);if(buf.push('</div></div><div class="modal-footer"><a data-modal-close="data-modal-close">'+jade.escape(null==(jade_interp=_t("Back to browsing"))?"":jade_interp)+'</a></div></div><div data-modal-overlay-class="coursera-overlay-dark" class="modal hide coursera-course-modal"><div class="modal-header"><div style="float:right; width:300px; text-align: right;">'),!isChina)buf.push('<div data-size="small"'+jade.attr("data-href",topic.get("social_link"),!0,!1)+' class="g-plusone"></div><iframe style="height:20px;width:100px; vertical-align:middle; margin-top:7px;" allowtransparency="true" frameborder="0" scrolling="no"'+jade.attr("src","//platform.twitter.com/widgets/tweet_button.html?url="+twitterUrl+"&size=s",!0,!1)+"></iframe><div"+jade.attr("data-href",topic.get("social_link"),!0,!1)+' data-type="box_count" style="top:4px" class="fb-share-button"></div>');else jade_mixins.shareButton(topic);buf.push('<button type="button" data-modal-close="data-modal-close" style="margin-left: 25px;" class="close">&times;</button></div><h3>'+jade.escape(null==(jade_interp=_t("Congratulations!"))?"":jade_interp)+'</h3><div style="clear:both;"></div></div><div class="modal-body"><p>'+jade.escape(null==(jade_interp=_t("You're signed up for #{topic.get('name')}.",{"topic.get('name')":topic.get("name")}))?"":jade_interp)+'<span class="coursera-course-modal-open hide"> '+jade.escape(null==(jade_interp=_t("The course is open and you can start watching lectures and participating on the forums with other students right now!"))?"":jade_interp)+'<br/><span class="coursera-course-modal-open coursera-course-modal-class-btn"><a class="btn btn-success">'+jade.escape(null==(jade_interp=_t("Go to class"))?"":jade_interp)+'</a></span></span><span class="coursera-course-modal-starts hide"> '+(null==(jade_interp=_t("The course will start on&nbsp;"))?"":jade_interp)+'<span class="coursera-course-modal-starts-date"></span> '+jade.escape(null==(jade_interp=_t("and we will notify you just before then to remind you when class will begin."))?"":jade_interp)+'</span><span class="coursera-course-modal-tba hide"> '+jade.escape(null==(jade_interp=_t("The course is under preparation, and we will notify you by email when it starts."))?"":jade_interp)+'</span></p><div style="margin-top: 30px" class="coursera-course-modal-signature-track-optin hide"><p style="text-align: center"><b>'+jade.escape(null==(jade_interp=_t("Earn a Verified Certificate with Signature Track"))?"":jade_interp)+'</b><br/></p><div><div style="display:inline-block; vertical-align: top;"><img src="" alt="Illustration of certificate" class="coursera-course-modal-cta-img"/></div><p style="display:inline-block; width: 60%; margin-left: 10px; margin-top: 20px; vertical-align: top;" class="coursera-course-modal-cta-paragraph">'+jade.escape(null==(jade_interp=_t("Signature Track enables you to securely link your coursework to your identity, allowing you to confidently show the world what you've achieved on Coursera."))?"":jade_interp)+'</p><center></center></div><div style="clear:both;"></div><div style="text-align: center; margin-bottom: 10px"><button style="width:330px;" class="btn coursera-signature-signup-button">'+jade.escape(null==(jade_interp=_t("Learn more »"))?"":jade_interp)+'</button></div></div></div><div class="coursera-course-modal-invite-friends hide"></div></div><div data-modal-overlay-class="coursera-overlay-dark" class="modal coursera-course-selfstudy-modal hide"><div class="modal-header"><h2>'+jade.escape(null==(jade_interp=_t('What does "self study" mean?'))?"":jade_interp)+'</h2></div><div class="modal-body"><p>'+jade.escape(null==(jade_interp=_t("Self-Study mode makes all the videos and assignments available to be done at your own pace, but without a certificate of completion at the end."))?"":jade_interp)+"</p><p>"+jade.escape(null==(jade_interp=_t("This is only available for some courses at this time."))?"":jade_interp)+'</p></div><div class="modal-footer"><button data-modal-close="data-modal-close" class="btn btn-primary">'+jade.escape(null==(jade_interp=_t("OK, I got it!"))?"":jade_interp)+'</button></div></div><div data-modal-overlay-class="coursera-overlay-dark" class="modal hide coursera-course-restricted-country-modal"><div class="modal-header"><div style="float:right; width:300px; text-align: right;"><button type="button" data-modal-close="data-modal-close" style="margin-left: 25px;" class="close">&times;</button></div><h3>'+jade.escape(null==(jade_interp=_t("Enrollment Blocked"))?"":jade_interp)+'</h3><div style="clear:both;"></div></div><div class="modal-body"><p>'+jade.escape(null==(jade_interp=_t("Our system indicates that you are attempting to enroll in #{topic.get('name')} from an IP address associated with a country currently subject to U.S. sanctions. In order for Coursera to comply with U.S. export controls, we cannot allow you to enroll in this course.",{"topic.get('name')":topic.get("name")}))?"":jade_interp)+"\n"+(null==(jade_interp=_t("You can find out more information&nbsp;"))?"":jade_interp)+'<a href="http://help.coursera.org/customer/portal/articles/1425714-why-is-my-country-blocked-">'+jade.escape(null==(jade_interp=_t("here"))?"":jade_interp)+"</a>.</p></div></div>")}("config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0,"catalog_link_variant"in locals_for_with?locals_for_with.catalog_link_variant:"undefined"!=typeof catalog_link_variant?catalog_link_variant:void 0,"topic"in locals_for_with?locals_for_with.topic:"undefined"!=typeof topic?topic:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"user"in locals_for_with?locals_for_with.user:"undefined"!=typeof user?user:void 0,"Courses"in locals_for_with?locals_for_with.Courses:"undefined"!=typeof Courses?Courses:void 0,"query"in locals_for_with?locals_for_with.query:"undefined"!=typeof query?query:void 0,"encodeURIComponent"in locals_for_with?locals_for_with.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"isChina"in locals_for_with?locals_for_with.isChina:"undefined"!=typeof isChina?isChina:void 0,"videos"in locals_for_with?locals_for_with.videos:"undefined"!=typeof videos?videos:void 0,"twitterUrl"in locals_for_with?locals_for_with.twitterUrl:"undefined"!=typeof twitterUrl?twitterUrl:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/course/courseBody.html",["js/lib/jade","i18n!pages/home/course/nls/courseBody"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.course.courseBody"]=jadify(wndw.jade.helpers)}(window),define("js/json/nls/categories",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),define("pages/home/course/nls/courseSummary",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t,courses,specializationBulkVoucher,topic,nativeLanguage,subtitles,certImageURL,studentStories,config,skills){if(jade_mixins.getPrimaryButton=function(course,specializationBulkVoucher){var block=this&&this.block,attributes=this&&this.attributes||{},courseButtonState=course.getCourseButtonState(),colorMap={blue:"btn-flat-primary coursera-course-button-join",green:"btn-flat-success"},countdown=course.getStartCountdown()||"Start Date TBD",textMap={JOIN:_t("Join for Free"),VIEW_CLASS_ARCHIVE:_t("View class archive"),GO_TO_CLASS:_t("Go to class"),GRADING_IN_PROGRESS:_t("Grading in progress"),GRADING_IN_PROGRESS_VIEW_ARCHIVE:_t("Grading in progress, view archive"),VIEW_COURSE_RECORD:_t("View course record"),COUNTDOWN:_t(countdown)},text=textMap[courseButtonState.text],link="";if("GO_TO_CLASS"===courseButtonState.text||"VIEW_CLASS_ARCHIVE"===courseButtonState.text||"VIEW_COURSE_RECORD"===courseButtonState.text||"GRADING_IN_PROGRESS_VIEW_ARCHIVE"===courseButtonState.text)link=courseButtonState.link;var jsvoid="javascript:void(0);",baseClass="btn-flat coursera-course-button "+colorMap[courseButtonState.color];if(courseButtonState)if(courseButtonState.disabled)if("GO_TO_CLASS"===courseButtonState.text||"VIEW_CLASS_ARCHIVE"===courseButtonState.text)buf.push('<a disabled="disabled"'+jade.attr("href",link,!0,!1)+jade.cls([baseClass],[!0])+">"+jade.escape(null==(jade_interp=_t(text))?"":jade_interp)+"</a>");else buf.push('<a disabled="disabled"'+jade.attr("href",jsvoid,!0,!1)+jade.cls([baseClass],[!0])+">"+jade.escape(null==(jade_interp=_t(text))?"":jade_interp)+"</a>");else if("GO_TO_CLASS"===courseButtonState.text||"VIEW_CLASS_ARCHIVE"===courseButtonState.text)buf.push("<a"+jade.attr("href",link,!0,!1)+jade.cls([baseClass],[!0])+">"+jade.escape(null==(jade_interp=_t(text))?"":jade_interp)+"</a>");else if(specializationBulkVoucher&&course.get("signature_track_registration_open"))buf.push('<a data-oneclick-sigtrack="data-oneclick-sigtrack" class="btn coursera-course-button-join coursera-signature-signup-button">'+jade.escape(null==(jade_interp=_t(text))?"":jade_interp)+"</a>");else buf.push("<a"+jade.attr("href",jsvoid,!0,!1)+jade.cls([baseClass],[!0])+">"+jade.escape(null==(jade_interp=_t(text))?"":jade_interp)+"</a>");if(course.get("self_study"))buf.push('<a data-modal=".coursera-course-selfstudy-modal" role="button" title="What is self study?"><i class="icon-info-sign coursera-signature-learnmore-icon"></i></a>')},jade_mixins.getSecondaryButton=function(course,specializationBulkVoucher){var block=this&&this.block,attributes=this&&this.attributes||{};if(course.get("eligible_for_signature_track")&&course.get("signature_track_registration_open")&&!course.get("user_in_signature_track"))if(specializationBulkVoucher)buf.push('<a data-oneclick-sigtrack="data-oneclick-sigtrack" class="btn coursera-signature-signup-button coursera-course-button-join">'+jade.escape(null==(jade_interp=_t("Join Signature Track"))?"":jade_interp)+"</a>");else buf.push("<a"+jade.attr("href",course.get("optin_link")+"?utm_source=course&utm_medium=button",!0,!1)+' class="btn coursera-signature-signup-button">'+jade.escape(null==(jade_interp=_t("Earn a Verified Certificate"))?"":jade_interp)+"</a>");else if(course.get("eligible_for_signature_track")&&course.get("signature_track_registration_open")&&course.get("user_in_signature_track"))buf.push('<div class="course-signaturetrack-bannerbox-enrolled"><span style="text-transform: uppercase;"></span>'+(null==(jade_interp=_t("&#x2713; Signature Track"))?"":jade_interp)+"</div>")},courses=courses.toArray(),buf.push('<h2 data-msg="coursera-course-listings-sessions" class="coursera-course-heading">'),courses.length>0)buf.push("<span>"+jade.escape(null==(jade_interp=_t("Sessions"))?"":jade_interp)+"</span>");else buf.push("<span>"+jade.escape(null==(jade_interp=_t("No sessions available"))?"":jade_interp)+"</span>");if(buf.push('</h2><span class="coursera-course-selector-dropdown">'),courses.length)buf.push('<select class="coursera-course-listing-selector">'),function(){var $$obj=courses;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var course=$$obj[$index];buf.push("<option"+jade.attr("data-course-id",course.get("id"),!0,!1)+"><span>"+jade.escape(null==(jade_interp=_t(course.getStartDisplay()))?"":jade_interp)+"</span></option>")}else{var $$l=0;for(var $index in $$obj){$$l++;var course=$$obj[$index];buf.push("<option"+jade.attr("data-course-id",course.get("id"),!0,!1)+"><span>"+jade.escape(null==(jade_interp=_t(course.getStartDisplay()))?"":jade_interp)+"</span></option>")}}}.call(this),buf.push('<option data-course-id="watchlist">'+jade.escape(null==(jade_interp=_t("Future Sessions"))?"":jade_interp)+'</option></select><div class="coursera-dropdown-listing-buttons">'),function(){var $$obj=courses;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var course=$$obj[$index];if(buf.push('<div style="display:none"'+jade.attr("data-course-id",course.get("id"),!0,!1)+' class="coursera-course-listing-buttons"><div class="coursera-course-listing-btn">'),jade_mixins.getPrimaryButton(course,specializationBulkVoucher),buf.push("</div>"),course.get("user_in_signature_track")||!specializationBulkVoucher||specializationBulkVoucher&&!course.get("user_in_signature_track")&&course.get("user_is_enrolled"))buf.push('<div class="coursera-course-listing-btn">'),jade_mixins.getSecondaryButton(course,specializationBulkVoucher),buf.push("</div>");buf.push("</div>")}else{var $$l=0;for(var $index in $$obj){$$l++;var course=$$obj[$index];if(buf.push('<div style="display:none"'+jade.attr("data-course-id",course.get("id"),!0,!1)+' class="coursera-course-listing-buttons"><div class="coursera-course-listing-btn">'),jade_mixins.getPrimaryButton(course,specializationBulkVoucher),buf.push("</div>"),course.get("user_in_signature_track")||!specializationBulkVoucher||specializationBulkVoucher&&!course.get("user_in_signature_track")&&course.get("user_is_enrolled"))buf.push('<div class="coursera-course-listing-btn">'),jade_mixins.getSecondaryButton(course,specializationBulkVoucher),buf.push("</div>");buf.push("</div>")}}}.call(this),buf.push('<span style="display:none" data-course-id="watchlist" class="coursera-course-listing-buttons"><span class="coursera-course-subscribe"><a type="button" class="btn-flat btn-flat-primary coursera-course-button">'+jade.escape(null==(jade_interp=_t("Add to Watchlist"))?"":jade_interp)+'</a></span><span style="display:none;" class="coursera-course-subscribed"><button type="button" disabled="disabled" class="btn-flat btn-flat-success coursera-course-button">'+jade.escape(null==(jade_interp=_t("You're Watching!"))?"":jade_interp)+'</button><a href="javascript:void(0)" style="font-size:smaller;margin-left:10px;" class="coursera-course-unsubscribe">'+jade.escape(null==(jade_interp=_t("Remove from watchlist"))?"":jade_interp)+"</a></span></span></div>");else buf.push('<div style="margin-top: 5px"><span class="coursera-course-subscribe"><a type="button" style="width: 100%" class="btn-flat btn-flat-primary coursera-course-button">'+jade.escape(null==(jade_interp=_t("Add to Watchlist"))?"":jade_interp)+'</a></span><span style="display:none;" class="coursera-course-subscribed"><button type="button" disabled="disabled" class="btn-flat btn-flat-success coursera-course-button">'+jade.escape(null==(jade_interp=_t("You're Watching!"))?"":jade_interp)+'</button><a href="javascript:void(0)" style="font-size:smaller;width:100%" class="coursera-course-unsubscribe">'+jade.escape(null==(jade_interp=_t("Remove from watchlist"))?"":jade_interp)+"</a></span></div>");if(buf.push('</span><div class="coursera-course2-data coursera-course2-course-at-glance"><h2 style="margin-bottom: 5px" class="coursera-course-heading">'+jade.escape(null==(jade_interp=_t("Course at a Glance"))?"":jade_interp)+'</h2><div style="margin-left: 10px" class="coursera-course2-course-basics"><div style="margin-top: 10px">'),function(){var $$obj=courses;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var course=$$obj[$index];buf.push("<div"+jade.attr("data-course-id",course.get("id"),!0,!1)+' style="display:none" class="coursera-course-metadata"><i class="icon-calendar"></i><span>'+jade.escape(null==(jade_interp=_t("#{course.getDurationWeeks()} weeks",{"course.getDurationWeeks()":course.getDurationWeeks()}))?"":jade_interp)+"</span></div>")}else{var $$l=0;for(var $index in $$obj){$$l++;var course=$$obj[$index];buf.push("<div"+jade.attr("data-course-id",course.get("id"),!0,!1)+' style="display:none" class="coursera-course-metadata"><i class="icon-calendar"></i><span>'+jade.escape(null==(jade_interp=_t("#{course.getDurationWeeks()} weeks",{"course.getDurationWeeks()":course.getDurationWeeks()}))?"":jade_interp)+"</span></div>")}}}.call(this),buf.push("</div>"),topic.get("estimated_class_workload")){buf.push('<div><i class="icon-time"></i>');var workload=topic.get("estimated_class_workload").replace(" hours/week","");buf.push("<span>"+(null==(jade_interp=_t("#{workload}&nbsp;",{workload:workload}))?"":jade_interp)+'</span><span data-msg="coursera-course-workloadunits">'+jade.escape(null==(jade_interp=_t("hours of work / week"))?"":jade_interp)+"</span></div>")}if(nativeLanguage)buf.push('<div><i class="icon-globe"></i><span>'+jade.escape(null==(jade_interp=_t(nativeLanguage))?"":jade_interp)+"</span></div>");if(subtitles)buf.push('<div><i style="font-size:11px" class="icon-film"></i><span>'+jade.escape(null==(jade_interp=_t("#{subtitles} subtitles",{subtitles:subtitles}))?"":jade_interp)+"</span></div>");if(buf.push('</div><div class="coursera-sigtrack-box"><center><h4 style="margin: 0px;">'+jade.escape(null==(jade_interp=_t("Earn official recognition for your work"))?"":jade_interp)+'</h4><img data-sigtrack-cert-icon="data-sigtrack-cert-icon"'+jade.attr("src",certImageURL,!0,!1)+' style="width: 180px; height: 140px; margin-top: 10px;"/></center>'),studentStories)buf.push('<div class="coursera-course-student-story"><div class="coursera-course-student-story-text"><i class="icon-quote-left"></i><span class="coursera-course-student-story-text-quote">'+jade.escape(null==(jade_interp=_t(studentStories[0].text))?"":jade_interp)+'</span></div><div class="coursera-course-student-subtext">'+jade.escape(null==(jade_interp=_t(studentStories[0].student))?"":jade_interp)+'</div><div class="coursera-course-student-subtext-title">'+jade.escape(null==(jade_interp=_t(studentStories[0].title))?"":jade_interp)+"</div></div>");else{if(buf.push('<ul><li class="sigtrack-option-available"><i class="icon-bookmark"></i><span class="no-specialization">'+jade.escape(null==(jade_interp=_t("Verified Certificate"))?"":jade_interp)+'</span><a class="has-specialization">'+jade.escape(null==(jade_interp=_t("Verified Certificate"))?"":jade_interp)+"</a></li>"),topic.get("specializations").length){buf.push('<li class="specialization-option-available has-specialization"><i class="icon-bookmark"></i>');var specialization=topic.get("specializations")[0];buf.push("<a"+jade.attr("href",config.dir.home+"specialization/"+specialization.short_name+"/"+specialization.id+"?utm_medium=courseDescripBottom",!0,!1)+">"+jade.escape(null==(jade_interp=_t("Specialization Certificate"))?"":jade_interp)+"</a></li>")}buf.push('<li class="ace-option-available no-specialization"><i class="icon-bookmark"></i><span>'+jade.escape(null==(jade_interp=_t("A.C.E. Credit Recommendation"))?"":jade_interp)+"</span></li></ul>")}buf.push('</div><div class="coursera-course2-data"><h2 data-msg="coursera-course-instructor" style="margin-bottom: 25px; display: none;" class="coursera-course2-instructors-heading coursera-course-heading">'+jade.escape(null==(jade_interp=_t("Instructors"))?"":jade_interp)+"</h2>"),function(){var $$obj=courses;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var course=$$obj[$index];buf.push("<div"+jade.attr("data-course-id",course.get("id"),!0,!1)+' style="display:none" class="coursera-course2-instructors coursera-course-metadata"></div>')}else{var $$l=0;for(var $index in $$obj){$$l++;var course=$$obj[$index];buf.push("<div"+jade.attr("data-course-id",course.get("id"),!0,!1)+' style="display:none" class="coursera-course2-instructors coursera-course-metadata"></div>')}}}.call(this),buf.push('<div data-course-id="watchlist" style="display:none" class="coursera-course2-instructors coursera-course-metadata"></div></div>');var showSkills=skills.length>0;if(showSkills)buf.push('<div class="coursera-course2-data coursera-course2-course-at-glance"><h2 style="margin-bottom: 5px" class="coursera-course-heading">'+jade.escape(null==(jade_interp=_t("Relevant Skills"))?"":jade_interp)+'</h2><div style="margin-left: 10px" class="coursera-course2-course-basics"><div style="margin-top: 10px">'),function(){var $$obj=skills;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var skill=$$obj[$index];buf.push('<div class="skill-container"><span class="skill-bullet">&nbsp;</span><span class="skill">'+jade.escape(null==(jade_interp=_t(skill))?"":jade_interp)+"</span><br/></div>")}else{var $$l=0;for(var $index in $$obj){$$l++;var skill=$$obj[$index];buf.push('<div class="skill-container"><span class="skill-bullet">&nbsp;</span><span class="skill">'+jade.escape(null==(jade_interp=_t(skill))?"":jade_interp)+"</span><br/></div>")}}}.call(this),buf.push("</div></div></div>");buf.push("</div>")}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"courses"in locals_for_with?locals_for_with.courses:"undefined"!=typeof courses?courses:void 0,"specializationBulkVoucher"in locals_for_with?locals_for_with.specializationBulkVoucher:"undefined"!=typeof specializationBulkVoucher?specializationBulkVoucher:void 0,"topic"in locals_for_with?locals_for_with.topic:"undefined"!=typeof topic?topic:void 0,"nativeLanguage"in locals_for_with?locals_for_with.nativeLanguage:"undefined"!=typeof nativeLanguage?nativeLanguage:void 0,"subtitles"in locals_for_with?locals_for_with.subtitles:"undefined"!=typeof subtitles?subtitles:void 0,"certImageURL"in locals_for_with?locals_for_with.certImageURL:"undefined"!=typeof certImageURL?certImageURL:void 0,"studentStories"in locals_for_with?locals_for_with.studentStories:"undefined"!=typeof studentStories?studentStories:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0,"skills"in locals_for_with?locals_for_with.skills:"undefined"!=typeof skills?skills:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/course/courseSummary.html",["js/lib/jade","i18n!pages/home/course/nls/courseSummary"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.course.courseSummary"]=jadify(wndw.jade.helpers)}(window),define("pages/home/course/nls/courseBodyInstructorIcon",{}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(instructor,config,_t,university){buf.push('<div class="coursera-course2-instructors-profile"><div class="coursera-course2-instructors-profile-image">');var style="background-image:url('"+(instructor.get("photo_150")||config.url.assets+"images/icons/avatar.jpg")+"');";buf.push("<a"+jade.attr("href",instructor.getLink(),!0,!1)+jade.attr("style",style,!0,!1)+' data-link-type="instructor-profile-image" class="internal-home"></a></div><div class="coursera-course2-instructors-profile-inner-shadow"></div><div class="coursera-course2-instructors-info"><a'+jade.attr("href",instructor.getLink(),!0,!1)+' data-link-type="instructor-name" class="internal-home"><span class="coursera-course2-instructor-name">'+jade.escape(null==(jade_interp=_t(instructor.get("full_name")))?"":jade_interp)+"</span></a>");var href=university.home_link||config.dir.home+university.short_name,klass=university.home_link?"":"internal-home";buf.push("<a"+jade.attr("href",href,!0,!1)+' data-link-type="instructor-university"'+jade.cls([klass],[!0])+'><span class="coursera-course2-instructor-university">'+jade.escape(null==(jade_interp=_t(university.name))?"":jade_interp)+"</span></a></div></div>")}("instructor"in locals_for_with?locals_for_with.instructor:"undefined"!=typeof instructor?instructor:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"university"in locals_for_with?locals_for_with.university:"undefined"!=typeof university?university:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/course/courseBodyInstructorIcon.html",["js/lib/jade","i18n!pages/home/course/nls/courseBodyInstructorIcon"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.course.courseBodyInstructorIcon"]=jadify(wndw.jade.helpers)}(window),define("pages/home/course/courseSummary",["underscore","backbone","jquery","js/core/coursera","pages/home/template/body","pages/home/course/courseSummary.html","i18n!pages/home/course/nls/courseSummary","pages/home/course/courseBodyInstructorIcon.html","i18n!js/json/nls/universities","i18n!js/json/nls/languages","js/lib/util","js/lib/truncate","js/lib/language","js/json/constants","js/lib/coursera.ab"],function(_,Backbone,$,Coursera,body,template,_t,instructorIconTemplate,universities_t,languages_t,util,truncate,language,CONSTANTS,AB){return _t=_t.merge(languages_t),Backbone.View.extend({addInstructorInfo:function(courseID,instructors){var self=this;_.each(instructors,function(instructorID){var instructorModel=self.options.instructorProfiles[instructorID];if(instructorModel&&instructorModel.shouldDisplay())self.$(".coursera-course2-instructors-heading").show(),self.$(".coursera-course2-instructors[data-course-id="+courseID+"]").append(instructorIconTemplate({_t:universities_t,config:Coursera.config,instructor:instructorModel,university:instructorModel.get("universities")[0]}));else if(Coursera.user.canEditTopic(self.options.topic))self.$(".coursera-course2-instructors").append('<div class="alert coursera-course-metadata" data-course-id='+courseID+'>Warning: You have not created an instructor profile for an instructor associated with this course. (Only admins see this warning.)<a class="btn btn-warning" href="../admin/data/instructorprofiles/'+instructorModel.get("id")+'">Create Profile</a></div>')})},changeSummaryInfo:function(courseID){var self=this;this.$el.find(".coursera-course-metadata[data-course-id]").hide(),this.$el.find(".coursera-course-metadata[data-course-id="+courseID+"]").show();var chosenCourse=self.courseDict[courseID];if(!chosenCourse)return this.$el.find(".soa-option-available").hide(),void this.$el.find(".coursera-sigtrack-box").hide();if(this.$el.find(".soa-option-available").toggle(chosenCourse.get("eligible_for_certificates")),chosenCourse.get("eligible_for_signature_track")){if(this.$el.find(".coursera-sigtrack-box").show(),this.$el.find(".has-specialization").toggle(this.hasSpecialization),this.$el.find(".sigtrack-option-available a").attr("href",chosenCourse.get("optin_link")),this.$el.find(".no-specialization").toggle(!this.hasSpecialization),!this.hasSpecialization)this.$el.find(".coursera-sigtrack-box").on("click",function(){AB.user.getExperiment("course_page_skills").convert("earn_a_vc",function(){window.open(chosenCourse.get("optin_link"),"_blank")})});if(chosenCourse.get("eligible_for_ACE"))this.$el.find(".ace-option-available").show();else this.$el.find(".ace-option-available").hide()}else this.$el.find(".coursera-sigtrack-box").hide()},render:function(){var self=this;this.courseDict={},this.options.courses.each(function(course){self.courseDict[course.get("id")]=course});var nativeLanguage=this.options.topic.get("language_name"),nativeAndSubtitles=this.options.topic.get("language")+","+this.options.topic.get("subtitle_languages_csv"),subtitles=language.languageCodeCSVtoLanguages(nativeAndSubtitles);
this.hasSpecialization=this.options.topic.get("specializations").length>0;var specializationBulkVoucher=null;if(this.hasSpecialization)specializationBulkVoucher=Coursera.user.getSpecializationBulkVoucher(this.options.topic.get("specializations")[0].id);var studentStories=null;if(this.options.topic.get("id")in CONSTANTS.student_stories_topics){var expSigtrackStudentStories=AB.session.getExperiment("sigtrack_student_stories").getChosenVariant();if("disabled"!==expSigtrackStudentStories)studentStories=CONSTANTS.student_stories_topics[this.options.topic.get("id")]}this.$el.html(template({config:Coursera.config,topic:this.options.topic,courses:this.options.courses,user:Coursera.user,nativeLanguage:nativeLanguage,subtitles:_.map(subtitles,_t).join(", "),certImageURL:this.options.certImageURL,specializationBulkVoucher:specializationBulkVoucher,studentStories:studentStories,skills:this.shouldRenderSkills(this.options.topic.get("id"))?this.getSkillsToRender(this.options.topic.get("id")):[],_t:_t})),this.options.courses.each(function(course){self.addInstructorInfo(course.get("id"),course.get("instructors"))}),self.addInstructorInfo("watchlist",this.options.topic.get("instructors")),self.$(".coursera-course2-instructors-profile").each(function(){var profileContainer=$(this),profileInformation=$(this).find(".coursera-course2-instructors-info"),instructorName=$(this).find(".coursera-course2-instructor-name"),universityName=$(this).find(".coursera-course2-instructor-university");if(truncate.byElemText(universityName),truncate.byElemText(instructorName),profileInformation.height()+profileInformation.position().top>=profileContainer.height())util.verticalCenterEl(profileContainer,profileInformation)});var selector=this.$el.find(".coursera-course-listing-selector");if($(selector).on("change",function(){self.changeSummaryInfo($(selector).find(":selected").attr("data-course-id"))}),this.options.courses.length)self.changeSummaryInfo($(selector).find(":selected").attr("data-course-id"));else self.changeSummaryInfo("watchlist");return this},shouldRenderSkills:function(topic_id){return this.getSkillsToRender(topic_id).length>0&&"showskills"===AB.user.getExperiment("course_page_skills").getChosenVariant()},getSkillsToRender:function(topic_id){var topicSkills={228:["APIs","Graphics","Computer Graphics","Mobile Applications"],546:["Learning Technologies","Primary Education","Technology-based Pedagogies","School Leadership"],1340:["Research Design","Research Methods","Methodological Rigor","Analytics","Research Projects"],1240:["Veterinary Medicine","Basic Animal Care","Introductory Anatomy","Observational Clinical Skills","Introductory Client Care"],168:["Venture Capital","Stakeholder Management","Sales Process","Entrepreneurship"],71:["Primary Care","Health Care","Community Health"],633:["Teaching","Learning Theories","Classroom Management"],642:["Teaching","Educational Assessment","Curriculum Design"],879:["Mathematics of Point Symmetry","Plane Groups","Symmetry in Science","Design","Space Symmetry"],40:["Corporate Finance","Financial Valuation","Financial Decision-Making","Cash Flow Analysis","Risk Analysis"],1354:["Python","Computer Programming","Data Analysis","Data Processing","Informatics"]},skills=topicSkills[topic_id];return _.isUndefined(skills)?[]:skills}})}),define("pages/home/course/nls/courseBodyTextbook",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(textbook,cheggLink,_t,authorStr){buf.push('<div style="margin: 20px 20px 20px 0" class="coursera-course-textbook-container"><div style="float:left; width: 20%" class="coursera-course-textbook-thumbnail"><img'+jade.attr("src",textbook.image_small,!0,!1)+'/></div><div style="float: right; width: 75%" class="coursera-course-textbook-body"><h4><a'+jade.attr("href",cheggLink,!0,!1)+' target="_blank" style="font-family: \'helvetica neue\', helvetica, sans-serif; font-size: 18px" class="coursera-course-textbook-name">'+jade.escape(null==(jade_interp=_t(textbook.name))?"":jade_interp)+"</a></h4><p>"+jade.escape(null==(jade_interp=_t("Author:"))?"":jade_interp)+" \n"+jade.escape(null==(jade_interp=_t(authorStr))?"":jade_interp)+"<br/>"+jade.escape(null==(jade_interp=_t("Publisher:"))?"":jade_interp)+" \n"+jade.escape(null==(jade_interp=_t(textbook.publisher))?"":jade_interp)+'</p></div><div style="clear: both"></div></div>')}("textbook"in locals_for_with?locals_for_with.textbook:"undefined"!=typeof textbook?textbook:void 0,"cheggLink"in locals_for_with?locals_for_with.cheggLink:"undefined"!=typeof cheggLink?cheggLink:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"authorStr"in locals_for_with?locals_for_with.authorStr:"undefined"!=typeof authorStr?authorStr:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/course/courseBodyTextbook.html",["js/lib/jade","i18n!pages/home/course/nls/courseBodyTextbook"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.course.courseBodyTextbook"]=jadify(wndw.jade.helpers)}(window),define("pages/home/course/nls/courseInvite",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t,inviteText,shareURL,shareText,pictureURL,redirectURL,twitterText,eventingKey,eventingValue,inviteOpen,config){buf.push('<div class="coursera-course-modal-invite-friends-social"><div class="row"><div class="span3"><p style="margin-left: 15px; padding-bottom: 8px;"><b>'+jade.escape(null==(jade_interp=_t(inviteText))?"":jade_interp)+'</b></p></div><div class="span3 coursera-course-modal-cta-icons"><i class="coursera-modal-cta-icon icon-envelope"></i><div'+jade.attr("data-url",shareURL,!0,!1)+jade.attr("data-text",shareText,!0,!1)+jade.attr("data-facebook-picture",pictureURL,!0,!1)+jade.attr("data-facebook-name",shareText,!0,!1)+jade.attr("data-facebook-redirect",redirectURL,!0,!1)+jade.attr("data-twitter-text",twitterText,!0,!1)+jade.attr("data-weibo-text",twitterText,!0,!1)+jade.attr("data-eventing-key",eventingKey,!0,!1)+jade.attr("data-eventing-value",eventingValue,!0,!1)+' class="coursera-share-buttons coursera-share-buttons-invite-modal"></div></div></div></div><div'+jade.attr("style","display:"+inviteOpen,!0,!1)+' class="coursera-course-modal-cta-row"><div class="span1 coursera-course-modal-cta-text"><p style="margin-left:-5px;">'+jade.escape(null==(jade_interp=_t("To:"))?"":jade_interp)+'</p></div><div style="position:relative" class="span5"><div class="dropdown coursera-course-modal-cta-import-contacts"><a id="dLabel" data-toggle="dropdown" role="button" class="dropdown-toggle">'+jade.escape(null==(jade_interp=_t("Import contacts"))?"":jade_interp)+'</a><ul role="menu" aria-labelledby="dLabel" style="margin: 3px 0px 0px -45px;" class="dropdown-menu"><li><a tabindex="-1" role="button" data-provider="gmail" href="javascript:void(0)" class="coursera-invite-friends-email-icon"><img'+jade.attr("src",config.url.assets+"pages/home/course/invite/gmail.png",!0,!1)+"/> "+jade.escape(null==(jade_interp=_t("Gmail"))?"":jade_interp)+'</a></li></ul></div><div class="coursera-course-modal-cta-fake-input"></div><input'+jade.attr("placeholder",_t("Emails"),!0,!1)+' class="coursera-course-modal-cta-invite"/></div><div class="coursera-course-modal-cta-btn offset3"><button class="coursera-invite-friends-email-link-send btn btn-success">'+jade.escape(null==(jade_interp=_t("Send"))?"":jade_interp)+'</button></div><div style="clear:both;"></div></div>')}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"inviteText"in locals_for_with?locals_for_with.inviteText:"undefined"!=typeof inviteText?inviteText:void 0,"shareURL"in locals_for_with?locals_for_with.shareURL:"undefined"!=typeof shareURL?shareURL:void 0,"shareText"in locals_for_with?locals_for_with.shareText:"undefined"!=typeof shareText?shareText:void 0,"pictureURL"in locals_for_with?locals_for_with.pictureURL:"undefined"!=typeof pictureURL?pictureURL:void 0,"redirectURL"in locals_for_with?locals_for_with.redirectURL:"undefined"!=typeof redirectURL?redirectURL:void 0,"twitterText"in locals_for_with?locals_for_with.twitterText:"undefined"!=typeof twitterText?twitterText:void 0,"eventingKey"in locals_for_with?locals_for_with.eventingKey:"undefined"!=typeof eventingKey?eventingKey:void 0,"eventingValue"in locals_for_with?locals_for_with.eventingValue:"undefined"!=typeof eventingValue?eventingValue:void 0,"inviteOpen"in locals_for_with?locals_for_with.inviteOpen:"undefined"!=typeof inviteOpen?inviteOpen:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/course/courseInvite.html",["js/lib/jade","i18n!pages/home/course/nls/courseInvite"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.course.courseInvite"]=jadify(wndw.jade.helpers)}(window),define("js/lib/contacts",["jquery","underscore","js/core/coursera"],function($,_,Coursera){var ContactsImport={providers:{gmail:{name:"Gmail",oauth_url:"https://accounts.google.com/o/oauth2/auth?",url_params:{response_type:"token",client_id:"108778349004.apps.googleusercontent.com",redirect_uri:Coursera.config.url.base+"account/contacts/gmail",scope:"https://www.google.com/m8/feeds/"},popup:{height:450,width:600}},yahoo:{name:"Yahoo",oauth_url:Coursera.config.url.api+"student/get_token/yahoo?",url_params:{callback:Coursera.config.url.base+"account/contacts/yahoo"},popup:{height:450,width:600}}},makeOAuthUrl:function(providerName){var provider=this.providers[providerName],params=$.param(provider.url_params),url=provider.oauth_url;return url+params},openOAuthWindow:function(providerName,callback){var url=this.makeOAuthUrl(providerName),height=this.providers[providerName].popup.height,width=this.providers[providerName].popup.width;window.oauthCallback=this.tokenCallback(callback),window.open(url,"OAuth - Coursera","width="+width+",height="+height+",modal=yes,alwaysRaised=yes")},tokenCallback:function(callback){return function(urlData,provider){callback(urlData,provider)}}};return ContactsImport}),define("js/lib/bootstrap-dropdown",["jquery"],function($){function clearMenus(){$(toggle).parent().removeClass("open")}var toggle='[data-toggle="dropdown"]',Dropdown=function(element){var $el=$(element).on("click.dropdown.data-api",this.toggle);$("html").on("click.dropdown.data-api",function(){$el.parent().removeClass("open")})};Dropdown.prototype={constructor:Dropdown,toggle:function(e){var $this=$(this),$parent,selector,isActive;if($this.is(".disabled, :disabled"))return;if(selector=$this.attr("data-target"),!selector)selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"");if($parent=$(selector),$parent.length||($parent=$this.parent()),isActive=$parent.hasClass("open"),clearMenus(),!isActive)$parent.toggleClass("open");return!1}},$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("dropdown");if(!data)$this.data("dropdown",data=new Dropdown(this));if("string"==typeof option)data[option].call($this)})},$.fn.dropdown.Constructor=Dropdown,$(function(){$("html").on("click.dropdown.data-api",clearMenus),$("body").on("click.dropdown",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",toggle,Dropdown.prototype.toggle)})}),define("js/lib/tokenizer",["jquery"],function($){var tokenizer="tokenizer",Tokenizer=function(argElement,argOpts){var input,list,wrap,suggestions,eventQueue=$({}),options=$.extend({xContent:"&times;",namespace:"tknz",label:"",placeholder:"",separators:[","," ","."],callback:null,source:null,allowUnknownTags:!0,numToSuggest:5,onclick:null},argOpts),init,buildHTML,bindEvents,push,pop,get,empty,destroy,callback,suggest,getMatch,tryPush,escapeRegExp;return init=function(){input=argElement,buildHTML(),bindEvents()},buildHTML=function(){var ns=options.namespace;if(list=$('<div class="'+ns+'-list"></div>'),options.placeholder)input.attr("placeholder",options.placeholder);suggestions=$('<div class="'+ns+'-suggest"><ul></ul></div>'),wrap=input.addClass(ns+"-input").wrap('<span class="'+ns+'-input-wrapper"></span>').parent().wrap('<div class="'+ns+'-wrapper"></div>').parent().prepend(list).prepend('<span class="'+ns+'-wrapper-label">'+options.label+"</span>").find("."+ns+"-input-wrapper").append(suggestions).end()},bindEvents=function(){var ns=options.namespace;wrap.on("focus","input",function(){wrap.addClass(ns+"-focus")}).on("blur","input",function(){wrap.removeClass(ns+"-focus"),eventQueue.delay(200).queue().push(function(){tryPush(input.val()),$.dequeue(this)})}).on("keydown","input",function(event){if(event=event||window.event,event.which=event.which||event.keyCode||event.charCode,8===event.which&&!input.val())return pop(),void callback();var selectClass=ns+"-sel",selected=suggestions.find("."+selectClass);if(38===event.which)if(event.preventDefault(),selected.length)selected.removeClass(selectClass).prev("li").add(selected.siblings().last()).eq(0).addClass(selectClass);else suggestions.find("li").last().addClass(selectClass);else if(40===event.which)if(event.preventDefault(),selected.length)selected.removeClass(selectClass).next("li").addClass(selectClass);else suggestions.find("li").first().addClass(selectClass)}).on("keypress","input",function(event){if(options.separators.indexOf(String.fromCharCode(event.which))>-1||13===event.which)event.preventDefault(),tryPush(input.val())}).on("keyup","input",function(event){if(event=event||window.event,event.which=event.which||event.keyCode||event.charCode,38===event.which||40===event.which)return;if($.isArray(options.source))suggest(options.source);else if(options.source)options.source(input.val(),suggest)}).on("click",function(){input.focus()}).on("click","."+ns+"-token-x",function(event){event.stopPropagation(),$(this).closest("."+ns+"-token").remove(),callback()}).on("click","."+ns+"-suggest-li",function(){$.queue(eventQueue,[]),input.val(""),push($(this).text()),suggest([]),callback()}).on("click","."+ns+"-token",function(event){if(options.onclick)event.stopPropagation(),options.onclick($(this).children("."+ns+"-token-label").text())})},tryPush=function(value){var match=getMatch();if(value&&(options.allowUnknownTags||match))push(match||value),input.val(""),callback();suggest([],"")},push=function(value){var ns=options.namespace,pre=ns+"-token",token=$("<div>").addClass(pre).attr("data-token",value);return token.append($("<span>").addClass(pre+"-label").text(value.trim())),token.append($("<span>").addClass(pre+"-x").html(options.xContent)),list.append(token),input},pop=function(){return list.children().last().detach().data("token")||null},empty=function(){return list.empty(),input},get=function(){var i,tokenList=[],tokens=list.children();for(i=0;i<tokens.length;i++)tokenList.push(tokens.eq(i).data("token").toString());return tokenList},destroy=function(){if(wrap.after(input).remove(),options.placeholder)input.attr("placeholder","");return input.removeClass(options.namespace+"-input")},callback=function(){return(options.callback||$.noop)(input),input},suggest=function(words,word){word=void 0===word?input.val():word;var i,ns=options.namespace,re1=new RegExp(escapeRegExp(word),"i"),re2=new RegExp("^"+escapeRegExp(word)+"$","i"),limit=options.numToSuggest||1e3,list=[];for(i=0;word&&i<words.length&&list.length<limit;i++){if(!words[i].match(re1))continue;list.push('<li class="'+ns+"-suggest-li"+(words[i].match(re2)?" "+ns+"-sel":"")+'">'+words[i]+"</li>")}suggestions.children("ul").html(list.join("")).end()[list.length?"addClass":"removeClass"]("."+ns+"-vis")},getMatch=function(){return suggestions.find("."+options.namespace+"-sel").eq(0).text()},escapeRegExp=function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},init(argElement),{push:push,pop:pop,empty:empty,get:get,destroy:destroy,callback:callback,bindEvents:bindEvents}},methods={init:function(options){if("INPUT"!==this[0].nodeName)return $.error('Tokenizer requires an <input type="text"> tag.'),this;return this.data(tokenizer,Tokenizer(this,options))},push:function(value){return this.data(tokenizer).push(value)},pop:function(){return this.data(tokenizer).pop()},empty:function(){return this.data(tokenizer).empty()},get:function(){return this.data(tokenizer).get()},destroy:function(){return this.data(tokenizer).destroy()},callback:function(){return this.data(tokenizer).callback()},bindEvents:function(){return this.data(tokenizer).bindEvents()}};return Tokenizer}),!function(wndw){function addRef(url,val){var separator=-1==url.indexOf("?")?"?":"&";return url+separator+"sharebuttons_ref="+val}function create($,Coursera){function ShareButtons(element,options){if(this.element=element,$(this.element).addClass("coursera-sharebuttons"),this.options=$.extend(!0,{},defaults,options),this._defaults=defaults,this.options.isChina)if(!$(this.element).is("[data-icon]"))$(this.element).attr("data-icon","");this.init()}var defaults={url:document.location.href,text:document.title,isChina:!1,buttons:{googlePlus:{enabled:!0,url:"",icon:"icon-google-plus-sign",refkey:"gp"},facebook:{enabled:!0,url:"",picture:"",name:"",icon:"icon-facebook-sign",refkey:"fb"},twitter:{enabled:!0,url:"",hashtags:null,via:"",related:"",lang:"en",icon:"icon-twitter",refkey:"tw"},weibo:{enabled:!0,url:"",picture:"",name:"",icon:"icon-weibo",refkey:"wb"},renren:{enabled:!0,url:"",picture:"",name:"",icon:"icon-renren",refkey:"rr"}}},makeButton=function(url,type,icon,eventKey,eventVal){var classname="coursera-sharebuttons-"+type,$link=$("<a></a>"),trackingKey=eventKey+"."+type;return $link.addClass(icon),$link.addClass("coursera-sharebuttons-icon"),$link.attr("target","_blank"),$link.attr("href",url),$link.on("click",function(){if(Coursera&&Coursera.multitracker)Coursera.multitracker.push([trackingKey,eventVal]);else{if(!window._204)window._204=[];window._204.push({key:trackingKey,value:eventVal})}}),$link},loadButton={googlePlus:function(self){var sett=self.options.buttons.googlePlus,url=""!==sett.url?sett.url:self.options.url,icon=sett.icon,eventKey=$(self.element).attr("data-eventing-key"),eventVal=$(self.element).attr("data-eventing-value"),refkey=$(self.element).attr("data-googleplus-refkey")||sett.refkey;url=addRef(url,refkey);var URL="https://plus.google.com/share?url="+encodeURIComponent(url);$(self.element).append(makeButton(URL,"gplus",icon,eventKey,eventVal))},facebook:function(self){var sett=self.options.buttons.facebook,picture=$(self.element).attr("data-facebook-picture")||sett.picture,name=$(self.element).attr("data-facebook-name")||sett.name,description=$(self.element).attr("data-facebook-description")||sett.description||"",redirect=$(self.element).attr("data-facebook-redirect")||sett.redirect||window.location.href,url=""!==sett.url?sett.url:self.options.url,icon=sett.icon,eventKey=$(self.element).attr("data-eventing-key"),eventVal=$(self.element).attr("data-eventing-value"),refkey=$(self.element).attr("data-facebook-refkey")||sett.refkey;url=addRef(url,refkey);var URL="http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(url);$(self.element).append(makeButton(URL,"facebook",icon,eventKey,eventVal))},twitter:function(self){var $el=$(self.element),sett=self.options.buttons.twitter,text=$el.attr("data-twitter-text")||sett.text||self.options.text,hashtags=$el.attr("data-twitter-hashtags")||sett.hashtags,shareUrl=""!==sett.url?sett.url:self.options.url,icon=sett.icon,eventKey=$(self.element).attr("data-eventing-key"),eventVal=$(self.element).attr("data-eventing-value"),refkey=$(self.element).attr("data-twitter-refkey")||sett.refkey;if(shareUrl=addRef(shareUrl,refkey),$el.is("[data-twitter-autobuild]")){var twitterData={frontText:$el.attr("data-twitter-text-front")||sett.text||self.options.text,middleText:$el.attr("data-twitter-text-middle")||"",endText:$el.attr("data-twitter-text-end")||"",hashtags:hashtags||null,url:shareUrl};twitterData=self.buildTwitter(twitterData),text=twitterData.text,hashtags=twitterData.hashtags,shareUrl=twitterData.url}var URL="https://twitter.com/share?text="+encodeURIComponent(text)+"&url="+encodeURIComponent(shareUrl);if(hashtags)URL+="&hashtags="+hashtags;$(self.element).append(makeButton(URL,"twitter",icon,eventKey,eventVal))},weibo:function(self){var $el=$(self.element),sett=self.options.buttons.weibo,text=$el.attr("data-weibo-text")||sett.text||self.options.text,hashtags=$el.attr("data-weibo-hashtags")||sett.hashtags,shareUrl=""!==sett.url?sett.url:self.options.url,icon=$(self.element).is("[data-icon]")||self.options.icon?sett.icon:"",eventKey=$(self.element).attr("data-eventing-key"),eventVal=$(self.element).attr("data-eventing-value"),refkey=$(self.element).attr("data-weibo-refkey")||sett.refkey;shareUrl=addRef(shareUrl,refkey);var URL="http://service.weibo.com/share/share.php?title="+encodeURIComponent(text)+"&url="+encodeURIComponent(shareUrl);$(self.element).append(makeButton(URL,"weibo",icon,eventKey,eventVal))},renren:function(self){var $el=$(self.element),sett=self.options.buttons.renren,url=""!==sett.url?sett.url:self.options.url,icon=$(self.element).is("[data-icon]")||self.options.icon?sett.icon:"",eventKey=$(self.element).attr("data-eventing-key"),eventVal=$(self.element).attr("data-eventing-value"),refkey=$(self.element).attr("data-renren-refkey")||sett.refkey;url=addRef(url,refkey);var URL="http://share.renren.com/share/buttonshare.do?link="+encodeURIComponent(url);$(self.element).append(makeButton(URL,"renren",icon,eventKey,eventVal))}};return ShareButtons.prototype.init=function(){var self=this;if("undefined"!=typeof $(this.element).data("url"))this.options.url=$(this.element).data("url");if("undefined"!=typeof $(this.element).data("text"))this.options.text=$(this.element).data("text");this.loadButtons()},ShareButtons.prototype.loadButtons=function(){var self=this;if(this.options.isChina)$.each(["weibo","renren"],function(ind,name){if(self.options.buttons[name].enabled)loadButton[name](self)});else $.each(["twitter","facebook","googlePlus"],function(ind,name){if(self.options.buttons[name].enabled)loadButton[name](self)})},ShareButtons.prototype.buildTwitter=function(twitterData){var twitterMaxLen=140,twitterUrlLen=23,twitterHashExtra=2,returnData={text:"",hashtags:"",url:""},returnLength=0;if(twitterData.url.length>0)returnData.url=twitterData.url,returnLength+=twitterUrlLen;if(returnLength+twitterData.frontText.length<=twitterMaxLen)returnData.text+=twitterData.frontText,returnLength+=twitterData.frontText.length;else return returnData.text=twitterData.frontText.substring(0,twitterMaxLen-returnLength),returnLength+=twitterMaxLen-returnLength,returnData;if(returnLength+twitterData.hashtags.length+twitterHashExtra<=twitterMaxLen)returnData.hashtags=twitterData.hashtags,returnLength+=twitterData.hashtags.length+twitterHashExtra;else return returnData;if(returnLength+twitterData.endText.length<=twitterMaxLen)returnData.text=twitterData.frontText+twitterData.endText,returnLength+=twitterData.endText.length;else return returnData;if(returnLength+twitterData.middleText.length<=twitterMaxLen)returnData.text=twitterData.frontText+twitterData.middleText+twitterData.endText,returnLength+=twitterData.middleText.length;else return returnData;return returnData},ShareButtons}if("function"==typeof define&&define.amd)define("js/lib/sharebuttons",["jquery","js/core/coursera"],function($,Coursera){return create($,Coursera)});else wndw.ShareButtons=create(wndw.$,null)}(window),define("pages/home/course/courseInvite",["underscore","jquery","js/core/coursera","js/collections/courses","pages/home/template/body","pages/home/course/courseInvite.html","i18n!pages/home/course/nls/courseInvite","js/lib/modals","js/lib/api","js/lib/schema","js/lib/contacts","js/lib/bootstrap-dropdown","js/lib/tokenizer","js/lib/sharebuttons","js/lib/util"],function(_,$,Coursera,Courses,body,CourseInvite,CourseInvite_t,Modal,api,Schema,ContactsImporter,dropdown,Tokenizer,ShareButtons,util){return body.extend({defaultOptions:{el:null,placeholderText:"",postURL:"",postData:{},eventingKey:"",eventingValue:"",shareText:"",pictureURL:"",shareURL:"",redirectURL:"",inviteText:"Invite your friends",inviteOpen:!0},events:{"click .coursera-invite-friends-email-icon":"importContacts","click .coursera-invite-friends-email-link-send":"sendEmails","click .coursera-modal-cta-icon":"toggleInvitePanel"},initialize:function(){if(this.options=$.extend({},this.defaultOptions,this.options),this.openTemplate(),this.$myTextArea=$(this.el).find(".coursera-course-modal-cta-invite"),this.loadTokenizer([]),this.$(".coursera-share-buttons").each(function(){new ShareButtons($(this),{isChina:util.isChina()})}),this.options.inviteOpen)this.$(".icon-envelope").addClass("coursera-course-modal-cta-selected-icon")},importContacts:function(e){var provider=this.$(e.currentTarget).data("provider");Coursera.multitracker.push(["user.invite.importContacts"],{social:provider}),ContactsImporter.openOAuthWindow(provider,this.handleToken())},loadTemplate:function(){var self=this;$(this.el).html(CourseInvite({_t:CourseInvite_t,config:Coursera.config,course:self.options.course,shareText:this.options.shareText,twitterText:this.options.shareText.replace("Coursera","@Coursera"),shareURL:this.options.shareURL,pictureURL:this.options.pictureURL,eventingKey:this.options.eventingKey,eventingValue:this.options.eventingValue,redirectURL:this.options.eventingURL,inviteOpen:this.options.inviteOpen?"block":"none",inviteText:this.options.inviteText}))},openTemplate:function(){this.loadTemplate(),$(".dropdown-toggle").dropdown()},handleToken:function(){var that=this;return function(urlData,provider){Coursera.api.post("student/import_contacts/"+provider,{data:urlData}).done(function(contacts){that.notifySuccessfulMessage("Sucessfully connected to "+provider),that.startAutocomplete(contacts)})}},notifySuccessfulMessage:function(message){this.notifyMessage(message,"success")},loadTokenizer:function(contacts){this.tokenizer=Tokenizer($(this.el).find(".coursera-course-modal-cta-invite"),this.tokenizerOptions(contacts)),this.setupText(),this.positionInputBox()},notifyErrorMessage:function(message){this.notifyMessage(message,"error")},notifyMessage:function(message,type){Coursera.message.add($("<div>").text(message).addClass(type),{timeout:4e3})},startAutocomplete:function(response){var self=this;$(".coursera-course-modal-cta-row").removeClass("hide");var arr=_.pluck(_.compact(response.contacts),"emails"),$tokens=$(this.el).find(".tknz-list").children(),$inputBox=$(this.el).find(".coursera-course-modal-cta-invite").clone(),$fakeInput=$(this.el).find(".coursera-course-modal-cta-fake-input");$(this.el).find(".tknz-wrapper").remove(),$inputBox.insertAfter($fakeInput),this.loadTokenizer(_.flatten(arr));var $trueList=$(this.el).find(".tknz-list-true");this.copyTokens($tokens,$trueList)},tokenizerOptions:function(source){var self=this;return{separators:[" ",","],callback:function(){var tokens=$(self.el).find(".tknz-token"),tokensTrue=$(self.el).find(".tknz-list-true .tknz-token"),$myTextArea=$(self.el).find(".coursera-course-modal-cta-invite");if(0===tokens.length)$myTextArea.attr("placeholder","Add emails");else if(self.options.maxEmails&&tokensTrue.length>=self.options.maxEmails)return void self.notifyErrorMessage("No more than "+self.options.maxEmails+" emails can be sent.");else $myTextArea.attr("placeholder","");$myTextArea.width(100),self.manageTokens(),self.positionInputBox()},source:source}},positionInputBox:function(){var $fakeInputBox=$(this.el).find(".coursera-course-modal-cta-fake-input"),$trueInputBox=$(this.el).find(".coursera-course-modal-cta-invite"),$list=$(this.el).find(".tknz-list-true"),width=400,left=$trueInputBox.offset().left-$trueInputBox.parent().offset().left,offset=width-left;if(100>offset)$trueInputBox.width(width);else $trueInputBox.width(offset);var listHeight=$list.height();if(listHeight>20)$fakeInputBox.height(listHeight)},addEmail:function(email){var val=this.$(".coursera-invite-friends-contacts").val();if(""!==val)val+=", ";val+=email,this.$(".coursera-invite-friends-contacts").val(val)},getEmails:function(){var tokens=$(this.el).find(".tknz-token"),mails=_.map(tokens,function(token){return $(token).attr("data-token")});if(0===mails.length){var $trueInputBox=$(this.el).find(".coursera-course-modal-cta-invite");return _.compact([$trueInputBox.val()])}else return _.unique(mails)},sendEmails:function(){var self=this;Coursera.multitracker.push(["user.invite.sendEmail"]);var emails=this.getEmails(),that=this,isValid=_.every(emails,function(email){return Schema.test($.trim(email),{type:"email"}).valid});if(isValid&&emails.length>0)this.options.postData.emails=emails.join(","),Coursera.api.post(this.options.postURL,{data:this.options.postData}).success(function(result){if(that.notifySend(),self.$(".tknz-token").remove(),self.$(".coursera-course-modal-cta-fake-input").val(""),self.$(".coursera-course-modal-cta-invite").val(""),!that.options.inviteOpen)that.closeInvite()}).fail(function(result){that.notifyErrorMessage("Could not send email")});else that.notifyErrorMessage("Enter valid email address")},notifySend:function(){this.notifySuccessfulMessage("Email sent")},toggleInvitePanel:function(actor){var $send=$(actor.target),$ctaRow=this.$el.find(".coursera-course-modal-cta-row"),selectedIcon="coursera-course-modal-cta-selected-icon";if($send.hasClass(selectedIcon))this.closeInvite();else{this.recordOpenModal();var $previous=this.$el.find("."+selectedIcon);$previous.removeClass(selectedIcon),$send.addClass(selectedIcon),$ctaRow.slideDown()}},recordOpenModal:function(){if(this.hasOpenedModal)return;else Coursera.multitracker.push(["user.invite.openModal"]),this.hasOpenedModal=!0},closeInvite:function(){var selectedIcon="coursera-course-modal-cta-selected-icon";this.$el.find(".coursera-course-modal-cta-row").slideUp(),this.$el.find("."+selectedIcon).removeClass(selectedIcon)},manageTokens:function(){var self=this;$trueInput=$(this.el).find(".coursera-course-modal-cta-invite");var $tokens=$(this.el).find(".tknz-list").children(),$fakeList=$(this.el).find(".tknz-list-true");this.copyTokens($tokens,$fakeList)},copyTokens:function($tokens,$newList){$newList.find(".tknz-token").remove();var $last=$newList.last();_.map($tokens,function(el){var $newToken=$(el).clone(!0);return $newToken.find(".tknz-token-x").click(function(event){el.remove(),$newToken.remove()}),void $newToken.insertBefore($trueInput)})},setupText:function(){$trueInput=$(this.el).find(".tknz-input-wrapper");var $list=$(this.el).find(".tknz-list").hide();$trueInput.wrap('<div class="tknz-list-true"/>')}})}),define("pages/home/course/nls/similarTopics",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t,topics,config){buf.push("<h2>"+jade.escape(null==(jade_interp=_t("Related Courses"))?"":jade_interp)+"</h2>");for(var i=0;i<topics.length;i++){var topic=topics[i];buf.push('<div class="coursera-similartopics-course-recommend"><a'+jade.attr("href",config.url.base+"course/"+topic.short_name,!0,!1)+'><div class="coursera-similartopics-course-card"><div class="coursera-similartopics-course-card-image"><img'+jade.attr("src",topic.small_icon_hover,!0,!1)+jade.attr("alt",topic.name,!0,!1)+'/></div><h3 class="coursera-similartopics-course-name">'+jade.escape(null==(jade_interp=_t(topic.name))?"":jade_interp)+"</h3></div></a></div>")
}}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"topics"in locals_for_with?locals_for_with.topics:"undefined"!=typeof topics?topics:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/course/similarTopics.html",["js/lib/jade","i18n!pages/home/course/nls/similarTopics"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.course.similarTopics"]=jadify(wndw.jade.helpers)}(window),!function(factory){if("function"==typeof define&&define.amd)define("js/lib/lucid.2.7.0",factory);else if(("object"==typeof module||"function"==typeof module)&&module.exports)module.exports=factory();else window.LucidJS=factory()}(function(){function EventEmitter(object){function on(event){function clear(){if(!listeners[event])return;for(aI=0;aI<args.length;aI+=1)listeners[event].splice(listeners[event].indexOf(args[aI]),1);if(listeners[event].length<1)delete listeners[event]}function batchOn(events,args){function clear(){var bI;for(bI=0;bI<bindings.length;bI+=1)bindings[bI].clear()}var eI,binding={},bindings=[];for(eI=0;eI<events.length;eI+=1)args.unshift(events[eI]),bindings.push(on.apply(this,args)),args.shift();return binding.clear=clear,binding}var args,binding={},aI,sI;if(args=Array.prototype.slice.apply(arguments,[1]),"object"==typeof event&&"function"==typeof event.push)return batchOn(event,args);if("emitter"!==event.slice(0,7)&&(listeners.emitter||listeners["emitter.listener"]))for(aI=0;aI<args.length;aI+=1)trigger("emitter.listener",event,args[aI]);if(!listeners[event])listeners[event]=[];for(aI=0;aI<args.length;aI+=1){if("function"!=typeof args[aI])throw new Error("Cannot bind event. All callbacks must be functions.");listeners[event].push(args[aI])}return binding.clear=clear,binding}function off(event){var args=Array.prototype.slice.apply(arguments,[1]),aI,sI;if("object"==typeof event&&"function"==typeof event.push){for(sI=0;sI<event.length;sI+=1)off.apply(null,[event[sI]].concat(args));return}if(!listeners[event])throw new Error('Tried to remove an event from a non-existant event of type "'+event+'".');for(aI=0;aI<args.length;aI+=1){if("function"!=typeof args[aI])throw new Error("Tried to remove a non-function.");var listenerIndex=listeners[event].indexOf(args[aI]);listeners[event].splice(listenerIndex,1)}}function once(event){var binding,args=Array.prototype.slice.apply(arguments,[1]),result=!0,cleared=!1;return binding=on(event,function(){var aI,eventArgs=Array.prototype.slice.apply(arguments);if(!binding){if(cleared)return;cleared=!0,setTimeout(function(){binding.clear()},0)}else binding.clear();for(aI=0;aI<args.length;aI+=1)if(args[aI].apply(this,eventArgs)===!1)result=!1;return result})}function trigger(event,a1,a2,a3,a4,a5,a6,a7,a8,a9,la){var longArgs,lI,eventListeners,result=!0;if("undefined"!=typeof la)longArgs=Array.prototype.slice.apply(arguments,[1]);if("object"==typeof event&&"function"==typeof event.push)if(longArgs)return batchTrigger.apply(null,arguments);else return batchTrigger(event,a1,a2,a3,a4,a5,a6,a7,a8,a9);for(event=event.split(".");event.length;){if(longArgs){if(triggerOnly.apply(this,[event.join(".")].concat(longArgs))===!1)result=!1}else if(triggerOnly(event.join("."),a1,a2,a3,a4,a5,a6,a7,a8,a9)===!1)result=!1;event.pop()}return result}function triggerOnly(event,a1,a2,a3,a4,a5,a6,a7,a8,a9,la){var longArgs,lI,eventListeners=listeners[event],result=!0;if("undefined"!=typeof la)longArgs=Array.prototype.slice.apply(arguments,[1]);if("emitter"!==event.substr(0,7)&&(listeners.emitter||listeners["emitter.event"]))if(longArgs)trigger.apply(this,[].concat("emitter.event",event,longArgs));else trigger("emitter.event",event,a1,a2,a3,a4,a5,a6,a7,a8,a9);if(eventListeners)for(eventListeners=[].concat(eventListeners),lI=0;lI<eventListeners.length;lI+=1)if(longArgs){if(eventListeners[lI].apply(this,longArgs)===!1)result=!1}else if(eventListeners[lI](a1,a2,a3,a4,a5,a6,a7,a8,a9)===!1)result=!1;return result}function batchTrigger(events,a1,a2,a3,a4,a5,a6,a7,a8,a9,la){var longArgs,eI,result=!0;if("undefined"!=typeof la)longArgs=Array.prototype.slice.apply(arguments,[1]);for(eI=0;eI<events.length;eI+=1)if(longArgs){if(args.unshift(events[eI]),trigger.apply(this,args)===!1)result=!1;args.shift()}else if(trigger(events[eI],a1,a2,a3,a4,a5,a6,a7,a8,a9)===!1)result=!1;return result}function set(event,a1,a2,a3,a4,a5,a6,a7,a8,a9,la){function clear(){trigger("emitter.unset",event),setEvents[event].splice(setEvents[event].indexOf(binding),1),_clear()}var args,binding,_clear;if(la)args=Array.prototype.slice.apply(arguments,[1]);if("object"==typeof event&&event.push)if(args)return batchSet.apply(null,args);else return batchSet(event,a1,a2,a3,a4,a5,a6,a7,a8,a9);if(binding=on(["emitter.listener","pipe.listener"],function(_event,listener){var lI;if(event===_event)if(args)listener.apply(null,args);else listener(a1,a2,a3,a4,a5,a6,a7,a8,a9)}),args)trigger.apply(null,arguments);else trigger(event,a1,a2,a3,a4,a5,a6,a7,a8,a9);if(!setEvents[event])setEvents[event]=[];return setEvents[event].push(binding),_clear=binding.clear,binding.clear=clear,binding}function batchSet(events,a1,a2,a3,a4,a5,a6,a7,a8,a9,la){function clear(){var bI;for(bI=0;bI<bindings.length;bI+=1)bindings[bI].clear()}var binding={},args,eI,bindings=[];if(la)args=Array.prototype.slice.apply(arguments,[1]);for(eI=0;eI<events.length;eI+=1)if(args)bindings.push(set.apply(null,[events[eI]].concat(args)));else bindings.push(set(events[eI],a1,a2,a3,a4,a5,a6,a7,a8,a9));return binding.clear=clear,binding}function clearSet(event){var bI;if(event&&setEvents[event]){for(bI=0;bI<setEvents[event].length;bI+=1)setEvents[event][bI].clear();delete setEvents[event]}else if(!event)for(event in setEvents){if(!setEvents.hasOwnProperty(event))continue;clearSet(event)}}function pipe(event){function captureEvent(event){var setEvent=!1,args;if(args=Array.prototype.slice.apply(arguments,[1]),emitter.once(event,function(){setEvent=!0}),"pipe"!==event.substr(0,4)&&(listeners.pipe||listeners["pipe.event"]))trigger("pipe.event",event,args);if(setEvent)setEvents.push(set.apply(null,[event].concat(args)));else triggerOnly.apply(null,[event].concat(args))}function sendListener(event,listener){emitter.trigger("pipe.listener",event,listener)}function clear(){var bI,sI,eI,sII;for(bI=0;bI<bindings.length;bI+=1)bindings[bI].clear();for(sI=0;sI<bindings.length;sI+=1)setEvents[sI].clear();for(eI=0;eI<eventListeners.length;eI+=1)bindings[eI].clear();for(sII=0;sII<sendListeners.length;sII+=1)setEvents[sII].clear()}var binding={},emitters,eI,emitter,bindings=[],setEvents=[],eventCaptures=[],sendListeners=[];if(emitters=Array.prototype.slice.apply(arguments,[1]),"object"==typeof event)if(event.on)emitters.unshift(event),event=!1;else return batchPipe.apply(null,arguments);for(eI=0;eI<emitters.length;eI+=1)emitter=emitters[eI],eventCaptures.push(emitter.on("emitter.event",captureEvent)),sendListeners.push(on("emitter.listener",sendListener));return binding.clear=clear,binding}function batchPipe(events){function clear(){var bI;for(bI=0;bI<bindings.length;bI+=1)bindings[bI].clear()}var binding={},eI,bindings=[],emitters;for(emitters=Array.prototype.slice.apply(arguments,[1]),eI=0;eI<events.length;eI+=1)bindings.push(pipe.apply(null,[events[eI]].concat(emitters)));return binding.clear=clear,binding}function clearPipes(event){var pI,bI,binding;for(pI=0;pI<pipes.length;pI+=1){if(event){if(2===pipes[pI].type)continue;if(-1===pipes[pI].events.indexOf(event))continue;pipes[pI].events.splice(pipes[pI].events.indexOf(event),1)}if(2===pipes[pI].type)pipes[pI].listenerBinding.clear();for(bI=0;bI<pipes[pI].bindings.length;bI+=1){if(event&&pipes[pI].bindings[bI].event!==event)continue;pipes[pI].bindings[bI].clear(),pipes[pI].bindings.splice(bI,1),bI-=1}if(pipes[pI].bindings.length<1)pipes.splice(pI,1),pI-=1}}function getListeners(event){if(event)return listeners[event];else return listeners}function clearListeners(event){if(event)delete listeners[event];else listeners={}}function clear(){if(listeners.emitter||listeners["emitter.clear"])trigger("emitter.clear");listeners={},clearSet(),clearPipes(),delete emitter.on,delete emitter.once,delete emitter.trigger,delete emitter.set,delete emitter.pipe,delete emitter.listeners,delete emitter.clear}function handleNode(node){function clearNodeEmitter(){var DI;for(DI=0;DI<DOMEventListeners.length;DI+=1)try{if(node.removeEventListener)node.removeEventListener(DOMEventListeners[DI].event,DOMEventListeners[DI].listener,!1);else if(node.detachEvent)node.detachEvent("on"+DOMEventListeners[DI].event,DOMEventListeners[DI].listener)}catch(e){console.error(e)}handledEvents=[],listenerBinding.clear()}var handledEvents=[],listenerBinding,DOMEventListeners=[];listenerBinding=on("emitter.listener",function(event){function nodeListener(eventObj){var args=Array.prototype.slice.apply(arguments);if(args.unshift([event,"dom."+event]),trigger.apply(this,args)===!1)eventObj.preventDefault(),eventObj.stopPropagation()}if(handledEvents.indexOf(event)>-1)return;handledEvents.push(event);try{if(node.addEventListener)node.addEventListener(event,nodeListener,!1),DOMEventListeners.push({event:event,listener:nodeListener});else if(node.attachEvent)node.attachEvent("on"+event,nodeListener),DOMEventListeners.push({event:event,listener:nodeListener})}catch(e){console.error(e)}}),emitter.clearNodeEmitter=clearNodeEmitter}var emitter=object||{},listeners={},setEvents={},pipes=[];if(!(emitter.on||emitter.once||emitter.trigger||emitter.set||emitter.pipe||emitter.listeners))emitter.on=on,emitter.off=off,emitter.once=once,emitter.trigger=trigger,emitter.set=set,emitter.set.clear=clearSet,emitter.pipe=pipe,emitter.pipe.clear=clearPipes,emitter.listeners=getListeners,emitter.listeners.clear=clearListeners;else return emitter;if(emitter.addEventListener||emitter.attachEvent)handleNode(emitter);return emitter}var api;return api={emitter:EventEmitter},[].indexOf||(Array.prototype.indexOf=function(a,b,c){for(c=this.length,b=(c+~~b)%c;c>b&&(!(b in this)||this[b]!==a);b++);return b^c?b:-1}),api}),!function(window){function createMethod(methodName){return function(){throw new Error('The "'+methodName+"\" method is not available on the playback technology's API")}}document.createElement("video"),document.createElement("audio"),document.createElement("track");var vjs=function(id,options,ready){var tag;if("string"==typeof id){if(0===id.indexOf("#"))id=id.slice(1);if(vjs.players[id])return vjs.players[id];else tag=vjs.el(id)}else tag=id;if(!tag||!tag.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");return tag.player||new vjs.Player(tag,options,ready)},videojs=vjs;if(window.videojs=window.vjs=vjs,vjs.CDN_VERSION="4.3",vjs.ACCESS_PROTOCOL="https:"==document.location.protocol?"https://":"http://",vjs.options={techOrder:["html5","flash"],html5:{},flash:{},width:300,height:150,defaultVolume:0,children:{mediaLoader:{},posterImage:{},textTrackDisplay:{},loadingSpinner:{},bigPlayButton:{},controlBar:{}},notSupportedMessage:'Sorry, no compatible source and playback technology were found for this video. Try using another browser like <a href="http://bit.ly/ccMUEC">Chrome</a> or download the latest <a href="http://adobe.ly/mwfN1">Adobe Flash Player</a>.'},"GENERATED_CDN_VSN"!==vjs.CDN_VERSION)videojs.options.flash.swf=vjs.ACCESS_PROTOCOL+"vjs.zencdn.net/"+vjs.CDN_VERSION+"/video-js.swf";vjs.players={},vjs.CoreObject=vjs.CoreObject=function(){},vjs.CoreObject.extend=function(props){var init,subObj;props=props||{},init=props.init||props.init||this.prototype.init||this.prototype.init||function(){},subObj=function(){init.apply(this,arguments)},subObj.prototype=vjs.obj.create(this.prototype),subObj.prototype.constructor=subObj,subObj.extend=vjs.CoreObject.extend,subObj.create=vjs.CoreObject.create;for(var name in props)if(props.hasOwnProperty(name))subObj.prototype[name]=props[name];return subObj},vjs.CoreObject.create=function(){var inst=vjs.obj.create(this.prototype);return this.apply(inst,arguments),inst},vjs.on=function(elem,type,fn){var data=vjs.getData(elem);if(!data.handlers)data.handlers={};if(!data.handlers[type])data.handlers[type]=[];if(!fn.guid)fn.guid=vjs.guid++;if(data.handlers[type].push(fn),!data.dispatcher)data.disabled=!1,data.dispatcher=function(event){if(data.disabled)return;event=vjs.fixEvent(event);var handlers=data.handlers[event.type];if(handlers)for(var handlersCopy=handlers.slice(0),m=0,n=handlersCopy.length;n>m&&!event.isImmediatePropagationStopped();m++)handlersCopy[m].call(elem,event)};if(1==data.handlers[type].length)if(document.addEventListener)elem.addEventListener(type,data.dispatcher,!1);else if(document.attachEvent)elem.attachEvent("on"+type,data.dispatcher)},vjs.off=function(elem,type,fn){if(!vjs.hasData(elem))return;var data=vjs.getData(elem);if(!data.handlers)return;var removeType=function(t){data.handlers[t]=[],vjs.cleanUpEvents(elem,t)};if(!type){for(var t in data.handlers)removeType(t);return}var handlers=data.handlers[type];if(!handlers)return;if(!fn)return void removeType(type);if(fn.guid)for(var n=0;n<handlers.length;n++)if(handlers[n].guid===fn.guid)handlers.splice(n--,1);vjs.cleanUpEvents(elem,type)},vjs.cleanUpEvents=function(elem,type){var data=vjs.getData(elem);if(0===data.handlers[type].length)if(delete data.handlers[type],document.removeEventListener)elem.removeEventListener(type,data.dispatcher,!1);else if(document.detachEvent)elem.detachEvent("on"+type,data.dispatcher);if(vjs.isEmpty(data.handlers))delete data.handlers,delete data.dispatcher,delete data.disabled;if(vjs.isEmpty(data))vjs.removeData(elem)},vjs.fixEvent=function(event){function returnTrue(){return!0}function returnFalse(){return!1}if(!event||!event.isPropagationStopped){var old=event||window.event;event={};for(var key in old)if("layerX"!==key&&"layerY"!==key)event[key]=old[key];if(!event.target)event.target=event.srcElement||document;if(event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement,event.preventDefault=function(){if(old.preventDefault)old.preventDefault();event.returnValue=!1,event.isDefaultPrevented=returnTrue},event.isDefaultPrevented=returnFalse,event.stopPropagation=function(){if(old.stopPropagation)old.stopPropagation();event.cancelBubble=!0,event.isPropagationStopped=returnTrue},event.isPropagationStopped=returnFalse,event.stopImmediatePropagation=function(){if(old.stopImmediatePropagation)old.stopImmediatePropagation();event.isImmediatePropagationStopped=returnTrue,event.stopPropagation()},event.isImmediatePropagationStopped=returnFalse,null!=event.clientX){var doc=document.documentElement,body=document.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(event.which=event.charCode||event.keyCode,null!=event.button)event.button=1&event.button?0:4&event.button?1:2&event.button?2:0}return event},vjs.trigger=function(elem,event){var elemData=vjs.hasData(elem)?vjs.getData(elem):{},parent=elem.parentNode||elem.ownerDocument;if("string"==typeof event)event={type:event,target:elem};if(event=vjs.fixEvent(event),elemData.dispatcher)elemData.dispatcher.call(elem,event);if(parent&&!event.isPropagationStopped()&&event.bubbles!==!1)vjs.trigger(parent,event);else if(!parent&&!event.isDefaultPrevented()){var targetData=vjs.getData(event.target);if(event.target[event.type]){if(targetData.disabled=!0,"function"==typeof event.target[event.type])event.target[event.type]();targetData.disabled=!1}}return!event.isDefaultPrevented()},vjs.one=function(elem,type,fn){var func=function(){vjs.off(elem,type,func),fn.apply(this,arguments)};func.guid=fn.guid=fn.guid||vjs.guid++,vjs.on(elem,type,func)};var hasOwnProp=Object.prototype.hasOwnProperty;vjs.createEl=function(tagName,properties){var el,propName;el=document.createElement(tagName||"div");for(propName in properties)if(hasOwnProp.call(properties,propName))if(-1!==propName.indexOf("aria-")||"role"==propName)el.setAttribute(propName,properties[propName]);else el[propName]=properties[propName];return el},vjs.capitalize=function(string){return string.charAt(0).toUpperCase()+string.slice(1)},vjs.obj={},vjs.obj.create=Object.create||function(obj){function F(){}return F.prototype=obj,new F},vjs.obj.each=function(obj,fn,context){for(var key in obj)if(hasOwnProp.call(obj,key))fn.call(context||this,key,obj[key])},vjs.obj.merge=function(obj1,obj2){if(!obj2)return obj1;for(var key in obj2)if(hasOwnProp.call(obj2,key))obj1[key]=obj2[key];return obj1},vjs.obj.deepMerge=function(obj1,obj2){var key,val1,val2;obj1=vjs.obj.copy(obj1);for(key in obj2)if(hasOwnProp.call(obj2,key))if(val1=obj1[key],val2=obj2[key],vjs.obj.isPlain(val1)&&vjs.obj.isPlain(val2))obj1[key]=vjs.obj.deepMerge(val1,val2);else obj1[key]=obj2[key];return obj1},vjs.obj.copy=function(obj){return vjs.obj.merge({},obj)},vjs.obj.isPlain=function(obj){return!!obj&&"object"==typeof obj&&"[object Object]"===obj.toString()&&obj.constructor===Object},vjs.bind=function(context,fn,uid){if(!fn.guid)fn.guid=vjs.guid++;var ret=function(){return fn.apply(context,arguments)};return ret.guid=uid?uid+"_"+fn.guid:fn.guid,ret},vjs.cache={},vjs.guid=1,vjs.expando="vdata"+(new Date).getTime(),vjs.getData=function(el){var id=el[vjs.expando];if(!id)id=el[vjs.expando]=vjs.guid++,vjs.cache[id]={};return vjs.cache[id]},vjs.hasData=function(el){var id=el[vjs.expando];return!(!id||vjs.isEmpty(vjs.cache[id]))},vjs.removeData=function(el){var id=el[vjs.expando];if(!id)return;delete vjs.cache[id];try{delete el[vjs.expando]}catch(e){if(el.removeAttribute)el.removeAttribute(vjs.expando);else el[vjs.expando]=null}},vjs.isEmpty=function(obj){for(var prop in obj)if(null!==obj[prop])return!1;return!0},vjs.addClass=function(element,classToAdd){if(-1==(" "+element.className+" ").indexOf(" "+classToAdd+" "))element.className=""===element.className?classToAdd:element.className+" "+classToAdd},vjs.removeClass=function(element,classToRemove){var classNames,i;if(-1==element.className.indexOf(classToRemove))return;for(classNames=element.className.split(" "),i=classNames.length-1;i>=0;i--)if(classNames[i]===classToRemove)classNames.splice(i,1);element.className=classNames.join(" ")},vjs.TEST_VID=vjs.createEl("video"),vjs.USER_AGENT=navigator.userAgent,vjs.IS_IPHONE=/iPhone/i.test(vjs.USER_AGENT),vjs.IS_IPAD=/iPad/i.test(vjs.USER_AGENT),vjs.IS_IPOD=/iPod/i.test(vjs.USER_AGENT),vjs.IS_IOS=vjs.IS_IPHONE||vjs.IS_IPAD||vjs.IS_IPOD,vjs.IOS_VERSION=function(){var match=vjs.USER_AGENT.match(/OS (\d+)_/i);if(match&&match[1])return match[1]}(),vjs.IS_ANDROID=/Android/i.test(vjs.USER_AGENT),vjs.ANDROID_VERSION=function(){var match=vjs.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i),major,minor;if(!match)return null;if(major=match[1]&&parseFloat(match[1]),minor=match[2]&&parseFloat(match[2]),major&&minor)return parseFloat(match[1]+"."+match[2]);else if(major)return major;else return null}(),vjs.IS_OLD_ANDROID=vjs.IS_ANDROID&&/webkit/i.test(vjs.USER_AGENT)&&vjs.ANDROID_VERSION<2.3,vjs.IS_FIREFOX=/Firefox/i.test(vjs.USER_AGENT),vjs.IS_CHROME=/Chrome/i.test(vjs.USER_AGENT),vjs.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),vjs.getAttributeValues=function(tag){var obj,knownBooleans,attrs,attrName,attrVal;if(obj={},knownBooleans=",autoplay,controls,loop,muted,default,",tag&&tag.attributes&&tag.attributes.length>0){attrs=tag.attributes;for(var i=attrs.length-1;i>=0;i--){if(attrName=attrs[i].name,attrVal=attrs[i].value,"boolean"==typeof tag[attrName]||-1!==knownBooleans.indexOf(","+attrName+","))attrVal=null!==attrVal?!0:!1;obj[attrName]=attrVal}}return obj},vjs.getComputedDimension=function(el,strCssRule){var strValue="";if(document.defaultView&&document.defaultView.getComputedStyle)strValue=document.defaultView.getComputedStyle(el,"").getPropertyValue(strCssRule);else if(el.currentStyle)strValue=el["client"+strCssRule.substr(0,1).toUpperCase()+strCssRule.substr(1)]+"px";return strValue},vjs.insertFirst=function(child,parent){if(parent.firstChild)parent.insertBefore(child,parent.firstChild);else parent.appendChild(child)},vjs.support={},vjs.el=function(id){if(0===id.indexOf("#"))id=id.slice(1);return document.getElementById(id)},vjs.formatTime=function(seconds,guide){guide=guide||seconds;var s=Math.floor(seconds%60),m=Math.floor(seconds/60%60),h=Math.floor(seconds/3600),gm=Math.floor(guide/60%60),gh=Math.floor(guide/3600);if(isNaN(seconds)||1/0===seconds)h=m=s="-";return h=h>0||gh>0?h+":":"",m=((h||gm>=10)&&10>m?"0"+m:m)+":",s=10>s?"0"+s:s,h+m+s},vjs.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},vjs.unblockTextSelection=function(){document.onselectstart=function(){return!0}},vjs.trim=function(str){return(str+"").replace(/^\s+|\s+$/g,"")},vjs.round=function(num,dec){if(!dec)dec=0;return Math.round(num*Math.pow(10,dec))/Math.pow(10,dec)},vjs.createTimeRange=function(start,end){return{length:1,start:function(){return start},end:function(){return end}}},vjs.get=function(url,onSuccess,onError){var local,request;if("undefined"==typeof XMLHttpRequest)window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(f){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(g){}throw new Error("This browser does not support XMLHttpRequest.")};request=new XMLHttpRequest;try{request.open("GET",url)}catch(e){onError(e)}local=0===url.indexOf("file:")||0===window.location.href.indexOf("file:")&&-1===url.indexOf("http"),request.onreadystatechange=function(){if(4===request.readyState)if(200===request.status||local&&0===request.status)onSuccess(request.responseText);else if(onError)onError()};try{request.send()}catch(e){if(onError)onError(e)}},vjs.setLocalStorage=function(key,value){try{var localStorage=window.localStorage||!1;if(!localStorage)return;localStorage[key]=value}catch(e){if(22==e.code||1014==e.code)vjs.log("LocalStorage Full (VideoJS)",e);else if(18==e.code)vjs.log("LocalStorage not allowed (VideoJS)",e);else vjs.log("LocalStorage Error (VideoJS)",e)}},vjs.getAbsoluteURL=function(url){if(!url.match(/^https?:\/\//))url=vjs.createEl("div",{innerHTML:'<a href="'+url+'">x</a>'}).firstChild.href;return url},vjs.log=function(){if(vjs.log.history=vjs.log.history||[],vjs.log.history.push(arguments),window.console)window.console.log(Array.prototype.slice.call(arguments))},vjs.findPosition=function(el){var box,docEl,body,clientLeft,scrollLeft,left,clientTop,scrollTop,top;if(el.getBoundingClientRect&&el.parentNode)box=el.getBoundingClientRect();if(!box)return{left:0,top:0};return docEl=document.documentElement,body=document.body,clientLeft=docEl.clientLeft||body.clientLeft||0,scrollLeft=window.pageXOffset||body.scrollLeft,left=box.left+scrollLeft-clientLeft,clientTop=docEl.clientTop||body.clientTop||0,scrollTop=window.pageYOffset||body.scrollTop,top=box.top+scrollTop-clientTop,{left:left,top:top}},vjs.util={},vjs.util.mergeOptions=function(obj1,obj2){var key,val1,val2;obj1=vjs.obj.copy(obj1);for(key in obj2)if(obj2.hasOwnProperty(key))if(val1=obj1[key],val2=obj2[key],vjs.obj.isPlain(val1)&&vjs.obj.isPlain(val2))obj1[key]=vjs.util.mergeOptions(val1,val2);else obj1[key]=obj2[key];return obj1},vjs.Component=vjs.CoreObject.extend({init:function(player,options,ready){this.player_=player,this.options_=vjs.obj.copy(this.options_),options=this.options(options),this.id_=options.id||(options.el&&options.el.id?options.el.id:player.id()+"_component_"+vjs.guid++),this.name_=options.name||null,this.el_=options.el||this.createEl(),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.initChildren(),this.ready(ready)}}),vjs.Component.prototype.dispose=function(){if(this.trigger("dispose"),this.children_)for(var i=this.children_.length-1;i>=0;i--)if(this.children_[i].dispose)this.children_[i].dispose();if(this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode)this.el_.parentNode.removeChild(this.el_);vjs.removeData(this.el_),this.el_=null},vjs.Component.prototype.player_=!0,vjs.Component.prototype.player=function(){return this.player_},vjs.Component.prototype.options_,vjs.Component.prototype.options=function(obj){if(void 0===obj)return this.options_;return this.options_=vjs.util.mergeOptions(this.options_,obj)},vjs.Component.prototype.el_,vjs.Component.prototype.createEl=function(tagName,attributes){return vjs.createEl(tagName,attributes)},vjs.Component.prototype.el=function(){return this.el_},vjs.Component.prototype.contentEl_,vjs.Component.prototype.contentEl=function(){return this.contentEl_||this.el_},vjs.Component.prototype.id_,vjs.Component.prototype.id=function(){return this.id_},vjs.Component.prototype.name_,vjs.Component.prototype.name=function(){return this.name_},vjs.Component.prototype.children_,vjs.Component.prototype.children=function(){return this.children_},vjs.Component.prototype.childIndex_,vjs.Component.prototype.getChildById=function(id){return this.childIndex_[id]},vjs.Component.prototype.childNameIndex_,vjs.Component.prototype.getChild=function(name){return this.childNameIndex_[name]},vjs.Component.prototype.addChild=function(child,options){var component,componentClass,componentName,componentId;if("string"==typeof child)componentName=child,options=options||{},componentClass=options.componentClass||vjs.capitalize(componentName),options.name=componentName,component=new videojs[componentClass](this.player_||this,options);else component=child;if(this.children_.push(component),"function"==typeof component.id)this.childIndex_[component.id()]=component;if(componentName=componentName||component.name&&component.name())this.childNameIndex_[componentName]=component;if("function"==typeof component.el&&component.el())this.contentEl().appendChild(component.el());return component},vjs.Component.prototype.removeChild=function(component){if("string"==typeof component)component=this.getChild(component);if(!component||!this.children_)return;for(var childFound=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===component){childFound=!0,this.children_.splice(i,1);break}if(!childFound)return;this.childIndex_[component.id]=null,this.childNameIndex_[component.name]=null;var compEl=component.el();if(compEl&&compEl.parentNode===this.contentEl())this.contentEl().removeChild(component.el())},vjs.Component.prototype.initChildren=function(){var options=this.options_;if(options&&options.children){var self=this;vjs.obj.each(options.children,function(name,opts){if(opts===!1)return;var tempAdd=function(){self[name]=self.addChild(name,opts)};if(opts.loadEvent);else tempAdd()})}},vjs.Component.prototype.buildCSSClass=function(){return""},vjs.Component.prototype.on=function(type,fn){return vjs.on(this.el_,type,vjs.bind(this,fn)),this},vjs.Component.prototype.off=function(type,fn){return vjs.off(this.el_,type,fn),this},vjs.Component.prototype.one=function(type,fn){return vjs.one(this.el_,type,vjs.bind(this,fn)),this},vjs.Component.prototype.trigger=function(type,event){return vjs.trigger(this.el_,type,event),this},vjs.Component.prototype.isReady_,vjs.Component.prototype.isReadyOnInitFinish_=!0,vjs.Component.prototype.readyQueue_,vjs.Component.prototype.ready=function(fn){if(fn)if(this.isReady_)fn.call(this);else{if(void 0===this.readyQueue_)this.readyQueue_=[];this.readyQueue_.push(fn)}return this},vjs.Component.prototype.triggerReady=function(){this.isReady_=!0;var readyQueue=this.readyQueue_;if(readyQueue&&readyQueue.length>0){for(var i=0,j=readyQueue.length;j>i;i++)readyQueue[i].call(this);this.readyQueue_=[],this.trigger("ready")}},vjs.Component.prototype.addClass=function(classToAdd){return vjs.addClass(this.el_,classToAdd),this},vjs.Component.prototype.removeClass=function(classToRemove){return vjs.removeClass(this.el_,classToRemove),this},vjs.Component.prototype.show=function(){return this.el_.style.display="block",this},vjs.Component.prototype.hide=function(){return this.el_.style.display="none",this},vjs.Component.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},vjs.Component.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},vjs.Component.prototype.disable=function(){this.hide(),this.show=function(){}},vjs.Component.prototype.width=function(num,skipListeners){return this.dimension("width",num,skipListeners)},vjs.Component.prototype.height=function(num,skipListeners){return this.dimension("height",num,skipListeners)},vjs.Component.prototype.dimensions=function(width,height){return this.width(width,!0).height(height)},vjs.Component.prototype.dimension=function(widthOrHeight,num,skipListeners){if(void 0!==num){if(-1!==(""+num).indexOf("%")||-1!==(""+num).indexOf("px"))this.el_.style[widthOrHeight]=num;else if("auto"===num)this.el_.style[widthOrHeight]="";else this.el_.style[widthOrHeight]=num+"px";if(!skipListeners)this.trigger("resize");return this}if(!this.el_)return 0;var val=this.el_.style[widthOrHeight],pxIndex=val.indexOf("px");if(-1!==pxIndex)return parseInt(val.slice(0,pxIndex),10);else return parseInt(this.el_["offset"+vjs.capitalize(widthOrHeight)],10)},vjs.Component.prototype.onResize,vjs.Component.prototype.emitTapEvents=function(){var touchStart,touchTime,couldBeTap,noTap;touchStart=0,this.on("touchstart",function(event){touchStart=(new Date).getTime(),couldBeTap=!0}),noTap=function(){couldBeTap=!1},this.on("touchmove",noTap),this.on("touchleave",noTap),this.on("touchcancel",noTap),this.on("touchend",function(){if(couldBeTap===!0)if(touchTime=(new Date).getTime()-touchStart,250>touchTime)this.trigger("tap")})},vjs.Button=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);var touchstart=!1;this.on("touchstart",function(event){event.preventDefault(),touchstart=!0}),this.on("touchmove",function(){touchstart=!1});var self=this;this.on("touchend",function(event){if(touchstart)self.onClick(event);event.preventDefault()}),this.on("click",this.onClick),this.on("focus",this.onFocus),this.on("blur",this.onBlur)}}),vjs.Button.prototype.createEl=function(type,props){return props=vjs.obj.merge({className:this.buildCSSClass(),innerHTML:'<div class="vjs-control-content"><span class="vjs-control-text">'+(this.buttonText||"Need Text")+"</span></div>",role:"button","aria-live":"polite",tabIndex:0},props),vjs.Component.prototype.createEl.call(this,type,props)},vjs.Button.prototype.buildCSSClass=function(){return"vjs-control "+vjs.Component.prototype.buildCSSClass.call(this)},vjs.Button.prototype.onClick=function(){},vjs.Button.prototype.onFocus=function(){vjs.on(document,"keyup",vjs.bind(this,this.onKeyPress))},vjs.Button.prototype.onKeyPress=function(event){if(32==event.which||13==event.which)event.preventDefault(),this.onClick()},vjs.Button.prototype.onBlur=function(){vjs.off(document,"keyup",vjs.bind(this,this.onKeyPress))},vjs.Slider=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options),this.bar=this.getChild(this.options_.barName),this.handle=this.getChild(this.options_.handleName),player.on(this.playerEvent,vjs.bind(this,this.update)),this.on("mousedown",this.onMouseDown),this.on("touchstart",this.onMouseDown),this.on("focus",this.onFocus),this.on("blur",this.onBlur),this.on("click",this.onClick),this.player_.on("controlsvisible",vjs.bind(this,this.update)),player.ready(vjs.bind(this,this.update)),this.boundEvents={}}}),vjs.Slider.prototype.createEl=function(type,props){return props=props||{},props.className=props.className+" vjs-slider",props=vjs.obj.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},props),vjs.Component.prototype.createEl.call(this,type,props)
},vjs.Slider.prototype.onMouseDown=function(event){event.preventDefault(),vjs.blockTextSelection(),this.boundEvents.move=vjs.bind(this,this.onMouseMove),this.boundEvents.end=vjs.bind(this,this.onMouseUp),vjs.on(document,"mousemove",this.boundEvents.move),vjs.on(document,"mouseup",this.boundEvents.end),vjs.on(document,"touchmove",this.boundEvents.move),vjs.on(document,"touchend",this.boundEvents.end),this.onMouseMove(event)},vjs.Slider.prototype.onMouseUp=function(){vjs.unblockTextSelection(),vjs.off(document,"mousemove",this.boundEvents.move,!1),vjs.off(document,"mouseup",this.boundEvents.end,!1),vjs.off(document,"touchmove",this.boundEvents.move,!1),vjs.off(document,"touchend",this.boundEvents.end,!1),this.update()},vjs.Slider.prototype.update=function(){if(!this.el_)return;var barProgress,progress=this.getPercent(),handle=this.handle,bar=this.bar;if(isNaN(progress))progress=0;if(barProgress=progress,handle){var box=this.el_,boxWidth=box.offsetWidth,handleWidth=handle.el().offsetWidth,handlePercent=handleWidth?handleWidth/boxWidth:0,boxAdjustedPercent=1-handlePercent,adjustedProgress=progress*boxAdjustedPercent;barProgress=adjustedProgress+handlePercent/2,handle.el().style.left=vjs.round(100*adjustedProgress,2)+"%"}bar.el().style.width=vjs.round(100*barProgress,2)+"%"},vjs.Slider.prototype.calculateDistance=function(event){var el,box,boxX,boxY,boxW,boxH,handle,pageX,pageY;if(el=this.el_,box=vjs.findPosition(el),boxW=boxH=el.offsetWidth,handle=this.handle,this.options_.vertical){if(boxY=box.top,event.changedTouches)pageY=event.changedTouches[0].pageY;else pageY=event.pageY;if(handle){var handleH=handle.el().offsetHeight;boxY+=handleH/2,boxH-=handleH}return Math.max(0,Math.min(1,(boxY-pageY+boxH)/boxH))}else{if(boxX=box.left,event.changedTouches)pageX=event.changedTouches[0].pageX;else pageX=event.pageX;if(handle){var handleW=handle.el().offsetWidth;boxX+=handleW/2,boxW-=handleW}return Math.max(0,Math.min(1,(pageX-boxX)/boxW))}},vjs.Slider.prototype.onFocus=function(){vjs.on(document,"keyup",vjs.bind(this,this.onKeyPress))},vjs.Slider.prototype.onKeyPress=function(event){if(37==event.which)event.preventDefault(),this.stepBack();else if(39==event.which)event.preventDefault(),this.stepForward()},vjs.Slider.prototype.onBlur=function(){vjs.off(document,"keyup",vjs.bind(this,this.onKeyPress))},vjs.Slider.prototype.onClick=function(event){event.stopImmediatePropagation(),event.preventDefault()},vjs.SliderHandle=vjs.Component.extend(),vjs.SliderHandle.prototype.defaultValue=0,vjs.SliderHandle.prototype.createEl=function(type,props){return props=props||{},props.className=props.className+" vjs-slider-handle",props=vjs.obj.merge({innerHTML:'<span class="vjs-control-text">'+this.defaultValue+"</span>"},props),vjs.Component.prototype.createEl.call(this,"div",props)},vjs.Menu=vjs.Component.extend(),vjs.Menu.prototype.addItem=function(component){this.addChild(component),component.on("click",vjs.bind(this,function(){this.unlockShowing()}))},vjs.Menu.prototype.createEl=function(){var contentElType=this.options().contentElType||"ul";this.contentEl_=vjs.createEl(contentElType,{className:"vjs-menu-content"});var el=vjs.Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return el.appendChild(this.contentEl_),vjs.on(el,"click",function(event){event.preventDefault(),event.stopImmediatePropagation()}),el},vjs.MenuItem=vjs.Button.extend({init:function(player,options){vjs.Button.call(this,player,options),this.selected(options.selected)}}),vjs.MenuItem.prototype.createEl=function(type,props){return vjs.Button.prototype.createEl.call(this,"li",vjs.obj.merge({className:"vjs-menu-item",innerHTML:this.options_.label},props))},vjs.MenuItem.prototype.onClick=function(){this.selected(!0)},vjs.MenuItem.prototype.selected=function(selected){if(selected)this.addClass("vjs-selected"),this.el_.setAttribute("aria-selected",!0);else this.removeClass("vjs-selected"),this.el_.setAttribute("aria-selected",!1)},vjs.MenuButton=vjs.Button.extend({init:function(player,options){if(vjs.Button.call(this,player,options),this.menu=this.createMenu(),this.addChild(this.menu),this.items&&0===this.items.length)this.hide();this.on("keyup",this.onKeyPress),this.el_.setAttribute("aria-haspopup",!0),this.el_.setAttribute("role","button")}}),vjs.MenuButton.prototype.buttonPressed_=!1,vjs.MenuButton.prototype.createMenu=function(){var menu=new vjs.Menu(this.player_);if(this.options().title)menu.contentEl().appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.kind_),tabindex:-1}));if(this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)menu.addItem(this.items[i]);return menu},vjs.MenuButton.prototype.createItems=function(){},vjs.MenuButton.prototype.buildCSSClass=function(){return this.className+" vjs-menu-button "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.MenuButton.prototype.onFocus=function(){},vjs.MenuButton.prototype.onBlur=function(){},vjs.MenuButton.prototype.onClick=function(){if(this.one("mouseout",vjs.bind(this,function(){this.menu.unlockShowing(),this.el_.blur()})),this.buttonPressed_)this.unpressButton();else this.pressButton()},vjs.MenuButton.prototype.onKeyPress=function(event){if(event.preventDefault(),32==event.which||13==event.which)if(this.buttonPressed_)this.unpressButton();else this.pressButton();else if(27==event.which)if(this.buttonPressed_)this.unpressButton()},vjs.MenuButton.prototype.pressButton=function(){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-pressed",!0),this.items&&this.items.length>0)this.items[0].el().focus()},vjs.MenuButton.prototype.unpressButton=function(){this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-pressed",!1)},vjs.Player=vjs.Component.extend({init:function(tag,options,ready){if(this.tag=tag,tag.id=tag.id||"vjs_video_"+vjs.guid++,options=vjs.obj.merge(this.getTagSettings(tag),options),this.cache_={},this.poster_=options.poster,this.controls_=options.controls,tag.controls=!1,vjs.Component.call(this,this,options,ready),this.controls())this.addClass("vjs-controls-enabled");else this.addClass("vjs-controls-disabled");if(this.one("play",function(e){var fpEvent={type:"firstplay",target:this.el_},keepGoing=vjs.trigger(this.el_,fpEvent);if(!keepGoing)e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}),this.on("ended",this.onEnded),this.on("play",this.onPlay),this.on("firstplay",this.onFirstPlay),this.on("pause",this.onPause),this.on("progress",this.onProgress),this.on("durationchange",this.onDurationChange),this.on("error",this.onError),this.on("fullscreenchange",this.onFullscreenChange),vjs.players[this.id_]=this,options.plugins)vjs.obj.each(options.plugins,function(key,val){this[key](val)},this);this.listenForUserActivity()}}),vjs.Player.prototype.options_=vjs.options,vjs.Player.prototype.dispose=function(){if(this.trigger("dispose"),this.off("dispose"),vjs.players[this.id_]=null,this.tag&&this.tag.player)this.tag.player=null;if(this.el_&&this.el_.player)this.el_.player=null;if(this.stopTrackingProgress(),this.stopTrackingCurrentTime(),this.tech)this.tech.dispose();vjs.Component.prototype.dispose.call(this)},vjs.Player.prototype.getTagSettings=function(tag){var options={sources:[],tracks:[]};if(vjs.obj.merge(options,vjs.getAttributeValues(tag)),tag.hasChildNodes()){var children,child,childName,i,j;for(children=tag.childNodes,i=0,j=children.length;j>i;i++)if(child=children[i],childName=child.nodeName.toLowerCase(),"source"===childName)options.sources.push(vjs.getAttributeValues(child));else if("track"===childName)options.tracks.push(vjs.getAttributeValues(child))}return options},vjs.Player.prototype.createEl=function(){var el=this.el_=vjs.Component.prototype.createEl.call(this,"div"),tag=this.tag;if(tag.removeAttribute("width"),tag.removeAttribute("height"),tag.hasChildNodes()){var nodes,nodesLength,i,node,nodeName,removeNodes;for(nodes=tag.childNodes,nodesLength=nodes.length,removeNodes=[];nodesLength--;)if(node=nodes[nodesLength],nodeName=node.nodeName.toLowerCase(),"track"===nodeName)removeNodes.push(node);for(i=0;i<removeNodes.length;i++)tag.removeChild(removeNodes[i])}if(el.id=tag.id,el.className=tag.className,tag.id+="_html5_api",tag.className="vjs-tech",tag.player=el.player=this,this.addClass("vjs-paused"),this.width(this.options_.width,!0),this.height(this.options_.height,!0),tag.parentNode)tag.parentNode.insertBefore(el,tag);return vjs.insertFirst(tag,el),el},vjs.Player.prototype.loadTech=function(techName,source){if(this.tech)this.unloadTech();if("Html5"!==techName&&this.tag)vjs.Html5.disposeMediaElement(this.tag),this.tag=null;this.techName=techName,this.isReady_=!1;var techReady=function(){if(this.player_.triggerReady(),!this.features.progressEvents)this.player_.manualProgressOn();if(!this.features.timeupdateEvents)this.player_.manualTimeUpdatesOn()},techOptions=vjs.obj.merge({source:source,parentEl:this.el_},this.options_[techName.toLowerCase()]);if(source){if(source.src==this.cache_.src&&this.cache_.currentTime>0)techOptions.startTime=this.cache_.currentTime;this.cache_.src=source.src}this.tech=new videojs[techName](this,techOptions),this.tech.ready(techReady)},vjs.Player.prototype.unloadTech=function(){if(this.isReady_=!1,this.tech.dispose(),this.manualProgress)this.manualProgressOff();if(this.manualTimeUpdates)this.manualTimeUpdatesOff();this.tech=!1},vjs.Player.prototype.manualProgressOn=function(){this.manualProgress=!0,this.trackProgress(),this.tech.one("progress",function(){this.features.progressEvents=!0,this.player_.manualProgressOff()})},vjs.Player.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress()},vjs.Player.prototype.trackProgress=function(){this.progressInterval=setInterval(vjs.bind(this,function(){if(this.cache_.bufferEnd<this.buffered().end(0))this.trigger("progress");else if(1==this.bufferedPercent())this.stopTrackingProgress(),this.trigger("progress")}),500)},vjs.Player.prototype.stopTrackingProgress=function(){clearInterval(this.progressInterval)},vjs.Player.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime),this.tech.one("timeupdate",function(){this.features.timeupdateEvents=!0,this.player_.manualTimeUpdatesOff()})},vjs.Player.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},vjs.Player.prototype.trackCurrentTime=function(){if(this.currentTimeInterval)this.stopTrackingCurrentTime();this.currentTimeInterval=setInterval(vjs.bind(this,function(){this.trigger("timeupdate")}),250)},vjs.Player.prototype.stopTrackingCurrentTime=function(){clearInterval(this.currentTimeInterval)},vjs.Player.prototype.onLoadStart,vjs.Player.prototype.onLoadedMetaData,vjs.Player.prototype.onLoadedData,vjs.Player.prototype.onLoadedAllData,vjs.Player.prototype.onPlay=function(){vjs.removeClass(this.el_,"vjs-paused"),vjs.addClass(this.el_,"vjs-playing")},vjs.Player.prototype.onFirstPlay=function(){if(this.options_.starttime)this.currentTime(this.options_.starttime);this.addClass("vjs-has-started")},vjs.Player.prototype.onPause=function(){vjs.removeClass(this.el_,"vjs-playing"),vjs.addClass(this.el_,"vjs-paused")},vjs.Player.prototype.onTimeUpdate,vjs.Player.prototype.onProgress=function(){if(1==this.bufferedPercent())this.trigger("loadedalldata")},vjs.Player.prototype.onEnded=function(){if(this.options_.loop)this.currentTime(0),this.play()},vjs.Player.prototype.onDurationChange=function(){var duration=this.techGet("duration");if(duration)this.duration(duration)},vjs.Player.prototype.onVolumeChange,vjs.Player.prototype.onFullscreenChange=function(){if(this.isFullScreen())this.addClass("vjs-fullscreen");else this.removeClass("vjs-fullscreen")},vjs.Player.prototype.onError=function(e){vjs.log("Video Error",e)},vjs.Player.prototype.cache_,vjs.Player.prototype.getCache=function(){return this.cache_},vjs.Player.prototype.techCall=function(method,arg){if(this.tech&&!this.tech.isReady_)this.tech.ready(function(){this[method](arg)});else try{this.tech[method](arg)}catch(e){throw vjs.log(e),e}},vjs.Player.prototype.techGet=function(method){if(this.tech&&this.tech.isReady_)try{return this.tech[method]()}catch(e){if(void 0===this.tech[method])vjs.log("Video.js: "+method+" method not defined for "+this.techName+" playback technology.",e);else if("TypeError"==e.name)vjs.log("Video.js: "+method+" unavailable on "+this.techName+" playback technology element.",e),this.tech.isReady_=!1;else vjs.log(e);throw e}return},vjs.Player.prototype.play=function(){return this.techCall("play"),this},vjs.Player.prototype.pause=function(){return this.techCall("pause"),this},vjs.Player.prototype.paused=function(){return this.techGet("paused")===!1?!1:!0},vjs.Player.prototype.currentTime=function(seconds){if(void 0!==seconds){if(this.cache_.lastSetCurrentTime=seconds,this.techCall("setCurrentTime",seconds),this.manualTimeUpdates)this.trigger("timeupdate");return this}return this.cache_.currentTime=this.techGet("currentTime")||0},vjs.Player.prototype.duration=function(seconds){if(void 0!==seconds)return this.cache_.duration=parseFloat(seconds),this;if(void 0===this.cache_.duration)this.onDurationChange();return this.cache_.duration||0},vjs.Player.prototype.remainingTime=function(){return this.duration()-this.currentTime()},vjs.Player.prototype.buffered=function(){var buffered=this.techGet("buffered"),start=0,buflast=buffered.length-1,end=this.cache_.bufferEnd=this.cache_.bufferEnd||0;if(buffered&&buflast>=0&&buffered.end(buflast)!==end)end=buffered.end(buflast),this.cache_.bufferEnd=end;return vjs.createTimeRange(start,end)},vjs.Player.prototype.bufferedPercent=function(){return this.duration()?this.buffered().end(0)/this.duration():0},vjs.Player.prototype.volume=function(percentAsDecimal){var vol;if(void 0!==percentAsDecimal)return vol=Math.max(0,Math.min(1,parseFloat(percentAsDecimal))),this.cache_.volume=vol,this.techCall("setVolume",vol),vjs.setLocalStorage("volume",vol),this;return vol=parseFloat(this.techGet("volume")),isNaN(vol)?1:vol},vjs.Player.prototype.muted=function(muted){if(void 0!==muted)return this.techCall("setMuted",muted),this;return this.techGet("muted")||!1},vjs.Player.prototype.supportsFullScreen=function(){return this.techGet("supportsFullScreen")||!1},vjs.Player.prototype.isFullScreen_=!1,vjs.Player.prototype.isFullScreen=function(isFS){if(void 0!==isFS)return this.isFullScreen_=isFS,this;return this.isFullScreen_},vjs.Player.prototype.requestFullScreen=function(){var requestFullScreen=vjs.support.requestFullScreen;if(this.isFullScreen(!0),requestFullScreen)vjs.on(document,requestFullScreen.eventName,vjs.bind(this,function(e){if(this.isFullScreen(document[requestFullScreen.isFullScreen]),this.isFullScreen()===!1)vjs.off(document,requestFullScreen.eventName,arguments.callee);this.trigger("fullscreenchange")})),this.el_[requestFullScreen.requestFn]();else if(this.tech.supportsFullScreen())this.techCall("enterFullScreen");else this.enterFullWindow(),this.trigger("fullscreenchange");return this},vjs.Player.prototype.cancelFullScreen=function(){var requestFullScreen=vjs.support.requestFullScreen;if(this.isFullScreen(!1),requestFullScreen)document[requestFullScreen.cancelFn]();else if(this.tech.supportsFullScreen())this.techCall("exitFullScreen");else this.exitFullWindow(),this.trigger("fullscreenchange");return this},vjs.Player.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,vjs.on(document,"keydown",vjs.bind(this,this.fullWindowOnEscKey)),document.documentElement.style.overflow="hidden",vjs.addClass(document.body,"vjs-full-window"),this.trigger("enterFullWindow")},vjs.Player.prototype.fullWindowOnEscKey=function(event){if(27===event.keyCode)if(this.isFullScreen()===!0)this.cancelFullScreen();else this.exitFullWindow()},vjs.Player.prototype.exitFullWindow=function(){this.isFullWindow=!1,vjs.off(document,"keydown",this.fullWindowOnEscKey),document.documentElement.style.overflow=this.docOrigOverflow,vjs.removeClass(document.body,"vjs-full-window"),this.trigger("exitFullWindow")},vjs.Player.prototype.selectSource=function(sources){for(var i=0,j=this.options_.techOrder;i<j.length;i++){var techName=vjs.capitalize(j[i]),tech=videojs[techName];if(tech.isSupported())for(var a=0,b=sources;a<b.length;a++){var source=b[a];if(tech.canPlaySource(source))return{source:source,tech:techName}}}return!1},vjs.Player.prototype.src=function(source){if(source instanceof Array){var sourceTech=this.selectSource(source),techName;if(sourceTech)if(source=sourceTech.source,techName=sourceTech.tech,techName==this.techName)this.src(source);else this.loadTech(techName,source);else this.el_.appendChild(vjs.createEl("p",{innerHTML:this.options().notSupportedMessage}))}else if(source instanceof Object)if(videojs[this.techName].canPlaySource(source))this.src(source.src);else this.src([source]);else if(this.cache_.src=source,!this.isReady_)this.ready(function(){this.src(source)});else{if(this.techCall("src",source),"auto"==this.options_.preload)this.load();if(this.options_.autoplay)this.play()}return this},vjs.Player.prototype.load=function(){return this.techCall("load"),this},vjs.Player.prototype.currentSrc=function(){return this.techGet("currentSrc")||this.cache_.src||""},vjs.Player.prototype.preload=function(value){if(void 0!==value)return this.techCall("setPreload",value),this.options_.preload=value,this;return this.techGet("preload")},vjs.Player.prototype.autoplay=function(value){if(void 0!==value)return this.techCall("setAutoplay",value),this.options_.autoplay=value,this;return this.techGet("autoplay",value)},vjs.Player.prototype.loop=function(value){if(void 0!==value)return this.techCall("setLoop",value),this.options_.loop=value,this;return this.techGet("loop")},vjs.Player.prototype.poster_,vjs.Player.prototype.poster=function(src){if(void 0===src)return this.poster_;this.poster_=src,this.techCall("setPoster",src),this.trigger("posterchange")},vjs.Player.prototype.controls_,vjs.Player.prototype.controls=function(bool){if(void 0!==bool){if(bool=!!bool,this.controls_!==bool)if(this.controls_=bool,bool)this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled");else this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled");return this}return this.controls_},vjs.Player.prototype.usingNativeControls_,vjs.Player.prototype.usingNativeControls=function(bool){if(void 0!==bool){if(bool=!!bool,this.usingNativeControls_!==bool)if(this.usingNativeControls_=bool,bool)this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols");else this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols");return this}return this.usingNativeControls_},vjs.Player.prototype.error=function(){return this.techGet("error")},vjs.Player.prototype.ended=function(){return this.techGet("ended")},vjs.Player.prototype.seeking=function(){return this.techGet("seeking")},vjs.Player.prototype.userActivity_=!0,vjs.Player.prototype.reportUserActivity=function(event){this.userActivity_=!0},vjs.Player.prototype.userActive_=!0,vjs.Player.prototype.userActive=function(bool){if(void 0!==bool){if(bool=!!bool,bool!==this.userActive_)if(this.userActive_=bool,bool)this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");else this.userActivity_=!1,this.tech.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive");return this}return this.userActive_},vjs.Player.prototype.listenForUserActivity=function(){var onMouseActivity,onMouseDown,mouseInProgress,onMouseUp,activityCheck,inactivityTimeout;onMouseActivity=vjs.bind(this,this.reportUserActivity),onMouseDown=function(){onMouseActivity(),clearInterval(mouseInProgress),mouseInProgress=setInterval(onMouseActivity,250)},onMouseUp=function(event){onMouseActivity(),clearInterval(mouseInProgress)},this.on("mousedown",onMouseDown),this.on("mousemove",onMouseActivity),this.on("mouseup",onMouseUp),this.on("keydown",onMouseActivity),this.on("keyup",onMouseActivity),this.on("touchstart",onMouseDown),this.on("touchmove",onMouseActivity),this.on("touchend",onMouseUp),this.on("touchcancel",onMouseUp),activityCheck=setInterval(vjs.bind(this,function(){if(this.userActivity_)this.userActivity_=!1,this.userActive(!0),clearTimeout(inactivityTimeout),inactivityTimeout=setTimeout(vjs.bind(this,function(){if(!this.userActivity_)this.userActive(!1)}),2e3)}),250),this.on("dispose",function(){clearInterval(activityCheck),clearTimeout(inactivityTimeout)})},vjs.Player.prototype.playbackRate=function(rate){if(void 0!==rate)return this.techCall("setPlaybackRate",rate),this.trigger("ratechange"),this;return this.techGet("playbackRate")||1},function(){var prefix,requestFS,div;if(div=document.createElement("div"),requestFS={},void 0!==div.cancelFullscreen)requestFS.requestFn="requestFullscreen",requestFS.cancelFn="exitFullscreen",requestFS.eventName="fullscreenchange",requestFS.isFullScreen="fullScreen";else{if(document.mozCancelFullScreen)prefix="moz",requestFS.isFullScreen=prefix+"FullScreen";else prefix="webkit",requestFS.isFullScreen=prefix+"IsFullScreen";if(div[prefix+"RequestFullScreen"])requestFS.requestFn=prefix+"RequestFullScreen",requestFS.cancelFn=prefix+"CancelFullScreen";requestFS.eventName=prefix+"fullscreenchange"}if(document[requestFS.cancelFn])vjs.support.requestFullScreen=requestFS}(),vjs.ControlBar=vjs.Component.extend(),vjs.ControlBar.prototype.options_={loadEvent:"play",children:{playToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},progressControl:{},fullscreenToggle:{},volumeControl:{},muteToggle:{}}},vjs.ControlBar.prototype.createEl=function(){return vjs.createEl("div",{className:"vjs-control-bar"})},vjs.PlayToggle=vjs.Button.extend({init:function(player,options){vjs.Button.call(this,player,options),player.on("play",vjs.bind(this,this.onPlay)),player.on("pause",vjs.bind(this,this.onPause))}}),vjs.PlayToggle.prototype.buttonText="Play",vjs.PlayToggle.prototype.buildCSSClass=function(){return"vjs-play-control "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.PlayToggle.prototype.onClick=function(){if(this.player_.paused())this.player_.play();else this.player_.pause()},vjs.PlayToggle.prototype.onPlay=function(){vjs.removeClass(this.el_,"vjs-paused"),vjs.addClass(this.el_,"vjs-playing"),this.el_.children[0].children[0].innerHTML="Pause"},vjs.PlayToggle.prototype.onPause=function(){vjs.removeClass(this.el_,"vjs-playing"),vjs.addClass(this.el_,"vjs-paused"),this.el_.children[0].children[0].innerHTML="Play"},vjs.CurrentTimeDisplay=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options),player.on("timeupdate",vjs.bind(this,this.updateContent))}}),vjs.CurrentTimeDisplay.prototype.createEl=function(){var el=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-controls vjs-control"});return this.content=vjs.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00',"aria-live":"off"}),el.appendChild(vjs.createEl("div").appendChild(this.content)),el},vjs.CurrentTimeDisplay.prototype.updateContent=function(){var time=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.content.innerHTML='<span class="vjs-control-text">Current Time </span>'+vjs.formatTime(time,this.player_.duration())},vjs.DurationDisplay=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options),player.on("timeupdate",vjs.bind(this,this.updateContent))}}),vjs.DurationDisplay.prototype.createEl=function(){var el=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-controls vjs-control"});return this.content=vjs.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">Duration Time </span>0:00',"aria-live":"off"}),el.appendChild(vjs.createEl("div").appendChild(this.content)),el},vjs.DurationDisplay.prototype.updateContent=function(){var duration=this.player_.duration();if(duration)this.content.innerHTML='<span class="vjs-control-text">Duration Time </span>'+vjs.formatTime(duration)},vjs.TimeDivider=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options)}}),vjs.TimeDivider.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},vjs.RemainingTimeDisplay=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options),player.on("timeupdate",vjs.bind(this,this.updateContent))}}),vjs.RemainingTimeDisplay.prototype.createEl=function(){var el=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});return this.content=vjs.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">Remaining Time </span>-0:00',"aria-live":"off"}),el.appendChild(vjs.createEl("div").appendChild(this.content)),el},vjs.RemainingTimeDisplay.prototype.updateContent=function(){if(this.player_.duration())this.content.innerHTML='<span class="vjs-control-text">Remaining Time </span>-'+vjs.formatTime(this.player_.remainingTime())},vjs.FullscreenToggle=vjs.Button.extend({init:function(player,options){vjs.Button.call(this,player,options)}}),vjs.FullscreenToggle.prototype.buttonText="Fullscreen",vjs.FullscreenToggle.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.FullscreenToggle.prototype.onClick=function(){if(!this.player_.isFullScreen())this.player_.requestFullScreen(),this.el_.children[0].children[0].innerHTML="Non-Fullscreen";else this.player_.cancelFullScreen(),this.el_.children[0].children[0].innerHTML="Fullscreen"},vjs.ProgressControl=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options)}}),vjs.ProgressControl.prototype.options_={children:{seekBar:{}}},vjs.ProgressControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},vjs.SeekBar=vjs.Slider.extend({init:function(player,options){vjs.Slider.call(this,player,options),player.on("timeupdate",vjs.bind(this,this.updateARIAAttributes)),player.ready(vjs.bind(this,this.updateARIAAttributes))}}),vjs.SeekBar.prototype.options_={children:{loadProgressBar:{},playProgressBar:{},seekHandle:{}},barName:"playProgressBar",handleName:"seekHandle"},vjs.SeekBar.prototype.playerEvent="timeupdate",vjs.SeekBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-progress-holder","aria-label":"video progress bar"})},vjs.SeekBar.prototype.updateARIAAttributes=function(){var time=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("aria-valuenow",vjs.round(100*this.getPercent(),2)),this.el_.setAttribute("aria-valuetext",vjs.formatTime(time,this.player_.duration()))},vjs.SeekBar.prototype.getPercent=function(){var currentTime;if("Flash"===this.player_.techName&&this.player_.seeking()){var cache=this.player_.getCache();if(cache.lastSetCurrentTime)currentTime=cache.lastSetCurrentTime;else currentTime=this.player_.currentTime()}else currentTime=this.player_.currentTime();return currentTime/this.player_.duration()},vjs.SeekBar.prototype.onMouseDown=function(event){vjs.Slider.prototype.onMouseDown.call(this,event),this.player_.scrubbing=!0,this.videoWasPlaying=!this.player_.paused(),this.player_.pause()},vjs.SeekBar.prototype.onMouseMove=function(event){var newTime=this.calculateDistance(event)*this.player_.duration();if(newTime==this.player_.duration())newTime-=.1;this.player_.currentTime(newTime)},vjs.SeekBar.prototype.onMouseUp=function(event){if(vjs.Slider.prototype.onMouseUp.call(this,event),this.player_.scrubbing=!1,this.videoWasPlaying)this.player_.play()},vjs.SeekBar.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},vjs.SeekBar.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},vjs.LoadProgressBar=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options),player.on("progress",vjs.bind(this,this.update))}}),vjs.LoadProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text">Loaded: 0%</span>'})},vjs.LoadProgressBar.prototype.update=function(){if(this.el_.style)this.el_.style.width=vjs.round(100*this.player_.bufferedPercent(),2)+"%"},vjs.PlayProgressBar=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options)}}),vjs.PlayProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text">Progress: 0%</span>'})},vjs.SeekHandle=vjs.SliderHandle.extend(),vjs.SeekHandle.prototype.defaultValue="00:00",vjs.SeekHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-seek-handle"})},vjs.VolumeControl=vjs.Component.extend({init:function(player,options){if(vjs.Component.call(this,player,options),player.tech&&player.tech.features&&player.tech.features.volumeControl===!1)this.addClass("vjs-hidden");player.on("loadstart",vjs.bind(this,function(){if(player.tech.features&&player.tech.features.volumeControl===!1)this.addClass("vjs-hidden");else this.removeClass("vjs-hidden")}))}}),vjs.VolumeControl.prototype.options_={children:{volumeBar:{}}},vjs.VolumeControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},vjs.VolumeBar=vjs.Slider.extend({init:function(player,options){vjs.Slider.call(this,player,options),player.on("volumechange",vjs.bind(this,this.updateARIAAttributes)),player.ready(vjs.bind(this,this.updateARIAAttributes)),setTimeout(vjs.bind(this,this.update),0)}}),vjs.VolumeBar.prototype.updateARIAAttributes=function(){this.el_.setAttribute("aria-valuenow",vjs.round(100*this.player_.volume(),2)),this.el_.setAttribute("aria-valuetext",vjs.round(100*this.player_.volume(),2)+"%")},vjs.VolumeBar.prototype.options_={children:{volumeLevel:{},volumeHandle:{}},barName:"volumeLevel",handleName:"volumeHandle"},vjs.VolumeBar.prototype.playerEvent="volumechange",vjs.VolumeBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-volume-bar","aria-label":"volume level"})},vjs.VolumeBar.prototype.onMouseMove=function(event){if(this.player_.muted())this.player_.muted(!1);this.player_.volume(this.calculateDistance(event))},vjs.VolumeBar.prototype.getPercent=function(){if(this.player_.muted())return 0;else return this.player_.volume()},vjs.VolumeBar.prototype.stepForward=function(){this.player_.volume(this.player_.volume()+.1)},vjs.VolumeBar.prototype.stepBack=function(){this.player_.volume(this.player_.volume()-.1)},vjs.VolumeLevel=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options)}}),vjs.VolumeLevel.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},vjs.VolumeHandle=vjs.SliderHandle.extend(),vjs.VolumeHandle.prototype.defaultValue="00:00",vjs.VolumeHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-volume-handle"})
},vjs.MuteToggle=vjs.Button.extend({init:function(player,options){if(vjs.Button.call(this,player,options),player.on("volumechange",vjs.bind(this,this.update)),player.tech&&player.tech.features&&player.tech.features.volumeControl===!1)this.addClass("vjs-hidden");player.on("loadstart",vjs.bind(this,function(){if(player.tech.features&&player.tech.features.volumeControl===!1)this.addClass("vjs-hidden");else this.removeClass("vjs-hidden")}))}}),vjs.MuteToggle.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})},vjs.MuteToggle.prototype.onClick=function(){this.player_.muted(this.player_.muted()?!1:!0)},vjs.MuteToggle.prototype.update=function(){var vol=this.player_.volume(),level=3;if(0===vol||this.player_.muted())level=0;else if(.33>vol)level=1;else if(.67>vol)level=2;if(this.player_.muted()){if("Unmute"!=this.el_.children[0].children[0].innerHTML)this.el_.children[0].children[0].innerHTML="Unmute"}else if("Mute"!=this.el_.children[0].children[0].innerHTML)this.el_.children[0].children[0].innerHTML="Mute";for(var i=0;4>i;i++)vjs.removeClass(this.el_,"vjs-vol-"+i);vjs.addClass(this.el_,"vjs-vol-"+level)},vjs.VolumeMenuButton=vjs.MenuButton.extend({init:function(player,options){if(vjs.MenuButton.call(this,player,options),player.on("volumechange",vjs.bind(this,this.update)),player.tech&&player.tech.features&&player.tech.features.volumeControl===!1)this.addClass("vjs-hidden");player.on("loadstart",vjs.bind(this,function(){if(player.tech.features&&player.tech.features.volumeControl===!1)this.addClass("vjs-hidden");else this.removeClass("vjs-hidden")})),this.addClass("vjs-menu-button")}}),vjs.VolumeMenuButton.prototype.createMenu=function(){var menu=new vjs.Menu(this.player_,{contentElType:"div"}),vc=new vjs.VolumeBar(this.player_,vjs.obj.merge({vertical:!0},this.options_.volumeBar));return menu.addChild(vc),menu},vjs.VolumeMenuButton.prototype.onClick=function(){vjs.MuteToggle.prototype.onClick.call(this),vjs.MenuButton.prototype.onClick.call(this)},vjs.VolumeMenuButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-volume-menu-button vjs-menu-button vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})},vjs.VolumeMenuButton.prototype.update=vjs.MuteToggle.prototype.update,vjs.PosterImage=vjs.Button.extend({init:function(player,options){if(vjs.Button.call(this,player,options),player.poster())this.src(player.poster());if(!player.poster()||!player.controls())this.hide();player.on("posterchange",vjs.bind(this,function(){this.src(player.poster())})),player.on("play",vjs.bind(this,this.hide))}});var _backgroundSizeSupported="backgroundSize"in vjs.TEST_VID.style;vjs.PosterImage.prototype.createEl=function(){var el=vjs.createEl("div",{className:"vjs-poster",tabIndex:-1});if(!_backgroundSizeSupported)el.appendChild(vjs.createEl("img"));return el},vjs.PosterImage.prototype.src=function(url){var el=this.el();if(void 0===url)return;if(_backgroundSizeSupported)el.style.backgroundImage='url("'+url+'")';else el.firstChild.src=url},vjs.PosterImage.prototype.onClick=function(){if(this.player().controls())this.player_.play()},vjs.LoadingSpinner=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options),player.on("canplay",vjs.bind(this,this.hide)),player.on("canplaythrough",vjs.bind(this,this.hide)),player.on("playing",vjs.bind(this,this.hide)),player.on("seeked",vjs.bind(this,this.hide)),player.on("seeking",vjs.bind(this,this.show)),player.on("seeked",vjs.bind(this,this.hide)),player.on("error",vjs.bind(this,this.show)),player.on("waiting",vjs.bind(this,this.show))}}),vjs.LoadingSpinner.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner"})},vjs.BigPlayButton=vjs.Button.extend(),vjs.BigPlayButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-big-play-button",innerHTML:'<span aria-hidden="true"></span>',"aria-label":"play video"})},vjs.BigPlayButton.prototype.onClick=function(){this.player_.play()},vjs.MediaTechController=vjs.Component.extend({init:function(player,options,ready){vjs.Component.call(this,player,options,ready),this.features={volumeControl:!0,fullscreenResize:!1,progressEvents:!1,timeupdateEvents:!1},this.initControlsListeners()}}),vjs.MediaTechController.prototype.initControlsListeners=function(){var player,tech,activateControls,deactivateControls;tech=this,player=this.player();var activateControls=function(){if(player.controls()&&!player.usingNativeControls())tech.addControlsListeners()};deactivateControls=vjs.bind(tech,tech.removeControlsListeners),this.ready(activateControls),player.on("controlsenabled",activateControls),player.on("controlsdisabled",deactivateControls)},vjs.MediaTechController.prototype.addControlsListeners=function(){var preventBubble,userWasActive;this.on("mousedown",this.onClick),this.on("touchstart",function(event){event.preventDefault(),event.stopPropagation(),userWasActive=this.player_.userActive()}),preventBubble=function(event){if(event.stopPropagation(),userWasActive)this.player_.reportUserActivity()},this.on("touchmove",preventBubble),this.on("touchleave",preventBubble),this.on("touchcancel",preventBubble),this.on("touchend",preventBubble),this.emitTapEvents(),this.on("tap",this.onTap)},vjs.MediaTechController.prototype.removeControlsListeners=function(){this.off("tap"),this.off("touchstart"),this.off("touchmove"),this.off("touchleave"),this.off("touchcancel"),this.off("touchend"),this.off("click"),this.off("mousedown")},vjs.MediaTechController.prototype.onClick=function(event){if(0!==event.button)return;if(this.player().controls())if(this.player().paused())this.player().play();else this.player().pause()},vjs.MediaTechController.prototype.onTap=function(){this.player().userActive(!this.player().userActive())},vjs.MediaTechController.prototype.features={volumeControl:!0,fullscreenResize:!1,progressEvents:!1,timeupdateEvents:!1},vjs.media={},vjs.media.ApiMethods="play,pause,paused,currentTime,setCurrentTime,duration,buffered,volume,setVolume,muted,setMuted,width,height,supportsFullScreen,enterFullScreen,src,load,currentSrc,preload,setPreload,autoplay,setAutoplay,loop,setLoop,error,networkState,readyState,seeking,initialTime,startOffsetTime,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks,defaultPlaybackRate,playbackRate,mediaGroup,controller,controls,defaultMuted".split(",");for(var i=vjs.media.ApiMethods.length-1;i>=0;i--){var methodName=vjs.media.ApiMethods[i];vjs.MediaTechController.prototype[vjs.media.ApiMethods[i]]=createMethod(methodName)}if(vjs.Html5=vjs.MediaTechController.extend({init:function(player,options,ready){this.features.volumeControl=vjs.Html5.canControlVolume(),this.features.movingMediaElementInDOM=!vjs.IS_IOS,this.features.fullscreenResize=!0,vjs.MediaTechController.call(this,player,options,ready),this.setupTriggers();var source=options.source;if(source&&this.el_.currentSrc===source.src&&this.el_.networkState>0)player.trigger("loadstart");else if(source)this.el_.src=source.src;if(vjs.TOUCH_ENABLED&&player.options().nativeControlsForTouch!==!1)this.useNativeControls();player.ready(function(){if(this.tag&&this.options_.autoplay&&this.paused())delete this.tag.poster,this.play()}),this.triggerReady()}}),vjs.Html5.prototype.dispose=function(){vjs.MediaTechController.prototype.dispose.call(this)},vjs.Html5.prototype.createEl=function(){var player=this.player_,el=player.tag,newEl,clone;if(!el||this.features.movingMediaElementInDOM===!1){if(el)clone=el.cloneNode(!1),vjs.Html5.disposeMediaElement(el),el=clone,player.tag=null;else el=vjs.createEl("video",{id:player.id()+"_html5_api",className:"vjs-tech"});el.player=player,vjs.insertFirst(el,player.el())}for(var attrs=["autoplay","preload","loop","muted"],i=attrs.length-1;i>=0;i--){var attr=attrs[i];if(null!==player.options_[attr])el[attr]=player.options_[attr]}return el},vjs.Html5.prototype.setupTriggers=function(){for(var i=vjs.Html5.Events.length-1;i>=0;i--)vjs.on(this.el_,vjs.Html5.Events[i],vjs.bind(this.player_,this.eventHandler))},vjs.Html5.prototype.eventHandler=function(e){this.trigger(e),e.stopPropagation()},vjs.Html5.prototype.useNativeControls=function(){var tech,player,controlsOn,controlsOff,cleanUp;tech=this,player=this.player(),tech.setControls(player.controls()),controlsOn=function(){tech.setControls(!0)},controlsOff=function(){tech.setControls(!1)},player.on("controlsenabled",controlsOn),player.on("controlsdisabled",controlsOff),cleanUp=function(){player.off("controlsenabled",controlsOn),player.off("controlsdisabled",controlsOff)},tech.on("dispose",cleanUp),player.on("usingcustomcontrols",cleanUp),player.usingNativeControls(!0)},vjs.Html5.prototype.play=function(){this.el_.play()},vjs.Html5.prototype.pause=function(){this.el_.pause()},vjs.Html5.prototype.paused=function(){return this.el_.paused},vjs.Html5.prototype.currentTime=function(){return this.el_.currentTime},vjs.Html5.prototype.setCurrentTime=function(seconds){try{this.el_.currentTime=seconds}catch(e){vjs.log(e,"Video is not ready. (Video.js)")}},vjs.Html5.prototype.duration=function(){return this.el_.duration||0},vjs.Html5.prototype.buffered=function(){return this.el_.buffered},vjs.Html5.prototype.volume=function(){return this.el_.volume},vjs.Html5.prototype.setVolume=function(percentAsDecimal){this.el_.volume=percentAsDecimal},vjs.Html5.prototype.muted=function(){return this.el_.muted},vjs.Html5.prototype.setMuted=function(muted){this.el_.muted=muted},vjs.Html5.prototype.width=function(){return this.el_.offsetWidth},vjs.Html5.prototype.height=function(){return this.el_.offsetHeight},vjs.Html5.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen)if(/Android/.test(vjs.USER_AGENT)||!/Chrome|Mac OS X 10.5/.test(vjs.USER_AGENT))return!0;return!1},vjs.Html5.prototype.enterFullScreen=function(){var video=this.el_;if(video.paused&&video.networkState<=video.HAVE_METADATA)this.el_.play(),setTimeout(function(){video.pause(),video.webkitEnterFullScreen()},0);else video.webkitEnterFullScreen()},vjs.Html5.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},vjs.Html5.prototype.src=function(src){this.el_.src=src},vjs.Html5.prototype.load=function(){this.el_.load()},vjs.Html5.prototype.currentSrc=function(){return this.el_.currentSrc},vjs.Html5.prototype.poster=function(){return this.el_.poster},vjs.Html5.prototype.setPoster=function(val){this.el_.poster=val},vjs.Html5.prototype.preload=function(){return this.el_.preload},vjs.Html5.prototype.setPreload=function(val){this.el_.preload=val},vjs.Html5.prototype.autoplay=function(){return this.el_.autoplay},vjs.Html5.prototype.setAutoplay=function(val){this.el_.autoplay=val},vjs.Html5.prototype.controls=function(){return this.el_.controls},vjs.Html5.prototype.setControls=function(val){this.el_.controls=!!val},vjs.Html5.prototype.loop=function(){return this.el_.loop},vjs.Html5.prototype.setLoop=function(val){this.el_.loop=val},vjs.Html5.prototype.error=function(){return this.el_.error},vjs.Html5.prototype.seeking=function(){return this.el_.seeking},vjs.Html5.prototype.ended=function(){return this.el_.ended},vjs.Html5.prototype.defaultMuted=function(){return this.el_.defaultMuted},vjs.Html5.prototype.playbackRate=function(){return this.el_.playbackRate},vjs.Html5.prototype.setPlaybackRate=function(val){this.el_.playbackRate=val},vjs.Html5.isSupported=function(){return!!vjs.TEST_VID.canPlayType},vjs.Html5.canPlaySource=function(srcObj){try{return!!vjs.TEST_VID.canPlayType(srcObj.type)}catch(e){return""}},vjs.Html5.canControlVolume=function(){var volume=vjs.TEST_VID.volume;return vjs.TEST_VID.volume=volume/2+.1,volume!==vjs.TEST_VID.volume},vjs.Html5.Events="loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange".split(","),vjs.Html5.disposeMediaElement=function(el){if(!el)return;if(el.player=null,el.parentNode)el.parentNode.removeChild(el);for(;el.hasChildNodes();)el.removeChild(el.firstChild);if(el.removeAttribute("src"),"function"==typeof el.load)el.load()},vjs.IS_OLD_ANDROID)document.createElement("video").constructor.prototype.canPlayType=function(type){return type&&-1!=type.toLowerCase().indexOf("video/mp4")?"maybe":""};vjs.Flash=vjs.MediaTechController.extend({init:function(player,options,ready){vjs.MediaTechController.call(this,player,options,ready);var source=options.source,parentEl=options.parentEl,placeHolder=this.el_=vjs.createEl("div",{id:player.id()+"_temp_flash"}),objId=player.id()+"_flash_api",playerOptions=player.options_,flashVars=vjs.obj.merge({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:playerOptions.autoplay,preload:playerOptions.preload,loop:playerOptions.loop,muted:playerOptions.muted},options.flashVars),params=vjs.obj.merge({wmode:"opaque",bgcolor:"#000000"},options.params),attributes=vjs.obj.merge({id:objId,name:objId,"class":"vjs-tech"},options.attributes);if(source)if(source.type&&vjs.Flash.isStreamingType(source.type)){var parts=vjs.Flash.streamToParts(source.src);flashVars.rtmpConnection=encodeURIComponent(parts.connection),flashVars.rtmpStream=encodeURIComponent(parts.stream)}else flashVars.src=encodeURIComponent(vjs.getAbsoluteURL(source.src));if(vjs.insertFirst(placeHolder,parentEl),options.startTime)this.ready(function(){this.load(),this.play(),this.currentTime(options.startTime)});if(vjs.IS_FIREFOX)this.ready(function(){vjs.on(this.el(),"mousemove",vjs.bind(this,function(){this.player().trigger({type:"mousemove",bubbles:!1})}))});if(options.iFrameMode===!0&&!vjs.IS_FIREFOX){var iFrm=vjs.createEl("iframe",{id:objId+"_iframe",name:objId+"_iframe",className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0});flashVars.readyFunction="ready",flashVars.eventProxyFunction="events",flashVars.errorEventProxyFunction="errors",vjs.on(iFrm,"load",vjs.bind(this,function(){var iDoc,iWin=iFrm.contentWindow;iDoc=iFrm.contentDocument?iFrm.contentDocument:iFrm.contentWindow.document,iDoc.write(vjs.Flash.getEmbedCode(options.swf,flashVars,params,attributes)),iWin.player=this.player_,iWin.ready=vjs.bind(this.player_,function(currSwf){var el=iDoc.getElementById(currSwf),player=this,tech=player.tech;tech.el_=el,vjs.Flash.checkReady(tech)}),iWin.events=vjs.bind(this.player_,function(swfID,eventName){var player=this;if(player&&"flash"===player.techName)player.trigger(eventName)}),iWin.errors=vjs.bind(this.player_,function(swfID,eventName){vjs.log("Flash Error",eventName)})})),placeHolder.parentNode.replaceChild(iFrm,placeHolder)}else vjs.Flash.embed(options.swf,placeHolder,flashVars,params,attributes)}}),vjs.Flash.prototype.dispose=function(){vjs.MediaTechController.prototype.dispose.call(this)},vjs.Flash.prototype.play=function(){this.el_.vjs_play()},vjs.Flash.prototype.pause=function(){this.el_.vjs_pause()},vjs.Flash.prototype.src=function(src){if(vjs.Flash.isStreamingSrc(src))src=vjs.Flash.streamToParts(src),this.setRtmpConnection(src.connection),this.setRtmpStream(src.stream);else src=vjs.getAbsoluteURL(src),this.el_.vjs_src(src);if(this.player_.autoplay()){var tech=this;setTimeout(function(){tech.play()},0)}},vjs.Flash.prototype.currentSrc=function(){var src=this.el_.vjs_getProperty("currentSrc");if(null==src){var connection=this.rtmpConnection(),stream=this.rtmpStream();if(connection&&stream)src=vjs.Flash.streamFromParts(connection,stream)}return src},vjs.Flash.prototype.load=function(){this.el_.vjs_load()},vjs.Flash.prototype.poster=function(){this.el_.vjs_getProperty("poster")},vjs.Flash.prototype.setPoster=function(){},vjs.Flash.prototype.buffered=function(){return vjs.createTimeRange(0,this.el_.vjs_getProperty("buffered"))},vjs.Flash.prototype.supportsFullScreen=function(){return!1},vjs.Flash.prototype.enterFullScreen=function(){return!1};var api=vjs.Flash.prototype,readWrite="rtmpConnection,rtmpStream,preload,currentTime,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),readOnly="error,currentSrc,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks".split(","),createSetter=function(attr){var attrUpper=attr.charAt(0).toUpperCase()+attr.slice(1);api["set"+attrUpper]=function(val){return this.el_.vjs_setProperty(attr,val)}},createGetter=function(attr){api[attr]=function(){return this.el_.vjs_getProperty(attr)}};if(function(){var i;for(i=0;i<readWrite.length;i++)createGetter(readWrite[i]),createSetter(readWrite[i]);for(i=0;i<readOnly.length;i++)createGetter(readOnly[i])}(),vjs.Flash.isSupported=function(){return vjs.Flash.version()[0]>=10},vjs.Flash.canPlaySource=function(srcObj){var type;if(!srcObj.type)return"";if(type=srcObj.type.replace(/;.*/,"").toLowerCase(),type in vjs.Flash.formats||type in vjs.Flash.streamingFormats)return"maybe"},vjs.Flash.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},vjs.Flash.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},vjs.Flash.onReady=function(currSwf){var el=vjs.el(currSwf),player=el.player||el.parentNode.player,tech=player.tech;el.player=player,tech.el_=el,vjs.Flash.checkReady(tech)},vjs.Flash.checkReady=function(tech){if(tech.el().vjs_getProperty)tech.triggerReady();else setTimeout(function(){vjs.Flash.checkReady(tech)},50)},vjs.Flash.onEvent=function(swfID,eventName){var player=vjs.el(swfID).player;player.trigger(eventName)},vjs.Flash.onError=function(swfID,err){var player=vjs.el(swfID).player;player.trigger("error"),vjs.log("Flash Error",err,swfID)},vjs.Flash.version=function(){var version="0,0,0";try{version=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)version=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(err){}}return version.split(",")},vjs.Flash.embed=function(swf,placeHolder,flashVars,params,attributes){var code=vjs.Flash.getEmbedCode(swf,flashVars,params,attributes),obj=vjs.createEl("div",{innerHTML:code}).childNodes[0],par=placeHolder.parentNode;placeHolder.parentNode.replaceChild(obj,placeHolder);var newObj=par.childNodes[0];return setTimeout(function(){newObj.style.display="block"},1e3),obj},vjs.Flash.getEmbedCode=function(swf,flashVars,params,attributes){var objTag='<object type="application/x-shockwave-flash"',flashVarsString="",paramsString="",attrsString="";if(flashVars)vjs.obj.each(flashVars,function(key,val){flashVarsString+=key+"="+val+"&amp;"});return params=vjs.obj.merge({movie:swf,flashvars:flashVarsString,allowScriptAccess:"always",allowNetworking:"all"},params),vjs.obj.each(params,function(key,val){paramsString+='<param name="'+key+'" value="'+val+'" />'}),attributes=vjs.obj.merge({data:swf,width:"100%",height:"100%"},attributes),vjs.obj.each(attributes,function(key,val){attrsString+=key+'="'+val+'" '}),objTag+attrsString+">"+paramsString+"</object>"},vjs.Flash.streamFromParts=function(connection,stream){return connection+"&"+stream},vjs.Flash.streamToParts=function(src){var parts={connection:"",stream:""};if(!src)return parts;var connEnd=src.indexOf("&"),streamBegin;if(-1!==connEnd)streamBegin=connEnd+1;else if(connEnd=streamBegin=src.lastIndexOf("/")+1,0===connEnd)connEnd=streamBegin=src.length;return parts.connection=src.substring(0,connEnd),parts.stream=src.substring(streamBegin,src.length),parts},vjs.Flash.isStreamingType=function(srcType){return srcType in vjs.Flash.streamingFormats},vjs.Flash.RTMP_RE=/^rtmp[set]?:\/\//i,vjs.Flash.isStreamingSrc=function(src){return vjs.Flash.RTMP_RE.test(src)},vjs.MediaLoader=vjs.Component.extend({init:function(player,options,ready){if(vjs.Component.call(this,player,options,ready),!player.options_.sources||0===player.options_.sources.length)for(var i=0,j=player.options_.techOrder;i<j.length;i++){var techName=vjs.capitalize(j[i]),tech=videojs[techName];if(tech&&tech.isSupported()){player.loadTech(techName);break}}else player.src(player.options_.sources)}}),vjs.Player.prototype.textTracks_,vjs.Player.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||[],this.textTracks_},vjs.Player.prototype.addTextTrack=function(kind,label,language,options){var tracks=this.textTracks_=this.textTracks_||[];options=options||{},options.kind=kind,options.label=label,options.language=language;var Kind=vjs.capitalize(kind||"subtitles"),track=new videojs[Kind+"Track"](this,options);return tracks.push(track),track},vjs.Player.prototype.addTextTracks=function(trackList){for(var trackObj,i=0;i<trackList.length;i++)trackObj=trackList[i],this.addTextTrack(trackObj.kind,trackObj.label,trackObj.language,trackObj);return this},vjs.Player.prototype.showTextTrack=function(id,disableSameKind){for(var tracks=this.textTracks_,i=0,j=tracks.length,track,showTrack,kind;j>i;i++)if(track=tracks[i],track.id()===id)track.show(),showTrack=track;else if(disableSameKind&&track.kind()==disableSameKind&&track.mode()>0)track.disable();if(kind=showTrack?showTrack.kind():disableSameKind?disableSameKind:!1)this.trigger(kind+"trackchange");return this},vjs.TextTrack=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options),this.id_=options.id||"vjs_"+options.kind+"_"+options.language+"_"+vjs.guid++,this.src_=options.src,this.dflt_=options["default"]||options.dflt,this.title_=options.title,this.language_=options.srclang,this.label_=options.label,this.cues_=[],this.activeCues_=[],this.readyState_=0,this.mode_=0,this.player_.on("fullscreenchange",vjs.bind(this,this.adjustFontSize))}}),vjs.TextTrack.prototype.kind_,vjs.TextTrack.prototype.kind=function(){return this.kind_},vjs.TextTrack.prototype.src_,vjs.TextTrack.prototype.src=function(){return this.src_},vjs.TextTrack.prototype.dflt_,vjs.TextTrack.prototype.dflt=function(){return this.dflt_},vjs.TextTrack.prototype.title_,vjs.TextTrack.prototype.title=function(){return this.title_},vjs.TextTrack.prototype.language_,vjs.TextTrack.prototype.language=function(){return this.language_},vjs.TextTrack.prototype.label_,vjs.TextTrack.prototype.label=function(){return this.label_},vjs.TextTrack.prototype.cues_,vjs.TextTrack.prototype.cues=function(){return this.cues_},vjs.TextTrack.prototype.activeCues_,vjs.TextTrack.prototype.activeCues=function(){return this.activeCues_},vjs.TextTrack.prototype.readyState_,vjs.TextTrack.prototype.readyState=function(){return this.readyState_},vjs.TextTrack.prototype.mode_,vjs.TextTrack.prototype.mode=function(){return this.mode_},vjs.TextTrack.prototype.adjustFontSize=function(){if(this.player_.isFullScreen())this.el_.style.fontSize=screen.width/this.player_.width()*1.4*100+"%";else this.el_.style.fontSize=""},vjs.TextTrack.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-"+this.kind_+" vjs-text-track"})},vjs.TextTrack.prototype.show=function(){this.activate(),this.mode_=2,vjs.Component.prototype.show.call(this)},vjs.TextTrack.prototype.hide=function(){this.activate(),this.mode_=1,vjs.Component.prototype.hide.call(this)},vjs.TextTrack.prototype.disable=function(){if(2==this.mode_)this.hide();this.deactivate(),this.mode_=0},vjs.TextTrack.prototype.activate=function(){if(0===this.readyState_)this.load();if(0===this.mode_)if(this.player_.on("timeupdate",vjs.bind(this,this.update,this.id_)),this.player_.on("ended",vjs.bind(this,this.reset,this.id_)),"captions"===this.kind_||"subtitles"===this.kind_)this.player_.getChild("textTrackDisplay").addChild(this)},vjs.TextTrack.prototype.deactivate=function(){this.player_.off("timeupdate",vjs.bind(this,this.update,this.id_)),this.player_.off("ended",vjs.bind(this,this.reset,this.id_)),this.reset(),this.player_.getChild("textTrackDisplay").removeChild(this)},vjs.TextTrack.prototype.load=function(){if(0===this.readyState_)this.readyState_=1,vjs.get(this.src_,vjs.bind(this,this.parseCues),vjs.bind(this,this.onError))},vjs.TextTrack.prototype.onError=function(err){this.error=err,this.readyState_=3,this.trigger("error")},vjs.TextTrack.prototype.parseCues=function(srcContent){for(var cue,time,text,lines=srcContent.split("\n"),line="",id,i=1,j=lines.length;j>i;i++)if(line=vjs.trim(lines[i])){if(-1==line.indexOf("-->"))id=line,line=vjs.trim(lines[++i]);else id=this.cues_.length;for(cue={id:id,index:this.cues_.length},time=line.split(" --> "),cue.startTime=this.parseCueTime(time[0]),cue.endTime=this.parseCueTime(time[1]),text=[];lines[++i]&&(line=vjs.trim(lines[i]));)text.push(line);cue.text=text.join("<br/>"),this.cues_.push(cue)}this.readyState_=2,this.trigger("loaded")},vjs.TextTrack.prototype.parseCueTime=function(timeText){var parts=timeText.split(":"),time=0,hours,minutes,other,seconds,ms;if(3==parts.length)hours=parts[0],minutes=parts[1],other=parts[2];else hours=0,minutes=parts[0],other=parts[1];if(other=other.split(/\s+/),seconds=other.splice(0,1)[0],seconds=seconds.split(/\.|,/),ms=parseFloat(seconds[1]),seconds=seconds[0],time+=3600*parseFloat(hours),time+=60*parseFloat(minutes),time+=parseFloat(seconds),ms)time+=ms/1e3;return time},vjs.TextTrack.prototype.update=function(){if(this.cues_.length>0){var time=this.player_.currentTime();if(void 0===this.prevChange||time<this.prevChange||this.nextChange<=time){var cues=this.cues_,newNextChange=this.player_.duration(),newPrevChange=0,reverse=!1,newCues=[],firstActiveIndex,lastActiveIndex,cue,i;if(time>=this.nextChange||void 0===this.nextChange)i=void 0!==this.firstActiveIndex?this.firstActiveIndex:0;else reverse=!0,i=void 0!==this.lastActiveIndex?this.lastActiveIndex:cues.length-1;for(;;){if(cue=cues[i],cue.endTime<=time){if(newPrevChange=Math.max(newPrevChange,cue.endTime),cue.active)cue.active=!1}else if(time<cue.startTime){if(newNextChange=Math.min(newNextChange,cue.startTime),cue.active)cue.active=!1;if(!reverse)break}else{if(reverse){if(newCues.splice(0,0,cue),void 0===lastActiveIndex)lastActiveIndex=i;firstActiveIndex=i}else{if(newCues.push(cue),void 0===firstActiveIndex)firstActiveIndex=i;lastActiveIndex=i}newNextChange=Math.min(newNextChange,cue.endTime),newPrevChange=Math.max(newPrevChange,cue.startTime),cue.active=!0}if(reverse)if(0===i)break;else i--;else if(i===cues.length-1)break;else i++}this.activeCues_=newCues,this.nextChange=newNextChange,this.prevChange=newPrevChange,this.firstActiveIndex=firstActiveIndex,this.lastActiveIndex=lastActiveIndex,this.updateDisplay(),this.trigger("cuechange")}}},vjs.TextTrack.prototype.updateDisplay=function(){for(var cues=this.activeCues_,html="",i=0,j=cues.length;j>i;i++)html+='<span class="vjs-tt-cue">'+cues[i].text+"</span>";this.el_.innerHTML=html},vjs.TextTrack.prototype.reset=function(){this.nextChange=0,this.prevChange=this.player_.duration(),this.firstActiveIndex=0,this.lastActiveIndex=0},vjs.CaptionsTrack=vjs.TextTrack.extend(),vjs.CaptionsTrack.prototype.kind_="captions",vjs.SubtitlesTrack=vjs.TextTrack.extend(),vjs.SubtitlesTrack.prototype.kind_="subtitles",vjs.ChaptersTrack=vjs.TextTrack.extend(),vjs.ChaptersTrack.prototype.kind_="chapters",vjs.TextTrackDisplay=vjs.Component.extend({init:function(player,options,ready){if(vjs.Component.call(this,player,options,ready),player.options_.tracks&&player.options_.tracks.length>0)this.player_.addTextTracks(player.options_.tracks)}}),vjs.TextTrackDisplay.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"})},vjs.TextTrackMenuItem=vjs.MenuItem.extend({init:function(player,options){var track=this.track=options.track;options.label=track.label(),options.selected=track.dflt(),vjs.MenuItem.call(this,player,options),this.player_.on(track.kind()+"trackchange",vjs.bind(this,this.update))}}),vjs.TextTrackMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this),this.player_.showTextTrack(this.track.id_,this.track.kind())},vjs.TextTrackMenuItem.prototype.update=function(){this.selected(2==this.track.mode())},vjs.OffTextTrackMenuItem=vjs.TextTrackMenuItem.extend({init:function(player,options){options.track={kind:function(){return options.kind},player:player,label:function(){return options.kind+" off"},dflt:function(){return!1},mode:function(){return!1}},vjs.TextTrackMenuItem.call(this,player,options),this.selected(!0)}}),vjs.OffTextTrackMenuItem.prototype.onClick=function(){vjs.TextTrackMenuItem.prototype.onClick.call(this),this.player_.showTextTrack(this.track.id_,this.track.kind())},vjs.OffTextTrackMenuItem.prototype.update=function(){for(var tracks=this.player_.textTracks(),i=0,j=tracks.length,track,off=!0;j>i;i++)if(track=tracks[i],track.kind()==this.track.kind()&&2==track.mode())off=!1;this.selected(off)},vjs.TextTrackButton=vjs.MenuButton.extend({init:function(player,options){if(vjs.MenuButton.call(this,player,options),this.items.length<=1)this.hide()}}),vjs.TextTrackButton.prototype.createItems=function(){var items=[],track;items.push(new vjs.OffTextTrackMenuItem(this.player_,{kind:this.kind_}));for(var i=0;i<this.player_.textTracks().length;i++)if(track=this.player_.textTracks()[i],track.kind()===this.kind_)items.push(new vjs.TextTrackMenuItem(this.player_,{track:track}));return items},vjs.CaptionsButton=vjs.TextTrackButton.extend({init:function(player,options,ready){vjs.TextTrackButton.call(this,player,options,ready),this.el_.setAttribute("aria-label","Captions Menu")}}),vjs.CaptionsButton.prototype.kind_="captions",vjs.CaptionsButton.prototype.buttonText="Captions",vjs.CaptionsButton.prototype.className="vjs-captions-button",vjs.SubtitlesButton=vjs.TextTrackButton.extend({init:function(player,options,ready){vjs.TextTrackButton.call(this,player,options,ready),this.el_.setAttribute("aria-label","Subtitles Menu")}}),vjs.SubtitlesButton.prototype.kind_="subtitles",vjs.SubtitlesButton.prototype.buttonText="Subtitles",vjs.SubtitlesButton.prototype.className="vjs-subtitles-button",vjs.ChaptersButton=vjs.TextTrackButton.extend({init:function(player,options,ready){vjs.TextTrackButton.call(this,player,options,ready),this.el_.setAttribute("aria-label","Chapters Menu")}}),vjs.ChaptersButton.prototype.kind_="chapters",vjs.ChaptersButton.prototype.buttonText="Chapters",vjs.ChaptersButton.prototype.className="vjs-chapters-button",vjs.ChaptersButton.prototype.createItems=function(){for(var items=[],track,i=0;i<this.player_.textTracks().length;i++)if(track=this.player_.textTracks()[i],track.kind()===this.kind_)items.push(new vjs.TextTrackMenuItem(this.player_,{track:track}));return items},vjs.ChaptersButton.prototype.createMenu=function(){for(var tracks=this.player_.textTracks(),i=0,j=tracks.length,track,chaptersTrack,items=this.items=[];j>i;i++)if(track=tracks[i],track.kind()==this.kind_&&track.dflt())if(track.readyState()<2)return this.chaptersTrack=track,void track.on("loaded",vjs.bind(this,this.createMenu));else{chaptersTrack=track;break}var menu=this.menu=new vjs.Menu(this.player_);if(menu.el_.appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.kind_),tabindex:-1})),chaptersTrack){var cues=chaptersTrack.cues_,cue,mi;for(i=0,j=cues.length;j>i;i++)cue=cues[i],mi=new vjs.ChaptersTrackMenuItem(this.player_,{track:chaptersTrack,cue:cue}),items.push(mi),menu.addChild(mi)}if(this.items.length>0)this.show();return menu},vjs.ChaptersTrackMenuItem=vjs.MenuItem.extend({init:function(player,options){var track=this.track=options.track,cue=this.cue=options.cue,currentTime=player.currentTime();options.label=cue.text,options.selected=cue.startTime<=currentTime&&currentTime<cue.endTime,vjs.MenuItem.call(this,player,options),track.on("cuechange",vjs.bind(this,this.update))
}}),vjs.ChaptersTrackMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},vjs.ChaptersTrackMenuItem.prototype.update=function(){var cue=this.cue,currentTime=this.player_.currentTime();this.selected(cue.startTime<=currentTime&&currentTime<cue.endTime)},vjs.obj.merge(vjs.ControlBar.prototype.options_.children,{subtitlesButton:{},captionsButton:{},chaptersButton:{}}),vjs.JSON,"undefined"!=typeof window.JSON&&"function"===window.JSON.parse)vjs.JSON=window.JSON;else{vjs.JSON={};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;vjs.JSON.parse=function(text,reviver){function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)if(Object.prototype.hasOwnProperty.call(value,k))if(v=walk(value,k),void 0!==v)value[k]=v;else delete value[k];return reviver.call(holder,key,value)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text))text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse(): invalid or malformed JSON data")}}if(vjs.autoSetup=function(){var options,vid,player,vids=document.getElementsByTagName("video");if(vids&&vids.length>0)for(var i=0,j=vids.length;j>i;i++)if(vid=vids[i],vid&&vid.getAttribute){if(void 0===vid.player)if(options=vid.getAttribute("data-setup"),null!==options)options=vjs.JSON.parse(options||"{}"),player=videojs(vid,options)}else{vjs.autoSetupTimeout(1);break}else if(!vjs.windowLoaded)vjs.autoSetupTimeout(1)},vjs.autoSetupTimeout=function(wait){setTimeout(vjs.autoSetup,wait)},"complete"===document.readyState)vjs.windowLoaded=!0;else vjs.one(window,"load",function(){vjs.windowLoaded=!0});if(vjs.autoSetupTimeout(1),vjs.plugin=function(name,init){vjs.Player.prototype[name]=init},"function"==typeof define&&define.amd)define("bundles/videojs/lib/video.4.3.0",[],function(){return vjs});else window.vjs=window.videojs=vjs}(window),define("js/lib/coursera.video",["underscore","jquery","js/lib/lucid.2.7.0","bundles/videojs/lib/video.4.3.0"],function(_,$,LucidJS,vjs,template){var VideoPlayer=function(id,options){options=options||{},options.controls=!0;var player=vjs(id,options);if((vjs.IS_IOS||vjs.IS_ANDROID)&&void 0!==options.poster)player.posterImage.addClass("vjs-lock-showing"),$(player.el_).find("video").width("1px").height("2px"),player.on("playing",function(){player.posterImage.removeClass("vjs-lock-showing"),$(player.el_).find("video").height(player.options().height).width(player.options().width)});return player.ready(function(){vjs.insertFirst(player.controlBar.progressControl.el_,player.controlBar.el_)}),player.emitter={},LucidJS.emitter(player.emitter),player};return VideoPlayer}),define("pages/home/lib/nls/watchIntroVideoButton",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t){buf.push('<div class="coursera-course-playbutton-icon"></div><span aria-hidden="false" class="coursera-course-playbutton-text">'+jade.escape(null==(jade_interp=_t("Watch Intro Video"))?"":jade_interp)+"</span>")}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/lib/watchIntroVideoButton.html",["js/lib/jade","i18n!pages/home/lib/nls/watchIntroVideoButton"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.lib.watchIntroVideoButton"]=jadify(wndw.jade.helpers)}(window),define("pages/home/lib/watchIntroVideoButton",["jquery","bundles/videojs/lib/video.4.3.0","pages/home/lib/watchIntroVideoButton.html"],function($,vjs,template){vjs.WatchIntroVideoButton=vjs.BigPlayButton.extend(),vjs.WatchIntroVideoButton.prototype.onClick=function(){var player=this.player_;this.hide(),player.play(),player.loadingSpinner.show()},vjs.WatchIntroVideoButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-watch-intro-big-play-button btn coursera-course-playbutton",innerHTML:template(),"aria-label":"Play Video"})},vjs.plugin("watchIntroVideoButton",function(){this.addChild("watchIntroVideoButton")})}),define("pages/home/course/courseBody",["underscore","jquery","js/core/coursera","js/collections/courses","js/collections/topics","js/models/instructor","pages/home/template/body","pages/home/course/courseBody.html","i18n!pages/home/course/nls/courseBody","i18n!js/json/nls/categories","pages/home/course/courseSummary","i18n!js/json/nls/universities","i18n!js/json/nls/topics","pages/home/course/courseBodyTextbook.html","i18n!pages/home/course/nls/courseBodyTextbook","pages/home/course/courseInvite","pages/home/course/similarTopics.html","i18n!pages/home/course/nls/similarTopics","js/lib/cookie","js/lib/util","js/lib/truncate","js/lib/metatags","js/lib/language","js/lib/modals","js/lib/popups","js/lib/third-parties","js/lib/sharebuttons","js/lib/coursera.ab","js/lib/coursera.video","pages/home/lib/watchIntroVideoButton"],function(_,$,Coursera,Courses,Topics,Instructor,body,template,template_t,categories_t,CourseSummaryTemplate,universities_t,topics_t,textbookTemplate,textbookTemplate_t,courseInvite,similarTopicsTemplate,similarTopicsTemplate_t,cookie,util,truncate,metatags,language,Modal,Popup,thirdparty,ShareButtons,AB,VideoPlayer,_watchIntroVideoButton){function decorateAmazonLinks($dom,tag){var AMAZON_RE=/(www\.)?amazon.com/,TAG_RE=/[?&]tag=/;$dom.find("a").each(function(){var link=this,url=link.href;if(AMAZON_RE.test(link.hostname)){var linkTag=util.getUrlParam(url,"tag");if("coursera-20"==linkTag)url=url.replace("tag=coursera-20","tag="+tag),$(link).attr("href",url);if(!linkTag)url+=(link.search?"&":"?")+"tag="+tag,$(link).attr("href",url);$(link).on("click",function(){Coursera.multitracker.push(["user.click.link.amazon",{tag:tag,url:url,text:link.innerText}])})}})}var CERT_IMAGE_TEMPLATE=function(shortname){return"https://s3.amazonaws.com/coursera/universities/"+shortname+"/signature-cert-icon.png"},UNIVERSITIES_WITH_GENERIC_CERT=["fuont"],TOPICS_WITH_CERTIFICATE_IMG={};template_t=template_t.merge(categories_t,topics_t);var makeCheggLink=function(course,isbn){var link="http://chggtrx.com/click.track?CID=267582&AFID=301076&ADID=1088031&SID="+course.get("topic").get("short_name")+"&isbn_ean="+isbn;return link},recentlyViewedCookie="recently_viewed",recentlyViewedMaxCount=12,appendRecentlyViewedCookie=function(courseShortName){var recentlyViewed=cookie.get(recentlyViewedCookie)||"",list=_.without(_.compact(recentlyViewed.split(",")),courseShortName);list.unshift(courseShortName),cookie.set(recentlyViewedCookie,list.slice(0,recentlyViewedMaxCount).join(","))},courseBody=body.extend({events:{"click .coursera-course-logo":"play","click .coursera-course-playbar":"play","click .coursera-course-playbutton":"play","mouseenter .coursera-course-logo":"hover","mouseleave .coursera-course-logo":"hover","click .coursera-course-button-join":"enroll","click .coursera-signature-signup-button":"earnVC","click .coursera-course-subscribe":"subscribe","click .coursera-course-subscribed":"unsubscribe","click .coursera-course-categories a":"onCategoriesClick","click .coursera-course-browse-more a":"onBrowseMoreClick","click .coursera-course2-instructors a":"onInstructorInfoClick"},initialize:function(){var self=this,topic=this.model;this.courseInvite=null,document.title=topic.get("name")+" | Coursera",appendRecentlyViewedCookie(topic.get("short_name")),self.bind("view:closing",function(){Modal(this.$el.find(".modal")).close()}),self.bind("view:appended",function(){if(self.$el.find(".social").show(),!util.isChina())thirdparty.ready("FB.XFBML.parse",function(){window.FB.XFBML.parse(self.$el.find(".social-facebook").get(0)),window.FB.Event.subscribe("edge.create",function(href,widget){Coursera.multitracker.push(["user.social.share.facebook",href])})}),thirdparty.ready("gapi.plusone.go",function(){window.gapi.plusone.render(self.$el.find(".g-plusone")[0],{count:!0,size:"tall",callback:function(value){Coursera.multitracker.push(["user.social.share.googleplus",value])}})});else self.$(".coursera-share-buttons").each(function(){new ShareButtons($(this),{isChina:util.isChina()})});self.updateCourseListings(),self.checkJustEnrolled(),self.showTextbooks(),self.$(".coursera-course-description a").attr("target","_blank"),decorateAmazonLinks(self.$el,"coursera-course"+self.model.get("id")+"-20");var currentTopic=topic.get("open_course")||topic,instructorNames=_.reduce(currentTopic.get("instructors"),function(memo,instructorId){var instructorProfile=_.find(topic.get("instructor_profiles"),function(profile){return profile.userid===instructorId});if(instructorProfile){var instructor=new Instructor(instructorProfile);if(instructor.shouldDisplay())memo=memo.concat(instructor.get("full_name"))}return memo},[]),social_description=topic.get("name")+" is a free online class taught by "+util.prettyJoin(instructorNames)+" of "+topic.get("universities_display");if("basketweave"==topic.get("short_name"))social_description="Underwater basket weaving is a craft that seamlessly merges scientific intellectualism, manual dexterity, and promises to be one of the best classes on Coursera";if(metatags.share(topic.get("name"),topic.get("large_icon"),social_description,window.location.href),self.$(".coursera-course-modal-signature-track-optin img").on("error.signature",function(){var $self=$(this);$self.attr("src",CERT_IMAGE_TEMPLATE("_generic")),$self.off("error.signature")}),topic.get("video"))VideoPlayer(self.$("#coursera-course-video").get(0),{poster:this.model.get("large_icon"),children:{bigPlayButton:!1,watchIntroVideoButton:{}}})});var topicId=this.model.get("id"),MAX_SIMS_TO_DISPLAY=3,similarTopicsCallback=function(data){if(data.ordered_topics.length>0){var context={_t:similarTopicsTemplate_t,topics:data.ordered_topics,config:Coursera.config},$similarTopicsContainer=self.$el.find(".row-fluid.coursera-similartopics-container");$similarTopicsContainer.html(similarTopicsTemplate(context)).show(),$similarTopicsContainer.on("a click",function(e){var $target=$(e.target).closest(".coursera-similartopics-course-recommend"),index=$target.index()-1;Coursera.multitracker.push(["course-page.similar-topics.click",index+"_"+topicId+"_"+data.ordered_topics[index].id])})}else Coursera.multitracker.push(["course-page.similar-topics-load.no-similar-topics",topicId])},similarTopicsErrorCallback=function(request){Coursera.multitracker.push(["course-page.similar-topics-load.error",request.responseText])};Topics.similarTopics([topicId],MAX_SIMS_TO_DISPLAY,!1).done(similarTopicsCallback).fail(similarTopicsErrorCallback)},render:function(){var shortname=this.model.get("short_name"),context={_t:template_t,topic:this.model,user:Coursera.user,config:Coursera.config,query:this.options.query||{},twitterUrl:encodeURIComponent(this.model.get("social_link"))+"&text="+encodeURIComponent(this.model.getTwitterText("I signed up for")),Courses:Courses,isChina:util.isChina(),videos:[{type:"video/mp4",source:this.model.get("video_baseurl")+"full/540p/index.mp4"},{type:"video/webm",source:this.model.get("video_baseurl")+"full/540p/index.webm"}],catalog_link_variant:AB.session.getExperiment("coursepage_catalog_link").getChosenVariant()};if(this.$el.append(template(context)),language.isRightToLeft(this.model.get("language")))util.styleRightToLeft(this.$el);return this},showTextbooks:function(){var self=this,latestActiveCourse=null,earliestUpcomingCourse=null,latestPreviousCourse=null,currentTime=(new Date).valueOf(),$textbookDiv=self.$(".coursera-course-free-textbooks"),$textbookList=self.$(".coursera-course-textbook-list");self.model.get("courses").each(function(course){if(course.get("active")&&course.certificateIsReady()===!1){if(!latestActiveCourse||latestActiveCourse.getStartTime()<course.getStartTime())latestActiveCourse=course}else if(course.getStartTime()>currentTime){if(!earliestUpcomingCourse||earliestUpcomingCourse.getStartTime()>course.getStartTime())earliestUpcomingCourse=course}else if(!latestPreviousCourse||latestPreviousCourse.getStartTime()<course.getStartTime())latestPreviousCourse=course});var maybeTextbookCourse=latestActiveCourse?latestActiveCourse:earliestUpcomingCourse?earliestUpcomingCourse:latestPreviousCourse;if(maybeTextbookCourse&&maybeTextbookCourse.get("textbooks").length>0)_.each(maybeTextbookCourse.get("textbooks"),function(textbook){if(null!==textbook.authors){var authors=textbook.authors.split("|"),authorStr="";if(authors.length<=3)authorStr=authors.join(", ");else authorStr=authors.slice(0,3).join(", ")+" et al.";$textbookDiv.show();var $newTextbookListing=$(textbookTemplate({textbook:textbook,authorStr:authorStr,cheggLink:makeCheggLink(maybeTextbookCourse,textbook.isbn)}));$newTextbookListing.find(".coursera-course-textbook-name").bind("click",function(){Coursera.multitracker.push(["Course Textbook Buy",textbook.isbn])}),$textbookList.append($newTextbookListing)}})},updateCourseListings:function(){function pickCourses(userCourses){var displayCourses=new Courses;self.model.get("courses").each(function(course){var matchingUserCourse=userCourses&&userCourses.find(function(userCourse){return userCourse.get("id")==course.get("id")});if(matchingUserCourse)if(displayCourses.add(course),course.set("user_is_enrolled",!0),matchingUserCourse.get("record"))course.set("user_in_signature_track",matchingUserCourse.get("record").signature_track);else course.set("user_in_signature_track",!1);else if(course.get("status"))displayCourses.add(course)});var displayCoursesSorted=new Courses;displayCoursesSorted.comparator=void 0,displayCoursesSorted.add(Courses.byPrimaryButtonRelevance(Courses.byTimeFromNow(displayCourses)));var instructorProfiles={};if(_.each(self.model.get("instructor_profiles"),function(instructor){instructorProfiles[instructor.userid]=new Instructor(instructor)}),self.certImageURL="https://s3.amazonaws.com/coursera/universities/_generic/signature-cert-icon.png",1==self.model.get("universities").length){var universityName=self.model.get("universities")[0].short_name;self.certImageURL="https://s3.amazonaws.com/coursera/universities/"+universityName+"/signature-cert-icon.png"}var courseSummary=new CourseSummaryTemplate({topic:self.model,courses:displayCoursesSorted,certImageURL:self.certImageURL,instructorProfiles:instructorProfiles});if(self.$(".coursera-course-listings").empty().append(courseSummary.render().$el),self.model.getSTCertIcon().done(function(filename){self.$(".coursera-course-listings").find("[data-sigtrack-cert-icon]").attr("src",filename)}),displayCoursesSorted.length>0)self.$(".coursera-course-restricted-opensessions").show(),self.$(".coursera-course-restricted-noopensessions").hide();else self.$(".coursera-course-restricted-opensessions").hide(),self.$(".coursera-course-restricted-noopensessions").show();var renderSessionButtons=function(){var selectedCourse=$(".coursera-course-listing-selector option:selected").attr("data-course-id");self.$(".coursera-course-listing-buttons").each(function(){if(self.$(this).attr("data-course-id")===selectedCourse)self.$(this).css("display","inline");else self.$(this).css("display","none")})};renderSessionButtons(),self.$(".coursera-course-listing-selector").change(function(){renderSessionButtons()}),self.$(".coursera-signature-learnmore-icon").bind("click",function(){Coursera.multitracker.push(["Sig Course Descrip Learn Icon","Click"])})}var self=this;if(Coursera.user.get("authenticated"))Coursera.user.getTopics().done(function(){pickCourses(Coursera.user.get("courses")),Coursera.user.getSubscriptions().done(function(){if(Coursera.user.isSubscribedToTopic(self.model))self.$(".coursera-course-subscribed").show(),self.$(".coursera-course-subscribe").hide();else self.$(".coursera-course-subscribe").show(),self.$(".coursera-course-subscribed").hide()})});else pickCourses()},onCategoriesClick:function(e){var link=$(e.currentTarget).attr("href");Coursera.multitracker.push(["user.click.course-page-categories-link",link])},onBrowseMoreClick:function(e){var link=$(e.currentTarget).attr("href");Coursera.multitracker.push(["user.click.course-page-browse-more-link",link])},onInstructorInfoClick:function(e){var klass=$(e.currentTarget).data("link-type")||"",link=$(e.currentTarget).attr("href");Coursera.multitracker.push(["user.click.course-page-"+klass+"-link",link])},subscribe:function(e){var self=this,topicId=self.model.get("id");if(Coursera.user.get("authenticated"))$(e.target).attr("disabled","disabled"),Coursera.user.subscribeToTopic(topicId).done(function(){self.trackConversionEvent("subscribe"),Coursera.multitracker.push(["user.course.subscribe",topicId]),self.$(".coursera-course-subscribed").show(),self.$(".coursera-course-subscribe").hide(),Modal(self.$(".coursera-course-watch-modal")).open(),$(e.target).attr("disabled",null)});else{Coursera.multitracker.push(["user.subscribe.course-page-watchlist-button-logged-out",topicId]);var signupParams={topic_id:self.model.get("id"),topic_shortname:self.model.get("short_name"),topic_name:self.model.get("name"),user_action:"subscribe"};location.href=util.createAccountsUrl("signup",signupParams)}},unsubscribe:function(e){var self=this,topicId=self.model.get("id");$(e.target).attr("disabled","disabled"),Coursera.user.unsubscribeFromTopic(topicId).done(function(){self.$(".coursera-course-subscribed").hide(),self.$(".coursera-course-subscribe").show(),$(e.target).attr("disabled",null)}),Coursera.multitracker.push(["user.unsubscribe.course-page-unsubscribe-link",topicId])},trackConversionEvent:function(e){AB.user.getExperiment("upcoming_window_leading2").convert(e),AB.user.getExperiment("upcoming_window_trailing2").convert(e),AB.session.getExperiment("coursepage_compress_language").convert(e),AB.session.getExperiment("coursepage_catalog_link").convert(e)},earnVC:function(e){return e.preventDefault(),AB.user.getExperiment("course_page_skills").convert("earn_a_vc",function(){window.location.href=$(e.currentTarget).attr("href")}),!1},enroll:function(e){var self=this,courseId=$(".coursera-course-listing-selector option:selected").attr("data-course-id"),course=self.model.get("courses").get(courseId);if(AB.user.getExperiment("course_page_skills").convert("join_for_free"),Coursera.user.get("authenticated")){self.$(".coursera-signature-signup-button").bind("click",function(){Coursera.multitracker.push(["Sig Course Descrip Signup Button","Click"]),window.location.href=Coursera.config.dir.home+"signature/course/"+course.get("topic").get("short_name")+"/"+course.get("id")+"?utm_source=course&utm_medium=modalbutton"}),course.get("topic").getSTCertIcon().done(function(filename){self.$(".coursera-course-modal-cta-img").attr("src",filename)}),$(e.target).attr("disabled","disabled");var callback=function(err,xhr){if($(e.target).removeAttr("disabled"),err){if(403===xhr.status){var details=JSON.parse(xhr.responseText);if("course.restrictedCountry"==details.errorCode)return void self.showRestrictedCountryModal()}Coursera.router.trigger("error",500,window.location.href,{message:"failed to enroll user"})}else self.trackConversionEvent("enroll"),Coursera.multitracker.push(["user.course.enroll",courseId]),self.checkJustEnrolled()};if($(e.target).attr("data-oneclick-sigtrack")){var specId=this.options.model.get("specializations")[0].id;Coursera.user.oneClickSigtrack(courseId,Coursera.user.get("specializations")[specId].bulk_voucher,callback)}else{var enrollInSignatureTrack=0;Coursera.user.enroll(courseId,enrollInSignatureTrack,callback)}if(null===this.courseInvite)this.courseInvite=new courseInvite({model:self.model,el:$(".coursera-course-modal-invite-friends"),course:course,placeholderText:"Learning happens best with people you know. Let's take this course together!",postURL:"student/email_friends",postData:{course_id:course.get("id")},shareText:"I'm taking "+self.model.get("name")+" on Coursera!",pictureURL:course.get("topic").get("small_icon_hover"),shareURL:course.get("topic").get("social_link"),eventingKey:"user.click.link.social",eventingValue:"course-record-listing",redirectURL:"https://www.coursera.org/account/records"})}else{Coursera.multitracker.push(["user.enroll.course-page-enroll-button-logged-out",courseId]);var signupParams={course_id:courseId,topic_shortname:self.model.get("short_name"),topic_name:self.model.get("name"),user_action:"enroll"};location.href=util.createAccountsUrl("signup",signupParams)}},checkJustEnrolled:function(){var self=this,enrolledCourseIdSigtrack=cookie.get("just_enrolled_sigtrack"),enrolledCourseId=cookie.get("just_enrolled")||enrolledCourseIdSigtrack;if(enrolledCourseId){if(cookie.clear("just_enrolled"),cookie.clear("just_enrolled_sigtrack"),enrolledCourse=this.model.getCourseById(enrolledCourseId),Modal(this.$(".coursera-course-modal")).open(),this.$(".coursera-course-modal-open").hide(),this.$(".coursera-course-modal-starts").hide(),this.$(".coursera-course-modal-tba").hide(),this.$(".coursera-course-modal-signature-track-optin").hide(),this.$(".coursera-course-modal-invite-friends").hide(),"1"==enrolledCourse.get("active")||enrolledCourse.get("self_study"))this.$(".coursera-course-modal-open").show(),this.$(".coursera-course-modal-open a").attr("href",enrolledCourse.get("home_link")+"auth/auth_redirector?type=login&subtype=normal");else if(enrolledCourse.get("start_day"))this.$(".coursera-course-modal-starts-date").text(enrolledCourse.getStartDisplay()),this.$(".coursera-course-modal-starts").show();else this.$(".coursera-course-modal-tba").show();if(enrolledCourse.isEligibleForTrack()&&!enrolledCourseIdSigtrack)Coursera.multitracker.push(["Sig Course Descrip Modal","Show"]),this.$(".coursera-course-modal-signature-track-optin").show(),this.$(".coursera-signature-signup-button").bind("click",function(){Coursera.multitracker.push(["Sig Course Descrip Signup Button","Click"]),window.location.href=Coursera.config.dir.home+"signature/course/"+enrolledCourse.get("topic").get("short_name")+"/"+enrolledCourse.get("id")+"?utm_source=course&utm_medium=modalbutton"}),enrolledCourse.get("topic").getSTCertIcon().done(function(filename){self.$(".coursera-course-modal-cta-img").attr("src",filename)});else Coursera.multitracker.push(["Invite Friends Modal","Show"]),this.$(".coursera-course-modal-invite-friends").show(),this.$(".coursera-course-modal .modal-header .coursera-share-buttons").hide();if(Modal(this.$(".coursera-course-modal")).reposition(),Coursera.user.getTopics(!0).done(function(){self.updateCourseListings(),self.$("option[data-course-id="+enrolledCourseId+"]").attr("selected",!0),self.$(".coursera-course-listing-selector").change()}),cookie.get("linked_lecture"))Coursera.multitracker.push(["user.course.enroll.afterLinkedLecture",enrolledCourseId.toString()+" "+cookie.get("linked_lecture")])}},showRestrictedCountryModal:function(){Modal(this.$(".coursera-course-restricted-country-modal")).open()},play:function(){Coursera.multitracker.push(["user.video.intro.course","play"]),this.$el.find(".coursera-course-playbutton").hide(),this.$el.find(".coursera-course-logo").hide(),this.$el.find(".coursera-course-playbar").hide()},hover:function(e){if("mouseenter"==e.type)this.$el.find(".coursera-course-playbutton").addClass("hover");else this.$el.find(".coursera-course-playbutton").removeClass("hover")}});return courseBody}),define("pages/home/assessApi",["js/core/coursera","js/lib/api"],function(Coursera,API){var api=API("/api/assess/v1/frontPage/",{type:"rest"});return api.on("always",function(apiEvent){var xhr=apiEvent.xhr,url=apiEvent.url;if(xhr.status>=400)Coursera.multitracker.push(["api.error."+xhr.status,{timing:apiEvent.timing,url:url,status:xhr.status,response:xhr.responseText}]);else Coursera.multitracker.push(["api.ok."+xhr.status,{timing:apiEvent.timing,url:url,status:xhr.status}])}),api}),define("pages/home/account/nls/courseList",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t,config,featuredClasses){jade_mixins.enrollButton=function(){var block=this&&this.block,attributes=this&&this.attributes||{};buf.push('<a href="/courses" style="margin-top: 10px" class="internal-home btn-flat btn-flat-success btn-large">'+jade.escape(null==(jade_interp=_t("Enroll in a class"))?"":jade_interp)+"</a>")},buf.push('<div data-readme="privacy-update" data-readme-show-count="1" data-readme-show-until-closed="data-readme-show-until-closed" data-readme-expires="Feb 1, 2014"><div><span>'+jade.escape(null==(jade_interp=_t("Coursera has updated its privacy policy. Learn more"))?"":jade_interp)+' </span><a href="about/privacy" data-readme-close="data-readme-close" class="internal-home">'+jade.escape(null==(jade_interp=_t("here"))?"":jade_interp)+'</a>.</div><div data-readme-close="data-readme-close" class="readme-close-icon"><span class="icon-remove"></span></div></div><div class="container"><div style="overflow:hidden" class="coursera-full-canvas"><div style="display: none; margin-top: -30px; margin-left: -30px; margin-bottom: 10px;" class="coursera-search-banner"></div><div id="coursera-promo-betaclub" style="display:none" class="coursera-banner-alert"><button class="close">&times;</button><a href="http://blog.coursera.org/betaclub">'+jade.escape(null==(jade_interp=_t("We'd love your help in planning our future features. Interested?"))?"":jade_interp)+'</a></div><div id="coursera-sigtrack-profile-incomplete" style="display:none" class="alert"><i class="icon-warning-sign icon-large"></i> '+(null==(jade_interp=_t("Your Signature Track Profile is incomplete.&nbsp;"))?"":jade_interp)+"<a"+jade.attr("href",config.url.base+"signature/phrase",!0,!1)+">"+jade.escape(null==(jade_interp=_t("Please complete your profile here."))?"":jade_interp)+'</a></div><div class="row"><div class="span8 coursera-front-main-section"><div class="row-fluid"><div style="display:none" class="span12 coursera-front-specializations-container"><div style="padding-bottom: 0px; border-bottom: 1px #ccc solid" class="coursera-dashboard-section-header"><span class="coursera-front-section-specializations-header coursera-dashboard-section-header-title">'+jade.escape(null==(jade_interp=_t("Your Specializations"))?"":jade_interp)+'</span><span style="display: none" class="footnote coursera-specializations-show-all"><a> '+jade.escape(null==(jade_interp=_t("Show all"))?"":jade_interp)+'</a></span></div><div class="coursera-specializations-none">'+jade.escape(null==(jade_interp=_t("You have not started any Specializations."))?"":jade_interp)+'</div><div class="coursera-specializations-list"></div></div></div><div class="row-fluid"><div class="span12 coursera-front-courselist-container"><!-- Your Courses--><div class="tabbable"><div style="display: inline;" class="coursera-dashboard-section-header"><span class="coursera-front-section-courselist-header coursera-dashboard-section-header-title">'+jade.escape(null==(jade_interp=_t("Your Courses"))?"":jade_interp)+' </span></div><ul style="float:right; margin-top: -5px; display: none;" data-tabs="tabs" class="nav nav-pills coursera-feed-tabs-selector"><li style="position: relative" class="active"><a data-toggle="tab" href="#coursera-feed-tabs-current">'+jade.escape(null==(jade_interp=_t("Current"))?"":jade_interp)+'</a><div style="position: absolute; top: 56px; left: 45%" class="coursera-bubble-wrapper"><div class="coursera-bubble-arrow"></div><div class="coursera-bubble-arrow-shadow"></div></div></li><li style="position: relative"><a data-toggle="tab" href="#coursera-feed-tabs-past">'+jade.escape(null==(jade_interp=_t("Past"))?"":jade_interp)+'</a><div style="position: absolute; top: 56px; left: 45%; display:none;" class="coursera-bubble-wrapper"><div class="coursera-bubble-arrow"></div><div class="coursera-bubble-arrow-shadow"></div></div></li><li style="position: relative"><a data-toggle="tab" href="#coursera-feed-tabs-future">'+jade.escape(null==(jade_interp=_t("Upcoming"))?"":jade_interp)+'</a><div style="position: absolute; top: 56px; left: 45%; display:none;" class="coursera-bubble-wrapper"><div class="coursera-bubble-arrow"></div><div class="coursera-bubble-arrow-shadow"></div></div></li></ul><div style="margin-bottom: 20px"></div><span class="coursera-dashboard-enrollments-loading">'+(null==(jade_interp=_t("Loading courses...&nbsp;&nbsp;"))?"":jade_interp)+"<img"+jade.attr("src",config.url.assets+"images/icons/loading.gif",!0,!1)+' width="12" height="12"/></span><div style="width:100%" class="coursera-dashboard-enrollments-list tab-content"><div id="coursera-feed-tabs-current" class="tab-pane active"><div data-js="open-course-dashboard-container"></div><div style="display:none;" class="coursera-dashboard-no-enrollments-message"><div>'+jade.escape(null==(jade_interp=_t("You are not yet enrolled in any courses."))?"":jade_interp)+"</div>"),jade_mixins.enrollButton(),buf.push('</div></div><div id="coursera-feed-tabs-past" class="tab-pane"><div style="display:none;" class="coursera-dashboard-no-enrollments-message"><div>'+jade.escape(null==(jade_interp=_t("You have no completed courses yet."))?"":jade_interp)+"</div>"),jade_mixins.enrollButton(),buf.push('</div></div><div id="coursera-feed-tabs-future" class="tab-pane"><div style="display:none;" class="coursera-dashboard-no-enrollments-message"><div>'+jade.escape(null==(jade_interp=_t("You have no upcoming courses."))?"":jade_interp)+"</div>"),jade_mixins.enrollButton(),buf.push('</div></div></div></div></div></div><div class="row-fluid"><div class="span12"><div style="display:none;" class="coursera-dashboard-help-link"><span>'+jade.escape(null==(jade_interp=_t("Problem with your course enrollments?"))?"":jade_interp)+' </span><a href="/about/reporter?area=dashboard">'+jade.escape(null==(jade_interp=_t("Get help."))?"":jade_interp)+' </a></div></div></div><div class="row-fluid"><div class="span12 coursera-front-watchlist-container"><!-- Watchlist--><div class="coursera-dashboard-section-header coursera-front-section-watchlist-header"><span class="coursera-dashboard-section-header-title">'+jade.escape(null==(jade_interp=_t("Your Watchlist"))?"":jade_interp)+'</span></div><div class="coursera-dashboard-subscriptions-section"><span class="coursera-dashboard-subscriptions-loading">'+(null==(jade_interp=_t("Loading courses&nbsp;&nbsp;"))?"":jade_interp)+"<img"+jade.attr("src",config.url.assets+"images/icons/loading.gif",!0,!1)+' width="12" height="12"/></span></div></div></div></div><div class="span4 coursera-front-sidebar-section"><div class="coursera-front-sidebar-module coursera-front-sidebar-module-mobile-app-promotion"><div class="coursera-dashboard-section-header"><span class="coursera-dashboard-section-header-title">'+jade.escape(null==(jade_interp=_t("New Updates"))?"":jade_interp)+"</span></div><span>"+jade.escape(null==(jade_interp=_t("Coursera is now available on Android and iOS."))?"":jade_interp)+'</span><div class="coursera-front-sidebar-module-mobile-app-promotion-icon"><a href="https://itunes.apple.com/app/coursera/id736535961?mt=8&amp;utm_source=mobile&amp;utm_medium=dashboard&amp;utm_campaign=ios" target="_blank"><img src="https://d2wvvaown1ul17.cloudfront.net/site-static/images/icons/download_from_apple.png"/></a><a style="margin-left: 10px" href="https://play.google.com/store/apps/details?id=org.coursera.android" target="_blank"><img src="https://developer.android.com/images/brand/en_generic_rgb_wo_45.png" alt="Get it on Google Play"/></a></div></div><div class="coursera-front-sidebar-module coursera-front-sidebar-module-loading-message"><span>'+(null==(jade_interp=_t("Loading sidebar...&nbsp;&nbsp;"))?"":jade_interp)+"<img"+jade.attr("src",config.url.assets+"images/icons/loading.gif",!0,!1)+' width="12" height="12"/></span></div><div class="coursera-front-sidebar-module coursera-front-sidebar-module-poll hide"><div class="coursera-dashboard-section-header"><span class="coursera-dashboard-section-header-title">'+jade.escape(null==(jade_interp=_t("Coursera Poll"))?"":jade_interp)+'</span></div></div><div class="coursera-front-sidebar-module coursera-front-sidebar-module-recommended hide"><div class="coursera-dashboard-section-header"><span class="coursera-dashboard-section-header-title">'+jade.escape(null==(jade_interp=_t("Recommended For You"))?"":jade_interp)+'</span></div></div></div></div><div class="coursera-dashboard-section-header"><div class="row-fluid"><span class="coursera-front-section-new-to-coursera-subtitle">'+jade.escape(null==(jade_interp=_t("Recommendations for..."))?"":jade_interp)+'</span><div class="coursera-persona-option active"><div class="coursera-persona-option-title"><a>'+jade.escape(null==(jade_interp=_t("Students"))?"":jade_interp)+'</a></div></div><div class="coursera-persona-option"><div class="coursera-persona-option-title"><a>'+jade.escape(null==(jade_interp=_t("Lifelong Learners"))?"":jade_interp)+'</a></div></div><div class="coursera-persona-option"><div class="coursera-persona-option-title"><a>'+jade.escape(null==(jade_interp=_t("Professionals"))?"":jade_interp)+'</a></div></div><div style="width: 100%"><div class="preparing-for-college coursera-persona-subview"><div style="left:33%" class="coursera-persona-triangle-gray"><div class="coursera-persona-triangle-white"></div></div><div class="coursera-persona-title">'+jade.escape(null==(jade_interp=_t("Study ahead. Take college-level courses not offered at school."))?"":jade_interp)+'</div><div class="coursera-persona-subtitle">'+jade.escape(null==(jade_interp=_t("In high school and getting ready for college? In college and looking for additional study materials? Coursera has courses to help you excel in school."))?"":jade_interp)+'</div><div class="coursera-persona-sigtrack-box"><div class="coursera-persona-subheader">'+jade.escape(null==(jade_interp=_t("Earn a Verified Certificate"))?"":jade_interp)+'</div><div style="display:inline-block; vertical-align: top; text-align: right;"><a class="coursera-persona-sigtrack-link"><img src="https://s3.amazonaws.com/coursera/universities/unimelb/signature-cert-corner.png" style="height: 80px" class="coursera-persona-sigtrack-icon"/></a></div><div class="coursera-persona-sigtrack-blurb"><span>'+jade.escape(null==(jade_interp=_t("If you plan to share with schools the Coursera courses you have completed, check out"))?"":jade_interp)+' <a class="coursera-persona-sigtrack-link">'+jade.escape(null==(jade_interp=_t("Signature Track"))?"":jade_interp)+"</a>"+jade.escape(null==(jade_interp=_t(". Earn a Verified Certificate that securely links your coursework to your identity."))?"":jade_interp)+'</span><div><a class="coursera-persona-sigtrack-link">'+(null==(jade_interp=_t("Learn more now &raquo;"))?"":jade_interp)+'</a></div></div></div><div class="coursera-persona-subheader">'+jade.escape(null==(jade_interp=_t("Recommended Courses"))?"":jade_interp)+"</div>");
for(var i=0;3>i;i++){var course=featuredClasses.student[i];buf.push('<div class="coursera-persona-course-recommend"><a'+jade.attr("href",config.url.base+"course/"+course.short_name,!0,!1)+'><div class="coursera-persona-course-card"><div class="coursera-persona-course-card-image"><img'+jade.attr("src",course.small_icon_hover,!0,!1)+'/></div><div class="coursera-persona-course-name">'+jade.escape(null==(jade_interp=_t(course.name))?"":jade_interp)+'</div></div></a><div class="coursera-persona-course-details">'+jade.escape(null==(jade_interp=_t(course.description))?"":jade_interp)+"</div></div>")}buf.push('<div style="clear:both"></div></div><div style="display:none" class="lifelong-learner coursera-persona-subview"><div style="left:55%" class="coursera-persona-triangle-gray"><div class="coursera-persona-triangle-white"></div></div><div class="coursera-persona-title">'+jade.escape(null==(jade_interp=_t("Explore topics you are curious about."))?"":jade_interp)+'</div><div class="coursera-persona-subtitle">'+jade.escape(null==(jade_interp=_t("Broaden your knowledge with our wide-ranging catalog of courses, from music to computer science. Check out some courses starting now!"))?"":jade_interp)+'</div><div class="coursera-persona-subheader">'+jade.escape(null==(jade_interp=_t("Recommended Courses"))?"":jade_interp)+"</div>");for(var i=0;3>i;i++){var course=featuredClasses.learner[i];buf.push('<div class="coursera-persona-course-recommend"><a'+jade.attr("href",config.url.base+"course/"+course.short_name,!0,!1)+'><div class="coursera-persona-course-card"><div class="coursera-persona-course-card-image"><img'+jade.attr("src",course.small_icon_hover,!0,!1)+'/></div><div class="coursera-persona-course-name">'+jade.escape(null==(jade_interp=_t(course.name))?"":jade_interp)+'</div></div></a><div class="coursera-persona-course-details">'+jade.escape(null==(jade_interp=_t(course.description))?"":jade_interp)+"</div></div>")}buf.push('<div style="clear:both"></div></div><div style="display:none" class="advance-career coursera-persona-subview"><div style="left:77%" class="coursera-persona-triangle-gray"><div class="coursera-persona-triangle-white"></div></div><div class="coursera-persona-title">'+jade.escape(null==(jade_interp=_t("Stay up-to-date in your field. Forge a new career path."))?"":jade_interp)+'</div><div class="coursera-persona-subtitle"></div><div class="coursera-persona-sigtrack-box"><div class="coursera-persona-subheader">'+jade.escape(null==(jade_interp=_t("Earn a Verified Certificate"))?"":jade_interp)+'</div><div style="display:inline-block; vertical-align: top; text-align: right;"><a class="coursera-persona-sigtrack-link"><img src="https://s3.amazonaws.com/coursera/universities/unimelb/signature-cert-corner.png" style="height: 80px" class="coursera-persona-sigtrack-icon"/></a></div><div class="coursera-persona-sigtrack-blurb"><span>'+jade.escape(null==(jade_interp=_t("If you plan to share the Coursera courses you have completed with employers, check out"))?"":jade_interp)+' <a class="coursera-persona-sigtrack-link">'+jade.escape(null==(jade_interp=_t("Signature Track"))?"":jade_interp)+"</a>"+jade.escape(null==(jade_interp=_t(". Earn a Verified Certificate that securely links your coursework to your identity."))?"":jade_interp)+'</span><div><a class="coursera-persona-sigtrack-link">'+(null==(jade_interp=_t("Check it out now! &raquo;"))?"":jade_interp)+'</a></div></div></div><div class="coursera-persona-subheader">'+jade.escape(null==(jade_interp=_t("Recommended Courses"))?"":jade_interp)+"</div>");for(var i=0;3>i;i++){var course=featuredClasses.professional[i];buf.push('<div class="coursera-persona-course-recommend"><a'+jade.attr("href",config.url.base+"course/"+course.short_name,!0,!1)+'><div class="coursera-persona-course-card"><div class="coursera-persona-course-card-image"><img'+jade.attr("src",course.small_icon_hover,!0,!1)+'/></div><div class="coursera-persona-course-name">'+jade.escape(null==(jade_interp=_t(course.name))?"":jade_interp)+'</div></div></a><div class="coursera-persona-course-details">'+(null==(jade_interp=_t(course.description))?"":jade_interp)+"</div></div>")}buf.push('<div style="clear:both"></div></div></div><div style="clear:both"></div></div></div><div data-modal-overlay-class="coursera-overlay-dark" style="display:none;" class="modal coursera-profile-modal-unenroll"><div class="modal-body"><div>'+jade.escape(null==(jade_interp=_t("Please confirm that you want to un-enroll from:"))?"":jade_interp)+'<br/><strong class="coursera-profile-unenroll-title"></strong><br/></div><p>'+jade.escape(null==(jade_interp=_t("Note: If you un-enroll, you will no longer be able to see your record for this course on the Course records page."))?"":jade_interp)+'</p></div><div class="modal-footer"><button class="btn btn-danger coursera-profile-button-unenroll-now">'+jade.escape(null==(jade_interp=_t("Un-Enroll"))?"":jade_interp)+'</button><button class="btn coursera-profile-button-unenroll-waiting hide"><span>&nbsp;</span><img'+jade.attr("src",config.url.assets+"images/icons/loading.gif",!0,!1)+'/></button><button data-modal-close="data-modal-close" class="btn coursera-profile-button-unenroll-cancel">'+jade.escape(null==(jade_interp=_t("Cancel"))?"":jade_interp)+'</button></div></div><div data-modal-overlay-class="coursera-overlay-dark" class="modal coursera-profile-modal-unenroll-survey hide"><div class="modal-body"><p>'+jade.escape(null==(jade_interp=_t("We'd love to learn more about your decision to un-enroll to help us improve our offering in the future. Would you mind answering a few quick questions?"))?"":jade_interp)+'</p></div><div class="modal-footer"><a href="" class="btn btn-success">'+jade.escape(null==(jade_interp=_t("Sure!"))?"":jade_interp)+'</a><span data-modal-close="data-modal-close" class="btn">'+jade.escape(null==(jade_interp=_t("No, thanks"))?"":jade_interp)+'</span></div></div><div data-modal-overlay-class="coursera-overlay-dark" style="display:none;" class="modal coursera-profile-modal-unenroll-signature-track"><div class="modal-body"><div>'+(null==(jade_interp=_t("Are you sure you want to un-enroll from Signature Track for&nbsp;"))?"":jade_interp)+'<strong class="coursera-profile-unenroll-title"></strong>?</div><p>'+jade.escape(null==(jade_interp=_t("To do so, you will need to visit the Signature Track Settings page. You will not be able to re-enroll in Signature Track for this session of the course if you un-enroll now. You can receive a voucher and take the course on Signature Track when it is offered again."))?"":jade_interp)+'</p></div><div class="modal-footer"><a href="account/settings/signature" class="btn btn-primary">'+jade.escape(null==(jade_interp=_t("Go to Signature Track Settings"))?"":jade_interp)+"</a></div></div></div></div>")}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0,"featuredClasses"in locals_for_with?locals_for_with.featuredClasses:"undefined"!=typeof featuredClasses?featuredClasses:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/account/courseList.html",["js/lib/jade","i18n!pages/home/account/nls/courseList"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.account.courseList"]=jadify(wndw.jade.helpers)}(window),define("pages/home/account/nls/courseMini",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(course,_,config,_t,user){var goToClassLink=course.get("home_link")+"auth/auth_redirector?type=login&subtype=normal";buf.push("<div"+jade.attr("data-course-id",course.get("id"),!0,!1)+' class="coursera-dashboard-course-listing-box row-fluid"><div class="coursera-dashboard-course-listing-box-icon-container"><img'+jade.attr("src",course.get("topic").get("small_icon_hover"),!0,!1)+' class="coursera-dashboard-course-listing-box-icon"/></div><div class="coursera-dashboard-course-listing-box-main"><div class="coursera-dashboard-course-listing-box-university">'),_.each(course.get("topic").get("universities"),function(university){buf.push("<a"+jade.attr("href",university.home_link||config.dir.home+university.short_name,!0,!1)+jade.cls([university.home_link?"":"internal-home"],[!0])+">"+jade.escape(null==(jade_interp=_t(university.name))?"":jade_interp)+"</a>")}),buf.push('</div><div class="coursera-dashboard-course-listing-box-name">');var courseLink=config.dir.home+"course/"+course.get("topic").get("short_name");if("1"==course.get("active")||course.get("self_study"))courseLink=goToClassLink;if(buf.push("<a"+jade.attr("href",courseLink,!0,!1)+">"+jade.escape(null==(jade_interp=_t(course.get("topic").get("name")))?"":jade_interp)+"</a></div>"),user.enrolledInSignatureCourse(course.get("id")))buf.push('<div class="coursera-dashboard-course-listing-box-sigtrack-flag"><img'+jade.attr("src",config.url.assets+"images/signature/course-dashboard-sigtrack.png",!0,!1)+"/><span>"+jade.escape(null==(jade_interp=_t("Signature Track"))?"":jade_interp)+"</span></div>");if("past"==course.getStartStatus())buf.push('<div class="coursera-dashboard-course-listing-box-ended-display"><span>'+jade.escape(null==(jade_interp=_t(course.getStartCountdown()))?"":jade_interp)+"</span></div>");else if("future"!=course.getStartStatus()){if(buf.push('<div class="coursera-dashboard-course-listing-box-progress"><div class="progress-line"></div><div'+jade.attr("style","left:"+course.getStartPercent()+"%",!0,!1)+' class="progress-marker"></div><div'+jade.attr("style","width:"+course.getStartPercent()+"%;",!0,!1)+' class="progress-bar"></div>'),course.getEndDateMoment()&&course.getStartDateMoment()&&course.getEndDateMoment().year()!=course.getStartDateMoment().year())buf.push('<span style="left: 1px;" class="progress-label">'+jade.escape(null==(jade_interp=_t(course.getStartDisplay()))?"":jade_interp)+'</span><span style="right: 1px;" class="progress-label">'+jade.escape(null==(jade_interp=_t(course.getEndDisplay()))?"":jade_interp)+"</span>");else buf.push('<span style="left: 1px;" class="progress-label">'+jade.escape(null==(jade_interp=_t(course.getStartDisplayShort()))?"":jade_interp)+'</span><span style="right: 1px;" class="progress-label">'+jade.escape(null==(jade_interp=_t(course.getEndDisplayShort()))?"":jade_interp)+"</span>");buf.push("</div>")}if(buf.push('<div class="row-fluid coursera-dashboard-course-listing-box-bottom"><div class="span8"><div class="coursera-dashboard-course-listing-box-links"><a'+jade.attr("href",config.dir.home+"course/"+course.get("topic").get("short_name"),!0,!1)+' class="internal-home">'+jade.escape(null==(jade_interp=_t("course info"))?"":jade_interp)+" </a>"),!course.hasGrade())if(user.enrolledInSignatureCourse(course.get("id")))buf.push('<span> | </span><a is_signature_track="is_signature_track" href="javascript:void(0)"'+jade.attr("data-unenroll-course-id",course.get("id"),!0,!1)+">"+jade.escape(null==(jade_interp=_t("un-enroll"))?"":jade_interp)+" </a>");else buf.push('<span> | </span><a href="javascript:void(0)"'+jade.attr("data-unenroll-course-id",course.get("id"),!0,!1)+">"+jade.escape(null==(jade_interp=_t("un-enroll"))?"":jade_interp)+" </a>");if(1==course.get("active")&&"past"==course.getStartStatus())buf.push("<span> | </span><a"+jade.attr("href",goToClassLink,!0,!1)+">"+jade.escape(null==(jade_interp=_t("class archive"))?"":jade_interp)+"</a>");buf.push('</div></div><div class="span4">');var courseButtonState=course.getCourseButtonState(),countdown=course.getStartCountdown()||"Start Date TBD",textMap={JOIN:_t("Join for Free"),VIEW_CLASS_ARCHIVE:_t("View class archive"),GO_TO_CLASS:_t("Go to class"),GRADING_IN_PROGRESS:_t("Grading in progress"),GRADING_IN_PROGRESS_VIEW_ARCHIVE:_t("Grading in Progress"),VIEW_COURSE_RECORD:_t("View course record"),COUNTDOWN:_t(countdown)},tooltipMap={CONGRATS_GET_VC:_t("Congratulations! Get your Verified Certificate."),CONGRATS_GET_SOA:_t("Congratulations! Get your Statement of Accomplishment."),DID_NOT_GET_SOA_GET_GRADE:_t("You did not earn a Statement of Accomplishment. Get your grade."),GRADING_IN_PROGRESS:_t("Grading in progress."),GRADING_IN_PROGRESS_VIEW_ARCHIVE:_t("Grading in progress, click to view course archive."),GET_YOUR_GRADE:_t("Get your grade."),COURSE_NO_SOA:_t("This course does not release Statements of Accomplishment.")},colorMap={blue:"btn-flat-primary",green:"btn-flat-success"},tooltip=tooltipMap[courseButtonState.tooltip]?tooltipMap[courseButtonState.tooltip]:"",text=textMap[courseButtonState.text],baseClass="coursera-dashboard-course-listing-box-go-button btn-flat "+colorMap[courseButtonState.color];if(courseButtonState.disabled)buf.push('<a disabled="disabled"'+jade.attr("data-tooltip",tooltip,!0,!1)+jade.attr("href",courseButtonState.link,!0,!1)+jade.cls([baseClass+" disabled"],[!0])+">"+jade.escape(null==(jade_interp=_t(text))?"":jade_interp)+"</a>");else buf.push("<a"+jade.attr("data-tooltip",tooltip,!0,!1)+jade.attr("href",courseButtonState.link,!0,!1)+jade.cls([baseClass],[!0])+">"+jade.escape(null==(jade_interp=_t(text))?"":jade_interp)+"</a>");buf.push("</div></div></div></div>")}("course"in locals_for_with?locals_for_with.course:"undefined"!=typeof course?course:void 0,"_"in locals_for_with?locals_for_with._:"undefined"!=typeof _?_:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"user"in locals_for_with?locals_for_with.user:"undefined"!=typeof user?user:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/account/courseMini.html",["js/lib/jade","i18n!pages/home/account/nls/courseMini"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.account.courseMini"]=jadify(wndw.jade.helpers)}(window),define("pages/home/account/nls/seriesMini",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t,config,model,universities,topics,expCourseLink,truncate,user){buf.push('<div class="coursera-specialization-container"><div class="coursera-specialization-header"><span class="collapse-option"><a href="javascript:void(0)" class="expand">'+(null==(jade_interp=_t("Show more&nbsp;"))?"":jade_interp)+'<i class="icon-chevron-down"></i></a><a style="display:none" href="javascript:void(0)" class="collapse">'+(null==(jade_interp=_t("Show less&nbsp;"))?"":jade_interp)+'<i class="icon-chevron-up"></i></a></span><div class="coursera-specialization-logo-section"><a'+jade.attr("href",config.url.base+"specialization/"+model.get("short_name")+"/"+model.get("id")+"?utm_medium=dashboard",!0,!1)+"><img"+jade.attr("src",model.get("logo"),!0,!1)+'/></a></div><div class="coursera-specialization-logo-details"><div class="coursera-specialization-university">'),function(){var $$obj=universities;if("number"==typeof $$obj.length)for(var index=0,$$l=$$obj.length;$$l>index;index++){var university=$$obj[index];if(0!=index)buf.push("<span>&nbsp;&amp;&nbsp;</span>");buf.push("<span>"+jade.escape(null==(jade_interp=_t(university.get("name")))?"":jade_interp)+"</span>")}else{var $$l=0;for(var index in $$obj){$$l++;var university=$$obj[index];if(0!=index)buf.push("<span>&nbsp;&amp;&nbsp;</span>");buf.push("<span>"+jade.escape(null==(jade_interp=_t(university.get("name")))?"":jade_interp)+"</span>")}}}.call(this),buf.push('</div><div class="coursera-specialization-name"><a'+jade.attr("href",config.url.base+"specialization/"+model.get("short_name")+"/"+model.get("id")+"?utm_medium=dashboard",!0,!1)+">"+jade.escape(null==(jade_interp=_t(model.get("name")))?"":jade_interp)+'</a></div><div class="coursera-specialization-progress">');var widthStyle="width:"+(100/(topics.length+2)-1)+"%";(function(){var $$obj=topics;if("number"==typeof $$obj.length)for(var index=0,$$l=$$obj.length;$$l>index;index++){var topic=$$obj[index];buf.push("<div"+jade.attr("style",widthStyle,!0,!1)+jade.attr("data-topic",topic.get("id"),!0,!1)+' class="coursera-specialization-progress-section"></div>')}else{var $$l=0;for(var index in $$obj){$$l++;var topic=$$obj[index];buf.push("<div"+jade.attr("style",widthStyle,!0,!1)+jade.attr("data-topic",topic.get("id"),!0,!1)+' class="coursera-specialization-progress-section"></div>')}}}).call(this),buf.push('</div><div class="coursera-dashboard-course-listing-box-links"><a'+jade.attr("href",config.url.base+"specialization/"+model.get("short_name")+"/"+model.get("id")+"?utm_medium=dashboard",!0,!1)+">"+jade.escape(null==(jade_interp=_t("More Info"))?"":jade_interp)+'</a>&nbsp;|&nbsp;<a class="hide-option">'+jade.escape(null==(jade_interp=_t("Hide"))?"":jade_interp)+'</a></div></div></div><div class="coursera-specialization-topic-body"></div>');var capstone=model.get("aux_info").capstone;(function(){var $$obj=topics;if("number"==typeof $$obj.length)for(var index=0,$$l=$$obj.length;$$l>index;index++){var topic=$$obj[index],courseAvailCount=0;if(buf.push("<div data-enrolled-not-passed='0'"+jade.attr("data-topic",topic.get("short_name"),!0,!1)+' class="coursera-specialization-topic"><div class="coursera-specialization-topic-title"><div class="topic-index-img">'),!topic.get("is_capstone"))buf.push("<img"+jade.attr("src",config.url.assets+"images/specialization/course"+(index+1)+".png",!0,!1)+"/>");else buf.push("<img"+jade.attr("src",config.url.assets+"images/specialization/course-cs.png",!0,!1)+"/>");if(buf.push("</div>"),"link"==expCourseLink)buf.push("<a"+jade.attr("href",topic.get("social_link"),!0,!1)+' class="topic-name">'+jade.escape(null==(jade_interp=_t(truncate.byLength(topic.get("name"),60)))?"":jade_interp)+"</a>");else buf.push('<span class="topic-name">'+jade.escape(null==(jade_interp=_t(truncate.byLength(topic.get("name"),60)))?"":jade_interp)+"</span>");if(buf.push('</div><div data-topic-passed=\'1\' style="display:none" class="topic-btn-options"><a'+jade.attr("href",config.url.base+"account/records",!0,!1)+' class="class-status btn-flat btn-flat-success"><i class="icon-ok"></i> '+jade.escape(null==(jade_interp=_t("Grades"))?"":jade_interp)+'</a></div><div data-topic-passed=\'0\' style="display:none" class="topic-btn-options"><select'+jade.attr("data-topic",topic.get("short_name"),!0,!1)+' style="display:none" class="coursera-specialization-select-sessions">'),function(){var $$obj=topic.get("courses").models;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var course=$$obj[$index],courseId=course.get("id"),canEnroll=1===course.get("status")||user.isEnrolledInCourse(courseId);if(course.isEligibleForTrack()&&(user.enrolledInSignatureCourse(courseId)||canEnroll&&course.get("signature_track_registration_open")))courseAvailCount+=1,buf.push("<option"+jade.attr("value",course.get("id"),!0,!1)+">"+jade.escape(null==(jade_interp=_t(course.getStartDisplayShort()))?"":jade_interp)+"</option>")}else{var $$l=0;for(var $index in $$obj){$$l++;var course=$$obj[$index],courseId=course.get("id"),canEnroll=1===course.get("status")||user.isEnrolledInCourse(courseId);if(course.isEligibleForTrack()&&(user.enrolledInSignatureCourse(courseId)||canEnroll&&course.get("signature_track_registration_open")))courseAvailCount+=1,buf.push("<option"+jade.attr("value",course.get("id"),!0,!1)+">"+jade.escape(null==(jade_interp=_t(course.getStartDisplayShort()))?"":jade_interp)+"</option>")}}}.call(this),buf.push("</select>"),0===courseAvailCount)if(topic.get("is_capstone")&&capstone.startDate)buf.push("<span>"+jade.escape(null==(jade_interp=_t("Starts #{capstone.startDate}",{"capstone.startDate":capstone.startDate}))?"":jade_interp)+"</span>");else buf.push("<span>"+jade.escape(null==(jade_interp=_t("No upcoming sessions"))?"":jade_interp)+"</span>");else if(!topic.get("is_capstone"))buf.push("<a"+jade.attr("data-topic",topic.get("short_name"),!0,!1)+" data-course-enrolled='1' data-course-active='1' style=\"display: none\" class=\"class-status btn-flat btn-flat-success\">"+jade.escape(null==(jade_interp=_t("Go to Class"))?"":jade_interp)+"</a><a"+jade.attr("data-topic",topic.get("short_name"),!0,!1)+" data-course-enrolled='0' data-oneclick-sigtrack='0' style=\"display: none\" class=\"class-status btn-flat btn-flat-gold\">"+jade.escape(null==(jade_interp=_t("Join"))?"":jade_interp)+"</a><button"+jade.attr("data-topic",topic.get("short_name"),!0,!1)+" data-course-enrolled='0' data-oneclick-sigtrack='1' style=\"display: none\" class=\"class-status btn-flat btn-flat-gold\">"+jade.escape(null==(jade_interp=_t("Join"))?"":jade_interp)+"</button><span"+jade.attr("data-topic",topic.get("short_name"),!0,!1)+" data-course-enrolled='1' data-course-active='0' style=\"display: none\" class=\"class-status btn-flat btn-flat-inverse\">"+jade.escape(null==(jade_interp=_t("Joined"))?"":jade_interp)+"</span><span data-enroll-success='1'"+jade.attr("data-topic",topic.get("short_name"),!0,!1)+' style="display: none" class="class-status coursera-session-oneclick-sigtrack-msg">'+jade.escape(null==(jade_interp=_t("Joined"))?"":jade_interp)+"</span><span data-enroll-success='0'"+jade.attr("data-topic",topic.get("short_name"),!0,!1)+' style="display: none" class="class-status coursera-session-oneclick-sigtrack-msg">'+jade.escape(null==(jade_interp=_t("Error"))?"":jade_interp)+"</span>");buf.push("</div></div>")}else{var $$l=0;for(var index in $$obj){$$l++;var topic=$$obj[index],courseAvailCount=0;if(buf.push("<div data-enrolled-not-passed='0'"+jade.attr("data-topic",topic.get("short_name"),!0,!1)+' class="coursera-specialization-topic"><div class="coursera-specialization-topic-title"><div class="topic-index-img">'),!topic.get("is_capstone"))buf.push("<img"+jade.attr("src",config.url.assets+"images/specialization/course"+(index+1)+".png",!0,!1)+"/>");else buf.push("<img"+jade.attr("src",config.url.assets+"images/specialization/course-cs.png",!0,!1)+"/>");if(buf.push("</div>"),"link"==expCourseLink)buf.push("<a"+jade.attr("href",topic.get("social_link"),!0,!1)+' class="topic-name">'+jade.escape(null==(jade_interp=_t(truncate.byLength(topic.get("name"),60)))?"":jade_interp)+"</a>");else buf.push('<span class="topic-name">'+jade.escape(null==(jade_interp=_t(truncate.byLength(topic.get("name"),60)))?"":jade_interp)+"</span>");if(buf.push('</div><div data-topic-passed=\'1\' style="display:none" class="topic-btn-options"><a'+jade.attr("href",config.url.base+"account/records",!0,!1)+' class="class-status btn-flat btn-flat-success"><i class="icon-ok"></i> '+jade.escape(null==(jade_interp=_t("Grades"))?"":jade_interp)+'</a></div><div data-topic-passed=\'0\' style="display:none" class="topic-btn-options"><select'+jade.attr("data-topic",topic.get("short_name"),!0,!1)+' style="display:none" class="coursera-specialization-select-sessions">'),function(){var $$obj=topic.get("courses").models;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var course=$$obj[$index],courseId=course.get("id"),canEnroll=1===course.get("status")||user.isEnrolledInCourse(courseId);if(course.isEligibleForTrack()&&(user.enrolledInSignatureCourse(courseId)||canEnroll&&course.get("signature_track_registration_open")))courseAvailCount+=1,buf.push("<option"+jade.attr("value",course.get("id"),!0,!1)+">"+jade.escape(null==(jade_interp=_t(course.getStartDisplayShort()))?"":jade_interp)+"</option>")}else{var $$l=0;for(var $index in $$obj){$$l++;var course=$$obj[$index],courseId=course.get("id"),canEnroll=1===course.get("status")||user.isEnrolledInCourse(courseId);if(course.isEligibleForTrack()&&(user.enrolledInSignatureCourse(courseId)||canEnroll&&course.get("signature_track_registration_open")))courseAvailCount+=1,buf.push("<option"+jade.attr("value",course.get("id"),!0,!1)+">"+jade.escape(null==(jade_interp=_t(course.getStartDisplayShort()))?"":jade_interp)+"</option>")}}}.call(this),buf.push("</select>"),0===courseAvailCount)if(topic.get("is_capstone")&&capstone.startDate)buf.push("<span>"+jade.escape(null==(jade_interp=_t("Starts #{capstone.startDate}",{"capstone.startDate":capstone.startDate}))?"":jade_interp)+"</span>");else buf.push("<span>"+jade.escape(null==(jade_interp=_t("No upcoming sessions"))?"":jade_interp)+"</span>");else if(!topic.get("is_capstone"))buf.push("<a"+jade.attr("data-topic",topic.get("short_name"),!0,!1)+" data-course-enrolled='1' data-course-active='1' style=\"display: none\" class=\"class-status btn-flat btn-flat-success\">"+jade.escape(null==(jade_interp=_t("Go to Class"))?"":jade_interp)+"</a><a"+jade.attr("data-topic",topic.get("short_name"),!0,!1)+" data-course-enrolled='0' data-oneclick-sigtrack='0' style=\"display: none\" class=\"class-status btn-flat btn-flat-gold\">"+jade.escape(null==(jade_interp=_t("Join"))?"":jade_interp)+"</a><button"+jade.attr("data-topic",topic.get("short_name"),!0,!1)+" data-course-enrolled='0' data-oneclick-sigtrack='1' style=\"display: none\" class=\"class-status btn-flat btn-flat-gold\">"+jade.escape(null==(jade_interp=_t("Join"))?"":jade_interp)+"</button><span"+jade.attr("data-topic",topic.get("short_name"),!0,!1)+" data-course-enrolled='1' data-course-active='0' style=\"display: none\" class=\"class-status btn-flat btn-flat-inverse\">"+jade.escape(null==(jade_interp=_t("Joined"))?"":jade_interp)+"</span><span data-enroll-success='1'"+jade.attr("data-topic",topic.get("short_name"),!0,!1)+' style="display: none" class="class-status coursera-session-oneclick-sigtrack-msg">'+jade.escape(null==(jade_interp=_t("Joined"))?"":jade_interp)+"</span><span data-enroll-success='0'"+jade.attr("data-topic",topic.get("short_name"),!0,!1)+' style="display: none" class="class-status coursera-session-oneclick-sigtrack-msg">'+jade.escape(null==(jade_interp=_t("Error"))?"":jade_interp)+"</span>");buf.push("</div></div>")}}}).call(this),buf.push('</div><div data-modal-overlay-class="coursera-overlay-dark" style="display:none;" class="modal coursera-modal-unenroll-specialization"><div class="modal-body"><div>'+jade.escape(null==(jade_interp=_t("Not interested in this specialization? Please confirm that you want it removed from your dashboard."))?"":jade_interp)+'</div></div><div class="modal-footer"><span class="btn btn-danger btn-remove-specialization">'+jade.escape(null==(jade_interp=_t("Remove Now"))?"":jade_interp)+'</span><span data-modal-close="data-modal-close" class="btn">'+jade.escape(null==(jade_interp=_t("Cancel"))?"":jade_interp)+"</span></div></div>")}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0,"model"in locals_for_with?locals_for_with.model:"undefined"!=typeof model?model:void 0,"universities"in locals_for_with?locals_for_with.universities:"undefined"!=typeof universities?universities:void 0,"topics"in locals_for_with?locals_for_with.topics:"undefined"!=typeof topics?topics:void 0,"expCourseLink"in locals_for_with?locals_for_with.expCourseLink:"undefined"!=typeof expCourseLink?expCourseLink:void 0,"truncate"in locals_for_with?locals_for_with.truncate:"undefined"!=typeof truncate?truncate:void 0,"user"in locals_for_with?locals_for_with.user:"undefined"!=typeof user?user:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/account/seriesMini.html",["js/lib/jade","i18n!pages/home/account/nls/seriesMini"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.account.seriesMini"]=jadify(wndw.jade.helpers)}(window),define("pages/home/account/seriesMini",["jquery","underscore","js/core/coursera","pages/home/template/body","pages/home/account/seriesMini.html","i18n!pages/home/account/nls/seriesMini","js/models/specialization","js/models/university","js/models/topic","js/lib/cookie","js/lib/modals","js/lib/truncate","js/lib/coursera.ab"],function($,_,Coursera,body,template,_t,Specialization,University,Topic,cookie,Modal,truncate,AB){var pageBody=body.extend({updateCollapseCookie:function(showTopics){var self=this,cookieName="specialization-collapse",cookieValue=cookie.get(cookieName),specID=self.options.model.get("id"),specsToHideAsDefault=[];if(cookieValue)specsToHideAsDefault=JSON.parse(cookieValue);if(showTopics)specsToHideAsDefault=_.without(specsToHideAsDefault,specID);else specsToHideAsDefault.push(specID);cookie.set(cookieName,JSON.stringify(specsToHideAsDefault))},toggleCollapse:function(showTopics,updateCookie){var self=this;if(updateCookie)self.updateCollapseCookie(showTopics);if(showTopics)self.$(".collapse-option .collapse").show(),self.$(".collapse-option .expand").hide(),self.$(".coursera-specialization-topic[data-enrolled-not-passed=0]").show();else self.$(".collapse-option .expand").show(),self.$(".collapse-option .collapse").hide(),self.$(".coursera-specialization-topic[data-enrolled-not-passed=0]").hide(),self.$(".coursera-specialization-topic[data-enrolled-not-passed=1]").show()},render:function(){var self=this;this.enrolledTopics={},this.topicsPassed={},_.each(this.options.courses.toArray(),function(course){if(course.get("record").authenticated_track){var short_name=course.get("topic").get("short_name");if(course.certificateIsReady()){if(course.getsSignatureTrackCert())self.topicsPassed[short_name]=course}else self.enrolledTopics[short_name]=course}}),self.specializationBulkVoucher=Coursera.user.getSpecializationBulkVoucher(this.options.model.get("id"));var expCourseLink=AB.user.getExperiment("specialization_course_link").getChosenVariant();this.$el.append(template({_t:_t,truncate:truncate,config:Coursera.config,user:Coursera.user,model:this.options.model,universities:this.options.model.get("universities").toArray(),topics:this.options.model.get("topics").models,expCourseLink:expCourseLink})),self.$(".collapse-option").on("click",function(){Coursera.multitracker.push(["Specialization expand-shrink-on-dashboard",self.options.model.get("id")]),self.toggleCollapse(self.$(".expand").is(":visible"),!0)});var modal=Modal(self.$el.find(".coursera-modal-unenroll-specialization"));return self.$(".hide-option").on("click",function(){modal.open()}),self.$(".btn-remove-specialization").on("click",function(){self.$el.hide(),modal.close();var cookieName="specialization-hide",cookieValue=cookie.get(cookieName),specID=self.options.model.get("id");if(Coursera.multitracker.push(["Specializations hide-from-dashboard",specID]),cookieValue)cookie.set(cookieName,cookieValue+","+specID);else cookie.set(cookieName,specID)}),_.each(this.options.model.get("topics").models,function(topic){self.setupTopicRow(topic)}),self.toggleCollapse(!self.options.collapse,!1),this},markTopicPassed:function($progressBarSection,$topicRow,interchangedTopic){if($progressBarSection.addClass("passed"),$topicRow.find(".topic-btn-options[data-topic-passed=1]").show(),interchangedTopic)$topicRow.find(".topic-name").html($topicRow.find(".topic-name").text()+' <br/><em>(You passed "'+interchangedTopic.name+'" instead)</em>')},markTopicEnrolled:function($progressBarSection,$topicRow,$topicSelector,topicName,interchangedTopic){if($topicRow.attr("data-enrolled-not-passed",1),$progressBarSection.addClass("in-progress"),topicName)$topicSelector.val(this.enrolledTopics[topicName].get("id"));else if(interchangedTopic)$topicRow.find(".topic-name").html($topicRow.find(".topic-name").text()+' <br/><em>(You are taking "'+interchangedTopic.name+'" instead)</em>'),$topicRow.find(".topic-btn-options[data-topic-passed=0]").hide()
},setupTopicRow:function(topic){var self=this,hasSpecializationBulkVoucher=self.specializationBulkVoucher?1:0,topicName=topic.get("short_name"),interchangeableTopics=topic.get("interchangeable"),$topicRow=self.$('.coursera-specialization-topic[data-topic="'+topic.get("short_name")+'"]'),$topicSelector=$topicRow.find(".coursera-specialization-select-sessions"),$progressBarSection=self.$(".coursera-specialization-progress-section[data-topic="+topic.get("id")+"]");if(this.topicsPassed[topicName])return void this.markTopicPassed($progressBarSection,$topicRow,null);else{for(var i=0;i<interchangeableTopics.length;i++)if(this.topicsPassed[interchangeableTopics[i].short_name])return void this.markTopicPassed($progressBarSection,$topicRow,interchangeableTopics[i]);$topicRow.find(".topic-btn-options[data-topic-passed=0]").show()}if(self.enrolledTopics[topicName])this.markTopicEnrolled($progressBarSection,$topicRow,$topicSelector,topicName);else for(var j=0;j<interchangeableTopics.length;j++)if(this.enrolledTopics[interchangeableTopics[j].short_name])return void this.markTopicEnrolled($progressBarSection,$topicRow,$topicSelector,null,interchangeableTopics[j]);if(0===$topicSelector.find("option").length)return;if($topicSelector.on("change",function(elem){var $seriesMiniBtn,courseId=$topicSelector.val(),course=topic.getCourseById(courseId),isActive=course.get("active")?1:0,classStatusQuery='.class-status[data-topic="'+topicName+'"]';if(self.$(classStatusQuery).hide(),Coursera.user.enrolledInSignatureCourse(courseId)){if($seriesMiniBtn=self.$(classStatusQuery+"[data-course-enrolled=1][data-course-active="+isActive+"]"),$seriesMiniBtn.show(),isActive)$seriesMiniBtn.attr("href",course.get("home_link"))}else if($seriesMiniBtn=self.$(classStatusQuery+"[data-course-enrolled=0][data-oneclick-sigtrack="+hasSpecializationBulkVoucher+"]"),$seriesMiniBtn.show(),!hasSpecializationBulkVoucher)$seriesMiniBtn.attr("href",Coursera.config.url.base+"signature/specializationCourse/"+topicName+"/"+courseId+"?utm_medium=dashboard")}),hasSpecializationBulkVoucher)self.$('.class-status[data-topic="'+topicName+'"][data-oneclick-sigtrack=1]').on("click",function(e){$(e.currentTarget).attr("disabled","disabled"),Coursera.user.oneClickSigtrack($topicSelector.val(),self.specializationBulkVoucher,function(err){if($(e.currentTarget).attr("disabled",null),self.$('.class-status[data-topic="'+topicName+'"]').hide(),null===err)$topicSelector.change();else self.$('.coursera-session-oneclick-sigtrack-msg[data-enroll-success=0][data-topic="'+topicName+'"]').show()})});$topicSelector.show().change()}});return pageBody}),define("js/json/featuredClasses",[],function(){return{student:[{short_name:"datascitoolbox",description:"Get an overview of the data, questions, and tools that data analysts and data scientists work with. This is the first course in the Johns Hopkins Data Science Specialization. In this course you will get an introduction to the main tools and ideas in the data scientist's toolbox. The course gives an overview of the data, questions, and tools that data analysts and data scientists work with. ",include:!0,small_icon_hover:"https://coursera-course-photos.s3.amazonaws.com/3b/00769069b511e3af9a07984d9d273b/DataScientistsToolbox.jpg",name:"The Data Scientist’s Toolbox"},{short_name:"globaltrends",description:"What does the future hold for global markets? How are societies and cultures evolving? Who will be global powers of the 21st century? Take this class and find out how global trends are transforming business and society.",include:!0,small_icon_hover:"https://coursera-course-photos.s3.amazonaws.com/30/5901f086e111e396da77fdbc801f11/MauroLogo.jpg",name:"Analyzing Global Trends for Business and Society"},{short_name:"globalorder",description:"This course deals with international relations, peace and security and brings together a number of experts from the field and academia to share their perspectives. The course will help you gain insight into conflict resolution and the role organizations such as the United Nations Security Council, the European Union, the African Union and NATO play in a changing world.",include:!0,small_icon_hover:"https://coursera-course-photos.s3.amazonaws.com/55/be1439b9026ef076e07bb753784c54/ChangeworldLOGO.jpg",name:"The Changing Global Order"}],professional:[{short_name:"datascitoolbox",description:"Get an overview of the data, questions, and tools that data analysts and data scientists work with. This is the first course in the Johns Hopkins Data Science Specialization. In this course you will get an introduction to the main tools and ideas in the data scientist's toolbox. The course gives an overview of the data, questions, and tools that data analysts and data scientists work with. ",include:!0,small_icon_hover:"https://coursera-course-photos.s3.amazonaws.com/3b/00769069b511e3af9a07984d9d273b/DataScientistsToolbox.jpg",name:"The Data Scientist’s Toolbox"},{short_name:"ccss-math1",description:"The Common Core State Standards in Mathematics (CCSSM) offer the opportunity for educators to transform teaching and learning by positioning students in more active roles as learners. What do students and teachers need to know to take on these standards? What does it mean, for example, for students to persevere through new and challenging problems, and/or critique the reasoning of other students, and how can their teachers best support them?",include:!0,small_icon_hover:"https://coursera-course-photos.s3.amazonaws.com/9a/4179c4a607601ef9e796db94ad80d6/mathteacher-student-whiteboard.jpg",name:"Common Core in Action: Math Formative Assessment"},{short_name:"teachingcharacter",description:"Positive psychology meets K-12 pedagogy. This course explores key ideas of positive psychology and shows how great teachers apply those lessons to maximize student engagement and accomplishment. Through lectures, discussions, interviews and footage of great educators in action, you’ll learn how to integrate character-based objectives into your own teaching.",include:!0,small_icon_hover:"https://coursera-course-photos.s3.amazonaws.com/f0/c09133e1cd65d9861ac15e97dcb977/54_Frank-01015216.jpg",name:"Teaching Character and Creating Positive Classrooms "}],learner:[{short_name:"warhol",description:"An introduction to the life and work of Andy Warhol, one of the world’s most famous artists, through exploration of five thematic framings of his life and career: celebrity; sex; money; death; and time.",include:!0,small_icon_hover:"https://coursera-course-photos.s3.amazonaws.com/03/6b9f112bfbc3a15f4285d1c78fa1b0/Andy_Warhol_by_Jack_Mitchell.jpg",name:"Warhol"},{short_name:"astrotech",description:"How astronomy really works - an overview of the technology that astronomers use to collect and measure light from the universe, and how it is used in practice to make scientific discoveries.",include:!0,small_icon_hover:"https://coursera-course-photos.s3.amazonaws.com/20/68ca65b29b07dde9e5d5d76d90d333/Four_antennas_ALMA.jpg",name:"AstroTech: The Science and Technology behind Astronomical Discovery"},{short_name:"oldglobe",description:"The world is ageing – people are older and societies are facing hard realities. What are we to make our lives in this time of global ageing? In six weeks, we analyze critical questions about age and ageing around the world.",include:!0,small_icon_hover:"https://coursera-course-photos.s3.amazonaws.com/53/36cef703d4a37e05a571326d4e7d98/Kagan-Intro-fancy-back-16.png",name:"Growing Old Around the Globe"}]}}),!function(){var Tooltips=function($,LucidJS,_,DataAttributes){var ESCAPE=27,_private={defaults:{"bind.open":"mouseenter focusin","bind.close":"mouseleave focusout","bind.keydown":"keydown","animate.in.type":"custom","animate.in.from":'{"opacity":0}',"animate.in.to":'{"opacity":0.8}',"animate.in.duration":200,"animate.out.type":"custom","animate.out.from":'{"opacity":0.8}',"animate.out.to":'{"opacity":0}',"animate.out.duration":200,position:"top",style:"tooltip","style.z-index":1e6,offset:10,"attribute.tooltip":"data-tooltip"},tooltip:$("<div>").attr("aria-role","tooltip"),getTooltip:function(el,options){var tooltip=$(el).data("tooltip.me");if(tooltip&&tooltip.constructor==Tooltip.prototype.constructor)if(_private.build.call(tooltip,options?options.text:null),options)return tooltip.customize(options);else return tooltip;else return null},makeTooltip:function(el,settings){var $el=$(el),tooltip=_private.getTooltip($el);if(!tooltip)tooltip=new Tooltip($el,settings),$el.data("tooltip.me",tooltip);return _private.build.call(tooltip,settings?settings.text:null),tooltip},monitorKeys:function(e){if(e.keyCode==ESCAPE)this.close()},show:function(){this.emitter.trigger("show",this)},close:function(){this.$tooltip.hide().remove(),this.emitter.trigger("close",this)},build:function(_text){var arrow=$("<div>").addClass(this.options.style+"-arrow"),inner=$("<div>").addClass(this.options.style+"-inner"),text=_text||this.$el.attr(this.options["attribute.tooltip"]);this.$tooltip=_private.tooltip.empty().remove().removeClass().stop(!0,!0).addClass(this.options.style).addClass(this.options.position).css({visibility:"hidden",position:"absolute",display:"block","z-index":this.options["style.z-index"]}).append(arrow).append(inner.html(text))}},Tooltip=function(el,settings){this.$el=$(el),this.customize(settings),this.emitter=LucidJS.emitter(this)};Tooltip.prototype.customize=function(settings){if(this.options=_.extend({},DataAttributes.parse(this.$el,_private.defaults,"data-tooltip-"),settings),this.options.offset)this.options.offset=parseInt(this.options.offset,10)||0;return this},Tooltip.prototype.open=function(){var that=this,position=this.$el.offset(),position2=this.$tooltip.appendTo("body").offset(),width=this.$el.outerWidth(),height=this.$el.outerHeight(),width2=this.$tooltip.outerWidth(),height2=this.$tooltip.outerHeight(),middleW=position.left+width/2,middleH=position.top+height/2;if("top"==this.options.position)this.$tooltip.css({left:middleW-width2/2,top:position.top-height2-this.options.offset});else if("left"==this.options.position)this.$tooltip.css({left:position.left-width2-this.options.offset,top:middleH-height2/2});else if("right"==this.options.position)this.$tooltip.css({left:position.left+width+this.options.offset,top:middleH-height2/2});else this.$tooltip.css({left:middleW-width2/2,top:position.top+height+this.options.offset});if("custom"==this.options["animate.in.type"]){if(this.options["animate.in.from"])if(_.isObject(this.options["animate.in.from"]))this.$tooltip.css(this.options["animate.in.from"]);else if(_.isString(this.options["animate.in.from"]))this.$tooltip.css($.parseJSON(this.options["animate.in.from"]));if(this.$tooltip.css({visibility:"visible",display:"block"}),this.options["animate.in.to"])if(_.isObject(this.options["animate.in.to"]))this.$tooltip.animate(this.options["animate.in.to"],{duration:this.options["animate.in.duration"],complete:_.bind(_private.show,this)});else if(_.isString(this.options["animate.in.to"]))this.$tooltip.animate($.parseJSON(this.options["animate.in.to"]),{duration:this.options["animate.in.duration"],complete:_.bind(_private.show,this)})}else this.emitter.trigger("opening",this),this.$tooltip.css({display:"block"}),_private.show.call(this);return $(document).on(this.options["bind.keydown"]+".popup",_.bind(_private.monitorKeys,this)),this},Tooltip.prototype.close=function(){if("custom"==this.options["animate.out.type"]){if(this.options["animate.out.from"])if(_.isObject(this.options["animate.out.from"]))this.$tooltip.css(this.options["animate.out.from"]);else if(_.isString(this.options["animate.out.from"]))this.$tooltip.css($.parseJSON(this.options["animate.out.from"]));if(this.options["animate.out.to"])if(_.isObject(this.options["animate.out.to"]))this.$tooltip.animate(this.options["animate.out.to"],{duration:this.options["animate.out.duration"],complete:_.bind(_private.close,this)});else if(_.isString(this.options["animate.out.to"]))this.$tooltip.animate($.parseJSON(this.options["animate.out.to"]),{duration:this.options["animate.out.duration"],complete:_.bind(_private.close,this)});this.emitter.trigger("closing",this)}else this.emitter.trigger("closing",this),_private.close.call(this)};var external=function(){return _private.getTooltip.apply(null,arguments)||_private.makeTooltip.apply(this,arguments)};return external.start=function(view,_options){var $view=$(view),options=_.extend({},_private.defaults,_options);$view.on(options["bind.open"]+".tooltip","["+options["attribute.tooltip"]+"]",function(e){var $anchor=$(this);if("disabled"!=$anchor.attr("disabled")){options=_.extend({},_options,DataAttributes.parse($anchor,_private.defaults,"data-tooltip-"));var tooltip=_private.makeTooltip($anchor,options);if($anchor.attr(options["attribute.tooltip"]))tooltip.open(),tooltip.on("open",function(){$anchor.data("tooltip.it",tooltip)}),tooltip.on("close",function(){$anchor.data("tooltip.it",null)})}}),$view.on(options["bind.close"]+".tooltip","["+options["attribute.tooltip"]+"]",function(e){var $anchor=$(this);options=_.extend({},_options,DataAttributes.parse($anchor,_private.defaults,"data-tooltip-"));var tooltip=_private.getTooltip($anchor,options);if(tooltip)tooltip.close()})},external.stop=function(view){var $view=$(view),pop=$view.data("tooltip.it");if($view.off(".tooltip"),tooltip)tooltip.close()},external.start("body"),external};if("function"==typeof define&&define.amd)define("js/lib/tooltips",["jquery","js/lib/lucid","underscore","js/lib/data.attributes"],function($,LucidJS,_,DataAttributes){return Tooltips($,LucidJS,_,DataAttributes)});else if("undefined"!=typeof window&&"undefined"==typeof ender)window.Tooltip=Tooltips(window.$,window.LucidJS,window._,window.DataAttributes)}(),!function(wndw){var Module=function($,_,cookie,LucidJS,Moment,DataAttributes){var _private={defaults:{"bind.close":"click","attribute.data":"data-readme","attribute.close":"data-readme-close","class":"readme",expires:null,"show.count":0,"show.until.closed":!1,"show.delay":1e3,"animate.open":null,"animate.close":null,"animate.duration":250,type:"banner"},open:!1,stack:[],getReadMe:function(el,options){var readme=$(el).data("readme.me");if(readme&&readme.constructor==ReadMe.prototype.constructor)if(options)return readme.customize(options);else return readme;else return null},makeReadMe:function(el,options){var $el=$(el),readme=_private.getReadMe($el);if(!readme)readme=new ReadMe($el,options),$el.data("readme.me",readme);return readme},getCount:function(){var times,cookieName=this.options["attribute.data"]+"-"+this.$el.attr(this.options["attribute.data"]);if(this.options["show.count"])return times=cookie.get(cookieName),times?parseInt(times,10):0;return 0},increaseCount:function(){var cookieName=this.options["attribute.data"]+"-"+this.$el.attr(this.options["attribute.data"]);if(this.options["show.count"]){var times=_private.getCount.call(this)+1;return cookie.set(cookieName,times,{expires:36500}),times}return 0},canShow:function(){var count=_private.getCount.call(this),max=this.options["show.count"]?parseInt(this.options["show.count"],10):0,expires=this.options.expires,show=!0;if(expires&&Moment(expires).diff(Moment())<0)return this.emitter.trigger("expired"),!1;if(max&&count>=max)return this.emitter.trigger("aged"),!1;if(_private.open)return _private.stack.push(this),!1;return _private.open=!0,!0}},ReadMe=function(el,options){var that=this;this.$el=$(el),this.emitter=LucidJS.emitter(this),this.customize(options),window.setTimeout(function(){that.open()},this.options["show.delay"]||0)};ReadMe.prototype.customize=function(settings){var that=this,height;if(this.options=_.extend({},DataAttributes.parse(this.$el,_private.defaults,"data-readme-"),settings),this.$el.addClass(this.options["class"]),"banner"==this.options.type)this.$el.css({visibility:"hidden"}).show(),height=this.$el.outerHeight(),this.$el.css({visibility:"visible"}).hide(),this.options["animate.open"]={"margin-top":0},this.options["animate.close"]={"margin-top":-height},this.options["animate.duration"]=250,this.on("opening",function(){that.$el.css({visibility:"visible","margin-top":-height}).show().prependTo($("body"))});else if("footer-sticky"==this.options.type)this.$el.css({visibility:"hidden"}).show(),height=this.$el.outerHeight(),this.$el.css({visibility:"visible"}).hide(),this.options["animate.open"]={bottom:0},this.options["animate.close"]={bottom:-height},this.options["animate.duration"]=250,this.on("opening",function(){that.$el.css({visibility:"visible",position:"absolute",left:0,right:0,bottom:-height}).show().appendTo($("body"))});return this},ReadMe.prototype.open=function(){var that=this;if(_private.canShow.call(this)){if(!this.options["show.until.closed"]&&this.options["show.count"])_private.increaseCount.call(this);if(this.emitter.trigger("opening"),_private.stack.push(this),this.$el.on(this.options["bind.close"]+".readme","["+this.options["attribute.close"]+"]",function(){if(that.options["show.until.closed"]&&that.options["show.count"])_private.increaseCount.call(that);that.close()}),this.$el.is("["+this.options["attribute.close"]+"]"))this.$el.on(this.options["bind.close"]+".readme",function(){if(that.options["show.until.closed"]&&that.options["show.count"])_private.increaseCount.call(that);that.close()});if(this.options["animate.open"])this.$el.css({"margin-top":-100}).prependTo($("body")).show(),this.$el.animate(this.options["animate.open"],{duration:this.options["animate.duration"],complete:function(){that.emitter.trigger("open")}});else this.$el.show(),this.emitter.trigger("open")}},ReadMe.prototype.close=function(){var that=this;if(this.trigger("closing"),_private.stack.shift(),this.options["animate.close"])this.$el.animate(this.options["animate.close"],{duration:this.options["animate.duration"],complete:function(){if(that.$el.off(".readme"),that.$el.hide().remove(),that.emitter.trigger("close"),_private.open=!1,_private.stack.length)_private.stack[0].open()}});else if(this.$el.off(".readme"),this.$el.hide().remove(),this.emitter.trigger("close"),_private.open=!1,_private.stack.length)_private.stack[0].open()};var external=function(el,options){return _private.getReadMe(el,options)||_private.makeReadMe(el,options)};return external};if("function"==typeof define&&define.amd)define("js/lib/readme",["jquery","underscore","js/lib/cookie","js/lib/lucid","js/lib/moment","js/lib/data.attributes"],function($,_,cookie,LucidJS,Moment,DataAttributes){return Module($,_,cookie,LucidJS,Moment,DataAttributes)});else if("undefined"!=typeof window&&"undefined"==typeof ender)wndw.ReadMe=Module(wndw.$,wndw._,wndw.Cookie,wndw.LucidJS,wndw.moment,wndw.DataAttributes)}(window),!function(){var BootstrapTabs=function($){var Tab=function(element){this.element=$(element)};Tab.prototype={constructor:Tab,show:function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.attr("data-target"),previous,$target,e;if(!selector)selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"");if($this.parent("li").hasClass("active"))return;if(previous=$ul.find(".active:last a")[0],e=$.Event("show",{relatedTarget:previous}),$this.trigger(e),e.isDefaultPrevented())return;$target=$(selector),this.activate($this.parent("li"),$ul),this.activate($target,$target.parent(),function(){$this.trigger({type:"shown",relatedTarget:previous})})},activate:function(element,container,callback){function next(){if($active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),element.addClass("active"),transition)element[0].offsetWidth,element.addClass("in");else element.removeClass("fade");if(element.parent(".dropdown-menu"))element.closest("li.dropdown").addClass("active");callback&&callback()}var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");transition?$active.one($.support.transition.end,next):next(),$active.removeClass("in")}};var old=$.fn.tab;$.fn.tab=function(option){return this.each(function(){var $this=$(this),data=$this.data("tab");if(!data)$this.data("tab",data=new Tab(this));if("string"==typeof option)data[option]()})},$.fn.tab.Constructor=Tab,$.fn.tab.noConflict=function(){return $.fn.tab=old,this},$(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),$(this).tab("show")})};if("function"==typeof define&&define.amd)define("js/lib/bootstrap-tabs",["jquery"],function($){BootstrapTabs($)});else if("undefined"!=typeof window&&"undefined"==typeof ender)BootstrapTabs(window.$)}(),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp;return buf.push('<div data-state="loading">Loading...</div><div data-state="load-error">Load Error!</div><div data-state="question,submitting,feedback,submit-error" class="coursera-assess-assessment-quickQuestions"><div data-question-container="data-question-container" class="coursera-assess-assessment-quickQuestions-question"></div><div data-state="question,submitting,feedback,submit-error" class="coursera-assess-assessment-quickQuestions-bar"><div><button data-submit="data-submit" data-state="question,submit-error" class="btn-flat btn-flat-default">Submit</button><button disabled="disabled" data-state="submitting" class="btn-flat btn-flat-default">Submit</button><button data-next-question="data-next-question" data-state="feedback" class="btn-flat btn-flat-default">Next Question</button><a data-skip-question="data-skip-question" href="javascript:void(0);" data-state="question,submit-error" class="coursera-assess-assessment-quickQuestions-skip">skip</a></div><div><span data-state="submitting">Submitting...</span><span data-state="submit-error">Submit error! Please try again.</span></div></div></div><div data-state="no-more-questions"><span>You have answered all the poll questions!</span></div>'),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/assessmentTypes/quickQuestions/assessment.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.assessmentTypes.quickQuestions.assessment"]=jadify(wndw.jade.helpers)}(window),define("bundles/assess/lib/backbone.hascollections",["backbone","underscore"],function(Backbone,_){var HasCollectionsModel=Backbone.Model.extend({relations:{},set:function(key,value,options){var self=this,attrs;if(_.isObject(key))attrs=_(key).clone(),options=value;else attrs={},attrs[key]=value;_(self.relations).each(function(Collection,key){if(!_.has(self.attributes,key))self.attributes[key]=new Collection,self.attributes[key].on("all",self._onCollectionEvent,self),self.attributes[key].relationParent=self;if(!_.has(attrs,key))return;var collection=self.attributes[key],newItems=attrs[key];if(options&&options.merge)_(newItems).each(function(newItem){var oldItem=collection.get(newItem.id);if(oldItem)oldItem.set(newItem,options);else collection.add(newItem,options)});else collection.reset(newItems,options);delete attrs[key]}),Backbone.Model.prototype.set.call(self,attrs,options)},toJSON:function(){var self=this,json=Backbone.Model.prototype.toJSON.call(self);return _(self.relations).each(function(relation,key){var collection=self.attributes[key];json[key]=collection.toJSON()}),json},_onCollectionEvent:function(eventName){if(_(["change","add","remove"]).contains(eventName)){var options;if("change"==eventName)options=arguments[2];else options=arguments[3];this.trigger("change",this,options)}}});return HasCollectionsModel}),define("bundles/assess/assessmentTypes/SessionModel",["bundles/assess/lib/backbone.hascollections","js/lib/q"],function(HasCollectionsModel,Q){var SessionModel=HasCollectionsModel.extend({callSessionAction:function(name,argument){var url="sessions/"+this.get("sessionId")+"/action/"+name;return Q(this.options.api.post(url,{data:{argument:argument}})).then(function(data){return data["return"]})},callGetOrCreateSession:function(){return Q(this.options.api.post("sessions")).then(function(data){return data.session.id})}});return SessionModel}),define("js/lib/underscore.extend",["underscore"],function(_){var courseraSimpleDeepClone=function(obj){if(_(obj).isArray())return _(obj).map(function(e){return courseraSimpleDeepClone(e)});else if(_(obj).isObject()&&!_(obj).isFunction()){var clone={};return _(obj).chain().keys().each(function(key){clone[key]=courseraSimpleDeepClone(obj[key])}).value(),clone}else return _(obj).clone()};return _.mixin({courseraPick:function(object,keys){var copy={};return _(keys).each(function(key){copy[key]=object[key]}),copy},courseraSimpleDeepClone:courseraSimpleDeepClone}),_}),define("bundles/assess/framework/QuestionModel",["backbone","js/lib/underscore.extend"],function(Backbone,_){var QuestionModel=Backbone.Model.extend({questionInstanceAttributes:["localResponse","effectiveResponse","variant","feedback","id"],initialize:function(){this._loadEffectiveResponseIntoLocalResponse(),this.on("change:effectiveResponse",this._loadEffectiveResponseIntoLocalResponse,this),this.on("change:localResponse",this._handleLocalResponseChange,this)},_loadEffectiveResponseIntoLocalResponse:function(){if(this.get("effectiveResponse"))this.set("localResponse",this.get("effectiveResponse").response,{reason:"loadfromeffective"});else this.set("localResponse",null,{reason:"loadfromeffective"})},_handleLocalResponseChange:function(model,changes,options){if("userinput"==options.reason)this._persistLocalResponseLocally()},_persistLocalResponseLocally:function(){},toLocalJson:function(){var data=Backbone.Model.prototype.toJSON.call(this);return _(data).courseraPick(this.questionInstanceAttributes)},toResponseJson:function(){return{timestamp:null,questionInstance:this.get("id"),response:this.get("localResponse")}},isInstanceChanged:function(){return _(this.changed).chain().keys().intersection(this.questionInstanceAttributes).value().length>0}});return QuestionModel}),define("bundles/assess/framework/QuestionCollection",["backbone","underscore","js/lib/q","bundles/assess/framework/QuestionModel"],function(Backbone,_,Q,QuestionModel){var QuestionCollection=Backbone.Collection.extend({model:QuestionModel,addMerge:function(data){var self=this;_(data).each(function(datum){var model=self.get(datum.id);if(model)model.set(datum);else self.add(new self.model(datum))})},toResponseJson:function(){return this.map(function(model){return model.toResponseJson()})}});return QuestionCollection}),define("bundles/assess/assessmentTypes/quickQuestions/sessionModel",["bundles/assess/assessmentTypes/SessionModel","underscore","js/lib/q","bundles/assess/framework/QuestionCollection","bundles/assess/framework/QuestionModel"],function(SessionModel,_,Q,QuestionCollection,QuestionModel){var QuickQuestionsSessionModel=SessionModel.extend({defaults:{state:"nothing",assessmentId:"",classId:null,sessionId:"",question:null},submit:function(){var self=this;if(!_(["question","submit-error"]).contains(self.get("state")))throw"Called submit in not allowed state";if(null===self.get("question"))return;var question=self.get("question");self.set("state","submitting");var response=question.toResponseJson();self.callSessionAction("submitResponse",response).then(function(data){data.effectiveResponse=response,self.set("question",new QuestionModel(data)),self.set("state","feedback")},function(err){self.set("state","submit-error")}).done()},fetch:function(){var self=this;if(!_(["nothing"]).contains(self.get("state")))throw"Called fetch in not allowed state";if(!this.has("classId")||!this.has("assessmentId"))throw"Can't get assessment without a classId and an assessmentId";self.set("state","loading"),Q.fcall(function(){if(self.get("sessionId"))return self.get("sessionId");else return self.callGetOrCreateSession()}).then(function(sessionId){self.set("sessionId",sessionId),self.fetchQuestion()},function(err){self.set("state","load-error")}).done()},fetchQuestion:function(skip){var self=this;if(!(_(["feedback","loading"]).contains(self.get("state"))&&!skip||_(["question","submit-error"]).contains(self.get("state"))&&skip))throw"Called fetchQuestion in not allowed state!";self.set("state","loading"),self.callSessionAction(skip?"skipQuestion":"getCurrentQuestion",[]).then(function(data){if(null===data)self.set("question",null),self.set("state","no-more-questions");else self.set("question",new QuestionModel(data)),self.set("state","question")},function(err){self.set("state","load-error")}).done()}});return QuickQuestionsSessionModel}),!function(wndw){var module=function(thirdparties){var initialized=!1,mathJaxCB=function(cb){return function(){if(initialized)return cb();return initialized=!0,MathJax.Hub.Config({config:["MMLorHTML.js"],styleSheets:[],styles:{},jax:["input/TeX"],extensions:["tex2jax.js"],preJax:null,postJax:null,preRemoveClass:"MathJax_Preview",showProcessingMessages:!0,messageStyle:"none",displayAlign:"center",displayIndent:"0em",delayStartupUntil:"none",skipStartupTypeset:!1,elements:[],tex2jax:{inlineMath:[["$$","$$"],["\\(","\\)"]],displayMath:[["\\[","\\]"]],skipTags:["script","noscript","style","textarea","pre","code"],ignoreClass:"tex2jax_ignore",processClass:"tex2jax_process",processEscapes:!1,processEnvironments:!0,preview:"TeX"},mml2jax:{preview:"alttext"},jsMath2jax:{preview:"TeX"},TeX:{TagSide:"right",TagIndent:".8em",MultLineWidth:"85%",Macros:{},extensions:["AMSmath.js","AMSsymbols.js"]},MathML:{useMathMLspacing:!1},"HTML-CSS":{scale:100,availableFonts:["STIX","TeX"],preferredFont:"TeX",webFont:"TeX",imageFont:"TeX",undefinedFamily:"STIXGeneral,'Arial Unicode MS',serif",showMathMenu:!0,styles:{},tooltip:{delayPost:600,delayClear:600,offsetX:10,offsetY:5}},NativeMML:{scale:100,showMathMenu:!0,showMathMenuMSIE:!0,styles:{}},MathMenu:{delay:400,helpURL:"http://www.mathjax.org/help/user/",showRenderer:!0,showFontMenu:!1,showContext:!1,windowSettings:{status:"no",toolbar:"no",locationbar:"no",menubar:"no",directories:"no",personalbar:"no",resizable:"yes",scrollbars:"yes",width:100,height:50},styles:{}},MMLorHTML:{prefer:{MSIE:"MML",Firefox:"MML",Opera:"HTML",other:"HTML"}}}),MathJax.Hub.Configured(),cb()}};return{render:function(dom,cb){var callback=mathJaxCB(function(){if(dom)MathJax.Hub.Queue(["Typeset",MathJax.Hub,dom],cb);else MathJax.Hub.Queue(["Typeset",MathJax.Hub],cb)});thirdparties.ready("MathJax",callback)}}};if("function"==typeof define&&define.amd)define("js/lib/coursera.mathjax",["js/lib/third-parties"],function(thirdparties){return module(thirdparties)});else wndw.mathjax=module(window.thirdparties)}(window),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(headerTemplate,isSubmitted,showFeedbackIcon,isCorrect,index,instance,optionTemplate,normalizedFeedback){if(headerTemplate)buf.push(null==(jade_interp=headerTemplate())?"":jade_interp);if(isSubmitted&&showFeedbackIcon)buf.push("<i"+jade.cls(["fa","c-feedback-icon",isCorrect?"fa-check":"fa-times"],[null,null,!0])+"></i>");if(buf.push('<div data-js="user-html" class="coursera-assess-question-optionBase-prompt">'),index)buf.push('<span class="c-assess-question-number">'+jade.escape(null==(jade_interp=index)?"":jade_interp)+".&nbsp;</span>");buf.push('<span class="c-assess-question-title">'+(null==(jade_interp=instance.variant.prompt)?"":jade_interp)+"</span></div>"),function(){var $$obj=instance.variant.options;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var option=$$obj[$index];if(buf.push('<div data-option="data-option" class="coursera-assess-question-optionBase-option">'+(null==(jade_interp=optionTemplate({option:option,instanceId:instance.id}))?"":jade_interp)+"</div>"),normalizedFeedback&&normalizedFeedback[option.id]){var optionFeedback=normalizedFeedback[option.id];if(optionFeedback.isCorrect)buf.push('<div class="coursera-assess-question-optionBase-feedback-arrow coursera-assess-question-optionBase-feedback-arrow-correct"></div><div data-js="user-html" class="bt3-alert bt3-alert-success alert alert-success coursera-assess-question-optionBase-feedback"><strong>Well done!&nbsp;</strong>'+(null==(jade_interp=optionFeedback.feedbackDisplay)?"":jade_interp)+"</div>");
else buf.push('<div class="coursera-assess-question-optionBase-feedback-arrow coursera-assess-question-optionBase-feedback-arrow-incorrect"></div><div data-js="user-html" class="bt3-alert bt3-alert-danger alert alert-danger coursera-assess-question-optionBase-feedback"><strong>Sorry, that\'s incorrect.&nbsp;</strong>'+(null==(jade_interp=optionFeedback.feedbackDisplay)?"":jade_interp)+"</div>")}}else{var $$l=0;for(var $index in $$obj){$$l++;var option=$$obj[$index];if(buf.push('<div data-option="data-option" class="coursera-assess-question-optionBase-option">'+(null==(jade_interp=optionTemplate({option:option,instanceId:instance.id}))?"":jade_interp)+"</div>"),normalizedFeedback&&normalizedFeedback[option.id]){var optionFeedback=normalizedFeedback[option.id];if(optionFeedback.isCorrect)buf.push('<div class="coursera-assess-question-optionBase-feedback-arrow coursera-assess-question-optionBase-feedback-arrow-correct"></div><div data-js="user-html" class="bt3-alert bt3-alert-success alert alert-success coursera-assess-question-optionBase-feedback"><strong>Well done!&nbsp;</strong>'+(null==(jade_interp=optionFeedback.feedbackDisplay)?"":jade_interp)+"</div>");else buf.push('<div class="coursera-assess-question-optionBase-feedback-arrow coursera-assess-question-optionBase-feedback-arrow-incorrect"></div><div data-js="user-html" class="bt3-alert bt3-alert-danger alert alert-danger coursera-assess-question-optionBase-feedback"><strong>Sorry, that\'s incorrect.&nbsp;</strong>'+(null==(jade_interp=optionFeedback.feedbackDisplay)?"":jade_interp)+"</div>")}}}}.call(this)}("headerTemplate"in locals_for_with?locals_for_with.headerTemplate:"undefined"!=typeof headerTemplate?headerTemplate:void 0,"isSubmitted"in locals_for_with?locals_for_with.isSubmitted:"undefined"!=typeof isSubmitted?isSubmitted:void 0,"showFeedbackIcon"in locals_for_with?locals_for_with.showFeedbackIcon:"undefined"!=typeof showFeedbackIcon?showFeedbackIcon:void 0,"isCorrect"in locals_for_with?locals_for_with.isCorrect:"undefined"!=typeof isCorrect?isCorrect:void 0,"index"in locals_for_with?locals_for_with.index:"undefined"!=typeof index?index:void 0,"instance"in locals_for_with?locals_for_with.instance:"undefined"!=typeof instance?instance:void 0,"optionTemplate"in locals_for_with?locals_for_with.optionTemplate:"undefined"!=typeof optionTemplate?optionTemplate:void 0,"normalizedFeedback"in locals_for_with?locals_for_with.normalizedFeedback:"undefined"!=typeof normalizedFeedback?normalizedFeedback:void 0),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/questionTypes/optionBase/student/template.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.questionTypes.optionBase.student.template"]=jadify(wndw.jade.helpers)}(window),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(option){buf.push('<div data-js="user-html">'+(null==(jade_interp=option.display)?"":jade_interp)+"</div>")}("option"in locals_for_with?locals_for_with.option:"undefined"!=typeof option?option:void 0),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/questionTypes/optionBase/student/optionTemplate.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.questionTypes.optionBase.student.optionTemplate"]=jadify(wndw.jade.helpers)}(window),define("bundles/assess/questionTypes/optionBase/student/view",["underscore","backbone","js/lib/coursera.mathjax","bundles/assess/questionTypes/optionBase/student/template.html","bundles/assess/questionTypes/optionBase/student/optionTemplate.html"],function(_,Backbone,courseraMathjax,template,optionTemplate){var OptionBase=Backbone.View.extend({events:{"click [data-option]":"clickOption"},className:"coursera-assess-question-optionBase",headerTemplate:null,supportedStyles:["coursera-assess-style-question-default","coursera-assess-style-question-quick","coursera-assess-style-question-in-video","coursera-assess-style-question-survey"],initialize:function(options){this.options=this.options||options||{}},clickOption:function(evt){this.trigger("change")},render:function(){var instance=this.options.instance,feedback=instance.feedback;this.$el.html(template({instance:instance,normalizedFeedback:this.normalizeFeedback(instance),optionTemplate:this.optionTemplate,headerTemplate:this.headerTemplate,index:this.options.index,showFeedbackIcon:this.options.showFeedbackIcon,isSubmitted:!!feedback,isCorrect:feedback?feedback.definition.isCorrect:null})),this.renderExtra(),courseraMathjax.render(this.$el[0])},disableInput:function(){this.$("input").attr("disabled",!0),this.$("[data-option]").addClass("coursera-assess-question-optionBase-option-disabled")},enableInput:function(){this.$("input").attr("disabled",!1),this.$("[data-option]").removeClass("coursera-assess-question-optionBase-option-disabled")},optionTemplate:optionTemplate,serializeResponse:function(){return{}},normalizeFeedback:function(instance){return{}},renderExtra:function(){}});return OptionBase}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(instanceId,option){buf.push('<label><input type="checkbox"'+jade.attr("name",instanceId,!0,!1)+jade.attr("value",option.id,!0,!1)+' class="coursera-assess-question-optionBase-option-input"/><div data-js="user-html" class="coursera-assess-question-optionBase-option-text">'+(null==(jade_interp=option.display)?"":jade_interp)+"</div></label>")}("instanceId"in locals_for_with?locals_for_with.instanceId:"undefined"!=typeof instanceId?instanceId:void 0,"option"in locals_for_with?locals_for_with.option:"undefined"!=typeof option?option:void 0),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/questionTypes/checkbox/student/optionTemplate.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.questionTypes.checkbox.student.optionTemplate"]=jadify(wndw.jade.helpers)}(window),define("bundles/assess/questionTypes/checkbox/student/view",["jquery","underscore","bundles/assess/questionTypes/optionBase/student/view","bundles/assess/questionTypes/checkbox/student/optionTemplate.html"],function($,_,OptionBaseView,optionTemplate){var CheckboxView=OptionBaseView.extend({optionTemplate:optionTemplate,className:OptionBaseView.prototype.className+" coursera-assess-question-checkbox",normalizeFeedback:function(instance){var feedback=instance.feedback;if(!feedback)return!1;var options=feedback.definition.options,normalizedFeedback={};return _(options).each(function(option){normalizedFeedback[option.id]={isCorrect:option.isCorrect,feedbackDisplay:option.feedback}}),normalizedFeedback},renderExtra:function(){var self=this,feedback=self.options.instance.feedback;if(self.options.instance.localResponse){var responseVals=self.options.instance.localResponse.chosen;_(responseVals).each(function(responseVal){self.$('input[value="'+responseVal+'"]').attr("checked",!0)})}if(feedback&&feedback.definition&&feedback.definition.isCorrect)this.$el.addClass("c-correct");else this.$el.addClass("c-incorrect")},serializeResponse:function(){var chosen=_(this.$("input:checked")).map(function(input){return $(input).val()});return{chosen:chosen}}});return CheckboxView}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(prompt,options,isIdChosen,myResponseChosenId,totalNumResponsesPretty,totalNumResponses){if(buf.push('<h4 class="coursera-assess-question-pollBase-header">Poll Results</h4><div data-js="user-html" class="coursera-assess-question-optionBase-prompt">'+(null==(jade_interp=prompt)?"":jade_interp)+"</div>"),function(){var $$obj=options;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var option=$$obj[$index],extraClass="";if(isIdChosen(myResponseChosenId,option.id))extraClass="coursera-assess-question-pollBase-feedback-option-chosen";buf.push("<div"+jade.cls(["coursera-assess-question-pollBase-feedback-option",extraClass],[null,!0])+'><div data-js="user-html" class="coursera-assess-question-pollBase-feedback-option-display">'+(null==(jade_interp=option.display)?"":jade_interp)+'</div><div class="coursera-assess-question-pollBase-feedback-option-bar">');var prettyPercent=(100*option.fraction).toFixed(0).toString()+"%",percent=(100*option.fraction).toString()+"%",complementPercent=(100*(1-option.fraction)).toString()+"%",barStyle="width:"+percent+";",textStyle;if(option.fraction<=.8)textStyle="left:"+percent+";";else textStyle="right:"+complementPercent+";color:#fff;";buf.push("<div"+jade.attr("style",barStyle,!0,!1)+' class="coursera-assess-question-pollBase-feedback-option-bar-filling">&nbsp;</div><div'+jade.attr("style",textStyle,!0,!1)+' class="coursera-assess-question-pollBase-feedback-option-bar-text">'+jade.escape(null==(jade_interp=prettyPercent)?"":jade_interp)+"</div></div></div>")}else{var $$l=0;for(var $index in $$obj){$$l++;var option=$$obj[$index],extraClass="";if(isIdChosen(myResponseChosenId,option.id))extraClass="coursera-assess-question-pollBase-feedback-option-chosen";buf.push("<div"+jade.cls(["coursera-assess-question-pollBase-feedback-option",extraClass],[null,!0])+'><div data-js="user-html" class="coursera-assess-question-pollBase-feedback-option-display">'+(null==(jade_interp=option.display)?"":jade_interp)+'</div><div class="coursera-assess-question-pollBase-feedback-option-bar">');var prettyPercent=(100*option.fraction).toFixed(0).toString()+"%",percent=(100*option.fraction).toString()+"%",complementPercent=(100*(1-option.fraction)).toString()+"%",barStyle="width:"+percent+";",textStyle;if(option.fraction<=.8)textStyle="left:"+percent+";";else textStyle="right:"+complementPercent+";color:#fff;";buf.push("<div"+jade.attr("style",barStyle,!0,!1)+' class="coursera-assess-question-pollBase-feedback-option-bar-filling">&nbsp;</div><div'+jade.attr("style",textStyle,!0,!1)+' class="coursera-assess-question-pollBase-feedback-option-bar-text">'+jade.escape(null==(jade_interp=prettyPercent)?"":jade_interp)+"</div></div></div>")}}}.call(this),buf.push('<div class="coursera-assess-question-pollBase-feedback-number">'+jade.escape(null==(jade_interp=totalNumResponsesPretty)?"":jade_interp)),1==totalNumResponses)buf.push(" response");else buf.push(" responses");if(buf.push("</div>"),20>totalNumResponses)buf.push('<div class="coursera-assess-question-pollBase-feedback-low-response-message">You were one of the first people to answer this question. </div><div class="coursera-assess-question-pollBase-feedback-low-response-message">Check back later to see more responses. </div>')}("prompt"in locals_for_with?locals_for_with.prompt:"undefined"!=typeof prompt?prompt:void 0,"options"in locals_for_with?locals_for_with.options:"undefined"!=typeof options?options:void 0,"isIdChosen"in locals_for_with?locals_for_with.isIdChosen:"undefined"!=typeof isIdChosen?isIdChosen:void 0,"myResponseChosenId"in locals_for_with?locals_for_with.myResponseChosenId:"undefined"!=typeof myResponseChosenId?myResponseChosenId:void 0,"totalNumResponsesPretty"in locals_for_with?locals_for_with.totalNumResponsesPretty:"undefined"!=typeof totalNumResponsesPretty?totalNumResponsesPretty:void 0,"totalNumResponses"in locals_for_with?locals_for_with.totalNumResponses:"undefined"!=typeof totalNumResponses?totalNumResponses:void 0),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/questionTypes/pollBase/student/feedbackTemplate.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.questionTypes.pollBase.student.feedbackTemplate"]=jadify(wndw.jade.helpers)}(window),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(instanceId,option){buf.push('<label><input type="radio"'+jade.attr("name",instanceId,!0,!1)+jade.attr("value",option.id,!0,!1)+' class="coursera-assess-question-optionBase-option-input"/><div data-js="user-html" class="coursera-assess-question-optionBase-option-text">'+(null==(jade_interp=option.display)?"":jade_interp)+"</div></label>")}("instanceId"in locals_for_with?locals_for_with.instanceId:"undefined"!=typeof instanceId?instanceId:void 0,"option"in locals_for_with?locals_for_with.option:"undefined"!=typeof option?option:void 0),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/questionTypes/pollBase/student/optionTemplate.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.questionTypes.pollBase.student.optionTemplate"]=jadify(wndw.jade.helpers)}(window),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp;return buf.push('<h4 class="coursera-assess-question-pollBase-header">Poll</h4>'),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/questionTypes/pollBase/student/headerTemplate.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.questionTypes.pollBase.student.headerTemplate"]=jadify(wndw.jade.helpers)}(window),define("bundles/assess/questionTypes/pollBase/student/view",["underscore","js/lib/coursera.mathjax","bundles/assess/questionTypes/optionBase/student/view","bundles/assess/questionTypes/pollBase/student/feedbackTemplate.html","bundles/assess/questionTypes/pollBase/student/optionTemplate.html","bundles/assess/questionTypes/pollBase/student/headerTemplate.html","js/lib/util"],function(_,courseraMathjax,OptionBaseView,feedbackTemplate,optionTemplate,headerTemplate,util){var PollBaseView=OptionBaseView.extend({optionTemplate:optionTemplate,className:OptionBaseView.prototype.className+" coursera-assess-question-pollBase",headerTemplate:headerTemplate,supportedStyles:["coursera-assess-style-question-in-video","coursera-assess-style-question-default","coursera-assess-style-question-quick","coursera-assess-style-question-survey"],initialize:function(options){this.options=this.options||options||{}},isIdChosen:function(chosen,id){return!1},getTotalNumberResponses:function(){return 0},isAChosenOptionZero:function(chosen,histogram){return!1},renderHistogram:function(prompt,options,histogram,myResponseChosenId){var self=this,totalNumResponses=this.getTotalNumberResponses(),isSubmissionNotCounted=this.isAChosenOptionZero(myResponseChosenId,histogram);if(isSubmissionNotCounted)totalNumResponses+=1;var annotatedOptions=_(options).map(function(variantOption){var histogramOption=_(histogram).find(function(histogramOption){return variantOption.id===histogramOption.id})||{id:variantOption.id,count:0};if(isSubmissionNotCounted&&self.isIdChosen(myResponseChosenId,histogramOption.id))histogramOption.count+=1;return _({}).extend(variantOption,{count:histogramOption.count})}),fractionAnnotatedOptions=_(annotatedOptions).map(function(annotatedOption){var fraction=annotatedOption.count/totalNumResponses;return _({}).extend(annotatedOption,{fraction:fraction})});this.$el.html(feedbackTemplate({prompt:prompt,options:fractionAnnotatedOptions,totalNumResponses:totalNumResponses,totalNumResponsesPretty:util.addCommas(totalNumResponses.toString()),myResponseChosenId:myResponseChosenId,isIdChosen:this.isIdChosen}))},render:function(){var instance=this.options.instance;if(instance.variant.histogram)this.renderHistogram(instance.variant.prompt,instance.variant.options,instance.variant.histogram,instance.variant.previousResponse);else if(instance.feedback)this.renderHistogram(instance.variant.prompt,instance.variant.options,instance.feedback.definition.options,instance.effectiveResponse.response.chosen);else OptionBaseView.prototype.render.call(this)}});return PollBaseView}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(instanceId,option){buf.push('<label><input type="checkbox"'+jade.attr("name",instanceId,!0,!1)+jade.attr("value",option.id,!0,!1)+' class="coursera-assess-question-optionBase-option-input"/><div data-js="user-html" class="coursera-assess-question-optionBase-option-text">'+(null==(jade_interp=option.display)?"":jade_interp)+"</div></label>")}("instanceId"in locals_for_with?locals_for_with.instanceId:"undefined"!=typeof instanceId?instanceId:void 0,"option"in locals_for_with?locals_for_with.option:"undefined"!=typeof option?option:void 0),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/questionTypes/checkboxPoll/student/optionTemplate.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.questionTypes.checkboxPoll.student.optionTemplate"]=jadify(wndw.jade.helpers)}(window),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp;return buf.push('<h4 class="coursera-assess-question-pollBase-header">Checkbox Poll</h4>'),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/questionTypes/checkboxPoll/student/headerTemplate.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.questionTypes.checkboxPoll.student.headerTemplate"]=jadify(wndw.jade.helpers)}(window),define("bundles/assess/questionTypes/checkboxPoll/student/view",["underscore","js/lib/coursera.mathjax","bundles/assess/questionTypes/pollBase/student/view","bundles/assess/questionTypes/checkboxPoll/student/optionTemplate.html","bundles/assess/questionTypes/checkboxPoll/student/headerTemplate.html","js/lib/util"],function(_,courseraMathjax,PollBaseView,optionTemplate,headerTemplate,util){var CheckboxPoll=PollBaseView.extend({optionTemplate:optionTemplate,className:PollBaseView.prototype.className+" coursera-assess-question-checkbox-poll",headerTemplate:headerTemplate,initialize:function(options){this.options=this.options||options||{}},isIdChosen:function(chosen,id){return _(chosen).contains(id)},isAChosenOptionZero:function(chosen,histogram){var chosenHistogramOptions=_(histogram).filter(function(histogramOption){return _(chosen).contains(histogramOption.id)&&0!==histogramOption.count});return chosenHistogramOptions.length!==chosen.length},getTotalNumberResponses:function(){var instance=this.options.instance;if(instance.variant.histogram)return instance.variant.numResponses;else if(instance.feedback)return instance.feedback.definition.numResponses},renderExtra:function(){if(this.options.instance.localResponse){var self=this,responseVals=this.options.instance.localResponse.chosen;_(responseVals).each(function(responseVal){self.$('input[value="'+responseVal+'"]').attr("checked",!0)})}},serializeResponse:function(){var chosen=_(this.$("input:checked")).map(function(input){return $(input).val()});return{chosen:chosen}}});return CheckboxPoll}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(prompt){buf.push('<div data-js="user-html">'+(null==(jade_interp=prompt)?"":jade_interp)+"</div>")}("prompt"in locals_for_with?locals_for_with.prompt:"undefined"!=typeof prompt?prompt:void 0),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/questionTypes/continue/student/template.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.questionTypes.continue.student.template"]=jadify(wndw.jade.helpers)}(window),define("bundles/assess/questionTypes/continue/student/view",["backbone","js/lib/coursera.mathjax","bundles/assess/questionTypes/continue/student/template.html"],function(Backbone,courseraMathjax,template){var ContinueQuestion=Backbone.View.extend({className:"coursera-assess-question-continue",supportedStyles:["coursera-assess-style-question-default","coursera-assess-style-question-in-video"],initialize:function(options){this.options=this.options||options||{}},render:function(){this.$el.html(template({prompt:this.options.instance.variant.prompt})),courseraMathjax.render(this.$el[0])},serializeResponse:function(){return{}},disableInput:function(){},enableInput:function(){}});return ContinueQuestion}),function(){var root=this,previousUnderscore=root._,breaker={},ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,_=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if("undefined"!=typeof exports){if("undefined"!=typeof module&&module.exports)exports=module.exports=_;exports._=_}else root._=_;_.VERSION="1.6.0";var each=_.each=_.forEach=function(obj,iterator,context){if(null==obj)return obj;if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,length=obj.length;length>i;i++)if(iterator.call(context,obj[i],i,obj)===breaker)return}else for(var keys=_.keys(obj),i=0,length=keys.length;length>i;i++)if(iterator.call(context,obj[keys[i]],keys[i],obj)===breaker)return;return obj};_.map=_.collect=function(obj,iterator,context){var results=[];if(null==obj)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);return each(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))}),results};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator)}if(each(obj,function(value,index,list){if(!initial)memo=value,initial=!0;else memo=iterator.call(context,memo,value,index,list)}),!initial)throw new TypeError(reduceError);return memo},_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator)}var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}if(each(obj,function(value,index,list){if(index=keys?keys[--length]:--length,!initial)memo=obj[index],initial=!0;else memo=iterator.call(context,memo,obj[index],index,list)}),!initial)throw new TypeError(reduceError);return memo},_.find=_.detect=function(obj,predicate,context){var result;return any(obj,function(value,index,list){if(predicate.call(context,value,index,list))return result=value,!0}),result},_.filter=_.select=function(obj,predicate,context){var results=[];if(null==obj)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(predicate,context);return each(obj,function(value,index,list){if(predicate.call(context,value,index,list))results.push(value)}),results},_.reject=function(obj,predicate,context){return _.filter(obj,function(value,index,list){return!predicate.call(context,value,index,list)},context)},_.every=_.all=function(obj,predicate,context){predicate||(predicate=_.identity);var result=!0;if(null==obj)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(predicate,context);return each(obj,function(value,index,list){if(!(result=result&&predicate.call(context,value,index,list)))return breaker}),!!result};var any=_.some=_.any=function(obj,predicate,context){predicate||(predicate=_.identity);var result=!1;if(null==obj)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(predicate,context);return each(obj,function(value,index,list){if(result||(result=predicate.call(context,value,index,list)))return breaker}),!!result};_.contains=_.include=function(obj,target){if(null==obj)return!1;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return-1!=obj.indexOf(target);return any(obj,function(value){return value===target})},_.invoke=function(obj,method){var args=slice.call(arguments,2),isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,_.property(key))},_.where=function(obj,attrs){return _.filter(obj,_.matches(attrs))},_.findWhere=function(obj,attrs){return _.find(obj,_.matches(attrs))},_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.max.apply(Math,obj);var result=-1/0,lastComputed=-1/0;return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;if(computed>lastComputed)result=value,lastComputed=computed}),result},_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.min.apply(Math,obj);var result=1/0,lastComputed=1/0;return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;if(lastComputed>computed)result=value,lastComputed=computed}),result},_.shuffle=function(obj){var rand,index=0,shuffled=[];return each(obj,function(value){rand=_.random(index++),shuffled[index-1]=shuffled[rand],shuffled[rand]=value}),shuffled},_.sample=function(obj,n,guard){if(null==n||guard){if(obj.length!==+obj.length)obj=_.values(obj);return obj[_.random(obj.length-1)]}return _.shuffle(obj).slice(0,Math.max(0,n))};var lookupIterator=function(value){if(null==value)return _.identity;if(_.isFunction(value))return value;return _.property(value)};_.sortBy=function(obj,iterator,context){return iterator=lookupIterator(iterator),_.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(a>b||void 0===a)return 1;if(b>a||void 0===b)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iterator,context){var result={};return iterator=lookupIterator(iterator),each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)}),result}};_.groupBy=group(function(result,key,value){_.has(result,key)?result[key].push(value):result[key]=[value]}),_.indexBy=group(function(result,key,value){result[key]=value}),_.countBy=group(function(result,key){_.has(result,key)?result[key]++:result[key]=1}),_.sortedIndex=function(array,obj,iterator,context){iterator=lookupIterator(iterator);for(var value=iterator.call(context,obj),low=0,high=array.length;high>low;){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low},_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(obj.length===+obj.length)return _.map(obj,_.identity);return _.values(obj)},_.size=function(obj){if(null==obj)return 0;return obj.length===+obj.length?obj.length:_.keys(obj).length},_.first=_.head=_.take=function(array,n,guard){if(null==array)return void 0;if(null==n||guard)return array[0];if(0>n)return[];return slice.call(array,0,n)},_.initial=function(array,n,guard){return slice.call(array,0,array.length-(null==n||guard?1:n))},_.last=function(array,n,guard){if(null==array)return void 0;if(null==n||guard)return array[array.length-1];return slice.call(array,Math.max(array.length-n,0))},_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,null==n||guard?1:n)},_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){if(shallow&&_.every(input,_.isArray))return concat.apply(output,input);return each(input,function(value){if(_.isArray(value)||_.isArguments(value))shallow?push.apply(output,value):flatten(value,shallow,output);else output.push(value)}),output};_.flatten=function(array,shallow){return flatten(array,shallow,[])},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.partition=function(array,predicate,context){predicate=lookupIterator(predicate);var pass=[],fail=[];return each(array,function(elem){(predicate.call(context,elem)?pass:fail).push(elem)}),[pass,fail]},_.uniq=_.unique=function(array,isSorted,iterator,context){if(_.isFunction(isSorted))context=iterator,iterator=isSorted,isSorted=!1;var initial=iterator?_.map(array,iterator,context):array,results=[],seen=[];return each(initial,function(value,index){if(isSorted?!index||seen[seen.length-1]!==value:!_.contains(seen,value))seen.push(value),results.push(array[index])}),results},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.contains(other,item)})})},_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})},_.zip=function(){for(var length=_.max(_.pluck(arguments,"length").concat(0)),results=new Array(length),i=0;length>i;i++)results[i]=_.pluck(arguments,""+i);return results},_.object=function(list,values){if(null==list)return{};for(var result={},i=0,length=list.length;length>i;i++)if(values)result[list[i]]=values[i];else result[list[i][0]]=list[i][1];return result},_.indexOf=function(array,item,isSorted){if(null==array)return-1;var i=0,length=array.length;if(isSorted)if("number"==typeof isSorted)i=0>isSorted?Math.max(0,length+isSorted):isSorted;else return i=_.sortedIndex(array,item),array[i]===item?i:-1;if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;length>i;i++)if(array[i]===item)return i;return-1},_.lastIndexOf=function(array,item,from){if(null==array)return-1;var hasIndex=null!=from;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item);for(var i=hasIndex?from:array.length;i--;)if(array[i]===item)return i;return-1},_.range=function(start,stop,step){if(arguments.length<=1)stop=start||0,start=0;step=arguments[2]||1;for(var length=Math.max(Math.ceil((stop-start)/step),0),idx=0,range=new Array(length);length>idx;)range[idx++]=start,start+=step;return range};var ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;return args=slice.call(arguments,2),bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result)return result;return self}},_.partial=function(func){var boundArgs=slice.call(arguments,1);return function(){for(var position=0,args=boundArgs.slice(),i=0,length=args.length;length>i;i++)if(args[i]===_)args[i]=arguments[position++];for(;position<arguments.length;)args.push(arguments[position++]);return func.apply(this,args)
}},_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(0===funcs.length)throw new Error("bindAll must be passed function names");return each(funcs,function(f){obj[f]=_.bind(obj[f],obj)}),obj},_.memoize=function(func,hasher){var memo={};return hasher||(hasher=_.identity),function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))},_.throttle=function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=options.leading===!1?0:_.now(),timeout=null,result=func.apply(context,args),context=args=null};return function(){var now=_.now();if(!previous&&options.leading===!1)previous=now;var remaining=wait-(now-previous);if(context=this,args=arguments,0>=remaining)clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args),context=args=null;else if(!timeout&&options.trailing!==!1)timeout=setTimeout(later,remaining);return result}},_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result,later=function(){var last=_.now()-timestamp;if(wait>last)timeout=setTimeout(later,wait-last);else if(timeout=null,!immediate)result=func.apply(context,args),context=args=null};return function(){context=this,args=arguments,timestamp=_.now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow)result=func.apply(context,args),context=args=null;return result}},_.once=function(func){var ran=!1,memo;return function(){if(ran)return memo;return ran=!0,memo=func.apply(this,arguments),func=null,memo}},_.wrap=function(func,wrapper){return _.partial(wrapper,func)},_.compose=function(){var funcs=arguments;return function(){for(var args=arguments,i=funcs.length-1;i>=0;i--)args=[funcs[i].apply(this,args)];return args[0]}},_.after=function(times,func){return function(){if(--times<1)return func.apply(this,arguments)}},_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);return keys},_.values=function(obj){for(var keys=_.keys(obj),length=keys.length,values=new Array(length),i=0;length>i;i++)values[i]=obj[keys[i]];return values},_.pairs=function(obj){for(var keys=_.keys(obj),length=keys.length,pairs=new Array(length),i=0;length>i;i++)pairs[i]=[keys[i],obj[keys[i]]];return pairs},_.invert=function(obj){for(var result={},keys=_.keys(obj),i=0,length=keys.length;length>i;i++)result[obj[keys[i]]]=keys[i];return result},_.functions=_.methods=function(obj){var names=[];for(var key in obj)if(_.isFunction(obj[key]))names.push(key);return names.sort()},_.extend=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)obj[prop]=source[prop]}),obj},_.pick=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));return each(keys,function(key){if(key in obj)copy[key]=obj[key]}),copy},_.omit=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj)if(!_.contains(keys,key))copy[key]=obj[key];return copy},_.defaults=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)if(void 0===obj[prop])obj[prop]=source[prop]}),obj},_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)},_.tap=function(obj,interceptor){return interceptor(obj),obj};var eq=function(a,b,aStack,bStack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!=toString.call(b))return!1;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var length=aStack.length;length--;)if(aStack[length]==a)return bStack[length]==b;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&"constructor"in a&&"constructor"in b)return!1;aStack.push(a),bStack.push(b);var size=0,result=!0;if("[object Array]"==className){if(size=a.length,result=size==b.length)for(;size--&&(result=eq(a[size],b[size],aStack,bStack)););}else{for(var key in a)if(_.has(a,key))if(size++,!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break;if(result){for(key in b)if(_.has(b,key)&&!size--)break;result=!size}}return aStack.pop(),bStack.pop(),result};if(_.isEqual=function(a,b){return eq(a,b,[],[])},_.isEmpty=function(obj){if(null==obj)return!0;if(_.isArray(obj)||_.isString(obj))return 0===obj.length;for(var key in obj)if(_.has(obj,key))return!1;return!0},_.isElement=function(obj){return!(!obj||1!==obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"==toString.call(obj)},_.isObject=function(obj){return obj===Object(obj)},each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}}),!_.isArguments(arguments))_.isArguments=function(obj){return!(!obj||!_.has(obj,"callee"))};if("function"!=typeof/./)_.isFunction=function(obj){return"function"==typeof obj};_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))},_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj},_.isBoolean=function(obj){return obj===!0||obj===!1||"[object Boolean]"==toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.constant=function(value){return function(){return value}},_.property=function(key){return function(obj){return obj[key]}},_.matches=function(attrs){return function(obj){if(obj===attrs)return!0;for(var key in attrs)if(attrs[key]!==obj[key])return!1;return!0}},_.times=function(n,iterator,context){for(var accum=Array(Math.max(0,n)),i=0;n>i;i++)accum[i]=iterator.call(context,i);return accum},_.random=function(min,max){if(null==max)max=min,min=0;return min+Math.floor(Math.random()*(max-min+1))},_.now=Date.now||function(){return(new Date).getTime()};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){if(null==string)return"";return(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}}),_.result=function(object,property){if(null==object)return void 0;var value=object[property];return _.isFunction(value)?value.call(object):value},_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return push.apply(args,arguments),result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";if(text.replace(matcher,function(match,escape,interpolate,evaluate,offset){if(source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]}),escape)source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'";if(interpolate)source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'";if(evaluate)source+="';\n"+evaluate+"\n__p+='";return index=offset+match.length,match}),source+="';\n",!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){throw e.source=source,e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};return template.source="function("+(settings.variable||"obj")+"){\n"+source+"}",template},_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};if(_.mixin(_),each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;if(method.apply(obj,arguments),("shift"==name||"splice"==name)&&0===obj.length)delete obj[0];return result.call(this,obj)}}),each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}}),_.extend(_.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd)define("js/vendor/underscore.v1-6",[],function(){return _.noConflict()})}.call(this),!function(global,factory){if("object"==typeof module&&"object"==typeof module.exports)module.exports=global.document?factory(global,!0):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return factory(w)};else factory(global)}("undefined"!=typeof window?window:this,function(window,noGlobal){function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);if("function"===type||jQuery.isWindow(obj))return!1;if(1===obj.nodeType&&length)return!0;return"array"===type||0===length||"number"==typeof length&&length>0&&length-1 in obj}function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if("string"==typeof qualifier){if(risSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>=0!==not})}function sibling(cur,dir){for(;(cur=cur[dir])&&1!==cur.nodeType;);return cur}function createOptions(options){var object=optionsCache[options]={};return jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=!0}),object}function completed(){document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1),jQuery.ready()}function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=jQuery.expando+Math.random()}function dataAttr(elem,key,data){var name;if(void 0===data&&1===elem.nodeType)if(name="data-"+key.replace(rmultiDash,"-$1").toLowerCase(),data=elem.getAttribute(name),"string"==typeof data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}data_user.set(elem,key,data)}else data=void 0;return data}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(11!==content.nodeType?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){return elem.type=(null!==elem.getAttribute("type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match)elem.type=match[1];else elem.removeAttribute("type");return elem}function setGlobalEval(elems,refElements){for(var i=0,l=elems.length;l>i;i++)data_priv.set(elems[i],"globalEval",!refElements||data_priv.get(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(1!==dest.nodeType)return;if(data_priv.hasData(src))if(pdataOld=data_priv.access(src),pdataCur=data_priv.set(dest,pdataOld),events=pdataOld.events){delete pdataCur.handle,pdataCur.events={};for(type in events)for(i=0,l=events[type].length;l>i;i++)jQuery.event.add(dest,type,events[type][i])}if(data_user.hasData(src))udataOld=data_user.access(src),udataCur=jQuery.extend({},udataOld),data_user.set(dest,udataCur)}function getAll(context,tag){var ret=context.getElementsByTagName?context.getElementsByTagName(tag||"*"):context.querySelectorAll?context.querySelectorAll(tag||"*"):[];return void 0===tag||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if("input"===nodeName&&rcheckableType.test(src.type))dest.checked=src.checked;else if("input"===nodeName||"textarea"===nodeName)dest.defaultValue=src.defaultValue}function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle?window.getDefaultComputedStyle(elem[0]).display:jQuery.css(elem[0],"display");return elem.detach(),display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){if(display=actualDisplay(nodeName,doc),"none"===display||!display)iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement),doc=iframe[0].contentDocument,doc.write(),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach();elemdisplay[nodeName]=display}return display}function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;if(computed=computed||getStyles(elem))ret=computed.getPropertyValue(name)||computed[name];if(computed){if(""===ret&&!jQuery.contains(elem.ownerDocument,elem))ret=jQuery.style(elem,name);if(rnumnonpx.test(ret)&&rmargin.test(name))width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth}return void 0!==ret?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn())return void delete this.get;return(this.get=hookFn).apply(this,arguments)}}}function vendorPropName(style,name){if(name in style)return name;for(var capName=name[0].toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if(name=cssPrefixes[i]+capName,name in style)return name;return origName}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;4>i;i+=2){if("margin"===extra)val+=jQuery.css(elem,extra+cssExpand[i],!0,styles);if(isBorderBox){if("content"===extra)val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles);if("margin"!==extra)val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)}else if(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra)val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)}return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox="border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(0>=val||null==val){if(val=curCSS(elem,name,styles),0>val||null==val)val=elem.style[name];if(rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function showHide(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;length>index;index++){if(elem=elements[index],!elem.style)continue;if(values[index]=data_priv.get(elem,"olddisplay"),display=elem.style.display,show){if(!values[index]&&"none"===display)elem.style.display="";if(""===elem.style.display&&isHidden(elem))values[index]=data_priv.access(elem,"olddisplay",defaultDisplay(elem.nodeName))}else if(!values[index])if(hidden=isHidden(elem),display&&"none"!==display||!hidden)data_priv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))}for(index=0;length>index;index++){if(elem=elements[index],!elem.style)continue;if(!show||"none"===elem.style.display||""===elem.style.display)elem.style.display=show?values[index]||"":"none"}return elements}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function createFxNow(){return setTimeout(function(){fxNow=void 0}),fxNow=jQuery.now()}function genFx(type,includeWidth){var which,i=0,attrs={height:type};for(includeWidth=includeWidth?1:0;4>i;i+=2-includeWidth)which=cssExpand[i],attrs["margin"+which]=attrs["padding"+which]=type;if(includeWidth)attrs.opacity=attrs.width=type;return attrs}function createTween(value,prop,animation){for(var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;length>index;index++)if(tween=collection[index].call(animation,prop,value))return tween}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=data_priv.get(elem,"fxshow");if(!opts.queue){if(hooks=jQuery._queueHooks(elem,"fx"),null==hooks.unqueued)hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){if(!hooks.unqueued)oldfire()};hooks.unqueued++,anim.always(function(){anim.always(function(){if(hooks.unqueued--,!jQuery.queue(elem,"fx").length)hooks.empty.fire()})})}if(1===elem.nodeType&&("height"in props||"width"in props)){if(opts.overflow=[style.overflow,style.overflowX,style.overflowY],display=jQuery.css(elem,"display"),"none"===display)display=defaultDisplay(elem.nodeName);if("inline"===display&&"none"===jQuery.css(elem,"float"))style.display="inline-block"}if(opts.overflow)style.overflow="hidden",anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]});for(prop in props)if(value=props[prop],rfxtypes.exec(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show"))if("show"===value&&dataShow&&void 0!==dataShow[prop])hidden=!0;else continue;orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}if(!jQuery.isEmptyObject(orig)){if(dataShow){if("hidden"in dataShow)hidden=dataShow.hidden}else dataShow=data_priv.access(elem,"fxshow",{});if(toggle)dataShow.hidden=!hidden;if(hidden)jQuery(elem).show();else anim.done(function(){jQuery(elem).hide()});anim.done(function(){var prop;data_priv.remove(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])});for(prop in orig)if(tween=createTween(hidden?dataShow[prop]:0,prop,anim),!(prop in dataShow))if(dataShow[prop]=tween.start,hidden)tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value))easing=value[1],value=props[index]=value[0];if(index!==name)props[name]=value,delete props[index];if(hooks=jQuery.cssHooks[name],hooks&&"expand"in hooks){value=hooks.expand(value),delete props[name];for(index in value)if(!(index in props))props[index]=value[index],specialEasing[index]=easing}else specialEasing[name]=easing}}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;length>index;index++)animation.tweens[index].run(percent);if(deferred.notifyWith(elem,[animation,percent,remaining]),1>percent&&length)return remaining;else return deferred.resolveWith(elem,[animation]),!1},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;length>index;index++)animation.tweens[index].run(1);if(gotoEnd)deferred.resolveWith(elem,[animation,gotoEnd]);else deferred.rejectWith(elem,[animation,gotoEnd]);return this}}),props=animation.props;for(propFilter(props,animation.opts.specialEasing);length>index;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts))return result;if(jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start))animation.opts.start.call(elem,animation);return jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if("string"!=typeof dataTypeExpression)func=dataTypeExpression,dataTypeExpression="*";var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)if("+"===dataType[0])dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func);else(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if("string"==typeof dataTypeOrTransport&&!seekingTransport&&!inspected[dataTypeOrTransport])return options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1;else if(seekingTransport)return!(selected=dataTypeOrTransport)}),selected}var inspected={},seekingTransport=structure===transports;return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)if(void 0!==src[key])(flatOptions[key]?target:deep||(deep={}))[key]=src[key];if(deep)jQuery.extend(!0,target,deep);return target}function ajaxHandleResponses(s,jqXHR,responses){for(var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];)if(dataTypes.shift(),void 0===ct)ct=s.mimeType||jqXHR.getResponseHeader("Content-Type");if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType)firstDataType=type}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0])dataTypes.unshift(finalDataType);return responses[finalDataType]}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;){if(s.responseFields[current])jqXHR[s.responseFields[current]]=response;if(!prev&&isSuccess&&s.dataFilter)response=s.dataFilter(response,s.dataType);if(prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(conv=converters[prev+" "+current]||converters["* "+current],!conv)for(conv2 in converters)if(tmp=conv2.split(" "),tmp[1]===current)if(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]]){if(conv===!0)conv=converters[conv2];else if(converters[conv2]!==!0)current=tmp[0],dataTypes.unshift(tmp[1]);break}if(conv!==!0)if(conv&&s["throws"])response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}return{state:"success",data:response}}function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix))add(prefix,v);else buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)});else if(!traditional&&"object"===jQuery.type(obj))for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add);else add(prefix,obj)}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType&&elem.defaultView}var arr=[],slice=arr.slice,concat=arr.concat,push=arr.push,indexOf=arr.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,trim="".trim,support={},document=window.document,version="2.1.0",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return null!=num?0>num?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback,args){return jQuery.each(this,callback,args)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(0>i?len:0);return this.pushStack(j>=0&&len>j?[this[j]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice},jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;if("boolean"==typeof target)deep=target,target=arguments[i]||{},i++;if("object"!=typeof target&&!jQuery.isFunction(target))target={};if(i===length)target=this,i--;for(;length>i;i++)if(null!=(options=arguments[i]))for(name in options){if(src=target[name],copy=options[name],target===copy)continue;if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray)copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[];else clone=src&&jQuery.isPlainObject(src)?src:{};target[name]=jQuery.extend(deep,clone,copy)}else if(void 0!==copy)target[name]=copy}return target},jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:!0,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray,isWindow:function(obj){return null!=obj&&obj===obj.window},isNumeric:function(obj){return obj-parseFloat(obj)>=0},isPlainObject:function(obj){if("object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},type:function(obj){if(null==obj)return obj+"";return"object"==typeof obj||"function"==typeof obj?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(code){var script,indirect=eval;if(code=jQuery.trim(code))if(1===code.indexOf("use strict"))script=document.createElement("script"),script.text=code,document.head.appendChild(script).parentNode.removeChild(script);else indirect(code)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray)for(;length>i&&(value=callback.apply(obj[i],args),value!==!1);i++);else for(i in obj)if(value=callback.apply(obj[i],args),value===!1)break}else if(isArray)for(;length>i&&(value=callback.call(obj[i],i,obj[i]),value!==!1);i++);else for(i in obj)if(value=callback.call(obj[i],i,obj[i]),value===!1)break;return obj},trim:function(text){return null==text?"":trim.call(text)},makeArray:function(arr,results){var ret=results||[];if(null!=arr)if(isArraylike(Object(arr)))jQuery.merge(ret,"string"==typeof arr?[arr]:arr);else push.call(ret,arr);return ret},inArray:function(elem,arr,i){return null==arr?-1:indexOf.call(arr,elem,i)},merge:function(first,second){for(var len=+second.length,j=0,i=first.length;len>j;j++)first[i++]=second[j];return first.length=i,first},grep:function(elems,callback,invert){for(var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;length>i;i++)if(callbackInverse=!callback(elems[i],i),callbackInverse!==callbackExpect)matches.push(elems[i]);return matches},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray){for(;length>i;i++)if(value=callback(elems[i],i,arg),null!=value)ret.push(value)}else for(i in elems)if(value=callback(elems[i],i,arg),null!=value)ret.push(value);return concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if("string"==typeof context)tmp=fn[context],context=fn,fn=tmp;if(!jQuery.isFunction(fn))return void 0;return args=slice.call(arguments,2),proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||jQuery.guid++,proxy},now:Date.now,support:support}),jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});var Sizzle=function(window){function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document)setDocument(context);if(context=context||document,results=results||[],!selector||"string"!=typeof selector)return results;if(1!==(nodeType=context.nodeType)&&9!==nodeType)return[];if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1]){if(9===nodeType)if(elem=context.getElementById(m),elem&&elem.parentNode){if(elem.id===m)return results.push(elem),results}else return results;else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results;if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=9===nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){if(groups=tokenize(selector),old=context.getAttribute("id"))nid=old.replace(rescape,"\\$&");
else context.setAttribute("id",nid);for(nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{if(!old)context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength)delete cache[keys.shift()];return cache[key+" "]=value}var keys=[];return cache}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{if(div.parentNode)div.parentNode.removeChild(div);div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=attrs.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)if(seed[j=matchIndexes[i]])seed[j]=!(matches[j]=seed[j])})})}function testContext(context){return context&&typeof context.getElementsByTagName!==strundefined&&context}function setFilters(){}function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){if(!matched||(match=rcomma.exec(soFar))){if(match)soFar=soFar.slice(match[0].length)||soFar;groups.push(tokens=[])}if(matched=!1,match=rcombinators.exec(soFar))matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length);for(type in Expr.filter)if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match))))matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length);if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";len>i;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)if(matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)if(outerCache=elem[expando]||(elem[expando]={}),(oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];else if(outerCache[dir]=newCache,newCache[2]=matcher(elem,context,xml))return!0}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;len>i;i++)if(elem=unmatched[i])if(!filter||filter(elem,context,xml))if(newUnmatched.push(elem),mapped)map.push(i);return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando])postFilter=setMatcher(postFilter);if(postFinder&&!postFinder[expando])postFinder=setMatcher(postFinder,postSelector);return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher)matcher(matcherIn,matcherOut,context,xml);if(postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)if(elem=temp[i])matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem);if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)if(elem=matcherOut[i])temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1)seed[temp]=!(results[temp]=elem)}}else if(matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder)postFinder(null,results,matcherOut,xml);else push.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];len>i;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;len>j&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,j>i&&matcherFromTokens(tokens.slice(i,j)),len>j&&matcherFromTokens(tokens=tokens.slice(j)),len>j&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;if(outermost)outermostContext=context!==document&&context;for(;i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}if(outermost)dirruns=dirrunsUnique}if(bySet){if(elem=!matcher&&elem)matchedCount--;if(seed)unmatched.push(elem)}}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)if(!unmatched[i]&&!setMatched[i])setMatched[i]=pop.call(results);setMatched=condense(setMatched)}if(push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1)Sizzle.uniqueSort(results)}if(outermost)dirruns=dirrunsUnique,outermostContext=contextBackup;return unmatched};return bySet?markFunction(superMatcher):superMatcher}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;len>i;i++)Sizzle(selector,contexts[i],results);return results}function select(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed)if(1===match.length){if(tokens=match[0]=match[0].slice(0),tokens.length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0],!context)return results;selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if(find=Expr.find[type])if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context)){if(tokens.splice(i,1),selector=seed.length&&toSelector(tokens),!selector)return push.apply(results,seed),results;break}}return compile(selector,match)(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context),results}var i,support,Expr,getText,isXML,compile,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b)hasDuplicate=!0;return 0},strundefined="undefined",MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){for(var i=0,len=this.length;len>i;i++)if(this[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:([*^$|!~]?=)"+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:0>high?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?"HTML"!==documentElement.nodeName:!1},setDocument=Sizzle.setDocument=function(node){var hasCompare,doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;if(doc===document||9!==doc.nodeType||!doc.documentElement)return document;if(document=doc,docElem=doc.documentElement,documentIsHTML=!isXML(doc),parent&&parent!==parent.top)if(parent.addEventListener)parent.addEventListener("unload",function(){setDocument()},!1);else if(parent.attachEvent)parent.attachEvent("onunload",function(){setDocument()});if(support.attributes=assert(function(div){return div.className="i",!div.getAttribute("className")}),support.getElementsByTagName=assert(function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length}),support.getElementsByClassName=rnative.test(doc.getElementsByClassName)&&assert(function(div){return div.innerHTML="<div class='a'></div><div class='a i'></div>",div.firstChild.className="i",2===div.getElementsByClassName("i").length}),support.getById=assert(function(div){return docElem.appendChild(div).id=expando,!doc.getElementsByName||!doc.getElementsByName(expando).length}),support.getById)Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}};else delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}};if(Expr.find.TAG=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!==strundefined)return context.getElementsByTagName(tag)}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)if(1===elem.nodeType)tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!==strundefined&&documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],support.qsa=rnative.test(doc.querySelectorAll))assert(function(div){if(div.innerHTML="<select t=''><option selected=''></option></select>",div.querySelectorAll("[t^='']").length)rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")");if(!div.querySelectorAll("[selected]").length)rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")");if(!div.querySelectorAll(":checked").length)rbuggyQSA.push(":checked")}),assert(function(div){var input=doc.createElement("input");if(input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("name","D"),div.querySelectorAll("[name=d]").length)rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=");if(!div.querySelectorAll(":enabled").length)rbuggyQSA.push(":enabled",":disabled");div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")});if(support.matchesSelector=rnative.test(matches=docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)});return rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare)return compare;if(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&compare||!support.sortDetached&&b.compareDocumentPosition(a)===compare){if(a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a))return-1;if(b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b))return 1;return sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0}return 4&compare?-1:1}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0;else if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document)setDocument(elem);if(expr=expr.replace(rattributeQuotes,"='$1']"),!(!support.matchesSelector||!documentIsHTML||rbuggyMatches&&rbuggyMatches.test(expr)||rbuggyQSA&&rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0},Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document)setDocument(context);return contains(context,elem)},Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document)setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)if(elem===results[i])j=duplicates.push(i);for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType)for(;node=elem[i++];)ret+=getText(node);else if(1===nodeType||9===nodeType||11===nodeType)if("string"==typeof elem.textContent)return elem.textContent;else for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem);else if(3===nodeType||4===nodeType)return elem.nodeValue;return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){if(match[1]=match[1].replace(runescape,funescape),match[3]=(match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2])match[3]=" "+match[3]+" ";return match.slice(0,4)},CHILD:function(match){if(match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)){if(!match[3])Sizzle.error(match[0]);match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])}else if(match[3])Sizzle.error(match[0]);return match},PSEUDO:function(match){var excess,unquoted=!match[5]&&match[2];if(matchExpr.CHILD.test(match[0]))return null;if(match[3]&&void 0!==match[4])match[2]=match[4];else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length))match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess);return match.slice(0,3)}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(null==result)return"!="===operator;if(!operator)return!0;return result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result+" ").indexOf(check)>-1:"|="===operator?result===check||result.slice(0,check.length+1)===check+"-":!1}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(outerCache=parent[expando]||(parent[expando]={}),cache=outerCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if((ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)&&++diff){if(useCache)(node[expando]||(node[expando]={}))[type]=[dirruns,diff];if(node===elem)break}return diff-=last,diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando])return fn(argument);if(fn.length>1)return args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)idx=indexOf.call(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)};return fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)if(elem=unmatched[i])seed[i]=!(matches[i]=elem)}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){if(!ridentifier.test(lang||""))Sizzle.error("unsupported lang: "+lang);return lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return elemLang=elemLang.toLowerCase(),elemLang===lang||0===elemLang.indexOf(lang+"-");while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===!1},disabled:function(elem){return elem.disabled===!0},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){if(elem.parentNode)elem.parentNode.selectedIndex;return elem.selected===!0},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[0>argument?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}},Expr.pseudos.nth=Expr.pseudos.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);if(setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!group)group=tokenize(selector);for(i=group.length;i--;)if(cached=matcherFromTokens(group[i]),cached[expando])setMatchers.push(cached);else elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert(function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))}),!assert(function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")}))addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,"type"===name.toLowerCase()?1:2)});if(!support.attributes||!assert(function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")}))addHandle("value",function(elem,name,isXML){if(!isXML&&"input"===elem.nodeName.toLowerCase())return elem.defaultValue});if(!assert(function(div){return null==div.getAttribute("disabled")}))addHandle(booleans,function(elem,name,isXML){var val;if(!isXML)return elem[name]===!0?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null});return Sizzle}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not)expr=":not("+expr+")";return 1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return 1===elem.nodeType}))},jQuery.fn.extend({find:function(selector){var i,len=this.length,ret=[],self=this;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter(function(){for(i=0;len>i;i++)if(jQuery.contains(self[i],this))return!0}));for(i=0;len>i;i++)jQuery.find(selector,self[i],ret);return ret=this.pushStack(len>1?jQuery.unique(ret):ret),ret.selector=this.selector?this.selector+" "+selector:selector,ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context){var match,elem;if(!selector)return this;if("string"==typeof selector){if("<"===selector[0]&&">"===selector[selector.length-1]&&selector.length>=3)match=[null,selector,null];else match=rquickExpr.exec(selector);if(match&&(match[1]||!context))if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)if(jQuery.isFunction(this[match]))this[match](context[match]);else this.attr(match,context[match]);return this}else{if(elem=document.getElementById(match[2]),elem&&elem.parentNode)this.length=1,this[0]=elem;return this.context=document,this.selector=selector,this}else if(!context||context.jquery)return(context||rootjQuery).find(selector);else return this.constructor(context).find(selector)}else if(selector.nodeType)return this.context=this[0]=selector,this.length=1,this;else if(jQuery.isFunction(selector))return"undefined"!=typeof rootjQuery.ready?rootjQuery.ready(selector):selector(jQuery);if(void 0!==selector.selector)this.selector=selector.selector,this.context=selector.context;return jQuery.makeArray(selector,this)};init.prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.extend({dir:function(elem,dir,until){for(var matched=[],truncate=void 0!==until;(elem=elem[dir])&&9!==elem.nodeType;)if(1===elem.nodeType){if(truncate&&jQuery(elem).is(until))break;matched.push(elem)}return matched},sibling:function(n,elem){for(var matched=[];n;n=n.nextSibling)if(1===n.nodeType&&n!==elem)matched.push(n);return matched}}),jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){for(var i=0;l>i;i++)if(jQuery.contains(this,targets[i]))return!0})},closest:function(selectors,context){for(var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;l>i;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?pos.index(cur)>-1:1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},index:function(elem){if(!elem)return this[0]&&this[0].parentNode?this.first().prevAll().length:-1;if("string"==typeof elem)return indexOf.call(jQuery(elem),this[0]);return indexOf.call(this,elem.jquery?elem[0]:elem)},add:function(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))
},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if("Until"!==name.slice(-5))selector=until;if(selector&&"string"==typeof selector)matched=jQuery.filter(selector,matched);if(this.length>1){if(!guaranteedUnique[name])jQuery.unique(matched);if(rparentsprev.test(name))matched.reverse()}return this.pushStack(matched)}});var rnotwhite=/\S+/g,optionsCache={};jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||createOptions(options):jQuery.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,firing=!0;list&&firingLength>firingIndex;firingIndex++)if(list[firingIndex].apply(data[0],data[1])===!1&&options.stopOnFalse){memory=!1;break}if(firing=!1,list)if(stack){if(stack.length)fire(stack.shift())}else if(memory)list=[];else self.disable()},self={add:function(){if(list){var start=list.length;if(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if("function"===type){if(!options.unique||!self.has(arg))list.push(arg)}else if(arg&&arg.length&&"string"!==type)add(arg)})}(arguments),firing)firingLength=list.length;else if(memory)firingStart=start,fire(memory)}return this},remove:function(){if(list)jQuery.each(arguments,function(_,arg){for(var index;(index=jQuery.inArray(arg,list,index))>-1;)if(list.splice(index,1),firing){if(firingLength>=index)firingLength--;if(firingIndex>=index)firingIndex--}});return this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!(!list||!list.length)},empty:function(){return list=[],firingLength=0,this},disable:function(){return list=stack=memory=void 0,this},disabled:function(){return!list},lock:function(){if(stack=void 0,!memory)self.disable();return this},locked:function(){return!stack},fireWith:function(context,args){if(list&&(!fired||stack))if(args=args||[],args=[context,args.slice?args.slice():args],firing)stack.push(args);else fire(args);return this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise))returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify);else newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};if(promise.pipe=promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];if(promise[tuple[1]]=list.add,stateString)list.add(function(){state=stateString},tuples[1^i][2].disable,tuples[2][2].lock);deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func)func.call(deferred,deferred);return deferred},when:function(subordinate){var i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){if(contexts[i]=this,values[i]=arguments.length>1?slice.call(arguments):value,values===progressValues)deferred.notifyWith(contexts,values);else if(!--remaining)deferred.resolveWith(contexts,values)}},progressValues,progressContexts,resolveContexts;if(length>1)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);length>i;i++)if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise))resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues));else--remaining;if(!remaining)deferred.resolveWith(resolveContexts,resolveValues);return deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){return jQuery.ready.promise().done(fn),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(hold){if(hold)jQuery.readyWait++;else jQuery.ready(!0)},ready:function(wait){if(wait===!0?--jQuery.readyWait:jQuery.isReady)return;if(jQuery.isReady=!0,wait!==!0&&--jQuery.readyWait>0)return;if(readyList.resolveWith(document,[jQuery]),jQuery.fn.trigger)jQuery(document).trigger("ready").off("ready")}}),jQuery.ready.promise=function(obj){if(!readyList)if(readyList=jQuery.Deferred(),"complete"===document.readyState)setTimeout(jQuery.ready);else document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1);return readyList.promise(obj)},jQuery.ready.promise();var access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=null==key;if("object"===jQuery.type(key)){chainable=!0;for(i in key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw)}else if(void 0!==value){if(chainable=!0,!jQuery.isFunction(value))raw=!0;if(bulk)if(raw)fn.call(elems,value),fn=null;else bulk=fn,fn=function(elem,key,value){return bulk.call(jQuery(elem),value)};if(fn)for(;len>i;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet};jQuery.acceptData=function(owner){return 1===owner.nodeType||9===owner.nodeType||!+owner.nodeType},Data.uid=1,Data.accepts=jQuery.acceptData,Data.prototype={key:function(owner){if(!Data.accepts(owner))return 0;var descriptor={},unlock=owner[this.expando];if(!unlock){unlock=Data.uid++;try{descriptor[this.expando]={value:unlock},Object.defineProperties(owner,descriptor)}catch(e){descriptor[this.expando]=unlock,jQuery.extend(owner,descriptor)}}if(!this.cache[unlock])this.cache[unlock]={};return unlock},set:function(owner,data,value){var prop,unlock=this.key(owner),cache=this.cache[unlock];if("string"==typeof data)cache[data]=value;else if(jQuery.isEmptyObject(cache))jQuery.extend(this.cache[unlock],data);else for(prop in data)cache[prop]=data[prop];return cache},get:function(owner,key){var cache=this.cache[this.key(owner)];return void 0===key?cache:cache[key]},access:function(owner,key,value){var stored;if(void 0===key||key&&"string"==typeof key&&void 0===value)return stored=this.get(owner,key),void 0!==stored?stored:this.get(owner,jQuery.camelCase(key));return this.set(owner,key,value),void 0!==value?value:key},remove:function(owner,key){var i,name,camel,unlock=this.key(owner),cache=this.cache[unlock];if(void 0===key)this.cache[unlock]={};else{if(jQuery.isArray(key))name=key.concat(key.map(jQuery.camelCase));else if(camel=jQuery.camelCase(key),key in cache)name=[key,camel];else name=camel,name=name in cache?[name]:name.match(rnotwhite)||[];for(i=name.length;i--;)delete cache[name[i]]}},hasData:function(owner){return!jQuery.isEmptyObject(this.cache[owner[this.expando]]||{})},discard:function(owner){if(owner[this.expando])delete this.cache[owner[this.expando]]}};var data_priv=new Data,data_user=new Data,rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({hasData:function(elem){return data_user.hasData(elem)||data_priv.hasData(elem)},data:function(elem,name,data){return data_user.access(elem,name,data)},removeData:function(elem,name){data_user.remove(elem,name)},_data:function(elem,name,data){return data_priv.access(elem,name,data)},_removeData:function(elem,name){data_priv.remove(elem,name)}}),jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(void 0===key){if(this.length)if(data=data_user.get(elem),1===elem.nodeType&&!data_priv.get(elem,"hasDataAttrs")){for(i=attrs.length;i--;)if(name=attrs[i].name,0===name.indexOf("data-"))name=jQuery.camelCase(name.slice(5)),dataAttr(elem,name,data[name]);data_priv.set(elem,"hasDataAttrs",!0)}return data}if("object"==typeof key)return this.each(function(){data_user.set(this,key)});return access(this,function(value){var data,camelKey=jQuery.camelCase(key);if(elem&&void 0===value){if(data=data_user.get(elem,key),void 0!==data)return data;if(data=data_user.get(elem,camelKey),void 0!==data)return data;if(data=dataAttr(elem,camelKey,void 0),void 0!==data)return data;return}this.each(function(){var data=data_user.get(this,camelKey);if(data_user.set(this,camelKey,value),-1!==key.indexOf("-")&&void 0!==data)data_user.set(this,key,value)})},null,value,arguments.length>1,null,!0)},removeData:function(key){return this.each(function(){data_user.remove(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;if(elem){if(type=(type||"fx")+"queue",queue=data_priv.get(elem,type),data)if(!queue||jQuery.isArray(data))queue=data_priv.access(elem,type,jQuery.makeArray(data));else queue.push(data);return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if("inprogress"===fn)fn=queue.shift(),startLength--;if(fn){if("fx"===type)queue.unshift("inprogress");delete hooks.stop,fn.call(elem,next,hooks)}if(!startLength&&hooks)hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return data_priv.get(elem,key)||data_priv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(elem,[type+"queue",key])})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;if("string"!=typeof type)data=type,type="fx",setter--;if(arguments.length<setter)return jQuery.queue(this[0],type);return void 0===data?this:this.each(function(){var queue=jQuery.queue(this,type,data);if(jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0])jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!--count)defer.resolveWith(elements,[elements])};if("string"!=typeof type)obj=type,type=void 0;for(type=type||"fx";i--;)if(tmp=data_priv.get(elements[i],type+"queueHooks"),tmp&&tmp.empty)count++,tmp.empty.add(resolve);return resolve(),defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],isHidden=function(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)},rcheckableType=/^(?:checkbox|radio)$/i;!function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div"));div.innerHTML="<input type='radio' checked='checked' name='t'/>",support.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,div.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue}();var strundefined="undefined";support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;if(jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.get(elem);if(!elemData)return;if(handler.handler)handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector;if(!handler.guid)handler.guid=jQuery.guid++;if(!(events=elemData.events))events=elemData.events={};if(!(eventHandle=elemData.handle))eventHandle=elemData.handle=function(e){return typeof jQuery!==strundefined&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):void 0};for(types=(types||"").match(rnotwhite)||[""],t=types.length;t--;){if(tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),!type)continue;if(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),!(handlers=events[type]))if(handlers=events[type]=[],handlers.delegateCount=0,!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===!1)if(elem.addEventListener)elem.addEventListener(type,eventHandle,!1);if(special.add)if(special.add.call(elem,handleObj),!handleObj.handler.guid)handleObj.handler.guid=handler.guid;if(selector)handlers.splice(handlers.delegateCount++,0,handleObj);else handlers.push(handleObj);jQuery.event.global[type]=!0}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.hasData(elem)&&data_priv.get(elem);if(!elemData||!(events=elemData.events))return;for(types=(types||"").match(rnotwhite)||[""],t=types.length;t--;){if(tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),!type){for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);continue}for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,handlers=events[type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)if(handleObj=handlers[j],!(!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector))){if(handlers.splice(j,1),handleObj.selector)handlers.delegateCount--;if(special.remove)special.remove.call(elem,handleObj)}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===!1)jQuery.removeEvent(elem,type,elemData.handle);delete events[type]}}if(jQuery.isEmptyObject(events))delete elemData.handle,data_priv.remove(elem,"events")},trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3===elem.nodeType||8===elem.nodeType)return;if(rfocusMorph.test(type+jQuery.event.triggered))return;if(type.indexOf(".")>=0)namespaces=type.split("."),type=namespaces.shift(),namespaces.sort();if(ontype=type.indexOf(":")<0&&"on"+type,event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event),event.isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=void 0,!event.target)event.target=elem;if(data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===!1)return;if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){if(bubbleType=special.delegateType||type,!rfocusMorph.test(bubbleType+type))cur=cur.parentNode;for(;cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;if(tmp===(elem.ownerDocument||document))eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();){if(event.type=i>1?bubbleType:special.bindType||type,handle=(data_priv.get(cur,"events")||{})[event.type]&&data_priv.get(cur,"handle"))handle.apply(cur,data);if(handle=ontype&&cur[ontype],handle&&handle.apply&&jQuery.acceptData(cur))if(event.result=handle.apply(cur,data),event.result===!1)event.preventDefault()}if(event.type=type,!onlyHandlers&&!event.isDefaultPrevented())if((!special._default||special._default.apply(eventPath.pop(),data)===!1)&&jQuery.acceptData(elem))if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){if(tmp=elem[ontype])elem[ontype]=null;if(jQuery.event.triggered=type,elem[type](),jQuery.event.triggered=void 0,tmp)elem[ontype]=tmp}return event.result},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=slice.call(arguments),handlers=(data_priv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if(args[0]=event,event.delegateTarget=this,special.preDispatch&&special.preDispatch.call(this,event)===!1)return;for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)if(!event.namespace_re||event.namespace_re.test(handleObj.namespace))if(event.handleObj=handleObj,event.data=handleObj.data,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),void 0!==ret)if((event.result=ret)===!1)event.preventDefault(),event.stopPropagation();if(special.postDispatch)special.postDispatch.call(this,event);return event.result},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!==this;cur=cur.parentNode||this)if(cur.disabled!==!0||"click"!==event.type){for(matches=[],i=0;delegateCount>i;i++){if(handleObj=handlers[i],sel=handleObj.selector+" ",void 0===matches[sel])matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length;if(matches[sel])matches.push(handleObj)}if(matches.length)handlerQueue.push({elem:cur,handlers:matches})}if(delegateCount<handlers.length)handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)});return handlerQueue},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(null==event.which)event.which=null!=original.charCode?original.charCode:original.keyCode;return event}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button;if(null==event.pageX&&null!=original.clientX)eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);if(!event.which&&void 0!==button)event.which=1&button?1:2&button?3:4&button?2:0;return event}},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook)this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{};for(copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)prop=copy[i],event[prop]=originalEvent[prop];if(!event.target)event.target=document;if(3===event.target.nodeType)event.target=event.target.parentNode;return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&jQuery.nodeName(this,"input"))return this.click(),!1},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){if(void 0!==event.result)event.originalEvent.returnValue=event.result}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});if(bubble)jQuery.event.trigger(e,null,elem);else jQuery.event.dispatch.call(elem,e);if(e.isDefaultPrevented())event.preventDefault()}},jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener)elem.removeEventListener(type,handle,!1)},jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);if(src&&src.type)this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||void 0===src.defaultPrevented&&src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse;else this.type=src;if(props)jQuery.extend(this,props);this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;if(this.isDefaultPrevented=returnTrue,e&&e.preventDefault)e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;if(this.isPropagationStopped=returnTrue,e&&e.stopPropagation)e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related))event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix;return ret}}}),!support.focusinBubbles)jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix);if(!attaches)doc.addEventListener(orig,handler,!0);data_priv.access(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix)-1;if(!attaches)doc.removeEventListener(orig,handler,!0),data_priv.remove(doc,fix);else data_priv.access(doc,fix,attaches)}}});jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if("object"==typeof types){if("string"!=typeof selector)data=data||selector,selector=void 0;for(type in types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn)fn=selector,data=selector=void 0;else if(null==fn)if("string"==typeof selector)fn=data,data=void 0;else fn=data,data=selector,selector=void 0;if(fn===!1)fn=returnFalse;else if(!fn)return this;if(1===one)origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++);return this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"==typeof types){for(type in types)this.off(type,selector,types[type]);return this}if(selector===!1||"function"==typeof selector)fn=selector,selector=void 0;if(fn===!1)fn=returnFalse;return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,data,elem,!0)}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(!0),inPage=jQuery.contains(elem.ownerDocument,elem);if(!(support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0,l=srcElements.length;l>i;i++)fixInput(srcElements[i],destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0,l=srcElements.length;l>i;i++)cloneCopyEvent(srcElements[i],destElements[i]);else cloneCopyEvent(elem,clone);if(destElements=getAll(clone,"script"),destElements.length>0)setGlobalEval(destElements,!inPage&&getAll(elem,"script"));return clone},buildFragment:function(elems,context,scripts,selection){for(var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;l>i;i++)if(elem=elems[i],elem||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(!rhtml.test(elem))nodes.push(context.createTextNode(elem));else{for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;jQuery.merge(nodes,tmp.childNodes),tmp=fragment.firstChild,tmp.textContent=""}for(fragment.textContent="",i=0;elem=nodes[i++];){if(selection&&-1!==jQuery.inArray(elem,selection))continue;if(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(fragment.appendChild(elem),"script"),contains)setGlobalEval(tmp);if(scripts)for(j=0;elem=tmp[j++];)if(rscriptType.test(elem.type||""))scripts.push(elem)}return fragment},cleanData:function(elems){for(var data,elem,events,type,key,j,special=jQuery.event.special,i=0;void 0!==(elem=elems[i]);i++){if(jQuery.acceptData(elem))if(key=elem[data_priv.expando],key&&(data=data_priv.cache[key])){if(events=Object.keys(data.events||{}),events.length)for(j=0;void 0!==(type=events[j]);j++)if(special[type])jQuery.event.remove(elem,type);else jQuery.removeEvent(elem,type,data.handle);if(data_priv.cache[key])delete data_priv.cache[key]}delete data_user.cache[elem[data_user.expando]]}}}),jQuery.fn.extend({text:function(value){return access(this,function(value){return void 0===value?jQuery.text(this):this.empty().each(function(){if(1===this.nodeType||11===this.nodeType||9===this.nodeType)this.textContent=value})},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){if(this.parentNode)this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,function(elem){if(this.parentNode)this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){for(var elem,elems=selector?jQuery.filter(selector,this):this,i=0;null!=(elem=elems[i]);i++){if(!keepData&&1===elem.nodeType)jQuery.cleanData(getAll(elem));if(elem.parentNode){if(keepData&&jQuery.contains(elem.ownerDocument,elem))setGlobalEval(getAll(elem,"script"));elem.parentNode.removeChild(elem)}}return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++)if(1===elem.nodeType)jQuery.cleanData(getAll(elem,!1)),elem.textContent="";return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null==dataAndEvents?!1:dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(void 0===value&&1===elem.nodeType)return elem.innerHTML;if("string"==typeof value&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;l>i;i++)if(elem=this[i]||{},1===elem.nodeType)jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value;elem=0}catch(e){}}if(elem)this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var arg=arguments[0];return this.domManip(arguments,function(elem){if(arg=this.parentNode,jQuery.cleanData(getAll(this)),arg)arg.replaceChild(elem,this)}),arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,callback){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&"string"==typeof value&&!support.checkClone&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);if(isFunction)args[0]=value.call(this,index,self.html());self.domManip(args,callback)});if(l){if(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,this),first=fragment.firstChild,1===fragment.childNodes.length)fragment=first;if(first){for(scripts=jQuery.map(getAll(fragment,"script"),disableScript),hasScripts=scripts.length;l>i;i++){if(node=fragment,i!==iNoClone)if(node=jQuery.clone(node,!0,!0),hasScripts)jQuery.merge(scripts,getAll(node,"script"));callback.call(this[i],node,i)}if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;hasScripts>i;i++)if(node=scripts[i],rscriptType.test(node.type||"")&&!data_priv.access(node,"globalEval")&&jQuery.contains(doc,node))if(node.src){if(jQuery._evalUrl)jQuery._evalUrl(node.src)
}else jQuery.globalEval(node.textContent.replace(rcleanScript,""))}}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;last>=i;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),push.apply(ret,elems.get());return this.pushStack(ret)}});var iframe,elemdisplay={},rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),getStyles=function(elem){return elem.ownerDocument.defaultView.getComputedStyle(elem,null)};!function(){function computePixelPositionAndBoxSizingReliable(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",docElem.appendChild(container);var divStyle=window.getComputedStyle(div,null);pixelPositionVal="1%"!==divStyle.top,boxSizingReliableVal="4px"===divStyle.width,docElem.removeChild(container)}var pixelPositionVal,boxSizingReliableVal,divReset="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",docElem=document.documentElement,container=document.createElement("div"),div=document.createElement("div");if(div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",container.appendChild(div),window.getComputedStyle)jQuery.extend(support,{pixelPosition:function(){return computePixelPositionAndBoxSizingReliable(),pixelPositionVal},boxSizingReliable:function(){if(null==boxSizingReliableVal)computePixelPositionAndBoxSizingReliable();return boxSizingReliableVal},reliableMarginRight:function(){var ret,marginDiv=div.appendChild(document.createElement("div"));return marginDiv.style.cssText=div.style.cssText=divReset,marginDiv.style.marginRight=marginDiv.style.width="0",div.style.width="1px",docElem.appendChild(container),ret=!parseFloat(window.getComputedStyle(marginDiv,null).marginRight),docElem.removeChild(container),div.innerHTML="",ret}})}(),jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssPrefixes=["Webkit","O","Moz","ms"];jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(elem,name,value,extra){if(!elem||3===elem.nodeType||8===elem.nodeType||!elem.style)return;var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],void 0!==value){if(type=typeof value,"string"===type&&(ret=rrelNum.exec(value)))value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number";if(null==value||value!==value)return;if("number"===type&&!jQuery.cssNumber[origName])value+="px";if(!support.clearCloneStyle&&""===value&&0===name.indexOf("background"))style[name]="inherit";if(!(hooks&&"set"in hooks&&void 0===(value=hooks.set(elem,value,extra))))style[name]="",style[name]=value}else{if(hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,!1,extra)))return ret;return style[name]}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],hooks&&"get"in hooks)val=hooks.get(elem,!0,extra);if(void 0===val)val=curCSS(elem,name,styles);if("normal"===val&&name in cssNormalTransform)val=cssNormalTransform[name];if(""===extra||extra)return num=parseFloat(val),extra===!0||jQuery.isNumeric(num)?num||0:val;return val}}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)return 0===elem.offsetWidth&&rdisplayswap.test(jQuery.css(elem,"display"))?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed)return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){if(jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];4>i;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},!rmargin.test(prefix))jQuery.cssHooks[prefix+suffix].set=setPositiveNumber}),jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;len>i;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return void 0!==value?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){if("boolean"==typeof state)return state?this.show():this.hide();return this.each(function(){if(isHidden(this))jQuery(this).show();else jQuery(this).hide()})}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration)this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration);else this.pos=eased=percent;if(this.now=(this.end-this.start)*eased+this.start,this.options.step)this.options.step.call(this.elem,this.now,this);if(hooks&&hooks.set)hooks.set(this);else Tween.propHooks._default.set(this);return this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;if(null!=tween.elem[tween.prop]&&(!tween.elem.style||null==tween.elem.style[tween.prop]))return tween.elem[tween.prop];return result=jQuery.css(tween.elem,tween.prop,""),!result||"auto"===result?0:result},set:function(tween){if(jQuery.fx.step[tween.prop])jQuery.fx.step[tween.prop](tween);else if(tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop]))jQuery.style(tween.elem,tween.prop,tween.now+tween.unit);else tween.elem[tween.prop]=tween.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode)tween.elem[tween.prop]=tween.now}},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||"px"!==unit&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3],parts=parts||[],start=+target||1;do scale=scale||".5",start/=scale,jQuery.style(tween.elem,prop,start+unit);while(scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations)}if(parts)start=tween.start=+start||+target||0,tween.unit=unit,tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2];return tween}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props))callback=props,props=["*"];else props=props.split(" ");for(var prop,index=0,length=props.length;length>index;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){if(prepend)animationPrefilters.unshift(callback);else animationPrefilters.push(callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};if(opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,null==opt.queue||opt.queue===!0)opt.queue="fx";return opt.old=opt.complete,opt.complete=function(){if(jQuery.isFunction(opt.old))opt.old.call(this);if(opt.queue)jQuery.dequeue(this,opt.queue)},opt},jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||data_priv.get(this,"finish"))anim.stop(!0)};return doAnimation.finish=doAnimation,empty||optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};if("string"!=typeof type)gotoEnd=clearQueue,clearQueue=type,type=void 0;if(clearQueue&&type!==!1)this.queue(type||"fx",[]);return this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=data_priv.get(this);if(index){if(data[index]&&data[index].stop)stopQueue(data[index])}else for(index in data)if(data[index]&&data[index].stop&&rrun.test(index))stopQueue(data[index]);for(index=timers.length;index--;)if(timers[index].elem===this&&(null==type||timers[index].queue===type))timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1);if(dequeue||!gotoEnd)jQuery.dequeue(this,type)})},finish:function(type){if(type!==!1)type=type||"fx";return this.each(function(){var index,data=data_priv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;if(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop)hooks.stop.call(this,!0);for(index=timers.length;index--;)if(timers[index].elem===this&&timers[index].queue===type)timers[index].anim.stop(!0),timers.splice(index,1);for(index=0;length>index;index++)if(queue[index]&&queue[index].finish)queue[index].finish.call(this);delete data.finish})}}),jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.timers=[],jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;for(fxNow=jQuery.now();i<timers.length;i++)if(timer=timers[i],!timer()&&timers[i]===timer)timers.splice(i--,1);if(!timers.length)jQuery.fx.stop();fxNow=void 0},jQuery.fx.timer=function(timer){if(jQuery.timers.push(timer),timer())jQuery.fx.start();else jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){if(!timerId)timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval)},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox",support.checkOn=""!==input.value,support.optSelected=opt.selected,select.disabled=!0,support.optDisabled=!opt.disabled,input=document.createElement("input"),input.value="t",input.type="radio",support.radioValue="t"===input.value}();var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}}),jQuery.extend({attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(!elem||3===nType||8===nType||2===nType)return;if(typeof elem.getAttribute===strundefined)return jQuery.prop(elem,name,value);if(1!==nType||!jQuery.isXMLDoc(elem))name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook);if(void 0!==value)if(null===value)jQuery.removeAttr(elem,name);else if(hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name)))return ret;else return elem.setAttribute(name,value+""),value;else if(hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name)))return ret;else return ret=jQuery.find.attr(elem,name),null==ret?void 0:ret},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];){if(propName=jQuery.propFix[name]||name,jQuery.expr.match.bool.test(name))elem[propName]=!1;elem.removeAttribute(name)}},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;if(elem.setAttribute("type",value),val)elem.value=val;return value}}}}}),boolHook={set:function(elem,value,name){if(value===!1)jQuery.removeAttr(elem,name);else elem.setAttribute(name,name);return name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle;if(!isXML)handle=attrHandle[name],attrHandle[name]=ret,ret=null!=getter(elem,name,isXML)?name.toLowerCase():null,attrHandle[name]=handle;return ret}});var rfocusable=/^(?:input|select|textarea|button)$/i;if(jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}}),jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||3===nType||8===nType||2===nType)return;if(notxml=1!==nType||!jQuery.isXMLDoc(elem))name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name];if(void 0!==value)return hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:elem[name]=value;else return hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){return elem.hasAttribute("tabindex")||rfocusable.test(elem.nodeName)||elem.href?elem.tabIndex:-1}}}}),!support.optSelected)jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode)parent.parentNode.selectedIndex;return null}};jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed="string"==typeof value&&value,i=0,len=this.length;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ")){for(j=0;clazz=classes[j++];)if(cur.indexOf(" "+clazz+" ")<0)cur+=clazz+" ";if(finalValue=jQuery.trim(cur),elem.className!==finalValue)elem.className=finalValue}return this},removeClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed=0===arguments.length||"string"==typeof value&&value,i=0,len=this.length;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"")){for(j=0;clazz=classes[j++];)for(;cur.indexOf(" "+clazz+" ")>=0;)cur=cur.replace(" "+clazz+" "," ");if(finalValue=value?jQuery.trim(cur):"",elem.className!==finalValue)elem.className=finalValue}return this},toggleClass:function(value,stateVal){var type=typeof value;if("boolean"==typeof stateVal&&"string"===type)return stateVal?this.addClass(value):this.removeClass(value);if(jQuery.isFunction(value))return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)});return this.each(function(){if("string"===type)for(var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];className=classNames[i++];)if(self.hasClass(className))self.removeClass(className);else self.addClass(className);else if(type===strundefined||"boolean"===type){if(this.className)data_priv.set(this,"__className__",this.className);this.className=this.className||value===!1?"":data_priv.get(this,"__className__")||""}})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;l>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0)return!0;return!1}});var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){if(hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()],hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,"value")))return ret;return ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret}return}return isFunction=jQuery.isFunction(value),this.each(function(i){var val;if(1!==this.nodeType)return;if(isFunction)val=value.call(this,i,jQuery(this).val());else val=value;if(null==val)val="";else if("number"==typeof val)val+="";else if(jQuery.isArray(val))val=jQuery.map(val,function(value){return null==value?"":value+""});if(hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()],!(hooks&&"set"in hooks&&void 0!==hooks.set(this,val,"value")))this.value=val})}}),jQuery.extend({valHooks:{select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||0>index,values=one?null:[],max=one?index+1:options.length,i=0>index?max:one?index:0;max>i;i++)if(option=options[i],!(!option.selected&&i!==index||(support.optDisabled?option.disabled:null!==option.getAttribute("disabled"))||option.parentNode.disabled&&jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)if(option=options[i],option.selected=jQuery.inArray(jQuery(option).val(),values)>=0)optionSet=!0;if(!optionSet)elem.selectedIndex=-1;return values}}}}),jQuery.each(["radio","checkbox"],function(){if(jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value))return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}},!support.checkOn)jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var nonce=jQuery.now(),rquery=/\?/;jQuery.parseJSON=function(data){return JSON.parse(data+"")},jQuery.parseXML=function(data){var xml,tmp;if(!data||"string"!=typeof data)return null;try{tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml")}catch(e){xml=void 0}if(!xml||xml.getElementsByTagName("parsererror").length)jQuery.error("Invalid XML: "+data);return xml};var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(2===state)return;if(state=2,timeoutTimer)clearTimeout(timeoutTimer);if(transport=void 0,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,isSuccess=status>=200&&300>status||304===status,responses)response=ajaxHandleResponses(s,jqXHR,responses);if(response=ajaxConvert(s,response,jqXHR,isSuccess),isSuccess){if(s.ifModified){if(modified=jqXHR.getResponseHeader("Last-Modified"))jQuery.lastModified[cacheURL]=modified;if(modified=jqXHR.getResponseHeader("etag"))jQuery.etag[cacheURL]=modified}if(204===status||"HEAD"===s.type)statusText="nocontent";else if(304===status)statusText="notmodified";else statusText=response.state,success=response.data,error=response.error,isSuccess=!error}else if(error=statusText,status||!statusText)if(statusText="error",0>status)status=0;if(jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess)deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);else deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);if(jqXHR.statusCode(statusCode),statusCode=void 0,fireGlobals)globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]);if(completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals)if(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),!--jQuery.active)jQuery.event.trigger("ajaxStop")}if("object"==typeof url)options=url,url=void 0;options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();if(!state)name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value;return this},overrideMimeType:function(type){if(!state)s.mimeType=type;return this},statusCode:function(map){var code;if(map)if(2>state)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;if(transport)transport.abort(finalText);return done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""],null==s.crossDomain)parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?"80":"443"))===(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443")));if(s.data&&s.processData&&"string"!=typeof s.data)s.data=jQuery.param(s.data,s.traditional);if(inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;if(fireGlobals=s.global,fireGlobals&&0===jQuery.active++)jQuery.event.trigger("ajaxStart");if(s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,!s.hasContent){if(s.data)cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data,delete s.data;if(s.cache===!1)s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++}if(s.ifModified){if(jQuery.lastModified[cacheURL])jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]);if(jQuery.etag[cacheURL])jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])}if(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)jqXHR.setRequestHeader("Content-Type",s.contentType);jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===!1||2===state))return jqXHR.abort();strAbort="abort";for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR),!transport)done(-1,"No Transport");else{if(jqXHR.readyState=1,fireGlobals)globalEventContext.trigger("ajaxSend",[jqXHR,s]);if(s.async&&s.timeout>0)timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout);try{state=1,transport.send(requestHeaders,done)}catch(e){if(2>state)done(-1,e);else throw e}}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,void 0,callback,"script")}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data))type=type||callback,callback=data,data=void 0;return jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}}),jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},jQuery.fn.extend({wrapAll:function(html){var wrap;if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){if(wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode)wrap.insertBefore(this[0]);wrap.map(function(){for(var elem=this;elem.firstElementChild;)elem=elem.firstElementChild;return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))});return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length)contents.wrapAll(html);else self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body"))jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(void 0===traditional)traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional;if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();if(window.ActiveXObject)jQuery(window).on("unload",function(){for(var key in xhrCallbacks)xhrCallbacks[key]()});support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(options){var callback;
if(support.cors||xhrSupported&&!options.crossDomain)return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;if(xhr.open(options.type,options.url,options.async,options.username,options.password),options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];if(options.mimeType&&xhr.overrideMimeType)xhr.overrideMimeType(options.mimeType);if(!options.crossDomain&&!headers["X-Requested-With"])headers["X-Requested-With"]="XMLHttpRequest";for(i in headers)xhr.setRequestHeader(i,headers[i]);callback=function(type){return function(){if(callback)if(delete xhrCallbacks[id],callback=xhr.onload=xhr.onerror=null,"abort"===type)xhr.abort();else if("error"===type)complete(xhr.status,xhr.statusText);else complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,"string"==typeof xhr.responseText?{text:xhr.responseText}:void 0,xhr.getAllResponseHeaders())}},xhr.onload=callback(),xhr.onerror=callback("error"),callback=xhrCallbacks[id]=callback("abort"),xhr.send(options.hasContent&&options.data||null)},abort:function(){if(callback)callback()}}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){if(void 0===s.cache)s.cache=!1;if(s.crossDomain)s.type="GET"}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({async:!0,charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){if(script.remove(),callback=null,evt)complete("error"===evt.type?404:200,evt.type)}),document.head.appendChild(script[0])},abort:function(){if(callback)callback()}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==!1&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||"jsonp"===s.dataTypes[0]){if(callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp)s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName);else if(s.jsonp!==!1)s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName;return s.converters["script json"]=function(){if(!responseContainer)jQuery.error(callbackName+" was not called");return responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){if(window[callbackName]=overwritten,s[callbackName])s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName);if(responseContainer&&jQuery.isFunction(overwritten))overwritten(responseContainer[0]);responseContainer=overwritten=void 0}),"script"}}),jQuery.parseHTML=function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;if("boolean"==typeof context)keepScripts=context,context=!1;context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed)return[context.createElement(parsed[1])];if(parsed=jQuery.buildFragment([data],context,scripts),scripts&&scripts.length)jQuery(scripts).remove();return jQuery.merge([],parsed.childNodes)};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,type,response,self=this,off=url.indexOf(" ");if(off>=0)selector=url.slice(off),url=url.slice(0,off);if(jQuery.isFunction(params))callback=params,params=void 0;else if(params&&"object"==typeof params)type="POST";if(self.length>0)jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])});return this},jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var docElem=window.document.documentElement;if(jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if("static"===position)elem.style.position="relative";if(curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&(curCSSTop+curCSSLeft).indexOf("auto")>-1)curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left;else curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0;if(jQuery.isFunction(options))options=options.call(elem,i,curOffset);if(null!=options.top)props.top=options.top-curOffset.top+curTop;if(null!=options.left)props.left=options.left-curOffset.left+curLeft;if("using"in options)options.using.call(elem,props);else curElem.css(props)}},jQuery.fn.extend({offset:function(options){if(arguments.length)return void 0===options?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(!doc)return;if(docElem=doc.documentElement,!jQuery.contains(docElem,elem))return box;if(typeof elem.getBoundingClientRect!==strundefined)box=elem.getBoundingClientRect();return win=getWindow(doc),{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}},position:function(){if(!this[0])return;var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if("fixed"===jQuery.css(elem,"position"))offset=elem.getBoundingClientRect();else{if(offsetParent=this.offsetParent(),offset=this.offset(),!jQuery.nodeName(offsetParent[0],"html"))parentOffset=offsetParent.offset();parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||docElem;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(void 0===val)return win?win[prop]:elem[method];if(win)win.scrollTo(!top?val:window.pageXOffset,top?val:window.pageYOffset);else elem[method]=val},method,val,arguments.length,null)}}),jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed)return computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed})}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(margin===!0||value===!0?"margin":"border");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem))return elem.document.documentElement["client"+name];if(9===elem.nodeType)return doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name]);return void 0===value?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:void 0,chainable,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,"function"==typeof define&&define.amd)define("js/vendor/jquery.v2-1",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;if(jQuery.noConflict=function(deep){if(window.$===jQuery)window.$=_$;if(deep&&window.jQuery===jQuery)window.jQuery=_jQuery;return jQuery},typeof noGlobal===strundefined)window.jQuery=window.$=jQuery;return jQuery.noConflict()}),!function(root,factory){if("function"==typeof define&&define.amd)define("js/vendor/backbone.v1-1-2",["js/vendor/underscore.v1-6","js/vendor/jquery.v2-1","exports"],function(_,$,exports){root.Backbone=factory(root,exports,_,$)});else if("undefined"!=typeof exports){var _=require("underscore");factory(root,exports,_)}else root.Backbone=factory(root,{},root._,root.jQuery||root.Zepto||root.ender||root.$)}(this,function(root,Backbone,_,$){var previousBackbone=root.Backbone,array=[],push=array.push,slice=array.slice,splice=array.splice;Backbone.VERSION="1.1.2",Backbone.$=$,Backbone.noConflict=function(){return root.Backbone=previousBackbone,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var Events=Backbone.Events={on:function(name,callback,context){if(!eventsApi(this,"on",name,[callback,context])||!callback)return this;this._events||(this._events={});var events=this._events[name]||(this._events[name]=[]);return events.push({callback:callback,context:context,ctx:context||this}),this},once:function(name,callback,context){if(!eventsApi(this,"once",name,[callback,context])||!callback)return this;var self=this,once=_.once(function(){self.off(name,once),callback.apply(this,arguments)});return once._callback=callback,this.on(name,once,context)},off:function(name,callback,context){var retain,ev,events,names,i,l,j,k;if(!this._events||!eventsApi(this,"off",name,[callback,context]))return this;if(!name&&!callback&&!context)return this._events=void 0,this;for(names=name?[name]:_.keys(this._events),i=0,l=names.length;l>i;i++)if(name=names[i],events=this._events[name]){if(this._events[name]=retain=[],callback||context)for(j=0,k=events.length;k>j;j++)if(ev=events[j],callback&&callback!==ev.callback&&callback!==ev.callback._callback||context&&context!==ev.context)retain.push(ev);if(!retain.length)delete this._events[name]}return this},trigger:function(name){if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,"trigger",name,args))return this;var events=this._events[name],allEvents=this._events.all;if(events)triggerEvents(events,args);if(allEvents)triggerEvents(allEvents,arguments);return this},stopListening:function(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)return this;var remove=!name&&!callback;if(!callback&&"object"==typeof name)callback=this;if(obj)(listeningTo={})[obj._listenId]=obj;for(var id in listeningTo)if(obj=listeningTo[id],obj.off(name,callback,this),remove||_.isEmpty(obj._events))delete this._listeningTo[id];return this}},eventSplitter=/\s+/,eventsApi=function(obj,action,name,rest){if(!name)return!0;if("object"==typeof name){for(var key in name)obj[action].apply(obj,[key,name[key]].concat(rest));return!1}if(eventSplitter.test(name)){for(var names=name.split(eventSplitter),i=0,l=names.length;l>i;i++)obj[action].apply(obj,[names[i]].concat(rest));return!1}return!0},triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx);return;case 1:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:for(;++i<l;)(ev=events[i]).callback.apply(ev.ctx,args);return}},listenMethods={listenTo:"on",listenToOnce:"once"};_.each(listenMethods,function(implementation,method){Events[method]=function(obj,name,callback){var listeningTo=this._listeningTo||(this._listeningTo={}),id=obj._listenId||(obj._listenId=_.uniqueId("l"));if(listeningTo[id]=obj,!callback&&"object"==typeof name)callback=this;return obj[implementation](name,callback,this),this}}),Events.bind=Events.on,Events.unbind=Events.off,_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var attrs=attributes||{};if(options||(options={}),this.cid=_.uniqueId("c"),this.attributes={},options.collection)this.collection=options.collection;if(options.parse)attrs=this.parse(attrs,options)||{};attrs=_.defaults({},attrs,_.result(this,"defaults")),this.set(attrs,options),this.changed={},this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(options){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},has:function(attr){return null!=this.get(attr)},set:function(key,val,options){var attr,attrs,unset,changes,silent,changing,prev,current;if(null==key)return this;if("object"==typeof key)attrs=key,options=val;else(attrs={})[key]=val;if(options||(options={}),!this._validate(attrs,options))return!1;if(unset=options.unset,silent=options.silent,changes=[],changing=this._changing,this._changing=!0,!changing)this._previousAttributes=_.clone(this.attributes),this.changed={};if(current=this.attributes,prev=this._previousAttributes,this.idAttribute in attrs)this.id=attrs[this.idAttribute];for(attr in attrs){if(val=attrs[attr],!_.isEqual(current[attr],val))changes.push(attr);if(!_.isEqual(prev[attr],val))this.changed[attr]=val;else delete this.changed[attr];unset?delete current[attr]:current[attr]=val}if(!silent){if(changes.length)this._pending=options;for(var i=0,l=changes.length;l>i;i++)this.trigger("change:"+changes[i],this,current[changes[i]],options)}if(changing)return this;if(!silent)for(;this._pending;)options=this._pending,this._pending=!1,this.trigger("change",this,options);return this._pending=!1,this._changing=!1,this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:!0}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:!0}))},hasChanged:function(attr){if(null==attr)return!_.isEmpty(this.changed);return _.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):!1;var val,changed=!1,old=this._changing?this._previousAttributes:this.attributes;for(var attr in diff){if(_.isEqual(old[attr],val=diff[attr]))continue;(changed||(changed={}))[attr]=val}return changed},previous:function(attr){if(null==attr||!this._previousAttributes)return null;return this._previousAttributes[attr]},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){if(options=options?_.clone(options):{},void 0===options.parse)options.parse=!0;var model=this,success=options.success;return options.success=function(resp){if(!model.set(model.parse(resp,options),options))return!1;if(success)success(model,resp,options);model.trigger("sync",model,resp,options)},wrapError(this,options),this.sync("read",this,options)},save:function(key,val,options){var attrs,method,xhr,attributes=this.attributes;if(null==key||"object"==typeof key)attrs=key,options=val;else(attrs={})[key]=val;if(options=_.extend({validate:!0},options),attrs&&!options.wait){if(!this.set(attrs,options))return!1}else if(!this._validate(attrs,options))return!1;if(attrs&&options.wait)this.attributes=_.extend({},attributes,attrs);if(void 0===options.parse)options.parse=!0;var model=this,success=options.success;if(options.success=function(resp){model.attributes=attributes;var serverAttrs=model.parse(resp,options);if(options.wait)serverAttrs=_.extend(attrs||{},serverAttrs);if(_.isObject(serverAttrs)&&!model.set(serverAttrs,options))return!1;if(success)success(model,resp,options);model.trigger("sync",model,resp,options)},wrapError(this,options),method=this.isNew()?"create":options.patch?"patch":"update","patch"===method)options.attrs=attrs;if(xhr=this.sync(method,this,options),attrs&&options.wait)this.attributes=attributes;return xhr},destroy:function(options){options=options?_.clone(options):{};var model=this,success=options.success,destroy=function(){model.trigger("destroy",model,model.collection,options)};if(options.success=function(resp){if(options.wait||model.isNew())destroy();if(success)success(model,resp,options);if(!model.isNew())model.trigger("sync",model,resp,options)},this.isNew())return options.success(),!1;wrapError(this,options);var xhr=this.sync("delete",this,options);if(!options.wait)destroy();return xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();if(this.isNew())return base;return base.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(options){return this._validate({},_.extend(options||{},{validate:!0}))},_validate:function(attrs,options){if(!options.validate||!this.validate)return!0;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;if(!error)return!0;return this.trigger("invalid",this,error,_.extend(options,{validationError:error})),!1}});var modelMethods=["keys","values","pairs","invert","pick","omit"];_.each(modelMethods,function(method){Model.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.attributes),_[method].apply(_,args)}});var Collection=Backbone.Collection=function(models,options){if(options||(options={}),options.model)this.model=options.model;if(void 0!==options.comparator)this.comparator=options.comparator;if(this._reset(),this.initialize.apply(this,arguments),models)this.reset(models,_.extend({silent:!0},options))},setOptions={add:!0,remove:!0,merge:!0},addOptions={add:!0,remove:!1};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){return this.set(models,_.extend({merge:!1},options,addOptions))},remove:function(models,options){var singular=!_.isArray(models);models=singular?[models]:_.clone(models),options||(options={});var i,l,index,model;for(i=0,l=models.length;l>i;i++){if(model=models[i]=this.get(models[i]),!model)continue;if(delete this._byId[model.id],delete this._byId[model.cid],index=this.indexOf(model),this.models.splice(index,1),this.length--,!options.silent)options.index=index,model.trigger("remove",model,this,options);this._removeReference(model,options)}return singular?models[0]:models},set:function(models,options){if(options=_.defaults({},options,setOptions),options.parse)models=this.parse(models,options);var singular=!_.isArray(models);models=singular?models?[models]:[]:_.clone(models);var i,l,id,model,attrs,existing,sort,at=options.at,targetModel=this.model,sortable=this.comparator&&null==at&&options.sort!==!1,sortAttr=_.isString(this.comparator)?this.comparator:null,toAdd=[],toRemove=[],modelMap={},add=options.add,merge=options.merge,remove=options.remove,order=!sortable&&add&&remove?[]:!1;for(i=0,l=models.length;l>i;i++){if(attrs=models[i]||{},attrs instanceof Model)id=model=attrs;else id=attrs[targetModel.prototype.idAttribute||"id"];if(existing=this.get(id)){if(remove)modelMap[existing.cid]=!0;if(merge){if(attrs=attrs===model?model.attributes:attrs,options.parse)attrs=existing.parse(attrs,options);if(existing.set(attrs,options),sortable&&!sort&&existing.hasChanged(sortAttr))sort=!0}models[i]=existing}else if(add){if(model=models[i]=this._prepareModel(attrs,options),!model)continue;toAdd.push(model),this._addReference(model,options)}if(model=existing||model,order&&(model.isNew()||!modelMap[model.id]))order.push(model);modelMap[model.id]=!0}if(remove){for(i=0,l=this.length;l>i;++i)if(!modelMap[(model=this.models[i]).cid])toRemove.push(model);if(toRemove.length)this.remove(toRemove,options)}if(toAdd.length||order&&order.length){if(sortable)sort=!0;if(this.length+=toAdd.length,null!=at)for(i=0,l=toAdd.length;l>i;i++)this.models.splice(at+i,0,toAdd[i]);else{if(order)this.models.length=0;var orderedModels=order||toAdd;for(i=0,l=orderedModels.length;l>i;i++)this.models.push(orderedModels[i])}}if(sort)this.sort({silent:!0});if(!options.silent){for(i=0,l=toAdd.length;l>i;i++)(model=toAdd[i]).trigger("add",model,this,options);if(sort||order&&order.length)this.trigger("sort",this,options)}return singular?models[0]:models},reset:function(models,options){options||(options={});for(var i=0,l=this.models.length;l>i;i++)this._removeReference(this.models[i],options);if(options.previousModels=this.models,this._reset(),models=this.add(models,_.extend({silent:!0},options)),!options.silent)this.trigger("reset",this,options);return models},push:function(model,options){return this.add(model,_.extend({at:this.length},options))},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options),model},unshift:function(model,options){return this.add(model,_.extend({at:0},options))},shift:function(options){var model=this.at(0);return this.remove(model,options),model},slice:function(){return slice.apply(this.models,arguments)},get:function(obj){if(null==obj)return void 0;return this._byId[obj]||this._byId[obj.id]||this._byId[obj.cid]},at:function(index){return this.models[index]},where:function(attrs,first){if(_.isEmpty(attrs))return first?void 0:[];return this[first?"find":"filter"](function(model){for(var key in attrs)if(attrs[key]!==model.get(key))return!1;return!0})},findWhere:function(attrs){return this.where(attrs,!0)},sort:function(options){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");if(options||(options={}),_.isString(this.comparator)||1===this.comparator.length)this.models=this.sortBy(this.comparator,this);else this.models.sort(_.bind(this.comparator,this));if(!options.silent)this.trigger("sort",this,options);return this},pluck:function(attr){return _.invoke(this.models,"get",attr)},fetch:function(options){if(options=options?_.clone(options):{},void 0===options.parse)options.parse=!0;var success=options.success,collection=this;return options.success=function(resp){var method=options.reset?"reset":"set";if(collection[method](resp,options),success)success(collection,resp,options);collection.trigger("sync",collection,resp,options)},wrapError(this,options),this.sync("read",this,options)},create:function(model,options){if(options=options?_.clone(options):{},!(model=this._prepareModel(model,options)))return!1;if(!options.wait)this.add(model,options);var collection=this,success=options.success;return options.success=function(model,resp){if(options.wait)collection.add(model,options);if(success)success(model,resp,options)},model.save(null,options),model},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(attrs,options){if(attrs instanceof Model)return attrs;options=options?_.clone(options):{},options.collection=this;var model=new this.model(attrs,options);if(!model.validationError)return model;return this.trigger("invalid",this,model.validationError,options),!1},_addReference:function(model,options){if(this._byId[model.cid]=model,null!=model.id)this._byId[model.id]=model;if(!model.collection)model.collection=this;model.on("all",this._onModelEvent,this)},_removeReference:function(model,options){if(this===model.collection)delete model.collection;model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){if(("add"===event||"remove"===event)&&collection!==this)return;if("destroy"===event)this.remove(model,options);if(model&&event==="change:"+model.idAttribute)if(delete this._byId[model.previous(model.idAttribute)],null!=model.id)this._byId[model.id]=model;this.trigger.apply(this,arguments)}});var methods=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];_.each(methods,function(method){Collection.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.models),_[method].apply(_,args)}});var attributeMethods=["groupBy","countBy","sortBy","indexBy"];_.each(attributeMethods,function(method){Collection.prototype[method]=function(value,context){var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _[method](this.models,iterator,context)}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view"),options||(options={}),_.extend(this,_.pick(options,viewOptions)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},delegateEventSplitter=/^(\S+)\s*(.*)$/,viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(element,delegate){if(this.$el)this.undelegateEvents();if(this.$el=element instanceof Backbone.$?element:Backbone.$(element),this.el=this.$el[0],delegate!==!1)this.delegateEvents();return this},delegateEvents:function(events){if(!events&&!(events=_.result(this,"events")))return this;this.undelegateEvents();for(var key in events){var method=events[key];if(!_.isFunction(method))method=this[events[key]];if(!method)continue;var match=key.match(delegateEventSplitter),eventName=match[1],selector=match[2];if(method=_.bind(method,this),eventName+=".delegateEvents"+this.cid,""===selector)this.$el.on(eventName,method);else this.$el.on(eventName,selector,method)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var attrs=_.extend({},_.result(this,"attributes"));if(this.id)attrs.id=_.result(this,"id");if(this.className)attrs["class"]=_.result(this,"className");var $el=Backbone.$("<"+_.result(this,"tagName")+">").attr(attrs);this.setElement($el,!1)}else this.setElement(_.result(this,"el"),!1)}}),Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(!options.url)params.url=_.result(model,"url")||urlError();if(null==options.data&&model&&("create"===method||"update"===method||"patch"===method))params.contentType="application/json",params.data=JSON.stringify(options.attrs||model.toJSON(options));if(options.emulateJSON)params.contentType="application/x-www-form-urlencoded",params.data=params.data?{model:params.data}:{};if(options.emulateHTTP&&("PUT"===type||"DELETE"===type||"PATCH"===type)){if(params.type="POST",options.emulateJSON)params.data._method=type;var beforeSend=options.beforeSend;options.beforeSend=function(xhr){if(xhr.setRequestHeader("X-HTTP-Method-Override",type),beforeSend)return beforeSend.apply(this,arguments)}}if("GET"!==params.type&&!options.emulateJSON)params.processData=!1;if("PATCH"===params.type&&noXhrPatch)params.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")};var xhr=options.xhr=Backbone.ajax(_.extend(params,options));return model.trigger("request",model,xhr,options),xhr};var noXhrPatch=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),methodMap={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var Router=Backbone.Router=function(options){if(options||(options={}),options.routes)this.routes=options.routes;this._bindRoutes(),this.initialize.apply(this,arguments)},optionalParam=/\((.*?)\)/g,namedParam=/(\(\?)?:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){if(!_.isRegExp(route))route=this._routeToRegExp(route);if(_.isFunction(name))callback=name,name="";if(!callback)callback=this[name];var router=this;return Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);router.execute(callback,args),router.trigger.apply(router,["route:"+name].concat(args)),router.trigger("route",name,args),Backbone.history.trigger("route",router,name,args)}),this},execute:function(callback,args){if(callback)callback.apply(this,args)},navigate:function(fragment,options){return Backbone.history.navigate(fragment,options),this},_bindRoutes:function(){if(!this.routes)return;this.routes=_.result(this,"routes");for(var route,routes=_.keys(this.routes);null!=(route=routes.pop());)this.route(route,this.routes[route])},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/?]+)"}).replace(splatParam,"([^?]*?)"),new RegExp("^"+route+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param,i){if(i===params.length-1)return param||null;return param?decodeURIComponent(param):null})}});var History=Backbone.History=function(){if(this.handlers=[],_.bindAll(this,"checkUrl"),"undefined"!=typeof window)this.location=window.location,this.history=window.history},routeStripper=/^[#\/]|\s+$/g,rootStripper=/^\/+|\/+$/g,isExplorer=/msie [\w.]+/,trailingSlash=/\/$/,pathStripper=/#.*$/;History.started=!1,_.extend(History.prototype,Events,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(null==fragment)if(this._hasPushState||!this._wantsHashChange||forcePushState){fragment=decodeURI(this.location.pathname+this.location.search);var root=this.root.replace(trailingSlash,"");if(!fragment.indexOf(root))fragment=fragment.slice(root.length)}else fragment=this.getHash();return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=!0,this.options=_.extend({root:"/"},this.options,options),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var fragment=this.getFragment(),docMode=document.documentMode,oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||7>=docMode);if(this.root=("/"+this.root+"/").replace(rootStripper,"/"),oldIE&&this._wantsHashChange){var frame=Backbone.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=frame.hide().appendTo("body")[0].contentWindow,this.navigate(fragment)}if(this._hasPushState)Backbone.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!oldIE)Backbone.$(window).on("hashchange",this.checkUrl);else if(this._wantsHashChange)this._checkUrlInterval=setInterval(this.checkUrl,this.interval);this.fragment=fragment;
var loc=this.location;if(this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;else if(this._hasPushState&&this.atRoot()&&loc.hash)this.fragment=this.getHash().replace(routeStripper,""),this.history.replaceState({},document.title,this.root+this.fragment);if(!this.options.silent)return this.loadUrl()},stop:function(){if(Backbone.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval)clearInterval(this._checkUrlInterval);History.started=!1},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();if(current===this.fragment&&this.iframe)current=this.getFragment(this.getHash(this.iframe));if(current===this.fragment)return!1;if(this.iframe)this.navigate(current);this.loadUrl()},loadUrl:function(fragment){return fragment=this.fragment=this.getFragment(fragment),_.any(this.handlers,function(handler){if(handler.route.test(fragment))return handler.callback(fragment),!0})},navigate:function(fragment,options){if(!History.started)return!1;if(!options||options===!0)options={trigger:!!options};var url=this.root+(fragment=this.getFragment(fragment||""));if(fragment=fragment.replace(pathStripper,""),this.fragment===fragment)return;if(this.fragment=fragment,""===fragment&&"/"!==url)url=url.slice(0,-1);if(this._hasPushState)this.history[options.replace?"replaceState":"pushState"]({},document.title,url);else if(this._wantsHashChange){if(this._updateHash(this.location,fragment,options.replace),this.iframe&&fragment!==this.getFragment(this.getHash(this.iframe))){if(!options.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,fragment,options.replace)}}else return this.location.assign(url);if(options.trigger)return this.loadUrl(fragment)},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else location.hash="#"+fragment}}),Backbone.history=new History;var extend=function(protoProps,staticProps){var parent=this,child;if(protoProps&&_.has(protoProps,"constructor"))child=protoProps.constructor;else child=function(){return parent.apply(this,arguments)};_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};if(Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,protoProps)_.extend(child.prototype,protoProps);return child.__super__=parent.prototype,child};Model.extend=Collection.extend=Router.extend=View.extend=History.extend=extend;var urlError=function(){throw new Error('A "url" property or function must be specified')},wrapError=function(model,options){var error=options.error;options.error=function(resp){if(error)error(model,resp,options);model.trigger("error",model,resp,options)}};return Backbone.noConflict()}),!function(wndw){var module=function(){if(wndw.console=wndw.console||{},wndw.console.log=wndw.console.log||function(){},wndw.console.error=wndw.console.error||function(){},wndw.console.warn=wndw.console.warn||function(){},wndw.console.info=wndw.console.info||function(){},!wndw.console.log.apply)wndw.console.log=Function.prototype.bind.call(wndw.console.log,wndw.console),wndw.console.error=Function.prototype.bind.call(wndw.console.error,wndw.console),wndw.console.warn=Function.prototype.bind.call(wndw.console.warn,wndw.console),wndw.console.info=Function.prototype.bind.call(wndw.console.info,wndw.console);var Logger=function(options){this.options=options||{}};Logger.prototype.customize=function(options){return this.options=options||{},this},Logger.prototype.info=function(){if("info"==this.options.level)wndw.console.info.apply(wndw.console,arguments);return this},Logger.prototype.warn=function(){if(/info|warn/.test(this.options.level))wndw.console.warn.apply(wndw.console,arguments);return this},Logger.prototype.error=function(){if(/error|warn|info/.test(this.options.level))wndw.console.error.apply(wndw.console,arguments);return this};var exports=function(options){return new Logger(options)};return exports};if("function"==typeof define&&define.amd)define("js/lib/log.v0-0-1",[],function(){return module()});else if("undefined"!=typeof wndw&&"undefined"==typeof ender)wndw.Log=module()}(window),function(wndw){var config={environment:"production",out:"js/core/config.js",log:"error",debug:!1,url:{maestro:"/maestro/api/",base:"https://www.coursera.org/",api:"/maestro/api/",cloudfront_api:"https://d1hpa2gdx2lr6r.cloudfront.net/maestro/api/",accounts:"https://accounts.coursera.org/",assets:"https://d2wvvaown1ul17.cloudfront.net/site-static/",resource_assets:"https://coursera_assets.s3.amazonaws.com/",app_assets:"https://d2wvvaown1ul17.cloudfront.net/site-static/162b6b241cfca0269fd2fcc0376cc397d1a28fd6/"},version:"162b6b241cfca0269fd2fcc0376cc397d1a28fd6",dir:{home:"/"},gapi_eventing_data:{project_number:"274249572679",api_key:"",client_id:"274249572679-al8nc3ttcavj0n91due232a3h6s3r9vk.apps.googleusercontent.com"},bigquery:{dataset:"mydataset",table_prefix:"livedata_"}};if("function"==typeof define&&define.amd)define("js/app/config",[],function(){return config});else return wndw.configure=config}(window),define("js/app/loggerSingleton.v0-0-1",["js/lib/log.v0-0-1","js/app/config"],function(Logger,config){return Logger({level:config.log})}),define("js/lib/fsm",["underscore","js/app/loggerSingleton.v0-0-1"],function(_,logger){var slice=Array.prototype.slice,fsm={};return fsm.FiniteStateMachine={logTransitions:!1,stateProperty:"state",state:function(){return this.get(this.stateProperty)},isState:function(statesArray){var states=_.isArray(statesArray)?statesArray:slice.call(arguments);return _(states).contains(this.state())},isValidState:function(state){if(!state)return!1;if(!this.fsm||!this.fsm.states)return!0;return _(this.fsm.states).contains(state)},isValidTransition:function(fromState,toState){if(!fromState||!toState)return!1;if(!(this.fsm&&this.fsm.transitions&&this.fsm.transitions[toState]))return!0;return _(this.fsm.transitions[toState]).contains(fromState)},validTransitionsFrom:function(fromState){if(!this.fsm||!this.fsm.transitions)return[];var transitions=this.fsm.transitions;return _(transitions).keys().filter(function(key){return _(transitions[key]).include(fromState)})},validTransitionsTo:function(toState){if(!(this.fsm&&this.fsm.transitions&&this.fsm.transitions[toState]))return[];return this.fsm.transitions[toState].concat()},ensureState:function(){if(!this.isState.apply(this,arguments)){var states=Array.prototype.slice.call(arguments).map(function(state){return'"'+state+'"'});if(1===states.length)throw"Expected state to be "+states[0]+' but was "'+this.state()+'"';else{var statesString=_.initial(states).join(", ")+" or "+_.last(states);throw"Expected state to be one of "+statesString+' but was "'+this.state()+'"'}}return this},transition:function(toState){var fromState=this.state();if(toState===fromState)throw'Attempting transition to existing state "'+toState+'"';if(!this.isValidState(toState))throw'Attempting transition to an invalid state "'+toState+'"';if(!this.isValidTransition(fromState,toState))throw'Transitioning to state "'+toState+'" from an invalid state "'+fromState+'"';return this.beforeTransition(fromState,toState),this.set(this.stateProperty,toState),this.afterTransition(fromState,toState),this},transitionIfNot:function(toState){if(!this.isState(toState))this.transition(toState);return this},beforeTransition:function(fromState,toState){return this.trigger("state:exit:"+fromState,toState),this.trigger("transitioning",fromState,toState),this.trigger("transitioning:"+fromState+":"+toState),this},afterTransition:function(fromState,toState){if(this.logTransitions)logger.info('[FSM] Transitioned state from "'+fromState+'" to "'+toState+'"');return this.trigger("transitioned",fromState,toState),this.trigger("transitioned:"+fromState+":"+toState),this.trigger("state:enter:"+toState,fromState),this}},fsm.FiniteStateMachineView={renderState:function(){var state=this.state();this.hideStateElements(this.$("[data-state]")),this.showStateElements(this.$('[data-state~="'+state+'"]')),this.showStateElements(this.$("[data-state-not]")),this.hideStateElements(this.$('[data-state-not~="'+state+'"]'))},showStateElements:function(elements){elements.show()},hideStateElements:function(elements){elements.hide()}},fsm}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(isSubmitted,showFeedbackIcon,isCorrect,index,instance,feedback){if(isSubmitted&&showFeedbackIcon)buf.push("<i"+jade.cls(["fa","c-feedback-icon",isCorrect?"fa-check":"fa-times"],[null,null,!0])+"></i>");if(buf.push('<div data-js="user-html" class="coursera-assess-question-optionBase-prompt">'),index)buf.push('<span class="c-assess-question-number">'+jade.escape(null==(jade_interp=index)?"":jade_interp)+".&nbsp;</span>");if(buf.push('<span class="c-assess-question-title">'+(null==(jade_interp=instance.variant.prompt)?"":jade_interp)+'</span></div><div class="coursera-math-expression-input-container"><div data-js="math-expression-preview-container"></div><div><input data-js="math-expression-response" type="text" placeholder="Enter math expression here" class="coursera-assess-question-mathexpression-answer-input"/></div><div class="coursera-assess-question-mathexpression-help-container"><a target="_blank" href="http://help.coursera.org/customer/portal/articles/1163266-how-can-i-enter-math-expressions-in-quizzes" class="coursera-assess-question-mathexpression-help">Help</a></div></div>'),feedback)if(feedback.definition.isCorrect){if(buf.push('<div class="coursera-assess-question-mathexpression-feedback-arrow coursera-assess-question-mathexpression-feedback-arrow-correct"></div><div data-js="user-html" class="bt3-alert bt3-alert-success alert alert-success coursera-assess-question-mathexpression-feedback"><strong>Well done!&nbsp;</strong><p>'+(null==(jade_interp=feedback.definition.display)?"":jade_interp)+"</p>"),feedback.definition.correctAnswer){var learnerAnswer=instance.localResponse.answer,correctAnswer=feedback.definition.correctAnswer.answer;buf.push("<p>Your answer, $$"+jade.escape(null==(jade_interp=learnerAnswer)?"":jade_interp)+"$$, is equivalent to the instructor's answer $$"+jade.escape(null==(jade_interp=correctAnswer)?"":jade_interp)+"$$</p>")}buf.push("</div>")}else if(buf.push('<div class="coursera-assess-question-mathexpression-feedback-arrow coursera-assess-question-mathexpression-feedback-arrow-incorrect"></div><div data-js="user-html" class="bt3-alert bt3-alert-danger alert alert-danger coursera-assess-question-mathexpression-feedback"><strong>Sorry, that’s not what we’re looking for.&nbsp;</strong><p>'+(null==(jade_interp=feedback.definition.display)?"":jade_interp)+"</p></div>"),feedback.definition.correctAnswer)buf.push('<a data-js="reveal-answer-link" class="coursera-assess-question-mathexpression-link">Reveal correct answer</a><div data-js="correct-answer"><p><strong>Correct Answer: &nbsp;</strong>$$'+jade.escape(null==(jade_interp=feedback.definition.correctAnswer.answer)?"":jade_interp)+'$$</p><div data-js="user-html" class="bt3-alert bt3-alert-success alert alert-success coursera-assess-question-mathexpression-feedback"><p>'+(null==(jade_interp=feedback.definition.correctAnswer.feedback)?"":jade_interp)+"</p></div></div>")}("isSubmitted"in locals_for_with?locals_for_with.isSubmitted:"undefined"!=typeof isSubmitted?isSubmitted:void 0,"showFeedbackIcon"in locals_for_with?locals_for_with.showFeedbackIcon:"undefined"!=typeof showFeedbackIcon?showFeedbackIcon:void 0,"isCorrect"in locals_for_with?locals_for_with.isCorrect:"undefined"!=typeof isCorrect?isCorrect:void 0,"index"in locals_for_with?locals_for_with.index:"undefined"!=typeof index?index:void 0,"instance"in locals_for_with?locals_for_with.instance:"undefined"!=typeof instance?instance:void 0,"feedback"in locals_for_with?locals_for_with.feedback:"undefined"!=typeof feedback?feedback:void 0),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/questionTypes/mathExpression/student/template.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.questionTypes.mathExpression.student.template"]=jadify(wndw.jade.helpers)}(window),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(model){buf.push('<div class="coursera-assess-question-mathexpression-preview-container"><div class="coursera-assess-question-mathexpression-preview-status-container"><div data-state="nothing up-to-date warning loading unsubmitted" class="coursera-assess-question-mathexpression-preview-status coursera-assess-question-mathexpression-preview-normal">Preview</div><div data-state="updating" class="coursera-assess-question-mathexpression-preview-status coursera-assess-question-mathexpression-preview-normal">Preview updating...</div><div data-state="error" class="coursera-assess-question-mathexpression-preview-error coursera-assess-question-mathexpression-preview-status">Preview unable to update: &nbsp;<a target="_blank" href="http://help.coursera.org/customer/portal/articles/1163266-how-can-i-enter-math-expressions-in-quizzes" class="coursera-assess-question-mathexpression-preview-link">'+jade.escape(null==(jade_interp=model.get("error"))?"":jade_interp)+'</a></div></div><div data-js="math-expression-preview" data-state-not="error updating" class="coursera-assess-question-mathexpression-preview">$$'+jade.escape(null==(jade_interp=model.get("previewExpression"))?"":jade_interp)+'$$</div><div data-state="warning" class="coursera-assess-question-mathexpression-preview-warning coursera-assess-question-mathexpression-preview-status coursera-assess-question-mathexpression-preview-normal">'),function(){var $$obj=model.get("warnings");if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var warning=$$obj[$index];buf.push("<span>"+jade.escape(null==(jade_interp=warning)?"":jade_interp)+"</span>")}else{var $$l=0;for(var $index in $$obj){$$l++;var warning=$$obj[$index];buf.push("<span>"+jade.escape(null==(jade_interp=warning)?"":jade_interp)+"</span>")}}}.call(this),buf.push("</div></div>")}("model"in locals_for_with?locals_for_with.model:"undefined"!=typeof model?model:void 0),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/questionTypes/mathExpression/student/mathExpressionPreview.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.questionTypes.mathExpression.student.mathExpressionPreview"]=jadify(wndw.jade.helpers)}(window),define("bundles/assess/questionTypes/mathExpression/student/latexService",["js/lib/api"],function(API){var api=API("/api/assess/v1/",{type:"rest"}),latexService={latex:function(input){return api.get("latex",{data:{userText:input}})}};return latexService}),define("bundles/assess/questionTypes/mathExpression/student/latexModel",["js/vendor/backbone.v1-1-2","js/vendor/underscore.v1-6","js/lib/fsm","bundles/assess/questionTypes/mathExpression/student/latexService"],function(Backbone,_,fsm,latexService){var LatexModel=Backbone.Model.extend(_.extend({},fsm.FiniteStateMachine,{defaults:{state:"nothing",warnings:[],error:"",previewExpression:"",updateDelay:500},fsm:{states:["nothing","updating","error","warning","up-to-date"],transitions:{updating:["nothing","error","warning","up-to-date","updating"],error:["updating"],warning:["updating"],"up-to-date":["updating"]}},initialize:function(){this.loadPreviewDebounced=_.debounce(this.loadPreview.bind(this),this.get("updateDelay"))},inputChange:function(input){this.transitionIfNot("updating"),this.loadPreviewDebounced(input)},loadPreview:function(input){if(this.transitionIfNot("updating"),!input||""===input.trim())this.set("previewExpression",""),this.transition("up-to-date");else latexService.latex(input).done(this.updatePreview.bind(this))},updatePreview:function(result){if(result.success)if(this.set("previewExpression",result.message),_(result).has("warnings")){var warnings=result.warnings;this.set("warnings",warnings),this.transition("warning")}else this.transition("up-to-date");else this.set("error",result.message),this.transition("error")}}));return LatexModel}),define("bundles/assess/questionTypes/mathExpression/student/view",["js/vendor/backbone.v1-1-2","js/vendor/underscore.v1-6","js/lib/coursera.mathjax","js/lib/fsm","bundles/assess/questionTypes/mathExpression/student/template.html","bundles/assess/questionTypes/mathExpression/student/mathExpressionPreview.html","bundles/assess/questionTypes/mathExpression/student/latexModel"],function(Backbone,_,courseraMathjax,fsm,template,previewTemplate,LatexModel){var MathExpressionQuestion=Backbone.View.extend(_.extend({},fsm.FiniteStateMachineView,{className:"coursera-assess-question-mathexpression",classNames:{previewError:"coursera-assess-question-mathexpression-answer-input-error"},supportedStyles:["coursera-assess-style-question-default","coursera-assess-style-question-in-video"],dom:{revealAnswerLink:'[data-js="reveal-answer-link"]',correctAnswer:'[data-js="correct-answer"]',response:'[data-js="math-expression-response"]',preview:'[data-js="math-expression-preview-container"]'},events:{'click [data-js="reveal-answer-link"]':"revealAnswer",'input [data-js="math-expression-response"]':"inputChange"},initialize:function(options){this.options=this.options||options||{},this.latexModel=new LatexModel,this.listenTo(this.latexModel,"change:"+this.latexModel.stateProperty,this.renderPreview)},state:function(){return this.latexModel.state()},render:function(){var instance=this.options.instance,responseVal,feedback=instance.feedback;if(this.$el.html(template({instance:instance,feedback:feedback,index:this.options.index,showFeedbackIcon:this.options.showFeedbackIcon,isSubmitted:!!feedback,isCorrect:feedback?feedback.definition.isCorrect:null})),instance.localResponse)responseVal=instance.localResponse.answer,this.$(this.dom.response).val(responseVal);if(feedback&&feedback.definition&&feedback.definition.isCorrect)this.$el.addClass("c-correct");else this.$el.addClass("c-incorrect");this.$('[data-js="correct-answer"]').hide(),courseraMathjax.render(this.el),this.renderPreview()},renderPreview:function(){this.$(this.dom.preview).html(previewTemplate({model:this.latexModel})),courseraMathjax.render(this.el);var input=this.$(this.dom.response);if(input.removeClass(this.classNames.previewError),this.latexModel.isState("error"))input.addClass(this.classNames.previewError);this.renderState()},disableInput:function(){this.$("input").attr("disabled",!0),this.inputChange()},enableInput:function(){this.$("input").attr("disabled",!1),this.inputChange()},serializeResponse:function(){var response=this.$(this.dom.response).val();return{answer:response}},revealAnswer:function(){this.$(this.dom.revealAnswerLink).hide(),this.$(this.dom.correctAnswer).show()},inputChange:function(){var input=this.$(this.dom.response).val();this.latexModel.inputChange(input)}}));return MathExpressionQuestion}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(instanceId,option){buf.push('<label><input type="radio"'+jade.attr("name",instanceId,!0,!1)+jade.attr("value",option.id,!0,!1)+' class="coursera-assess-question-optionBase-option-input"/><div data-js="user-html" class="coursera-assess-question-optionBase-option-text">'+(null==(jade_interp=option.display)?"":jade_interp)+"</div></label>")}("instanceId"in locals_for_with?locals_for_with.instanceId:"undefined"!=typeof instanceId?instanceId:void 0,"option"in locals_for_with?locals_for_with.option:"undefined"!=typeof option?option:void 0),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/questionTypes/mcq/student/optionTemplate.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.questionTypes.mcq.student.optionTemplate"]=jadify(wndw.jade.helpers)}(window),define("bundles/assess/questionTypes/mcq/student/view",["underscore","bundles/assess/questionTypes/optionBase/student/view","bundles/assess/questionTypes/mcq/student/optionTemplate.html"],function(_,OptionBaseView,optionTemplate){var McqView=OptionBaseView.extend({optionTemplate:optionTemplate,className:OptionBaseView.prototype.className+" coursera-assess-question-mcq",initialize:function(options){this.instance=options.instance,OptionBaseView.prototype.initialize.apply(this,arguments)},normalizeFeedback:function(instance){var options=instance.variant.options,effectiveResponse=instance.effectiveResponse,feedback=instance.feedback;if(!feedback)return!1;var normalizedFeedback={};return _(options).each(function(option){var showFeedback=option.id==effectiveResponse.response.chosen;if(showFeedback)normalizedFeedback[option.id]={feedbackDisplay:feedback.definition.display,isCorrect:feedback.definition.isCorrect}}),normalizedFeedback},renderExtra:function(){var feedback=this.instance.feedback;if(this.options.instance.localResponse){var responseVal=this.options.instance.localResponse.chosen;this.$('input[value="'+responseVal+'"]').prop("checked",!0)}if(feedback&&feedback.definition&&feedback.definition.isCorrect)this.$el.addClass("c-correct");else this.$el.addClass("c-incorrect")},serializeResponse:function(){if(this.$("input:checked").length>0)return{chosen:this.$("input:checked").val()};else return{chosen:null}}});return McqView}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(instanceId,option){buf.push('<label><input type="radio"'+jade.attr("name",instanceId,!0,!1)+jade.attr("value",option.id,!0,!1)+' class="coursera-assess-question-optionBase-option-input"/><div data-js="user-html" class="coursera-assess-question-optionBase-option-text">'+(null==(jade_interp=option.display)?"":jade_interp)+"</div></label>")}("instanceId"in locals_for_with?locals_for_with.instanceId:"undefined"!=typeof instanceId?instanceId:void 0,"option"in locals_for_with?locals_for_with.option:"undefined"!=typeof option?option:void 0),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/questionTypes/radioPoll/student/optionTemplate.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.questionTypes.radioPoll.student.optionTemplate"]=jadify(wndw.jade.helpers)}(window),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp;return buf.push('<h4 class="coursera-assess-question-pollBase-header">Poll</h4>'),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/questionTypes/radioPoll/student/headerTemplate.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.questionTypes.radioPoll.student.headerTemplate"]=jadify(wndw.jade.helpers)}(window),define("bundles/assess/questionTypes/radioPoll/student/view",["underscore","js/lib/coursera.mathjax","bundles/assess/questionTypes/pollBase/student/view","bundles/assess/questionTypes/radioPoll/student/optionTemplate.html","bundles/assess/questionTypes/radioPoll/student/headerTemplate.html","js/lib/util"],function(_,courseraMathjax,PollBaseView,optionTemplate,headerTemplate,util){var MultipleChoicePoll=PollBaseView.extend({optionTemplate:optionTemplate,className:PollBaseView.prototype.className+" coursera-assess-question-radio-poll",headerTemplate:headerTemplate,initialize:function(options){this.options=this.options||options||{}},isIdChosen:function(chosen,id){return chosen===id},isAChosenOptionZero:function(chosen,histogram){var chosenHistogramOptions=_(histogram).filter(function(histogramOption){return chosen===histogramOption.id&&0!==histogramOption.count});return 1!==chosenHistogramOptions.length},getTotalNumberResponses:function(){var instance=this.options.instance,histogramOptions=[];if(instance.variant.histogram)histogramOptions=instance.variant.histogram;else if(instance.feedback)histogramOptions=instance.feedback.definition.options;var totalNumResponses=_(histogramOptions).reduce(function(total,histogramOption){return total+histogramOption.count},0);return totalNumResponses},renderExtra:function(){if(this.options.instance.localResponse){var responseVal=this.options.instance.localResponse.chosen;this.$('input[value="'+responseVal+'"]').attr("checked",!0)}},serializeResponse:function(){if(this.$("input:checked").length>0)return{chosen:this.$("input:checked").val()};else return{chosen:null}}});return MultipleChoicePoll}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(instance,feedback){if(buf.push('<div data-prompt="data-prompt" data-js="user-html" class="coursera-assess-question-shortanswer-prompt">'+(null==(jade_interp=instance.variant.prompt)?"":jade_interp)+'</div><div class="coursera-assess-question-shortanswer-answer"><input data-shortanswer-response="data-shortanswer-response" type="text" placeholder="Enter answer here" class="coursera-assess-question-shortanswer-answer-input"/></div>'),feedback)if(feedback.definition.isCorrect)buf.push('<div class="coursera-assess-question-shortanswer-feedback-arrow coursera-assess-question-shortanswer-feedback-arrow-correct"></div><div data-js="user-html" class="alert alert-success coursera-assess-question-shortanswer-feedback"><strong>Well done!&nbsp; </strong><p>'+(null==(jade_interp=feedback.definition.display)?"":jade_interp)+"</p></div>");else buf.push('<div class="coursera-assess-question-shortanswer-feedback-arrow coursera-assess-question-shortanswer-feedback-arrow-incorrect"></div><div data-js="user-html" class="alert alert-danger coursera-assess-question-shortanswer-feedback"><strong>Sorry, that’s not what we’re looking for.&nbsp;</strong><p>'+(null==(jade_interp=feedback.definition.display)?"":jade_interp)+"</p></div>");buf.push('<div data-shortanswer-correct-answers-list="data-shortanswer-correct-answers-list"></div>')}("instance"in locals_for_with?locals_for_with.instance:"undefined"!=typeof instance?instance:void 0,"feedback"in locals_for_with?locals_for_with.feedback:"undefined"!=typeof feedback?feedback:void 0),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/questionTypes/shortanswer/student/template.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.questionTypes.shortanswer.student.template"]=jadify(wndw.jade.helpers)}(window),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(correctAnswers,isCorrect,seeCorrectAnswers){var numOtherCorrectAnswers=correctAnswers.length,linkText="",titleText="",conjunction="",retryText="";if(1==numOtherCorrectAnswers){if(isCorrect)linkText="Show other acceptable response",titleText="Other acceptable response";else linkText="Show acceptable response",titleText="Acceptable response";conjunction=" or ",retryText="try again"}else if(numOtherCorrectAnswers>1){if(isCorrect)linkText="Show other acceptable responses",titleText="Other acceptable responses";else linkText="Show acceptable responses",titleText="Acceptable responses";conjunction=" or ",retryText="try again"}if(!seeCorrectAnswers){if(buf.push('<a data-show-correct-answers="data-show-correct-answers" href="#" onclick="return false;" class="coursera-assess-question-shortanswer-link">'+jade.escape(null==(jade_interp=linkText)?"":jade_interp)+"</a>"),!isCorrect)buf.push(""+jade.escape(null==(jade_interp=conjunction)?"":jade_interp)+'<a data-retry="data-retry" href="#" onclick="return false;" class="coursera-assess-question-shortanswer-link">'+jade.escape(null==(jade_interp=retryText)?"":jade_interp)+"</a>")}else buf.push("<strong>"+jade.escape(null==(jade_interp=titleText)?"":jade_interp)+'</strong><div data-correct-answers="data-correct-answers" class="coursera-assess-question-shortanswer-correctAnswer">'),function(){var $$obj=correctAnswers;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var correctAnswer=$$obj[$index];if(buf.push("<label>"+jade.escape(null==(jade_interp=correctAnswer.answer)?"":jade_interp)+"</label>"),correctAnswer.feedback&&""!==correctAnswer.feedback.trim())buf.push('<div class="coursera-assess-question-shortanswer-feedback-arrow coursera-assess-question-shortanswer-feedback-arrow-correct"></div><div data-js="user-html" class="alert alert-success coursera-assess-question-shortanswer-feedback">'+(null==(jade_interp=correctAnswer.feedback)?"":jade_interp)+"</div>")}else{var $$l=0;for(var $index in $$obj){$$l++;var correctAnswer=$$obj[$index];if(buf.push("<label>"+jade.escape(null==(jade_interp=correctAnswer.answer)?"":jade_interp)+"</label>"),correctAnswer.feedback&&""!==correctAnswer.feedback.trim())buf.push('<div class="coursera-assess-question-shortanswer-feedback-arrow coursera-assess-question-shortanswer-feedback-arrow-correct"></div><div data-js="user-html" class="alert alert-success coursera-assess-question-shortanswer-feedback">'+(null==(jade_interp=correctAnswer.feedback)?"":jade_interp)+"</div>")}}}.call(this),buf.push("</div>")}("correctAnswers"in locals_for_with?locals_for_with.correctAnswers:"undefined"!=typeof correctAnswers?correctAnswers:void 0,"isCorrect"in locals_for_with?locals_for_with.isCorrect:"undefined"!=typeof isCorrect?isCorrect:void 0,"seeCorrectAnswers"in locals_for_with?locals_for_with.seeCorrectAnswers:"undefined"!=typeof seeCorrectAnswers?seeCorrectAnswers:void 0),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("bundles/assess/questionTypes/shortanswer/student/correctAnswers.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.assess.questionTypes.shortanswer.student.correctAnswers"]=jadify(wndw.jade.helpers)}(window),define("bundles/assess/questionTypes/shortanswer/student/view",["backbone","js/lib/coursera.mathjax","bundles/assess/questionTypes/shortanswer/student/template.html","bundles/assess/questionTypes/shortanswer/student/correctAnswers.html"],function(Backbone,courseraMathjax,template,correctAnswersTemplate){var ShortAnswerQuestion=Backbone.View.extend({className:"coursera-assess-question-shortanswer",supportedStyles:["coursera-assess-style-question-default","coursera-assess-style-question-in-video"],events:{"click [data-show-correct-answers]":"showCorrectAnswers","keyup [data-shortanswer-response]":"onChangeInput","keydown [data-shortanswer-response]":"stopPropagation","keypress [data-shortanswer-response]":"stopPropagation","click [data-retry]":"retryQuestion"},initialize:function(options){this.options=this.options||options||{},this.options._seeCorrectAnswers=!1},render:function(){if(this.$el.html(template({instance:this.options.instance,feedback:this.options.instance.feedback})),this.options.instance.localResponse){var responseVal=this.options.instance.localResponse.answer;this.$("[data-shortanswer-response]").val(responseVal)}this.renderCorrectAnswersSection(),courseraMathjax.render(this.$el[0])},renderCorrectAnswersSection:function(){if(this.options.instance.feedback)this.$("[data-shortanswer-correct-answers-list]").html(correctAnswersTemplate({isCorrect:this.options.instance.feedback.definition.isCorrect,correctAnswers:this.getOtherCorrectAnswers(),seeCorrectAnswers:this.options._seeCorrectAnswers}))
},retryQuestion:function(){this.options.instance.localResponse=null,this.options.instance.feedback=null,this.render()},disableInput:function(){this.$("input").attr("disabled",!0)},enableInput:function(){this.$("input").attr("disabled",!1)},serializeResponse:function(){var response=this.$("[data-shortanswer-response]").val();return{answer:response}},transform:function(str){return str.trim().toLowerCase()},stopPropagation:function(event){event.stopPropagation()},onChangeInput:function(event){if(this.stopPropagation(event),this.trigger("change"),13===event.keyCode)this.trigger("submit")},showCorrectAnswers:function(){var answerTopLoc=this.$("[data-shortanswer-correct-answers-list]").offset().top-this.$("[data-prompt]").offset().top;this.options._seeCorrectAnswers=!0,this.renderCorrectAnswersSection(),this.$el.animate({scrollTop:answerTopLoc},500)},getOtherCorrectAnswers:function(){var correctAnswers=[];if(this.options.instance.feedback){var self=this,effectiveResponseTransformed=self.transform(this.options.instance.effectiveResponse.response.answer);correctAnswers=_(this.options.instance.feedback.definition.correctAnswers).filter(function(correctAnswer){return effectiveResponseTransformed!==self.transform(correctAnswer.answer)})}return correctAnswers}});return ShortAnswerQuestion}),define("bundles/assess/questionTypes/allStudentTypes",["bundles/assess/questionTypes/checkbox/student/view","bundles/assess/questionTypes/checkboxPoll/student/view","bundles/assess/questionTypes/continue/student/view","bundles/assess/questionTypes/mathExpression/student/view","bundles/assess/questionTypes/mcq/student/view","bundles/assess/questionTypes/optionBase/student/view","bundles/assess/questionTypes/radioPoll/student/view","bundles/assess/questionTypes/shortanswer/student/view"],function(Checkbox,CheckboxPoll,Continue,MathExpression,Mcq,OptionBase,RadioPoll,ShortAnswer){return{checkbox:{QuestionView:Checkbox},checkboxPoll:{QuestionView:CheckboxPoll},"continue":{QuestionView:Continue},mathExpression:{QuestionView:MathExpression},mcq:{QuestionView:Mcq},optionBase:{QuestionView:OptionBase},poll:{QuestionView:RadioPoll},textExactMatch:{QuestionView:ShortAnswer}}}),define("bundles/assess/lib/constants",[],function(){return{defaultUserHtmlClass:"coursera-assess-user",legacyUserHtmlClass:"coursera-assess-user-legacy",htmlGuideLink:"https://instructor-support.desk.com/customer/portal/articles/1441676#html"}}),define("bundles/assess/framework/QuestionController",["backbone","underscore","bundles/assess/questionTypes/allStudentTypes","bundles/assess/lib/constants"],function(Backbone,_,allStudentTypes,constants){var QuestionController=Backbone.View.extend({_initQuestionView:function(){if(this.questionView)this.$el.empty(),this.questionView=null;var typeId=this.model.get("question").type,type=this.options.allStudentTypes[typeId];if(this.questionView=new type.QuestionView({instance:this.model.toJSON(),index:this.options.index,showFeedbackIcon:this.options.showFeedbackIcon||!1,el:this.el}),this.questionView.className)this.$el.addClass(this.questionView.className);this.questionView.render(),this.$("a").attr("target","_blank"),this.$('[data-js="user-html"]').addClass(this.options.userHtmlClass),this.questionView.on("change",this._handleViewResponseChange,this),this.questionView.on("submit",this.submit,this),this.setModelResponseToViewResponse({reason:"loadfrominitialrender"})},initialize:function(options){this.options=this.options||options||{},this.options.userHtmlClass=this.options.userHtmlClass||constants.defaultUserHtmlClass,this._disableReasons=[],this.options.allStudentTypes=this.options.allStudentTypes||allStudentTypes,this._initQuestionView(),this.model.on("change",this._handleQuestionModelChange,this)},remove:function(){this.model.off("change",this._handleQuestionModelChange,this),Backbone.View.prototype.remove.call(this)},submit:function(){this.model.trigger("submit")},setModelResponseToViewResponse:function(options){this.model.set("localResponse",this.questionView.serializeResponse(),options)},_handleViewResponseChange:function(){var self=this;setTimeout(function(){self.setModelResponseToViewResponse({reason:"userinput"})},0)},_handleQuestionModelChange:function(model,options){if(options)if("userinput"==options.reason||"loadfrominitialrender"==options.reason)return;if(model.isInstanceChanged())this._initQuestionView();if(model.get("isSubmitAllowed"))this.enableInput("submitNotAllowed");else this.disableInput("submitNotAllowed")},disableInput:function(reason){if(_(reason).isUndefined())reason="unspecified";this._disableReasons.push(reason),this.questionView.disableInput()},enableInput:function(reason){if(_(reason).isUndefined())reason="unspecified";if(this._disableReasons=_(this._disableReasons).without(reason),0===this._disableReasons.length)this.questionView.enableInput()},getSupportedStyles:function(){return this.questionView.supportedStyles}});return QuestionController}),define("bundles/assess/assessmentTypes/quickQuestions/assessment",["underscore","jquery","backbone","bundles/assess/assessmentTypes/quickQuestions/assessment.html","bundles/assess/assessmentTypes/quickQuestions/sessionModel","bundles/assess/framework/QuestionModel","bundles/assess/framework/QuestionController"],function(_,$,Backbone,template,QuickQuestionsSessionModel,QuestionModel,QuestionController){var QuickQuestions=Backbone.View.extend({events:{"click [data-submit]":"submit","click [data-next-question]":"nextQuestion","click [data-skip-question]":"skipQuestion"},remove:function(){this.model.off("change:state",this.stateChange,this),this.model.off("change:question",this.questionChange,this),Backbone.View.prototype.remove.call(this)},initialize:function(options){this.options=this.options||options||{},this.options.QuestionController=this.options.QuestionController||QuestionController},render:function(){this.questionController=null,this.$el.html(template()),this.model=this.model||new QuickQuestionsSessionModel({assessmentId:this.options.assessmentId,classId:0}),this.model.options=_(this.model.options||{}).extend({api:this.options.api}),this.model.on("change:state",this.stateChange,this),this.model.on("change:question",this.questionChange,this),this.model.fetch()},displayState:function(state){this.$("[data-state]").each(function(){var $el=$(this),elStates=$el.attr("data-state").split(",");if(_(elStates).contains(state))$el.show();else $el.hide()})},stateChange:function(){var state=this.model.get("state");if(this.displayState(state),"submitting"==state)this.disableInputs();else this.enableInputs();if(!_(["nothing","loading"]).contains(state)&&this.options.loadDefer)this.options.loadDefer.resolve("no-more-questions"==state?"hidden":"visible")},questionChange:function(){this.$("[data-question-container]").empty(),this.questionController=null;var question=this.model.get("question");if(null===question)return;if(this.questionController=new this.options.QuestionController({model:question}),_(this.questionController.getSupportedStyles()).contains("coursera-assess-style-question-quick"))this.questionController.$el.addClass("coursera-assess-style-question-quick");else this.questionController.$el.addClass("coursera-assess-style-question-default");this.$("[data-question-container]").append(this.questionController.$el)},disableInputs:function(){if(null!==this.questionController)this.questionController.disableInput()},enableInputs:function(){if(null!==this.questionController)this.questionController.enableInput()},submit:function(){if(null!==this.questionController)this.questionController.setModelResponseToViewResponse({reason:"presubmit"});this.model.submit()},nextQuestion:function(){this.model.fetchQuestion()},skipQuestion:function(){this.model.fetchQuestion(!0)}});return QuickQuestions}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(course,nextItemMetadata,nextItem,Math,moduleProgress,module,courseMaterials){buf.push('<div data-js="dashboard-open-course"'+jade.attr("data-course-slug",course.get("slug"),!0,!1)+' class="coursera-dashboard-course-listing-box row-fluid"><a'+jade.attr("href",nextItemMetadata.getLink(),!0,!1)+' data-js="item-link" class="coursera-dashboard-course-listing-box-icon-container">');var url;if(nextItem&&"assessOpenSinglePage"==nextItem.type)url="https://s3.amazonaws.com/coursera-misc/flex/banner.assessOpenSinglePage.jpg";else if(nextItem&&"lecture"==nextItem.type)url=nextItem.model.getPosterForResolution("720p");else url=course.get("promoPhoto");buf.push("<div"+jade.attr("style","background-image:url("+url+")",!0,!1)+' class="coursera-dashboard-course-listing-box-icon-background-image"><div class="coursera-dashboard-course-listing-box-icon"><em class="coursera-dashboard-course-listing-box-icon-play icon-play-circle icon-4x"></em></div></div></a><div class="coursera-dashboard-course-listing-box-main"><div class="coursera-dashboard-course-listing-box-university">'),function(){var $$obj=course.get("universities").toArray();if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var university=$$obj[$index];buf.push("<a"+jade.attr("href",university.getLink(),!0,!1)+' data-js="university-link" target="_blank">'+jade.escape(null==(jade_interp=university.get("name"))?"":jade_interp)+"</a>")}else{var $$l=0;for(var $index in $$obj){$$l++;var university=$$obj[$index];buf.push("<a"+jade.attr("href",university.getLink(),!0,!1)+' data-js="university-link" target="_blank">'+jade.escape(null==(jade_interp=university.get("name"))?"":jade_interp)+"</a>")}}}.call(this),buf.push('</div><div class="coursera-dashboard-course-listing-box-name"><a'+jade.attr("href",course.getLink(),!0,!1)+' data-js="course-link">'+jade.escape(null==(jade_interp=course.get("name"))?"":jade_interp)+"</a></div>");var percent=Math.max(moduleProgress.getPercent(),1);buf.push('<div class="coursera-dashboard-open-course-module"><span class="coursera-dashboard-open-course-module-title">Module '+jade.escape(null==(jade_interp=module.get("index"))?"":jade_interp)+" of "+jade.escape(null==(jade_interp=courseMaterials.getModuleCount())?"":jade_interp)+": "+jade.escape(null==(jade_interp=module.get("name"))?"":jade_interp)+'</span><span class="coursera-dashboard-open-course-module-progress pull-right">'+jade.escape(null==(jade_interp=percent)?"":jade_interp)+'%</span></div><div class="coursera-dashboard-course-listing-box-progress"><div class="progress-line progress-opencourse"></div><div'+jade.attr("style","left:"+percent+"%",!0,!1)+' class="progress-marker"></div><div'+jade.attr("style","width:"+percent+"%;",!0,!1)+' class="progress-bar progress-opencourse"></div></div><div class="row-fluid coursera-dashboard-course-listing-box-bottom"><div class="span8"><div class="coursera-dashboard-course-listing-box-links"><a'+jade.attr("href",course.getOutlineLink(),!0,!1)+' data-js="outline-link" class="coursera-dashboard-open-course-link">course info</a></div></div><div class="span4"><a'+jade.attr("href",nextItemMetadata.getLink(),!0,!1)+' data-js="item-link" class="coursera-dashboard-course-listing-box-go-button btn-flat btn-flat-success">Resume</a></div></div></div></div>')}("course"in locals_for_with?locals_for_with.course:"undefined"!=typeof course?course:void 0,"nextItemMetadata"in locals_for_with?locals_for_with.nextItemMetadata:"undefined"!=typeof nextItemMetadata?nextItemMetadata:void 0,"nextItem"in locals_for_with?locals_for_with.nextItem:"undefined"!=typeof nextItem?nextItem:void 0,"Math"in locals_for_with?locals_for_with.Math:"undefined"!=typeof Math?Math:void 0,"moduleProgress"in locals_for_with?locals_for_with.moduleProgress:"undefined"!=typeof moduleProgress?moduleProgress:void 0,"module"in locals_for_with?locals_for_with.module:"undefined"!=typeof module?module:void 0,"courseMaterials"in locals_for_with?locals_for_with.courseMaterials:"undefined"!=typeof courseMaterials?courseMaterials:void 0),buf.join("")};return yudify};if("function"==typeof define&&define.amd)define("pages/open-course/external/dashboard/openCourse.html",["js/lib/jade"],function(jade){var _t,_h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.open-course.external.dashboard.openCourse"]=jadify(wndw.jade.helpers)}(window),define("pages/open-course/external/dashboard/openCourseList",["jquery","backbone","underscore","js/core/coursera","pages/open-course/external/dashboard/openCourse.html","i18n!js/json/nls/universities","i18n!js/json/nls/topics"],function($,Backbone,_,Coursera,openCourseTemplate,universities_t,topics_t){var additionalStrings_t=universities_t.merge(topics_t),CourseListOpenCourse=Backbone.View.extend({initialize:function(options){this.courses=options.courses},render:function(){_(this.courses).each(function(course){var nextItemMetadata=course.nextItemMetadata,lesson=nextItemMetadata.get("lesson"),module=lesson.get("module"),moduleProgress=course.courseProgress.getModuleProgress(module.get("id")),$openCourse=openCourseTemplate({_t:additionalStrings_t,course:course.course,nextItem:course.nextItem,nextItemMetadata:nextItemMetadata,module:module,moduleProgress:moduleProgress,courseMaterials:course.courseMaterials,config:Coursera.config});this.$el.prepend($openCourse)},this),this.delegateEvents({'click [data-js~="item-link"]':this.trackClick("openCourse.dashboard.click.itemLink"),'click [data-js~="course-link"]':this.trackClick("openCourse.dashboard.click.courseLink"),'click [data-js~="outline-link"]':this.trackClick("openCourse.dashboard.click.outlineLink"),'click [data-js~="university-link"]':this.trackClick("openCourse.dashboard.click.universityLink")})},trackClick:function(eventName){return function(evt){var link=$(evt.currentTarget).attr("href"),obj={},matches;if(/(itemLink|courseLink|outlineLink)/.test(eventName)){if(matches=link.match(/\/learn\/(\w*)(\/item\/(\w*))?/),obj.courseSlug=matches[1],/itemLink/.test(eventName))obj.itemId=matches[3]}else if(/universityLink/.test(eventName))obj.universitySlug=link.slice(1);Coursera.multitracker.push([eventName,obj])}.bind(this)}});return CourseListOpenCourse}),!function(definition){if("function"==typeof bootstrap)bootstrap("promise",definition);else if("object"==typeof exports)module.exports=definition();else if("function"==typeof define&&define.amd)define("js/vendor/q.v1-0-1",definition);else if("undefined"!=typeof ses)if(!ses.ok())return;else ses.makeQ=definition;else Q=definition()}(function(){function uncurryThis(f){return function(){return call.apply(f,arguments)}}function isObject(value){return value===Object(value)}function isStopIteration(exception){return"[object StopIteration]"===object_toString(exception)||exception instanceof QReturnValue}function makeStackTraceLong(error,promise){if(hasStacks&&promise.stack&&"object"==typeof error&&null!==error&&error.stack&&-1===error.stack.indexOf(STACK_JUMP_SEPARATOR)){for(var stacks=[],p=promise;p;p=p.source)if(p.stack)stacks.unshift(p.stack);stacks.unshift(error.stack);var concatedStacks=stacks.join("\n"+STACK_JUMP_SEPARATOR+"\n");error.stack=filterStackString(concatedStacks)}}function filterStackString(stackString){for(var lines=stackString.split("\n"),desiredLines=[],i=0;i<lines.length;++i){var line=lines[i];if(!isInternalFrame(line)&&!isNodeFrame(line)&&line)desiredLines.push(line)}return desiredLines.join("\n")}function isNodeFrame(stackLine){return-1!==stackLine.indexOf("(module.js:")||-1!==stackLine.indexOf("(node.js:")}function getFileNameAndLineNumber(stackLine){var attempt1=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(stackLine);if(attempt1)return[attempt1[1],Number(attempt1[2])];var attempt2=/at ([^ ]+):(\d+):(?:\d+)$/.exec(stackLine);if(attempt2)return[attempt2[1],Number(attempt2[2])];var attempt3=/.*@(.+):(\d+)$/.exec(stackLine);if(attempt3)return[attempt3[1],Number(attempt3[2])]}function isInternalFrame(stackLine){var fileNameAndLineNumber=getFileNameAndLineNumber(stackLine);if(!fileNameAndLineNumber)return!1;var fileName=fileNameAndLineNumber[0],lineNumber=fileNameAndLineNumber[1];return fileName===qFileName&&lineNumber>=qStartingLine&&qEndingLine>=lineNumber}function captureLine(){if(!hasStacks)return;try{throw new Error}catch(e){var lines=e.stack.split("\n"),firstLine=lines[0].indexOf("@")>0?lines[1]:lines[2],fileNameAndLineNumber=getFileNameAndLineNumber(firstLine);if(!fileNameAndLineNumber)return;return qFileName=fileNameAndLineNumber[0],fileNameAndLineNumber[1]}}function deprecate(callback,name,alternative){return function(){if("undefined"!=typeof console&&"function"==typeof console.warn)console.warn(name+" is deprecated, use "+alternative+" instead.",new Error("").stack);return callback.apply(callback,arguments)}}function Q(value){if(isPromise(value))return value;if(isPromiseAlike(value))return coerce(value);else return fulfill(value)}function defer(){function become(newPromise){resolvedPromise=newPromise,promise.source=newPromise,array_reduce(messages,function(undefined,message){nextTick(function(){newPromise.promiseDispatch.apply(newPromise,message)})},void 0),messages=void 0,progressListeners=void 0}var messages=[],progressListeners=[],resolvedPromise,deferred=object_create(defer.prototype),promise=object_create(Promise.prototype);if(promise.promiseDispatch=function(resolve,op,operands){var args=array_slice(arguments);if(messages){if(messages.push(args),"when"===op&&operands[1])progressListeners.push(operands[1])}else nextTick(function(){resolvedPromise.promiseDispatch.apply(resolvedPromise,args)})},promise.valueOf=function(){if(messages)return promise;var nearerValue=nearer(resolvedPromise);if(isPromise(nearerValue))resolvedPromise=nearerValue;return nearerValue},promise.inspect=function(){if(!resolvedPromise)return{state:"pending"};return resolvedPromise.inspect()},Q.longStackSupport&&hasStacks)try{throw new Error}catch(e){promise.stack=e.stack.substring(e.stack.indexOf("\n")+1)}return deferred.promise=promise,deferred.resolve=function(value){if(resolvedPromise)return;become(Q(value))},deferred.fulfill=function(value){if(resolvedPromise)return;become(fulfill(value))},deferred.reject=function(reason){if(resolvedPromise)return;become(reject(reason))},deferred.notify=function(progress){if(resolvedPromise)return;array_reduce(progressListeners,function(undefined,progressListener){nextTick(function(){progressListener(progress)})},void 0)},deferred}function promise(resolver){if("function"!=typeof resolver)throw new TypeError("resolver must be a function.");var deferred=defer();try{resolver(deferred.resolve,deferred.reject,deferred.notify)}catch(reason){deferred.reject(reason)}return deferred.promise}function race(answerPs){return promise(function(resolve,reject){for(var i=0,len=answerPs.length;len>i;i++)Q(answerPs[i]).then(resolve,reject)})}function Promise(descriptor,fallback,inspect){if(void 0===fallback)fallback=function(op){return reject(new Error("Promise does not support operation: "+op))};if(void 0===inspect)inspect=function(){return{state:"unknown"}};var promise=object_create(Promise.prototype);if(promise.promiseDispatch=function(resolve,op,args){var result;try{if(descriptor[op])result=descriptor[op].apply(promise,args);else result=fallback.call(promise,op,args)}catch(exception){result=reject(exception)}if(resolve)resolve(result)},promise.inspect=inspect,inspect){var inspected=inspect();if("rejected"===inspected.state)promise.exception=inspected.reason;promise.valueOf=function(){var inspected=inspect();if("pending"===inspected.state||"rejected"===inspected.state)return promise;return inspected.value}}return promise}function when(value,fulfilled,rejected,progressed){return Q(value).then(fulfilled,rejected,progressed)}function nearer(value){if(isPromise(value)){var inspected=value.inspect();if("fulfilled"===inspected.state)return inspected.value}return value}function isPromise(object){return isObject(object)&&"function"==typeof object.promiseDispatch&&"function"==typeof object.inspect}function isPromiseAlike(object){return isObject(object)&&"function"==typeof object.then}function isPending(object){return isPromise(object)&&"pending"===object.inspect().state}function isFulfilled(object){return!isPromise(object)||"fulfilled"===object.inspect().state}function isRejected(object){return isPromise(object)&&"rejected"===object.inspect().state}function resetUnhandledRejections(){if(unhandledReasons.length=0,unhandledRejections.length=0,!trackUnhandledRejections)trackUnhandledRejections=!0}function trackRejection(promise,reason){if(!trackUnhandledRejections)return;if(unhandledRejections.push(promise),reason&&"undefined"!=typeof reason.stack)unhandledReasons.push(reason.stack);else unhandledReasons.push("(no stack) "+reason)}function untrackRejection(promise){if(!trackUnhandledRejections)return;var at=array_indexOf(unhandledRejections,promise);if(-1!==at)unhandledRejections.splice(at,1),unhandledReasons.splice(at,1)}function reject(reason){var rejection=Promise({when:function(rejected){if(rejected)untrackRejection(this);return rejected?rejected(reason):this}},function fallback(){return this},function inspect(){return{state:"rejected",reason:reason}});return trackRejection(rejection,reason),rejection}function fulfill(value){return Promise({when:function(){return value},get:function(name){return value[name]},set:function(name,rhs){value[name]=rhs},"delete":function(name){delete value[name]},post:function(name,args){if(null===name||void 0===name)return value.apply(void 0,args);else return value[name].apply(value,args)},apply:function(thisp,args){return value.apply(thisp,args)},keys:function(){return object_keys(value)}},void 0,function inspect(){return{state:"fulfilled",value:value}})}function coerce(promise){var deferred=defer();return nextTick(function(){try{promise.then(deferred.resolve,deferred.reject,deferred.notify)}catch(exception){deferred.reject(exception)}}),deferred.promise}function master(object){return Promise({isDef:function(){}},function fallback(op,args){return dispatch(object,op,args)},function(){return Q(object).inspect()})}function spread(value,fulfilled,rejected){return Q(value).spread(fulfilled,rejected)}function async(makeGenerator){return function(){function continuer(verb,arg){var result;if("undefined"==typeof StopIteration){try{result=generator[verb](arg)}catch(exception){return reject(exception)}if(result.done)return result.value;else return when(result.value,callback,errback)}else{try{result=generator[verb](arg)}catch(exception){if(isStopIteration(exception))return exception.value;else return reject(exception)}return when(result,callback,errback)}}var generator=makeGenerator.apply(this,arguments),callback=continuer.bind(continuer,"next"),errback=continuer.bind(continuer,"throw");return callback()}}function spawn(makeGenerator){Q.done(Q.async(makeGenerator)())}function _return(value){throw new QReturnValue(value)}function promised(callback){return function(){return spread([this,all(arguments)],function(self,args){return callback.apply(self,args)})}}function dispatch(object,op,args){return Q(object).dispatch(op,args)}function all(promises){return when(promises,function(promises){var countDown=0,deferred=defer();if(array_reduce(promises,function(undefined,promise,index){var snapshot;if(isPromise(promise)&&"fulfilled"===(snapshot=promise.inspect()).state)promises[index]=snapshot.value;else++countDown,when(promise,function(value){if(promises[index]=value,0===--countDown)deferred.resolve(promises)},deferred.reject,function(progress){deferred.notify({index:index,value:progress})})},void 0),0===countDown)deferred.resolve(promises);return deferred.promise})}function allResolved(promises){return when(promises,function(promises){return promises=array_map(promises,Q),when(all(array_map(promises,function(promise){return when(promise,noop,noop)})),function(){return promises})})}function allSettled(promises){return Q(promises).allSettled()}function progress(object,progressed){return Q(object).then(void 0,void 0,progressed)}function nodeify(object,nodeback){return Q(object).nodeify(nodeback)}var hasStacks=!1;try{throw new Error}catch(e){hasStacks=!!e.stack}var qStartingLine=captureLine(),qFileName,noop=function(){},nextTick=function(){function flush(){for(;head.next;){head=head.next;var task=head.task;head.task=void 0;var domain=head.domain;if(domain)head.domain=void 0,domain.enter();try{task()}catch(e){if(isNodeJS){if(domain)domain.exit();if(setTimeout(flush,0),domain)domain.enter();throw e}else setTimeout(function(){throw e},0)}if(domain)domain.exit()}flushing=!1}var head={task:void 0,next:null},tail=head,flushing=!1,requestTick=void 0,isNodeJS=!1;if(nextTick=function(task){if(tail=tail.next={task:task,domain:isNodeJS&&process.domain,next:null},!flushing)flushing=!0,requestTick()},"undefined"!=typeof process&&process.nextTick)isNodeJS=!0,requestTick=function(){process.nextTick(flush)};else if("function"==typeof setImmediate)if("undefined"!=typeof window)requestTick=setImmediate.bind(window,flush);else requestTick=function(){setImmediate(flush)};else if("undefined"!=typeof MessageChannel){var channel=new MessageChannel;channel.port1.onmessage=function(){requestTick=requestPortTick,channel.port1.onmessage=flush,flush()};var requestPortTick=function(){channel.port2.postMessage(0)};requestTick=function(){setTimeout(flush,0),requestPortTick()}}else requestTick=function(){setTimeout(flush,0)};return nextTick}(),call=Function.call,array_slice=uncurryThis(Array.prototype.slice),array_reduce=uncurryThis(Array.prototype.reduce||function(callback,basis){var index=0,length=this.length;if(1===arguments.length)for(;;){if(index in this){basis=this[index++];break}if(++index>=length)throw new TypeError}for(;length>index;index++)if(index in this)basis=callback(basis,this[index],index);return basis}),array_indexOf=uncurryThis(Array.prototype.indexOf||function(value){for(var i=0;i<this.length;i++)if(this[i]===value)return i;return-1}),array_map=uncurryThis(Array.prototype.map||function(callback,thisp){var self=this,collect=[];return array_reduce(self,function(undefined,value,index){collect.push(callback.call(thisp,value,index,self))},void 0),collect}),object_create=Object.create||function(prototype){function Type(){}return Type.prototype=prototype,new Type},object_hasOwnProperty=uncurryThis(Object.prototype.hasOwnProperty),object_keys=Object.keys||function(object){var keys=[];for(var key in object)if(object_hasOwnProperty(object,key))keys.push(key);return keys},object_toString=uncurryThis(Object.prototype.toString),QReturnValue;if("undefined"!=typeof ReturnValue)QReturnValue=ReturnValue;else QReturnValue=function(value){this.value=value};var STACK_JUMP_SEPARATOR="From previous event:";Q.resolve=Q,Q.nextTick=nextTick,Q.longStackSupport=!1,Q.defer=defer,defer.prototype.makeNodeResolver=function(){var self=this;return function(error,value){if(error)self.reject(error);else if(arguments.length>2)self.resolve(array_slice(arguments,1));else self.resolve(value)}},Q.Promise=promise,Q.promise=promise,promise.race=race,promise.all=all,promise.reject=reject,promise.resolve=Q,Q.passByCopy=function(object){return object},Promise.prototype.passByCopy=function(){return this},Q.join=function(x,y){return Q(x).join(y)},Promise.prototype.join=function(that){return Q([this,that]).spread(function(x,y){if(x===y)return x;else throw new Error("Can't join: not the same: "+x+" "+y)})},Q.race=race,Promise.prototype.race=function(){return this.then(Q.race)},Q.makePromise=Promise,Promise.prototype.toString=function(){return"[object Promise]"},Promise.prototype.then=function(fulfilled,rejected,progressed){function _fulfilled(value){try{return"function"==typeof fulfilled?fulfilled(value):value}catch(exception){return reject(exception)}}function _rejected(exception){if("function"==typeof rejected){makeStackTraceLong(exception,self);try{return rejected(exception)}catch(newException){return reject(newException)}}return reject(exception)}function _progressed(value){return"function"==typeof progressed?progressed(value):value}var self=this,deferred=defer(),done=!1;return nextTick(function(){self.promiseDispatch(function(value){if(done)return;done=!0,deferred.resolve(_fulfilled(value))},"when",[function(exception){if(done)return;done=!0,deferred.resolve(_rejected(exception))}])}),self.promiseDispatch(void 0,"when",[void 0,function(value){var newValue,threw=!1;try{newValue=_progressed(value)}catch(e){if(threw=!0,Q.onerror)Q.onerror(e);else throw e}if(!threw)deferred.notify(newValue)}]),deferred.promise},Q.when=when,Promise.prototype.thenResolve=function(value){return this.then(function(){return value})},Q.thenResolve=function(promise,value){return Q(promise).thenResolve(value)},Promise.prototype.thenReject=function(reason){return this.then(function(){throw reason})},Q.thenReject=function(promise,reason){return Q(promise).thenReject(reason)},Q.nearer=nearer,Q.isPromise=isPromise,Q.isPromiseAlike=isPromiseAlike,Q.isPending=isPending,Promise.prototype.isPending=function(){return"pending"===this.inspect().state},Q.isFulfilled=isFulfilled,Promise.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},Q.isRejected=isRejected,Promise.prototype.isRejected=function(){return"rejected"===this.inspect().state};var unhandledReasons=[],unhandledRejections=[],trackUnhandledRejections=!0;Q.resetUnhandledRejections=resetUnhandledRejections,Q.getUnhandledReasons=function(){return unhandledReasons.slice()},Q.stopUnhandledRejectionTracking=function(){resetUnhandledRejections(),trackUnhandledRejections=!1},resetUnhandledRejections(),Q.reject=reject,Q.fulfill=fulfill,Q.master=master,Q.spread=spread,Promise.prototype.spread=function(fulfilled,rejected){return this.all().then(function(array){return fulfilled.apply(void 0,array)},rejected)},Q.async=async,Q.spawn=spawn,Q["return"]=_return,Q.promised=promised,Q.dispatch=dispatch,Promise.prototype.dispatch=function(op,args){var self=this,deferred=defer();return nextTick(function(){self.promiseDispatch(deferred.resolve,op,args)}),deferred.promise},Q.get=function(object,key){return Q(object).dispatch("get",[key])},Promise.prototype.get=function(key){return this.dispatch("get",[key])},Q.set=function(object,key,value){return Q(object).dispatch("set",[key,value])},Promise.prototype.set=function(key,value){return this.dispatch("set",[key,value])},Q.del=Q["delete"]=function(object,key){return Q(object).dispatch("delete",[key])},Promise.prototype.del=Promise.prototype["delete"]=function(key){return this.dispatch("delete",[key])},Q.mapply=Q.post=function(object,name,args){return Q(object).dispatch("post",[name,args])},Promise.prototype.mapply=Promise.prototype.post=function(name,args){return this.dispatch("post",[name,args])},Q.send=Q.mcall=Q.invoke=function(object,name){return Q(object).dispatch("post",[name,array_slice(arguments,2)])},Promise.prototype.send=Promise.prototype.mcall=Promise.prototype.invoke=function(name){return this.dispatch("post",[name,array_slice(arguments,1)])},Q.fapply=function(object,args){return Q(object).dispatch("apply",[void 0,args])},Promise.prototype.fapply=function(args){return this.dispatch("apply",[void 0,args])},Q["try"]=Q.fcall=function(object){return Q(object).dispatch("apply",[void 0,array_slice(arguments,1)])},Promise.prototype.fcall=function(){return this.dispatch("apply",[void 0,array_slice(arguments)])},Q.fbind=function(object){var promise=Q(object),args=array_slice(arguments,1);return function fbound(){return promise.dispatch("apply",[this,args.concat(array_slice(arguments))])}},Promise.prototype.fbind=function(){var promise=this,args=array_slice(arguments);return function fbound(){return promise.dispatch("apply",[this,args.concat(array_slice(arguments))])}},Q.keys=function(object){return Q(object).dispatch("keys",[])},Promise.prototype.keys=function(){return this.dispatch("keys",[])},Q.all=all,Promise.prototype.all=function(){return all(this)},Q.allResolved=deprecate(allResolved,"allResolved","allSettled"),Promise.prototype.allResolved=function(){return allResolved(this)},Q.allSettled=allSettled,Promise.prototype.allSettled=function(){return this.then(function(promises){return all(array_map(promises,function(promise){function regardless(){return promise.inspect()
}return promise=Q(promise),promise.then(regardless,regardless)}))})},Q.fail=Q["catch"]=function(object,rejected){return Q(object).then(void 0,rejected)},Promise.prototype.fail=Promise.prototype["catch"]=function(rejected){return this.then(void 0,rejected)},Q.progress=progress,Promise.prototype.progress=function(progressed){return this.then(void 0,void 0,progressed)},Q.fin=Q["finally"]=function(object,callback){return Q(object)["finally"](callback)},Promise.prototype.fin=Promise.prototype["finally"]=function(callback){return callback=Q(callback),this.then(function(value){return callback.fcall().then(function(){return value})},function(reason){return callback.fcall().then(function(){throw reason})})},Q.done=function(object,fulfilled,rejected,progress){return Q(object).done(fulfilled,rejected,progress)},Promise.prototype.done=function(fulfilled,rejected,progress){var onUnhandledError=function(error){nextTick(function(){if(makeStackTraceLong(error,promise),Q.onerror)Q.onerror(error);else throw error})},promise=fulfilled||rejected||progress?this.then(fulfilled,rejected,progress):this;if("object"==typeof process&&process&&process.domain)onUnhandledError=process.domain.bind(onUnhandledError);promise.then(void 0,onUnhandledError)},Q.timeout=function(object,ms,message){return Q(object).timeout(ms,message)},Promise.prototype.timeout=function(ms,message){var deferred=defer(),timeoutId=setTimeout(function(){deferred.reject(new Error(message||"Timed out after "+ms+" ms"))},ms);return this.then(function(value){clearTimeout(timeoutId),deferred.resolve(value)},function(exception){clearTimeout(timeoutId),deferred.reject(exception)},deferred.notify),deferred.promise},Q.delay=function(object,timeout){if(void 0===timeout)timeout=object,object=void 0;return Q(object).delay(timeout)},Promise.prototype.delay=function(timeout){return this.then(function(value){var deferred=defer();return setTimeout(function(){deferred.resolve(value)},timeout),deferred.promise})},Q.nfapply=function(callback,args){return Q(callback).nfapply(args)},Promise.prototype.nfapply=function(args){var deferred=defer(),nodeArgs=array_slice(args);return nodeArgs.push(deferred.makeNodeResolver()),this.fapply(nodeArgs).fail(deferred.reject),deferred.promise},Q.nfcall=function(callback){var args=array_slice(arguments,1);return Q(callback).nfapply(args)},Promise.prototype.nfcall=function(){var nodeArgs=array_slice(arguments),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),this.fapply(nodeArgs).fail(deferred.reject),deferred.promise},Q.nfbind=Q.denodeify=function(callback){var baseArgs=array_slice(arguments,1);return function(){var nodeArgs=baseArgs.concat(array_slice(arguments)),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),Q(callback).fapply(nodeArgs).fail(deferred.reject),deferred.promise}},Promise.prototype.nfbind=Promise.prototype.denodeify=function(){var args=array_slice(arguments);return args.unshift(this),Q.denodeify.apply(void 0,args)},Q.nbind=function(callback,thisp){var baseArgs=array_slice(arguments,2);return function(){function bound(){return callback.apply(thisp,arguments)}var nodeArgs=baseArgs.concat(array_slice(arguments)),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),Q(bound).fapply(nodeArgs).fail(deferred.reject),deferred.promise}},Promise.prototype.nbind=function(){var args=array_slice(arguments,0);return args.unshift(this),Q.nbind.apply(void 0,args)},Q.nmapply=Q.npost=function(object,name,args){return Q(object).npost(name,args)},Promise.prototype.nmapply=Promise.prototype.npost=function(name,args){var nodeArgs=array_slice(args||[]),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),this.dispatch("post",[name,nodeArgs]).fail(deferred.reject),deferred.promise},Q.nsend=Q.nmcall=Q.ninvoke=function(object,name){var nodeArgs=array_slice(arguments,2),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),Q(object).dispatch("post",[name,nodeArgs]).fail(deferred.reject),deferred.promise},Promise.prototype.nsend=Promise.prototype.nmcall=Promise.prototype.ninvoke=function(name){var nodeArgs=array_slice(arguments,1),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),this.dispatch("post",[name,nodeArgs]).fail(deferred.reject),deferred.promise},Q.nodeify=nodeify,Promise.prototype.nodeify=function(nodeback){if(nodeback)this.then(function(value){nextTick(function(){nodeback(null,value)})},function(error){nextTick(function(){nodeback(error)})});else return this};var qEndingLine=captureLine();return Q}),!function(root,factory){if("function"==typeof define&&define.amd)define("js/vendor/backbone-associations.v0-6-1",["js/vendor/underscore.v1-6","js/vendor/backbone.v1-1-2"],function(_,Backbone){return factory(root,Backbone,_)});else if("undefined"!=typeof exports){var _=require("underscore"),Backbone=require("backbone");if(factory(root,Backbone,_),"undefined"!=typeof module&&module.exports)module.exports=Backbone;exports=Backbone}else factory(root,root.Backbone,root._)}(this,function(root,Backbone,_){var BackboneModel,BackboneCollection,ModelProto,BackboneEvent,CollectionProto,AssociatedModel,pathChecker,delimiters,pathSeparator,sourceModel,sourceKey,endPoints={};BackboneModel=Backbone.Model,BackboneCollection=Backbone.Collection,ModelProto=BackboneModel.prototype,CollectionProto=BackboneCollection.prototype,BackboneEvent=Backbone.Events,Backbone.Associations={VERSION:"0.6.1"},Backbone.Associations.scopes=[];var getSeparator=function(){return pathSeparator},setSeparator=function(value){if(!_.isString(value)||_.size(value)<1)value=".";pathSeparator=value,pathChecker=new RegExp("[\\"+pathSeparator+"\\[\\]]+","g"),delimiters=new RegExp("[^\\"+pathSeparator+"\\[\\]]+","g")};try{Object.defineProperty(Backbone.Associations,"SEPARATOR",{enumerable:!0,get:getSeparator,set:setSeparator})}catch(e){}Backbone.Associations.Many=Backbone.Many="Many",Backbone.Associations.One=Backbone.One="One",Backbone.Associations.Self=Backbone.Self="Self",Backbone.Associations.SEPARATOR=".",Backbone.Associations.getSeparator=getSeparator,Backbone.Associations.setSeparator=setSeparator,Backbone.Associations.EVENTS_BUBBLE=!0,Backbone.Associations.EVENTS_WILDCARD=!0,Backbone.Associations.EVENTS_NC=!1,setSeparator(),AssociatedModel=Backbone.AssociatedModel=Backbone.Associations.AssociatedModel=BackboneModel.extend({relations:void 0,_proxyCalls:void 0,on:function(name,callback,context){var result=BackboneEvent.on.apply(this,arguments);if(Backbone.Associations.EVENTS_NC)return result;var eventSplitter=/\s+/;if(_.isString(name)&&name&&!eventSplitter.test(name)&&callback){var endPoint=getPathEndPoint(name);if(endPoint)endPoints[endPoint]="undefined"==typeof endPoints[endPoint]?1:endPoints[endPoint]+1}return result},off:function(name,callback,context){if(Backbone.Associations.EVENTS_NC)return BackboneEvent.off.apply(this,arguments);var eventSplitter=/\s+/,events=this._events,listeners={},names=events?_.keys(events):[],all=!name&&!callback&&!context,atomic_event=_.isString(name)&&!eventSplitter.test(name);if(all||atomic_event)for(var i=0,l=names.length;l>i;i++)listeners[names[i]]=events[names[i]]?events[names[i]].length:0;var result=BackboneEvent.off.apply(this,arguments);if(all||atomic_event)for(i=0,l=names.length;l>i;i++){var endPoint=getPathEndPoint(names[i]);if(endPoint)if(events[names[i]])endPoints[endPoint]-=listeners[names[i]]-events[names[i]].length;else endPoints[endPoint]-=listeners[names[i]]}return result},get:function(attr){var obj=ModelProto.get.call(this,attr);return obj?obj:this._getAttr.apply(this,arguments)},set:function(key,value,options){var attributes,result;if(_.isObject(key)||null==key)attributes=key,options=value;else attributes={},attributes[key]=value;return result=this._set(attributes,options),this._processPendingEvents(),result},_set:function(attributes,options){var attr,modelMap,modelId,obj,result=this;if(!attributes)return this;for(attr in attributes)if(modelMap||(modelMap={}),attr.match(pathChecker)){var pathTokens=getPathArray(attr),initials=_.initial(pathTokens),last=pathTokens[pathTokens.length-1],parentModel=this.get(initials);if(parentModel instanceof AssociatedModel)obj=modelMap[parentModel.cid]||(modelMap[parentModel.cid]={model:parentModel,data:{}}),obj.data[last]=attributes[attr]}else obj=modelMap[this.cid]||(modelMap[this.cid]={model:this,data:{}}),obj.data[attr]=attributes[attr];if(modelMap)for(modelId in modelMap)obj=modelMap[modelId],this._setAttr.call(obj.model,obj.data,options)||(result=!1);else result=this._setAttr.call(this,attributes,options);return result},_setAttr:function(attributes,options){var attr;if(options||(options={}),options.unset)for(attr in attributes)attributes[attr]=void 0;if(this.parents=this.parents||[],this.relations)_.each(this.relations,function(relation){var relationKey=relation.key,relatedModel=relation.relatedModel,collectionType=relation.collectionType,activationContext=relation.scope||root,map=relation.map,currVal=this.attributes[relationKey],idKey=currVal&&currVal.idAttribute,val,relationOptions,data,relationValue,newCtx=!1;if(relatedModel&&!(relatedModel.prototype instanceof BackboneModel))relatedModel=_.isFunction(relatedModel)?relatedModel.call(this,relation,attributes):relatedModel;if(relatedModel&&_.isString(relatedModel))relatedModel=relatedModel===Backbone.Self?this.constructor:map2Scope(relatedModel,activationContext);if(map&&_.isString(map)&&(map=map2Scope(map,activationContext)),relationOptions=relation.options?_.extend({},relation.options,options):options,attributes[relationKey]){if(val=_.result(attributes,relationKey),val=map?map.call(this,val,collectionType?collectionType:relatedModel):val,relation.type===Backbone.Many){if(collectionType&&_.isFunction(collectionType)&&collectionType.prototype instanceof BackboneModel)throw new Error("type is of Backbone.Model. Specify derivatives of Backbone.Collection");if(collectionType&&!(collectionType.prototype instanceof BackboneCollection))collectionType=_.isFunction(collectionType)?collectionType.call(this,relation,attributes):collectionType;if(collectionType&&_.isString(collectionType)&&(collectionType=map2Scope(collectionType,activationContext)),!relatedModel&&!collectionType)throw new Error("specify either a relatedModel or collectionType");if(collectionType&&!collectionType.prototype instanceof BackboneCollection)throw new Error("collectionType must inherit from Backbone.Collection");if(currVal)currVal._deferEvents=!0,currVal[relationOptions.reset?"reset":"set"](val instanceof BackboneCollection?val.models:val,relationOptions),data=currVal;else if(newCtx=!0,val instanceof BackboneCollection)data=val;else data=collectionType?new collectionType:this._createCollection(relatedModel,activationContext),data[relationOptions.reset?"reset":"set"](val,relationOptions)}else if(relation.type===Backbone.One){if(!relatedModel)throw new Error("specify a relatedModel for Backbone.One type");if(!(relatedModel.prototype instanceof Backbone.AssociatedModel))throw new Error("specify an AssociatedModel for Backbone.One type");if(data=val instanceof AssociatedModel?val:new relatedModel(val,relationOptions),currVal&&data.attributes[idKey]&&currVal.attributes[idKey]===data.attributes[idKey])currVal._deferEvents=!0,currVal._set(val instanceof AssociatedModel?val.attributes:val,relationOptions),data=currVal;else newCtx=!0}else throw new Error("type attribute must be specified and have the values Backbone.One or Backbone.Many");if(attributes[relationKey]=data,relationValue=data,newCtx||relationValue&&!relationValue._proxyCallback)relationValue._proxyCallback=function(){return Backbone.Associations.EVENTS_BUBBLE&&this._bubbleEvent.call(this,relationKey,relationValue,arguments)},relationValue.on("all",relationValue._proxyCallback,this)}if(attributes.hasOwnProperty(relationKey)){var updated=attributes[relationKey],original=this.attributes[relationKey];if(updated)updated.parents=updated.parents||[],-1==_.indexOf(updated.parents,this)&&updated.parents.push(this);else if(original&&original.parents.length>0)original.parents=_.difference(original.parents,[this]),original._proxyCallback&&original.off("all",original._proxyCallback,this)}},this);return ModelProto.set.call(this,attributes,options)},_bubbleEvent:function(relationKey,relationValue,eventArguments){var args=eventArguments,opt=args[0].split(":"),eventType=opt[0],catch_all="nested-change"==args[0],isChangeEvent="change"===eventType,eventObject=args[1],indexEventObject=-1,_proxyCalls=relationValue._proxyCalls,cargs,eventPath=opt[1],eSrc=!eventPath||-1==eventPath.indexOf(pathSeparator),basecolEventPath;if(catch_all)return;if(eSrc)sourceKey=getPathEndPoint(args[0])||relationKey;if(!Backbone.Associations.EVENTS_NC&&!endPoints[sourceKey])return;if(Backbone.Associations.EVENTS_WILDCARD)if(/\[\*\]/g.test(eventPath))return this;if(relationValue instanceof BackboneCollection&&(isChangeEvent||eventPath))indexEventObject=relationValue.indexOf(sourceModel||eventObject);if(this instanceof BackboneModel)sourceModel=this;if(eventPath=relationKey+(-1!==indexEventObject&&(isChangeEvent||eventPath)?"["+indexEventObject+"]":"")+(eventPath?pathSeparator+eventPath:""),Backbone.Associations.EVENTS_WILDCARD)basecolEventPath=eventPath.replace(/\[\d+\]/g,"[*]");if(cargs=[],cargs.push.apply(cargs,args),cargs[0]=eventType+":"+eventPath,Backbone.Associations.EVENTS_WILDCARD&&eventPath!==basecolEventPath)cargs[0]=cargs[0]+" "+eventType+":"+basecolEventPath;if(_proxyCalls=relationValue._proxyCalls=_proxyCalls||{},this._isEventAvailable.call(this,_proxyCalls,eventPath))return this;if(_proxyCalls[eventPath]=!0,isChangeEvent)this._previousAttributes[relationKey]=relationValue._previousAttributes,this.changed[relationKey]=relationValue;if(this.trigger.apply(this,cargs),Backbone.Associations.EVENTS_NC&&isChangeEvent&&this.get(eventPath)!=args[2]){var ncargs=["nested-change",eventPath,args[1]];args[2]&&ncargs.push(args[2]),this.trigger.apply(this,ncargs)}if(_proxyCalls&&eventPath)delete _proxyCalls[eventPath];return sourceModel=void 0,this},_isEventAvailable:function(_proxyCalls,path){return _.find(_proxyCalls,function(value,eventKey){return-1!==path.indexOf(eventKey,path.length-eventKey.length)})},_createCollection:function(type,context){var collection,relatedModel=type;if(_.isString(relatedModel)&&(relatedModel=map2Scope(relatedModel,context)),relatedModel&&relatedModel.prototype instanceof AssociatedModel||_.isFunction(relatedModel))collection=new BackboneCollection,collection.model=relatedModel;else throw new Error("type must inherit from Backbone.AssociatedModel");return collection},_processPendingEvents:function(){if(!this._processedEvents)this._processedEvents=!0,this._deferEvents=!1,_.each(this._pendingEvents,function(e){e.c.trigger.apply(e.c,e.a)}),this._pendingEvents=[],_.each(this.relations,function(relation){var val=this.attributes[relation.key];val&&val._processPendingEvents()},this),delete this._processedEvents},trigger:function(name){if(this._deferEvents)this._pendingEvents=this._pendingEvents||[],this._pendingEvents.push({c:this,a:arguments});else ModelProto.trigger.apply(this,arguments)},toJSON:function(options){var json={},aJson;if(json[this.idAttribute]=this.id,!this.visited){if(this.visited=!0,json=ModelProto.toJSON.apply(this,arguments),options&&options.serialize_keys)json=_.pick(json,options.serialize_keys);if(this.relations)_.each(this.relations,function(relation){var key=relation.key,remoteKey=relation.remoteKey,attr=this.attributes[key],serialize=!relation.isTransient,serialize_keys=relation.serialize||[];if(delete json[key],serialize){if(serialize_keys.length)options?options.serialize_keys=serialize_keys:options={serialize_keys:serialize_keys};aJson=attr&&attr.toJSON?attr.toJSON(options):attr,json[remoteKey||key]=_.isArray(aJson)?_.compact(aJson):aJson}},this);delete this.visited}return json},clone:function(options){return new this.constructor(this.toJSON(options))},cleanup:function(){_.each(this.relations,function(relation){var val=this.attributes[relation.key];val&&(val.parents=_.difference(val.parents,[this]))},this),this.off()},_getAttr:function(path){var result=this,attrs=getPathArray(path),key,i;if(_.size(attrs)<1)return;for(i=0;i<attrs.length&&(key=attrs[i],result);i++)result=result instanceof BackboneCollection?isNaN(key)?void 0:result.at(key):result.attributes[key];return result}});var getPathArray=function(path){if(""===path)return[""];return _.isString(path)?path.match(delimiters):path||[]},getPathEndPoint=function(path){if(!path)return path;var tokens=path.split(":");if(tokens.length>1)return path=tokens[tokens.length-1],tokens=path.split(pathSeparator),tokens.length>1?tokens[tokens.length-1].split("[")[0]:tokens[0].split("[")[0];else return""},map2Scope=function(path,context){var target,scopes=[context];scopes.push.apply(scopes,Backbone.Associations.scopes);for(var ctx,i=0,l=scopes.length;l>i;++i)if(ctx=scopes[i])if(target=_.reduce(path.split(pathSeparator),function(memo,elem){return memo[elem]},ctx))break;return target},map2models=function(parents,target,models){var relation,surrogate;if(_.find(parents,function(parent){if(relation=_.find(parent.relations,function(rel){return parent.get(rel.key)===target},this))return surrogate=parent,!0},this),relation&&relation.map)return relation.map.call(surrogate,models,target);return models},proxies={};return _.each(["set","remove","reset"],function(method){proxies[method]=BackboneCollection.prototype[method],CollectionProto[method]=function(models,options){if(this.model.prototype instanceof AssociatedModel&&this.parents)arguments[0]=map2models(this.parents,this,models);return proxies[method].apply(this,arguments)}}),proxies.trigger=CollectionProto.trigger,CollectionProto.trigger=function(name){if(this._deferEvents)this._pendingEvents=this._pendingEvents||[],this._pendingEvents.push({c:this,a:arguments});else proxies.trigger.apply(this,arguments)},CollectionProto._processPendingEvents=AssociatedModel.prototype._processPendingEvents,CollectionProto.on=AssociatedModel.prototype.on,CollectionProto.off=AssociatedModel.prototype.off,Backbone}),define("js/lib/language.v0-0-1",["js/vendor/jquery.v2-1","js/vendor/underscore.v1-6"],function($,_){function shortenLanguageCode(code){return(normalizeLanguageCode(code)||"").split("-")[0]}function languageCodeCSVtoLanguages(csv){var subtitlesLangs=_.compact((csv||"").split(/,\s*/g));return _.reduce(subtitlesLangs,function(memo,code){return memo[code]=languageCodeToName(code),memo},{})}function isRightToLeft(language){var rightToLeftLanguages=["ar","he"];return _.contains(rightToLeftLanguages,shortenLanguageCode(language))}function languageCodeToName(code){code=normalizeLanguageCode(code||"");var components=code.split("-"),language,languageMappingExists=_.any(components,function(c,i){var codeToTest=components.slice(0,components.length-i).join("-");return language=languageCodeToNameObj[codeToTest],!!language});return languageMappingExists?language:code}function normalizeLanguageCode(languageCode){var code=(languageCode||"").toLowerCase().replace(/_/g,"-");return code.split(/[;=,]/)[0]}function getLanguageCode(){var code;try{code=window.require.s.contexts._.config.config.i18n.locale}catch(e){code=normalizeLanguageCode($("#_require").attr("data-locale"))||"en"}return code}function latinizeText(string){return string.replace(/[^A-Za-z0-9\[\] ]/g,function(a){return LATIN_MAP[a]||a})}var languageCodeToNameObj={ab:"Abkhaz",aa:"Afar",af:"Afrikaans",ak:"Akan",sq:"Albanian",am:"Amharic",ar:"Arabic",an:"Aragonese",hy:"Armenian",as:"Assamese",av:"Avaric",ae:"Avestan",ay:"Aymara",az:"Azerbaijani",bm:"Bambara",ba:"Bashkir",eu:"Basque",be:"Belarusian",bn:"Bengali",bh:"Bihari",bi:"Bislama",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",ny:"Chichewa",zh:"Chinese","zh-cn":"Chinese (Simplified)","zh-tw":"Chinese (Traditional)",cv:"Chuvash",kw:"Cornish",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",dv:"Divehi",nl:"Dutch",dz:"Dzongkha",en:"English",eo:"Esperanto",et:"Estonian",ee:"Ewe",fo:"Faroese",fj:"Fijian",fi:"Finnish",fr:"French",ff:"Fula",gl:"Galician",ka:"Georgian",de:"German",el:"Greek",gn:"Guaraní",gu:"Gujarati",ht:"Haitian",ha:"Hausa",he:"Hebrew",hz:"Herero",hi:"Hindi",ho:"Hiri Motu",hu:"Hungarian",ia:"Interlingua",id:"Indonesian",ie:"Interlingue",ga:"Irish",ig:"Igbo",ik:"Inupiaq",io:"Ido",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jv:"Javanese",kl:"Kalaallisut",kn:"Kannada",kr:"Kanuri",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ki:"Kikuyu",rw:"Kinyarwanda",ky:"Kyrgyz",kv:"Komi",kg:"Kongo",ko:"Korean",ku:"Kurdish",kj:"Kwanyama",la:"Latin",lb:"Luxembourgish",lg:"Ganda",li:"Limburgish",ln:"Lingala",lo:"Lao",lt:"Lithuanian",lu:"Luba-Katanga",lv:"Latvian",gv:"Manx",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Māori",mr:"Marathi",mh:"Marshallese",mn:"Mongolian",na:"Nauru",nv:"Navajo",nb:"Norwegian Bokmål",nd:"North Ndebele",ne:"Nepali",ng:"Ndonga",nn:"Norwegian Nynorsk",no:"Norwegian",ii:"Nuosu",nr:"South Ndebele",oc:"Occitan",oj:"Ojibwe",cu:"Old Church Slavonic",om:"Oromo",or:"Oriya",os:"Ossetian",pa:"Panjabi",pi:"Pāli",fa:"Persian",pl:"Polish",ps:"Pashto",pt:"Portuguese","pt-br":"Portuguese (Brazilian)",qu:"Quechua",rm:"Romansh",rn:"Kirundi",ro:"Romanian",ru:"Russian",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",se:"Northern Sami",sm:"Samoan",sg:"Sango",sr:"Serbian",gd:"Gaelic",sn:"Shona",si:"Sinhala",sk:"Slovak",sl:"Slovene",so:"Somali",st:"Southern Sotho",es:"Spanish",su:"Sundanese",sw:"Swahili",ss:"Swati",sv:"Swedish",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",bo:"Tibetan",tk:"Turkmen",tl:"Tagalog",tn:"Tswana",to:"Tonga",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ty:"Tahitian",ug:"Uighur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volapük",wa:"Walloon",cy:"Welsh",wo:"Wolof",fy:"Western Frisian",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang",zu:"Zulu"},LATIN_MAP={A:"Á Ă Ắ Ặ Ằ Ẳ Ẵ Ǎ Â Ấ Ậ Ầ Ẩ Ẫ Ä Ǟ Ȧ Ǡ Ạ Ȁ À Ả Ȃ Ā Ą Å Ǻ Ḁ Ⱥ Ã Ɐ ᴀ",AA:"Ꜳ",AE:"Æ Ǽ Ǣ ᴁ",AO:"Ꜵ",AU:"Ꜷ",AV:"Ꜹ Ꜻ",AY:"Ꜽ",B:"Ḃ Ḅ Ɓ Ḇ Ƀ Ƃ ʙ ᴃ",C:"Ć Č Ç Ḉ Ĉ Ċ Ƈ Ȼ Ꜿ ᴄ",D:"Ď Ḑ Ḓ Ḋ Ḍ Ɗ Ḏ ǲ ǅ Đ Ƌ Ꝺ ᴅ",DZ:"Ǳ Ǆ",E:"É Ĕ Ě Ȩ Ḝ Ê Ế Ệ Ề Ể Ễ Ḙ Ë Ė Ẹ Ȅ È Ẻ Ȇ Ē Ḗ Ḕ Ę Ɇ Ẽ Ḛ Ɛ Ǝ ᴇ ⱻ",ET:"Ꝫ",F:"Ḟ Ƒ Ꝼ ꜰ",G:"Ǵ Ğ Ǧ Ģ Ĝ Ġ Ɠ Ḡ Ǥ Ᵹ ɢ ʛ",H:"Ḫ Ȟ Ḩ Ĥ Ⱨ Ḧ Ḣ Ḥ Ħ ʜ",I:"Í Ĭ Ǐ Î Ï Ḯ İ Ị Ȉ Ì Ỉ Ȋ Ī Į Ɨ Ĩ Ḭ ɪ",R:"Ꞃ Ŕ Ř Ŗ Ṙ Ṛ Ṝ Ȑ Ȓ Ṟ Ɍ Ɽ ʁ ʀ ᴙ ᴚ",S:"Ꞅ Ś Ṥ Š Ṧ Ş Ŝ Ș Ṡ Ṣ Ṩ ꜱ",T:"Ꞇ Ť Ţ Ṱ Ț Ⱦ Ṫ Ṭ Ƭ Ṯ Ʈ Ŧ ᴛ",IS:"Ꝭ",J:"Ĵ Ɉ ᴊ",K:"Ḱ Ǩ Ķ Ⱪ Ꝃ Ḳ Ƙ Ḵ Ꝁ Ꝅ ᴋ",L:"Ĺ Ƚ Ľ Ļ Ḽ Ḷ Ḹ Ⱡ Ꝉ Ḻ Ŀ Ɫ ǈ Ł Ꞁ ʟ ᴌ",LJ:"Ǉ",M:"Ḿ Ṁ Ṃ Ɱ Ɯ ᴍ",N:"Ń Ň Ņ Ṋ Ṅ Ṇ Ǹ Ɲ Ṉ Ƞ ǋ Ñ ɴ ᴎ",NJ:"Ǌ",O:"Ó Ŏ Ǒ Ô Ố Ộ Ồ Ổ Ỗ Ö Ȫ Ȯ Ȱ Ọ Ő Ȍ Ò Ỏ Ơ Ớ Ợ Ờ Ở Ỡ Ȏ Ꝋ Ꝍ Ō Ṓ Ṑ Ɵ Ǫ Ǭ Ø Ǿ Õ Ṍ Ṏ Ȭ Ɔ ᴏ ᴐ",OI:"Ƣ",OO:"Ꝏ",OU:"Ȣ ᴕ",P:"Ṕ Ṗ Ꝓ Ƥ Ꝕ Ᵽ Ꝑ ᴘ",Q:"Ꝙ Ꝗ",V:"Ʌ Ꝟ Ṿ Ʋ Ṽ ᴠ",TZ:"Ꜩ",U:"Ú Ŭ Ǔ Û Ṷ Ü Ǘ Ǚ Ǜ Ǖ Ṳ Ụ Ű Ȕ Ù Ủ Ư Ứ Ự Ừ Ử Ữ Ȗ Ū Ṻ Ų Ů Ũ Ṹ Ṵ ᴜ",VY:"Ꝡ",W:"Ẃ Ŵ Ẅ Ẇ Ẉ Ẁ Ⱳ ᴡ",X:"Ẍ Ẋ",Y:"Ý Ŷ Ÿ Ẏ Ỵ Ỳ Ƴ Ỷ Ỿ Ȳ Ɏ Ỹ ʏ",Z:"Ź Ž Ẑ Ⱬ Ż Ẓ Ȥ Ẕ Ƶ ᴢ",IJ:"Ĳ",OE:"Œ ɶ",a:"á ă ắ ặ ằ ẳ ẵ ǎ â ấ ậ ầ ẩ ẫ ä ǟ ȧ ǡ ạ ȁ à ả ȃ ā ą ᶏ ẚ å ǻ ḁ ⱥ ã ɐ ₐ",aa:"ꜳ",ae:"æ ǽ ǣ ᴂ",ao:"ꜵ",au:"ꜷ",av:"ꜹ ꜻ",ay:"ꜽ",b:"ḃ ḅ ɓ ḇ ᵬ ᶀ ƀ ƃ",o:"ɵ ó ŏ ǒ ô ố ộ ồ ổ ỗ ö ȫ ȯ ȱ ọ ő ȍ ò ỏ ơ ớ ợ ờ ở ỡ ȏ ꝋ ꝍ ⱺ ō ṓ ṑ ǫ ǭ ø ǿ õ ṍ ṏ ȭ ɔ ᶗ ᴑ ᴓ ₒ",c:"ć č ç ḉ ĉ ɕ ċ ƈ ȼ ↄ ꜿ",d:"ď ḑ ḓ ȡ ḋ ḍ ɗ ᶑ ḏ ᵭ ᶁ đ ɖ ƌ ꝺ",i:"ı í ĭ ǐ î ï ḯ ị ȉ ì ỉ ȋ ī į ᶖ ɨ ĩ ḭ ᴉ ᵢ",j:"ȷ ɟ ʄ ǰ ĵ ʝ ɉ ⱼ",dz:"ǳ ǆ",e:"é ĕ ě ȩ ḝ ê ế ệ ề ể ễ ḙ ë ė ẹ ȅ è ẻ ȇ ē ḗ ḕ ⱸ ę ᶒ ɇ ẽ ḛ ɛ ᶓ ɘ ǝ ₑ",et:"ꝫ",f:"ḟ ƒ ᵮ ᶂ ꝼ",g:"ǵ ğ ǧ ģ ĝ ġ ɠ ḡ ᶃ ǥ ᵹ ɡ ᵷ",h:"ḫ ȟ ḩ ĥ ⱨ ḧ ḣ ḥ ɦ ẖ ħ ɥ ʮ ʯ",hv:"ƕ",r:"ꞃ ŕ ř ŗ ṙ ṛ ṝ ȑ ɾ ᵳ ȓ ṟ ɼ ᵲ ᶉ ɍ ɽ ɿ ɹ ɻ ɺ ⱹ ᵣ",s:"ꞅ ſ ẜ ẛ ẝ ś ṥ š ṧ ş ŝ ș ṡ ṣ ṩ ʂ ᵴ ᶊ ȿ",t:"ꞇ ť ţ ṱ ț ȶ ẗ ⱦ ṫ ṭ ƭ ṯ ᵵ ƫ ʈ ŧ ʇ",is:"ꝭ",k:"ḱ ǩ ķ ⱪ ꝃ ḳ ƙ ḵ ᶄ ꝁ ꝅ ʞ",l:"ĺ ƚ ɬ ľ ļ ḽ ȴ ḷ ḹ ⱡ ꝉ ḻ ŀ ɫ ᶅ ɭ ł ꞁ",lj:"ǉ",m:"ḿ ṁ ṃ ɱ ᵯ ᶆ ɯ ɰ",n:"ń ň ņ ṋ ȵ ṅ ṇ ǹ ɲ ṉ ƞ ᵰ ᶇ ɳ ñ",nj:"ǌ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ṕ ṗ ꝓ ƥ ᵱ ᶈ ꝕ ᵽ ꝑ",q:"ꝙ ʠ ɋ ꝗ",u:"ᴝ ú ŭ ǔ û ṷ ü ǘ ǚ ǜ ǖ ṳ ụ ű ȕ ù ủ ư ứ ự ừ ử ữ ȗ ū ṻ ų ᶙ ů ũ ṹ ṵ ᵤ",th:"ᵺ",oe:"ᴔ œ",v:"ʌ ⱴ ꝟ ṿ ʋ ᶌ ⱱ ṽ ᵥ",w:"ʍ ẃ ŵ ẅ ẇ ẉ ẁ ⱳ ẘ",y:"ʎ ý ŷ ÿ ẏ ỵ ỳ ƴ ỷ ỿ ȳ ẙ ɏ ỹ",tz:"ꜩ",ue:"ᵫ",um:"ꝸ",vy:"ꝡ",x:"ẍ ẋ ᶍ ₓ",z:"ź ž ẑ ʑ ⱬ ż ẓ ȥ ẕ ᵶ ᶎ ʐ ƶ ɀ",ff:"ﬀ",ffi:"ﬃ",ffl:"ﬄ",fi:"ﬁ",fl:"ﬂ",ij:"ĳ",st:"ﬆ"};return LATIN_MAP=_.chain(LATIN_MAP).map(function(value,key){return _.map(value.split(" "),function(v){return[v,key]})}).flatten(!0).reduce(function(memo,pair){return memo[pair[0]]=pair[1],memo},{}).value(),{shortenLanguageCode:shortenLanguageCode,languageCodeCSVtoLanguages:languageCodeCSVtoLanguages,languageCodeToName:languageCodeToName,latinizeText:latinizeText,isRightToLeft:isRightToLeft,normalizeLanguageCode:normalizeLanguageCode,getLanguageCode:getLanguageCode}}),!function(global){function decode(s){if(s)s=decodeURIComponent(s),s=s.replace(re.pluses," ");return s}function parseUri(str){var parser=re.uri_parser,parserKeys=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],m=parser.exec(str||""),parts={};return parserKeys.forEach(function(key,i){parts[key]=m[i]||""}),parts}function parseQuery(str){var i,ps,p,n,k,v,pairs=[];if("undefined"==typeof str||null===str||""===str)return pairs;if(0===str.indexOf("?"))str=str.substring(1);for(ps=str.toString().split(re.query_separator),i=0;i<ps.length;i++)if(p=ps[i],n=p.indexOf("="),0!==n)k=decodeURIComponent(p.substring(0,n)),v=decodeURIComponent(p.substring(n+1)),pairs.push(-1===n?[p,null]:[k,v]);return pairs}function Uri(str){this.uriParts=parseUri(str),this.queryPairs=parseQuery(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}var re={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};if(!Array.prototype.forEach)Array.prototype.forEach=function(fn,scope){for(var i=0,len=this.length;len>i;++i)fn.call(scope||this,this[i],i,this)};if(["protocol","userInfo","host","port","path","anchor"].forEach(function(key){Uri.prototype[key]=function(val){if("undefined"!=typeof val)this.uriParts[key]=val;return this.uriParts[key]}}),Uri.prototype.hasAuthorityPrefix=function(val){if("undefined"!=typeof val)this.hasAuthorityPrefixUserPref=val;if(null===this.hasAuthorityPrefixUserPref)return-1!==this.uriParts.source.indexOf("//");else return this.hasAuthorityPrefixUserPref},Uri.prototype.query=function(val){var s="",i,param;if("undefined"!=typeof val)this.queryPairs=parseQuery(val);for(i=0;i<this.queryPairs.length;i++){if(param=this.queryPairs[i],s.length>0)s+="&";if(null===param[1])s+=param[0];else if(s+=param[0],s+="=",param[1])s+=encodeURIComponent(param[1])}return s.length>0?"?"+s:s},Uri.prototype.getQueryParamValue=function(key){var param,i;for(i=0;i<this.queryPairs.length;i++)if(param=this.queryPairs[i],key===param[0])return param[1]},Uri.prototype.getQueryParamValues=function(key){var arr=[],i,param;for(i=0;i<this.queryPairs.length;i++)if(param=this.queryPairs[i],key===param[0])arr.push(param[1]);return arr},Uri.prototype.deleteQueryParam=function(key,val){var arr=[],i,param,keyMatchesFilter,valMatchesFilter;for(i=0;i<this.queryPairs.length;i++)if(param=this.queryPairs[i],keyMatchesFilter=decode(param[0])===decode(key),valMatchesFilter=param[1]===val,1===arguments.length&&!keyMatchesFilter||2===arguments.length&&(!keyMatchesFilter||!valMatchesFilter))arr.push(param);return this.queryPairs=arr,this},Uri.prototype.addQueryParam=function(key,val,index){if(3===arguments.length&&-1!==index)index=Math.min(index,this.queryPairs.length),this.queryPairs.splice(index,0,[key,val]);else if(arguments.length>0)this.queryPairs.push([key,val]);return this},Uri.prototype.replaceQueryParam=function(key,newVal,oldVal){var index=-1,i,param;if(3===arguments.length){for(i=0;i<this.queryPairs.length;i++)if(param=this.queryPairs[i],decode(param[0])===decode(key)&&decodeURIComponent(param[1])===decode(oldVal)){index=i;break}this.deleteQueryParam(key,oldVal).addQueryParam(key,newVal,index)}else{for(i=0;i<this.queryPairs.length;i++)if(param=this.queryPairs[i],decode(param[0])===decode(key)){index=i;break}this.deleteQueryParam(key),this.addQueryParam(key,newVal,index)}return this},["protocol","hasAuthorityPrefix","userInfo","host","port","path","query","anchor"].forEach(function(key){var method="set"+key.charAt(0).toUpperCase()+key.slice(1);Uri.prototype[method]=function(val){return this[key](val),this}}),Uri.prototype.scheme=function(){var s="";if(this.protocol()){if(s+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1)s+=":";s+="//"}else if(this.hasAuthorityPrefix()&&this.host())s+="//";return s},Uri.prototype.origin=function(){var s=this.scheme();if("file://"==s)return s+this.uriParts.authority;if(this.userInfo()&&this.host())if(s+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1)s+="@";if(this.host())if(s+=this.host(),this.port())s+=":"+this.port();return s},Uri.prototype.addTrailingSlash=function(){var path=this.path()||"";if("/"!==path.substr(-1))this.path(path+"/");return this},Uri.prototype.toString=function(){var path,s=this.origin();if(this.path()){if(path=this.path(),!re.ends_with_slashes.test(s)&&!re.starts_with_slashes.test(path))s+="/";else{if(s)s.replace(re.ends_with_slashes,"/");path=path.replace(re.starts_with_slashes,"/")}s+=path}else if(this.host()&&(this.query().toString()||this.anchor()))s+="/";if(this.query().toString()){if(0!==this.query().toString().indexOf("?"))s+="?";s+=this.query().toString()}if(this.anchor()){if(0!==this.anchor().indexOf("#"))s+="#";s+=this.anchor()}return s},Uri.prototype.clone=function(){return new Uri(this.toString())},"function"==typeof define&&define.amd)define("js/vendor/uri.v0-0-1",[],function(){return Uri});else if("undefined"!=typeof module&&"undefined"!=typeof module.exports)module.exports=Uri;else global.Uri=Uri}(this),define("pages/open-course/common/constants",["js/app/config","js/lib/path"],function(config,path){var courseSlug,courseSlugMatch=window.location.pathname.match("/learn/([^/]*)");if(courseSlugMatch)courseSlug=courseSlugMatch[1];var rootPath="/learn";return{config:config,rootPath:rootPath,courseRootPath:path.join(rootPath,courseSlug),courseSlug:courseSlug,assessments:{defaultPassingPercent:.8},progressCompleted:"Completed",progressStarted:"Started",progressNotStarted:"NotStarted",videoEndPercentage:.9,defaultVideoPlayerWidth:"960px",defaultVideoPlayerHeight:"540px",defaultVideoPlayerResolution:"540p",videoPlayerAspectRatio:9/16}}),!function(wndw){var cookie=function($){var cookie=function(key,value,options){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(value))||null===value||void 0===value)){if(options=$.extend({},options),null===value||void 0===value)options.expires=-1;if(!options.path)options.path="/";if("number"==typeof options.expires){var days=options.expires,t=options.expires=new Date;t.setDate(t.getDate()+days)}return value=String(value),wndw.document.cookie=[encodeURIComponent(key),"=",options.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}options=value||{};for(var decode=options.raw?function(s){return s}:decodeURIComponent,pairs=wndw.document.cookie.split("; "),i=0,pair;pairs[i];i++)if(pair=pairs[i].split("="),decode(pair[0])===key)return decode(pair[1]||"");return null};return{get:cookie,set:cookie,clear:function(key,options){for(var cookies=wndw.document.cookie.split("; "),i=0;i<cookies.length;i++){var equals=cookies[i].indexOf("="),name=equals>-1?cookies[i].substr(0,equals):cookies[i];if(!key||key==name)cookie(name,null,options)}}}};if("function"==typeof define&&define.amd)define("js/vendor/cookie.v0-0-1",["js/vendor/jquery.v2-1"],function($){return cookie($)});else if("undefined"!=typeof wndw&&"undefined"==typeof ender)wndw.Cookie=cookie(wndw.$)}(window),!function(factory){if("function"==typeof define&&define.amd)define("js/vendor/lucid.v2-7-0",factory);else if(("object"==typeof module||"function"==typeof module)&&module.exports)module.exports=factory();
else window.LucidJS=factory()}(function(){function EventEmitter(object){function on(event){function clear(){if(!listeners[event])return;for(aI=0;aI<args.length;aI+=1)listeners[event].splice(listeners[event].indexOf(args[aI]),1);if(listeners[event].length<1)delete listeners[event]}function batchOn(events,args){function clear(){var bI;for(bI=0;bI<bindings.length;bI+=1)bindings[bI].clear()}var eI,binding={},bindings=[];for(eI=0;eI<events.length;eI+=1)args.unshift(events[eI]),bindings.push(on.apply(this,args)),args.shift();return binding.clear=clear,binding}var args,binding={},aI,sI;if(args=Array.prototype.slice.apply(arguments,[1]),"object"==typeof event&&"function"==typeof event.push)return batchOn(event,args);if("emitter"!==event.slice(0,7)&&(listeners.emitter||listeners["emitter.listener"]))for(aI=0;aI<args.length;aI+=1)trigger("emitter.listener",event,args[aI]);if(!listeners[event])listeners[event]=[];for(aI=0;aI<args.length;aI+=1){if("function"!=typeof args[aI])throw new Error("Cannot bind event. All callbacks must be functions.");listeners[event].push(args[aI])}return binding.clear=clear,binding}function off(event){var args=Array.prototype.slice.apply(arguments,[1]),aI,sI;if("object"==typeof event&&"function"==typeof event.push){for(sI=0;sI<event.length;sI+=1)off.apply(null,[event[sI]].concat(args));return}if(!listeners[event])throw new Error('Tried to remove an event from a non-existant event of type "'+event+'".');for(aI=0;aI<args.length;aI+=1){if("function"!=typeof args[aI])throw new Error("Tried to remove a non-function.");var listenerIndex=listeners[event].indexOf(args[aI]);listeners[event].splice(listenerIndex,1)}}function once(event){var binding,args=Array.prototype.slice.apply(arguments,[1]),result=!0,cleared=!1;return binding=on(event,function(){var aI,eventArgs=Array.prototype.slice.apply(arguments);if(!binding){if(cleared)return;cleared=!0,setTimeout(function(){binding.clear()},0)}else binding.clear();for(aI=0;aI<args.length;aI+=1)if(args[aI].apply(this,eventArgs)===!1)result=!1;return result})}function trigger(event,a1,a2,a3,a4,a5,a6,a7,a8,a9,la){var longArgs,lI,eventListeners,result=!0;if("undefined"!=typeof la)longArgs=Array.prototype.slice.apply(arguments,[1]);if("object"==typeof event&&"function"==typeof event.push)if(longArgs)return batchTrigger.apply(null,arguments);else return batchTrigger(event,a1,a2,a3,a4,a5,a6,a7,a8,a9);for(event=event.split(".");event.length;){if(longArgs){if(triggerOnly.apply(this,[event.join(".")].concat(longArgs))===!1)result=!1}else if(triggerOnly(event.join("."),a1,a2,a3,a4,a5,a6,a7,a8,a9)===!1)result=!1;event.pop()}return result}function triggerOnly(event,a1,a2,a3,a4,a5,a6,a7,a8,a9,la){var longArgs,lI,eventListeners=listeners[event],result=!0;if("undefined"!=typeof la)longArgs=Array.prototype.slice.apply(arguments,[1]);if("emitter"!==event.substr(0,7)&&(listeners.emitter||listeners["emitter.event"]))if(longArgs)trigger.apply(this,[].concat("emitter.event",event,longArgs));else trigger("emitter.event",event,a1,a2,a3,a4,a5,a6,a7,a8,a9);if(eventListeners)for(eventListeners=[].concat(eventListeners),lI=0;lI<eventListeners.length;lI+=1)if(longArgs){if(eventListeners[lI].apply(this,longArgs)===!1)result=!1}else if(eventListeners[lI](a1,a2,a3,a4,a5,a6,a7,a8,a9)===!1)result=!1;return result}function batchTrigger(events,a1,a2,a3,a4,a5,a6,a7,a8,a9,la){var longArgs,eI,result=!0;if("undefined"!=typeof la)longArgs=Array.prototype.slice.apply(arguments,[1]);for(eI=0;eI<events.length;eI+=1)if(longArgs){if(args.unshift(events[eI]),trigger.apply(this,args)===!1)result=!1;args.shift()}else if(trigger(events[eI],a1,a2,a3,a4,a5,a6,a7,a8,a9)===!1)result=!1;return result}function set(event,a1,a2,a3,a4,a5,a6,a7,a8,a9,la){function clear(){trigger("emitter.unset",event),setEvents[event].splice(setEvents[event].indexOf(binding),1),_clear()}var args,binding,_clear;if(la)args=Array.prototype.slice.apply(arguments,[1]);if("object"==typeof event&&event.push)if(args)return batchSet.apply(null,args);else return batchSet(event,a1,a2,a3,a4,a5,a6,a7,a8,a9);if(binding=on(["emitter.listener","pipe.listener"],function(_event,listener){var lI;if(event===_event)if(args)listener.apply(null,args);else listener(a1,a2,a3,a4,a5,a6,a7,a8,a9)}),args)trigger.apply(null,arguments);else trigger(event,a1,a2,a3,a4,a5,a6,a7,a8,a9);if(!setEvents[event])setEvents[event]=[];return setEvents[event].push(binding),_clear=binding.clear,binding.clear=clear,binding}function batchSet(events,a1,a2,a3,a4,a5,a6,a7,a8,a9,la){function clear(){var bI;for(bI=0;bI<bindings.length;bI+=1)bindings[bI].clear()}var binding={},args,eI,bindings=[];if(la)args=Array.prototype.slice.apply(arguments,[1]);for(eI=0;eI<events.length;eI+=1)if(args)bindings.push(set.apply(null,[events[eI]].concat(args)));else bindings.push(set(events[eI],a1,a2,a3,a4,a5,a6,a7,a8,a9));return binding.clear=clear,binding}function clearSet(event){var bI;if(event&&setEvents[event]){for(bI=0;bI<setEvents[event].length;bI+=1)setEvents[event][bI].clear();delete setEvents[event]}else if(!event)for(event in setEvents){if(!setEvents.hasOwnProperty(event))continue;clearSet(event)}}function pipe(event){function captureEvent(event){var setEvent=!1,args;if(args=Array.prototype.slice.apply(arguments,[1]),emitter.once(event,function(){setEvent=!0}),"pipe"!==event.substr(0,4)&&(listeners.pipe||listeners["pipe.event"]))trigger("pipe.event",event,args);if(setEvent)setEvents.push(set.apply(null,[event].concat(args)));else triggerOnly.apply(null,[event].concat(args))}function sendListener(event,listener){emitter.trigger("pipe.listener",event,listener)}function clear(){var bI,sI,eI,sII;for(bI=0;bI<bindings.length;bI+=1)bindings[bI].clear();for(sI=0;sI<bindings.length;sI+=1)setEvents[sI].clear();for(eI=0;eI<eventListeners.length;eI+=1)bindings[eI].clear();for(sII=0;sII<sendListeners.length;sII+=1)setEvents[sII].clear()}var binding={},emitters,eI,emitter,bindings=[],setEvents=[],eventCaptures=[],sendListeners=[];if(emitters=Array.prototype.slice.apply(arguments,[1]),"object"==typeof event)if(event.on)emitters.unshift(event),event=!1;else return batchPipe.apply(null,arguments);for(eI=0;eI<emitters.length;eI+=1)emitter=emitters[eI],eventCaptures.push(emitter.on("emitter.event",captureEvent)),sendListeners.push(on("emitter.listener",sendListener));return binding.clear=clear,binding}function batchPipe(events){function clear(){var bI;for(bI=0;bI<bindings.length;bI+=1)bindings[bI].clear()}var binding={},eI,bindings=[],emitters;for(emitters=Array.prototype.slice.apply(arguments,[1]),eI=0;eI<events.length;eI+=1)bindings.push(pipe.apply(null,[events[eI]].concat(emitters)));return binding.clear=clear,binding}function clearPipes(event){var pI,bI,binding;for(pI=0;pI<pipes.length;pI+=1){if(event){if(2===pipes[pI].type)continue;if(-1===pipes[pI].events.indexOf(event))continue;pipes[pI].events.splice(pipes[pI].events.indexOf(event),1)}if(2===pipes[pI].type)pipes[pI].listenerBinding.clear();for(bI=0;bI<pipes[pI].bindings.length;bI+=1){if(event&&pipes[pI].bindings[bI].event!==event)continue;pipes[pI].bindings[bI].clear(),pipes[pI].bindings.splice(bI,1),bI-=1}if(pipes[pI].bindings.length<1)pipes.splice(pI,1),pI-=1}}function getListeners(event){if(event)return listeners[event];else return listeners}function clearListeners(event){if(event)delete listeners[event];else listeners={}}function clear(){if(listeners.emitter||listeners["emitter.clear"])trigger("emitter.clear");listeners={},clearSet(),clearPipes(),delete emitter.on,delete emitter.once,delete emitter.trigger,delete emitter.set,delete emitter.pipe,delete emitter.listeners,delete emitter.clear}function handleNode(node){function clearNodeEmitter(){var DI;for(DI=0;DI<DOMEventListeners.length;DI+=1)try{if(node.removeEventListener)node.removeEventListener(DOMEventListeners[DI].event,DOMEventListeners[DI].listener,!1);else if(node.detachEvent)node.detachEvent("on"+DOMEventListeners[DI].event,DOMEventListeners[DI].listener)}catch(e){console.error(e)}handledEvents=[],listenerBinding.clear()}var handledEvents=[],listenerBinding,DOMEventListeners=[];listenerBinding=on("emitter.listener",function(event){function nodeListener(eventObj){var args=Array.prototype.slice.apply(arguments);if(args.unshift([event,"dom."+event]),trigger.apply(this,args)===!1)eventObj.preventDefault(),eventObj.stopPropagation()}if(handledEvents.indexOf(event)>-1)return;handledEvents.push(event);try{if(node.addEventListener)node.addEventListener(event,nodeListener,!1),DOMEventListeners.push({event:event,listener:nodeListener});else if(node.attachEvent)node.attachEvent("on"+event,nodeListener),DOMEventListeners.push({event:event,listener:nodeListener})}catch(e){console.error(e)}}),emitter.clearNodeEmitter=clearNodeEmitter}var emitter=object||{},listeners={},setEvents={},pipes=[];if(!(emitter.on||emitter.once||emitter.trigger||emitter.set||emitter.pipe||emitter.listeners))emitter.on=on,emitter.off=off,emitter.once=once,emitter.trigger=trigger,emitter.set=set,emitter.set.clear=clearSet,emitter.pipe=pipe,emitter.pipe.clear=clearPipes,emitter.listeners=getListeners,emitter.listeners.clear=clearListeners;else return emitter;if(emitter.addEventListener||emitter.attachEvent)handleNode(emitter);return emitter}var api;return api={emitter:EventEmitter},[].indexOf||(Array.prototype.indexOf=function(a,b,c){for(c=this.length,b=(c+~~b)%c;c>b&&(!(b in this)||this[b]!==a);b++);return b^c?b:-1}),api}),!function(wndw){var globalActiveAjaxCount=0,api=function($,_,cookie,LucidJS,pathUtil){var _private={defaults:{type:"normal","csrf.token":"X-CSRFToken","csrf.cookie":"csrftoken","csrf.path":null,"csrf.domain":null,"csrf2.token_header":"X-CSRF2-Token","csrf2.cookie_name_header":"X-CSRF2-Cookie","csrf2.cookie_prefix":"csrf2_token_","emulate.patch":!0,"emulate.put":!1,"emulate.delete":!1,"custom.header.name":null,"custom.header.value":null},csrfGet:function(){var token=cookie.get(this.options["csrf.cookie"]);if(token)return token;else return _private.csrfSet.call(this,_private.csrfMake())},csrfClear:function(){cookie.clear(this.options["csrf.cookie"],{secure:this.options["csrf.secure"],path:this.options["csrf.path"],domain:this.options["csrf.domain"]})},csrfSet:function(token){return cookie.set(this.options["csrf.cookie"],token,{secure:this.options["csrf.secure"],path:this.options["csrf.path"],domain:this.options["csrf.domain"],expires:new Date((new Date).getTime()+6e4)}),token},csrfMake:function(length,chars){var output=[];chars=chars||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",length=length||24;for(var i=0;length>i;i++)output.push(chars[Math.floor(Math.random()*chars.length)]);return output.join("")},csrf2SetUp:function(ajaxOptions){if("GET"==ajaxOptions.type)return{};var cookieName=this.options["csrf2.cookie_prefix"]+_private.csrfMake(8),token=_private.csrfMake();cookie.set(cookieName,token,{secure:this.options["csrf.secure"],path:this.options["csrf.path"],domain:this.options["csrf.domain"],expires:new Date((new Date).getTime()+6e4)}),ajaxOptions.headers[this.options["csrf2.cookie_name_header"]]=cookieName,ajaxOptions.headers[this.options["csrf2.token_header"]]=token},csrf2TearDown:function(ajaxHeaders){var cookieName=ajaxHeaders[this.options["csrf2.cookie_name_header"]];if(cookieName)cookie.clear(cookieName,{secure:this.options["csrf.secure"],path:this.options["csrf.path"],domain:this.options["csrf.domain"]})},invoke:function(path,_options){_options=_.extend({},_options);var options=_options||{},url;if(0!==path.indexOf("http"))url=pathUtil.join(this.root,path);else url=path;this.trigger("before",url,options);var params="GET"==options.type?options.data:null,remove=function(e,item){this.remove(item.options.id)},message=options.message||{},codes=message.codes?_.keys(message.codes):[],asyncMessage=this.options.message,that=this;if(delete options.message,"GET"!=options.type&&_.isUndefined(options.processData)&&"rest"==this.options.type)options.contentType="application/json; charset=utf-8",options.processData=!1,options.data=JSON.stringify(options.data);options.beforeSend=function(){globalActiveAjaxCount++};var jqXHR=$.ajax(url,options);if(asyncMessage){if(message.waiting){var waitID=asyncMessage.add($("<div>").append(message.waiting).addClass("waiting"),{delay:100});jqXHR.always(function(jqXHR,textStatus){asyncMessage.remove(waitID)})}if(message.success||message.codes&&_.min(codes)<300)jqXHR.done(function(jqXHR,textStatus){if(message.codes&&message.codes[jqXHR.status])asyncMessage.add($("<div>").append(message.codes[jqXHR.status]).addClass("success"),{timeout:500});else if(message.success)asyncMessage.add($("<div>").append(message.success).addClass("success"),{timeout:500})});if(message.error||message.timeout||message.codes&&_.max(codes)>=300)jqXHR.fail(function(jqXHR,textStatus){if(message.timeout&&"timeout"==textStatus)asyncMessage.add($("<div>").append(message.timeout).addClass("error"),{events:{click:remove}});else if(message.codes&&message.codes[jqXHR.status])asyncMessage.add($("<div>").append(message.codes[jsXHR.status]).addClass("error"),{events:{click:remove}});else if(message.error)asyncMessage.add($("<div>").append(message.error).addClass("error"),{events:{click:remove}})})}var start=(new Date).getTime();return that.trigger("send",{xhr:jqXHR,url:url}),jqXHR.always(function(){if(0===--globalActiveAjaxCount)_private.csrfClear.call(that);_private.csrf2TearDown.call(that,options.headers||{}),that.trigger("always",{xhr:jqXHR,url:url,params:params,timing:(new Date).getTime()-start})}),jqXHR.fail(function(){that.trigger("fail",{xhr:jqXHR,url:url,params:params})}),jqXHR},restify:function(method,_options){var options=_options||{};switch(options.data=options.data||{},options.headers=options.headers||{},method){case"POST":options.type="POST";break;case"PATCH":if(this.options["emulate.patch"])options.type="POST",options.headers["X-HTTP-Method-Override"]="PATCH";else options.type="PATCH";break;case"PUT":if(this.options["emulate.put"])options.type="POST",options.headers["X-HTTP-Method-Override"]="PUT";else options.type="PUT";break;case"DELETE":if(this.options["emulate.delete"])options.type="POST",options.headers["X-HTTP-Method-Override"]="DELETE";else options.type="DELETE";break;default:options.type="GET"}if("GET"!=options.type)options.headers[this.options["csrf.token"]]=_private.csrfGet.call(this),_private.csrf2SetUp.call(this,options);if(this.options["custom.header.name"])options.headers[this.options["custom.header.name"]]=this.options["custom.header.value"];return options}},api=function(root,options){this.root=root,this.options=_.extend({},_private.defaults,options),LucidJS.emitter(this)};return api.prototype.customize=function(options){return this.options=_.extend(this.options,options),this},api.prototype.get=function(path,options){return _private.invoke.call(this,path,_private.restify.call(this,"GET",options))},api.prototype.patch=function(path,options){return _private.invoke.call(this,path,_private.restify.call(this,"PATCH",options))},api.prototype["delete"]=function(path,options){return _private.invoke.call(this,path,_private.restify.call(this,"DELETE",options))},api.prototype.post=function(path,options){return _private.invoke.call(this,path,_private.restify.call(this,"POST",options))},api.prototype.put=function(path,options){return _private.invoke.call(this,path,_private.restify.call(this,"PUT",options))},function(root,options){return new api(root,options)}};if("function"==typeof define&&define.amd)define("js/lib/api.v0-0-1",["js/vendor/jquery.v2-1","js/vendor/underscore.v1-6","js/vendor/cookie.v0-0-1","js/vendor/lucid.v2-7-0","js/lib/path","js/lib/json2"],function($,_,Cookie,LucidJS,path){return api($,_,Cookie,LucidJS,path)});else wndw.API=api(wndw.$,wndw._,wndw.Cookie,wndw.LucidJS,wndw.path)}(window),!function(){var DataAttributes=function($){var parse=function(el,defaults,_prefix){var settings={},prefix=_prefix||"";for(var key in defaults){var pkey=prefix+key.replace(/\./g,"-"),attr=$(el).attr(pkey);if(void 0===attr)settings[key]=defaults[key];else if("string"==typeof attr&&0===attr.length||/^\s*true\s*$/.test(attr)||pkey==attr)settings[key]=!0;else if(/^\s*false\s*$/.test(attr))settings[key]=!1;else settings[key]=attr}return settings},exports={parse:parse};return exports};if("function"==typeof define&&define.amd)define("js/lib/data.attributes.v0-0-1",["js/vendor/jquery.v2-1"],function($){return DataAttributes($)});else if("undefined"!=typeof window&&"undefined"==typeof ender)window.DataAttributes=DataAttributes(window.$)}(),!function(){var Modals=function($,LucidJS,_,DataAttributes){var CLOSED=0,OPEN=1,_private={defaults:{"bind.open":"click","bind.close":"click","bind.action":"click","attribute.open":"data-modal","attribute.close":"data-modal-close","attribute.iframe":"data-modal-iframe","attribute.action":"data-modal-action","attribute.focus":"data-modal-focus","attribute.focus.index":1e4,"animate.modal.open":null,"animate.modal.close":null,"animate.modal.duration":250,"animate.overlay.open":null,"animate.overlay.close":null,"animate.overlay.duration":250,"overlay.show":!0,"overlay.class":"overlay","overlay.close":!0,"z.index":9999,"position.top":"50%","position.left":"50%",position:"fixed","iframe.autoclose":!0},$overlay:null,count:0,prevScroll:null,prevModal:null,getModal:function(el,options){var modal=$(el).data("modal.me");if(modal&&modal.constructor==Modal.prototype.constructor)if(options)return modal.customize(options);else return modal;else return null},makeModal:function(el,options){var $el=$(el),modal=_private.getModal($el);if(!modal)modal=new Modal($el,options),$el.data("modal.me",modal);return modal},setOverlayHeight:function(){if($(window).height()<$(document).height())_private.$overlay.css({height:$(document).height()+"px"});else _private.$overlay.css({height:"100%"})},observeKeyPress:function(e){if(this.options["overlay.close"])if(27==e.keyCode||27==e.DOM_VK_ESCAPE&&0===e.which)this.emitter.trigger("action",!1,this),this.close();this.emitter.trigger("key",e)},cycleTabs:function(e){var $tabbable=this.$el.find("a,input,select,textarea,button").filter(":visible");if(9==e.keyCode&&$(e.target).is($tabbable.last()))window.setTimeout(function(){$tabbable.first().focus()},0)},actionTrigger:function(e){var $el=$(e.currentTarget),action=$el.attr(this.options["attribute.action"]);this.emitter.trigger("action",action,this)},open:function(){if("fixed"!=this.options.position)_private.prevScroll={top:$(document).scrollTop(),left:$(document).scrollLeft()},window.scrollTo(0,0);if(this.$iframe){var iframeUrl=this.options["iframe.url"]||$(this.anchor).attr(this.options["attribute.iframe"]);this.$iframe.attr("src",iframeUrl),this.$iframe.focus()}else{var $focus=this.$el.find("["+this.options["attribute.focus"]+"]"),$focusable_elements=this.$el.find("a,input,select,textarea,button");for(i=0;i<$focusable_elements.length;i++)$focusable_elements.eq(i).attr("tabindex",this.options["attribute.focus.index"]+1+i);if($focus.size()>0)$focus.filter(":visible").eq(0).attr("tabindex",this.options["attribute.focus.index"]),$focus.filter(":visible").eq(0).focus();else if($focusable_elements.size()>0)$focusable_elements.filter(":visible").eq(0).attr("tabindex",this.options["attribute.focus.index"]),$focusable_elements.filter(":visible").eq(0).focus()}this.state=OPEN,this.$el.on(this.options["bind.action"],"["+this.options["attribute.action"]+"]",_.bind(_private.actionTrigger,this)),this.emitter.trigger("open")},close:function(){var $iframe=this.$el.find("iframe");if(this.$el.off(".modal").hide(),this.options["iframe.autoclose"]&&$iframe.size())$iframe.attr({src:"about:blank"});if(_private.prevScroll)window.scrollTo(_private.prevScroll.left,_private.prevScroll.top),_private.prevScroll=null;this.anchor=null,this.$parent.append(this.$el),this.state=CLOSED,this.emitter.trigger("close")}},Modal=function(el,settings){var that=this;this.$el=$(el),this.state=CLOSED,this.$parent=this.$el.parent(),this.customize(settings),this.emitter=LucidJS.emitter(this)};Modal.prototype.customize=function(settings){return this.options=_.extend({},DataAttributes.parse(this.$el,_private.defaults,"data-modal-"),settings),this},Modal.prototype.open=function(){var that=this,iframeUrl;if(this.anchor)iframeUrl=$(this.anchor).attr(this.options["attribute.iframe"]);if(this.options["iframe.url"])iframeUrl=this.options["iframe.url"];if(iframeUrl)if(this.$iframe=this.$el.find("iframe"),/^https?:\/\/|^\/|^\.\.\//.test(iframeUrl))if(!this.$iframe.size()||this.$iframe.attr("src")!=iframeUrl)if(this.$iframe.attr("src","about:blank").remove(),this.$iframe=$("<iframe>").css({height:"100%",width:"100%"}).attr({scrolling:"no",frameborder:0}),this.$el.append(this.$iframe),this.state!=CLOSED)this.$iframe.attr("src",iframeUrl);if(this.state!=CLOSED)return;if(this.options["overlay.show"]){if(_private.$overlay&&"none"!=_private.$overlay.css("display")&&_private.$overlay.hasClass(this.options["overlay.class"]))this.$overlay=_private.$overlay;else{if(_private.$overlay)_private.$overlay.off(".modal").hide().remove();this.$overlay=_private.$overlay=$("<div>").addClass(this.options["overlay.class"]).hide(),this.$overlay.css({position:"fixed",width:"100%",top:0,left:0,right:0,bottom:0,zIndex:this.options["z.index"]++}),$("body").append(this.$overlay)}if(_private.setOverlayHeight(),this.reposition(),this.options["animate.overlay.open"])this.$overlay.animate(this.options["animate.overlay.open"],{duration:this.options["animate.overlay.duration"]});else this.$overlay.show();_private.count++,this.$overlay.data("modal",this)}if(this.emitter.trigger("opening"),"fixed"!=this.options.position||0===this.$el.closest("html").length)this.$el.appendTo("body");if(this.reposition(),this.$el.show(),this.options["animate.modal.open"])this.$el.animate(this.options["animate.modal.open"],{duration:this.options["animate.modal.duration"],complete:function(){_private.open.call(that)}});else _private.open.call(this);if($(window).on("resize.modal",_.bind(_private.setOverlayHeight,that)).on("resize.modal",_.bind(that.reposition,that)).on("scroll.modal",_.bind(that.reposition,that)),this.$el.on("keydown.modal",_.bind(_private.cycleTabs,that)),$(window).on("keyup.modal",_.bind(_private.observeKeyPress,that)),this.options["overlay.close"])this.$overlay.on(this.options["bind.close"]+".modal",function(e){that.emitter.trigger("action",!1,that),that.close()});if(this.options["attribute.close"])this.$el.on(this.options["bind.close"]+".modal","["+this.options["attribute.close"]+"]",function(e){var $target=$(e.currentTarget);if("disabled"!=$target.attr("disabled")){if(void 0===$target.attr(that.options["attribute.action"]))that.emitter.trigger("action",!1,that);that.close()}});return this},Modal.prototype.reposition=function(){var left=this.options["position.left"],top=this.options["position.top"];if(left)this.$el.css({position:this.options.position,left:left,marginLeft:/%/.test(left)?this.$el.outerWidth()/2*-1:0,zIndex:this.options["z.index"]++});if(top)this.$el.css({position:this.options.position,top:top,marginTop:/%/.test(top)?this.$el.outerHeight()/2*-1:0,zIndex:this.options["z.index"]++});return this},Modal.prototype.close=function(){var that=this;if(this.state!=OPEN)return;if(this.trigger("closeRequest")===!1)return;if(this.$el.off(".modal"),$(window).off(".modal"),this.emitter.trigger("closing"),this.options["animate.modal.close"])this.$el.animate(this.options["animate.modal.close"],{duration:this.options["animate.modal.duration"],complete:function(){_private.close.call(that)}});else _private.close.call(this);if(0===--_private.count)if(this.options["overlay.show"]&&this.$overlay)if(this.$overlay.off(".modal"),this.options["animate.overlay.close"])this.$overlay.animate(this.options["animate.overlay.close"],{duration:this.options["animate.overlay.duration"],complete:function(){this.$overlay.hide().remove()}});else this.$overlay.hide().remove();return this};var external=function(){return _private.getModal.apply(null,arguments)||_private.makeModal.apply(this,arguments)};return external.start=function(view,_options){var $view=$(view),options=_.extend({},_private.defaults,_options);if($view.data("modals-initialized"))return;else $view.data("modals-initialized",1);$view.on(options["bind.open"]+".modal","["+options["attribute.open"]+"]",function(e){var $anchor=$(this),selector=$anchor.attr(options["attribute.open"]),$modal=$view.find(selector);options=_.extend({},options,DataAttributes.parse($modal,_private.defaults,"data-modal-"));var modal=_private.getModal($modal,options)||_private.makeModal($modal,options);if(/^https?:\/\/|^\/|^\.\.\//.test($anchor.attr("href"))&&!e.ctrlKey&&!e.metaKey)e.preventDefault();modal.anchor=this,_private.prevModal=$modal[0],modal.open()})},external.stop=function(view){var $view=$(view);if($view.unbind(".modal"),$view.data("modals-initialized",0),_private.prevModal)Modal(_private.prevModal).close()},external.start("body"),external};if("function"==typeof define&&define.amd)define("js/lib/modals.v0-0-1",["js/vendor/jquery.v2-1","js/vendor/lucid.v2-7-0","js/vendor/underscore.v1-6","js/lib/data.attributes.v0-0-1"],function($,LucidJS,_,DataAttributes){return Modals($,LucidJS,_,DataAttributes)});else if("undefined"!=typeof window&&"undefined"==typeof ender)window.Modal=Modals(window.$,window.LucidJS,window._,window.DataAttributes)}(),define("bundles/confirmNavigation/nls/confirmNavigation",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t){buf.push('<div class="hide confirm-navigation modal"><div class="modal-header"><h3>'+jade.escape(null==(jade_interp=_t("Confirm Navigation"))?"":jade_interp)+'</h3></div><div class="modal-body"><div class="confirm-navigation-message"></div><div>'+jade.escape(null==(jade_interp=_t("Are you sure you want to leave this page?"))?"":jade_interp)+'</div></div><div class="modal-footer"><button data-modal-close="data-modal-close" class="btn confirm-navigation-stay">'+jade.escape(null==(jade_interp=_t("Stay on this Page"))?"":jade_interp)+'</button><button data-modal-close="data-modal-close" class="btn btn-danger confirm-navigation-leave">'+jade.escape(null==(jade_interp=_t("Leave this Page"))?"":jade_interp)+"</button></div></div>")}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("bundles/confirmNavigation/confirmNavigation.html",["js/lib/jade","i18n!bundles/confirmNavigation/nls/confirmNavigation"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["bundles.confirmNavigation.confirmNavigation"]=jadify(wndw.jade.helpers)}(window),define("js/lib/origami.v0-0-1",["js/vendor/jquery.v2-1","js/vendor/underscore.v1-6","js/vendor/backbone.v1-1-2","require","js/lib/modals.v0-0-1","bundles/confirmNavigation/confirmNavigation.html","js/vendor/q.v1-0-1"],function($,_,Backbone,require,Modal,confirmNavigationTemplate,Q){Backbone.View.prototype._super=function(funcName){return this.constructor.__super__[funcName].apply(this,_.rest(arguments))};var _singleton=null,_private={current:null,body:"#origami",views:{},openDepth:0,beforeUnloadMessage:"There are unsaved changes that will be lost if you reload or leave this page.",regionHasUnsavedModel:function(region){if(!region)return!1;var viewHasUnsavedModel=region.view&&region.view.hasUnsavedModel?region.view.hasUnsavedModel():!1;if(viewHasUnsavedModel)return!0;else{for(var name in region.regions){var subRegion=region.regions[name];if(_private.regionHasUnsavedModel(subRegion))return!0}return!1}}},router=Backbone.Router.extend({initialize:function(){var self=this;self.routePrefix="",self.linkSelector=".internal",$("body").on("click","a.internal",function(e){if(!e.ctrlKey&&!e.metaKey)e.preventDefault(),self.navigate($(e.currentTarget).attr("href"),!0)}),this.$confirmNavigation=$(confirmNavigationTemplate({})),$("body").append(this.$confirmNavigation),$(window).on("beforeunload.origami",function(){if(_private.regionHasUnsavedModel(_private.current))return _private.beforeUnloadMessage})},setupLinks:function(routePrefix,linkSelector){var self=this;this.routePrefix=routePrefix,this.linkSelector=linkSelector,$("body").on("click","a"+this.linkSelector,function(e){if(!e.ctrlKey&&!e.metaKey)e.preventDefault(),self.navigateTo($(e.currentTarget).attr("href"),!0)})},navigateTo:function(href,silent){this.navigate(href.replace(this.routePrefix,""),silent)},navigate:function(fragment,options){if(_private.current&&_private.regionHasUnsavedModel(_private.current)){var $message=$(".confirm-navigation-message");$message.text(_private.beforeUnloadMessage);var $leave=$(".confirm-navigation-leave");$leave.one("click",function(){Backbone.Router.prototype.navigate.call(this,fragment,options)});var modalOptions={"overlay.class":"coursera-overlay"};Modal(".confirm-navigation",modalOptions).open()}else Backbone.Router.prototype.navigate.call(this,fragment,options)},addRoutes:function(routes,routeCallbackWrapper){var self=this;for(var route in routes){var routeCallback=routes[route];if(routeCallbackWrapper)routeCallback=routeCallbackWrapper(routeCallback);self.route(route,route,routeCallback),self.route(route+"/",route+"/",function(){var url=Backbone.history.getFragment(),rewrite=url.replace(/\/(?:\?.*)*$/,"");self.navigate(rewrite,{trigger:!0,replace:!0})})}}}),animateManager={resize:function(outgoing,incoming,callback){$("body").append(incoming.$el.css({visibility:"hidden"}));var height={from:outgoing.$el.outerHeight(),to:incoming.$el.outerHeight()};outgoing.$el.animate({height:height.to},300,function(){if(outgoing.$el.replaceWith(incoming.$el.css({visibility:"visible"})),incoming.$el.find("img").on("load",function(){incoming.$el.animate({height:incoming.$el.outerHeight()})}),callback)callback()})},slideLeft:function(outgoing,incoming,callback){var going=outgoing.$el,coming=incoming.$el,position=going.position(),width=going.outerWidth(),height=going.outerHeight(),parent=$("<div>").css({position:"relative",width:width,height:height}),restoreIn={position:coming.css("absolute")||"static",width:coming.get(0).style.width,left:coming.get(0).style.left},restoreOut={position:going.css("absolute")||"static",width:going.get(0).style.width,left:going.get(0).style.left};going.wrap(parent),going.css({width:width,left:position.left,position:"absolute"}),coming.css({width:width,left:position.left+width,position:"absolute"}),going.parent().append(coming),going.animate({left:-width},{duration:500,step:function(moved){coming.css({left:position.left+width+moved})},complete:function(){if(coming.css(restoreIn),going.css(restoreOut).hide(),going.unwrap(),callback)callback()}})},slideRight:function(outgoing,incoming,callback){var going=outgoing.$el,coming=incoming.$el,position=going.position(),width=going.outerWidth(),height=going.outerHeight(),parent=$("<div>").css({position:"relative",width:width,height:height}),restoreIn={position:coming.css("absolute")||"static",width:coming.get(0).style.width,left:coming.get(0).style.left},restoreOut={position:going.css("absolute")||"static",width:going.get(0).style.width,left:going.get(0).style.left};going.wrap(parent),going.css({width:width,left:position.left,position:"absolute"}),coming.css({width:width,left:-(position.left+width),position:"absolute"}),going.parent().append(coming),going.animate({left:width},{duration:500,step:function(moved){coming.css({left:-(position.left+width)+moved})},complete:function(){if(coming.css(restoreIn),going.css(restoreOut).hide(),going.unwrap(),callback)callback()}})},replace:function(outgoing,incoming,callback){if(outgoing.$el.replaceWith(incoming.el),callback)callback()}},region=function(type,_options){var self=this,options=_options||{};self.type=type,self.animate=options.animate||{},self.regions=options.regions||{},self.initialize=options.initialize||{},self.to=options.to,self.options={},self.id=options.id||type.prototype.name,self.name=type.prototype.name,self.view=null,self.regions=$.extend({},type.prototype.subregions,options.regions||{})
};region.prototype.close=function(keep){var self=this;if(_.each(self.regions,function(_region,key){delete self.regions[key],_region.close(keep)}),!keep)self.view.remove();self.view.undelegateEvents(),self.view.trigger("view:closed"),self.view.off("view")},region.prototype.closing=function(){this.view.trigger("view:closing"),delete _private.views[this.view.cid]},region.prototype.render=function(origami){var self=this,regions=_.compact(_.values(self.regions));if(_.each(regions,function(subregion){subregion.render(),subregion.parent=self}),self.view=new self.type(self.initialize),self.view.region=self,self.view.render(self.render),_.each(regions,function(subregion){var $el=subregion.view&&subregion.view.$el,to=subregion.to||subregion.view&&subregion.view.to;if(_.isFunction(to))to=to();if(to&&!$.contains(document,$el))self.view.$(to).append($el),subregion.appended()}),origami)self.view.on("view:appended",function(){origami.trigger("region:appended",{name:self.name})});return self},region.prototype.appended=function(){var that=this;if(that.view)setTimeout(function(){that.view.trigger("view:appended")},0)},region.prototype.append=function(view,options){var that=this,appended=Q.defer();if(!this.regions)this.regions={};var render_and_append=function(_region){for(var key=view,count=0,$el;that.regions[key];)key+=++count;if(that.regions[key]=_region,_region.render(_singleton),options.to)$el=_.isElement(options.to)?that.view.$(options.to):options.to;else $el=that.view.$el;$el.append(_region.view.el),_region.appended(),_singleton.trigger("region:rendered",{name:_region}),appended.resolve(_region)};if("string"==typeof view)_singleton.region.fetch(view,options,render_and_append);else render_and_append(new region(view,options));return appended.promise},region.prototype.is=function(_region){return _region.type==this.type&&_region.id==this.id},region.prototype.replace=function(incoming,callback){var outgoing=this,how="replace",animate={incoming:incoming.view.animate,outgoing:outgoing.view.animate};if(_.isString(animate.incoming))how=animate.incoming;else if(_.isFunction(animate.incoming))how=animate.incoming();else if(_.isString(animate.outgoing))how=animate.outgoing;else if(_.isFunction(animate.outgoing))how=animate.outgoing();if(!animateManager[how])how="replace";animateManager[how](outgoing.view,incoming.view,callback)},region.prototype.merge=function(incoming,origami){var self=this;if(self.is(incoming))_.each(incoming.regions,function(_region,view){self.regions[view].view.trigger("view:merging",_region.initialize),self.regions[view].merge(_region,origami),self.regions[view].view.trigger("view:merged",_region.initialize)});else if(self.name==incoming.name)self.closing(),incoming.render(origami),self.replace(incoming,function(){if(self.parent)self.parent.regions[incoming.name]=incoming,incoming.parent=self.parent,self.parent.appended();self.close(),incoming.appended()})};var Origami=function(body,current){if(_singleton)return _singleton;_singleton=this,_private.body=body,_private.current=current,$(window).on("resize",function(){for(var cid in _private.views)_private.views[cid].trigger("view:resize")}),this.region={make:function(type,options){return new region(type,options)},fetch:function(_region,conf,callback){var uid=_.uniqueId();_singleton.trigger("region:fetching",{name:_region,uid:uid}),require([_region],function(view){_singleton.trigger("region:fetched",{name:_region,uid:uid}),callback(new region(view,conf))})},append:function(parent,view,options,callback){if(!parent)parent={regions:{}};var render_and_append=function(_region){for(var key=view,count=0;parent.regions[key];)key+=++count;if(parent.regions[key]=_region,_region.render(_singleton),callback)callback(_region);return _region.appended(),_singleton.trigger("region:rendered",{name:_region}),_region};if("string"==typeof view)_singleton.region.fetch(view,options,render_and_append);else return render_and_append(new region(view,options))},open:function(name,callback){var view=name,conf={};if(0===_private.openDepth)_singleton.trigger("open");_private.openDepth++;var onFetch=function(parent){var subregionPromises=[];_.each(parent.regions,function(subregion,name){if(!subregion)return;var q=Q.defer();_singleton.region.open(subregion,function(_region){if(name!=_region.name)console.error("Region configured with name "+name+" but has name "+_region.name);parent.regions[name]=_region,q.resolve(_region)}),subregionPromises.push(q.promise)}),Q.allSettled(subregionPromises).then(function(){if(callback)return callback(parent);if(_private.current){if(_private.current.is(parent))return void _private.current.merge(parent,_singleton);else if(_private.current.name==parent.name)return parent.render(_singleton),void _private.current.replace(parent,function(){_private.current.close(),_private.current=parent,_private.current.appended()});_private.current.close(!0)}_private.current=parent,$(_private.body).html(_private.current.render(_singleton).view.$el),_private.current.appended(),_.each(_private.current.regions,function(_region){if(_region)_region.appended()})}).fin(function(){if(--_private.openDepth<=0)_singleton.trigger("opened")}).done()};if(region.prototype.isPrototypeOf(name))onFetch(name);else{if(_.isObject(name))view=_.keys(name)[0],conf=name[view];_singleton.region.fetch(view,conf,onFetch)}}},this.animate=animateManager,this.router=new router,this.store={},this.tracker=[]};return _.extend(Origami.prototype,Backbone.Events),Origami}),define("js/app/origamiSingleton.v0-0-1",["js/lib/origami.v0-0-1"],function(Origami){var origami=new Origami("body");return origami}),!function(wndw){var module=function(_,$){var thirdparty={loadScript:function(url,success,body){var newScript=document.createElement("script"),scripts=document.getElementsByTagName("script");if(newScript.type="text/javascript",newScript.async=!0,newScript.src=url,body)newScript.innerHTML=body;if(success)newScript.onload=newScript.onreadystatechange=function(){newScript.onreadystatechange=newScript.onload=null,success()};if(scripts&&scripts.length)scripts[0].parentNode.insertBefore(newScript,scripts[0]);else if(window.document&&window.document.body)window.document.body.appendChild(newScript)},isDefined:function(parent,name){for(var parts=name.split("."),part=parts.shift(),cur=parent;part;)if(cur[part])cur=cur[part],part=parts.shift();else cur=null,part=null;return null!==cur},ready:function(global,callback){if(thirdparty.isDefined(window,global))callback.call();else{var base=global.split(".")[0];if(_.isArray(pool[global]))pool[global].push(callback);else pool[global]=[callback],third_party_globals[base].call(null,global)}}},pool={},poll=function(global){if(thirdparty.isDefined(window,global))for(var base=global.split(".")[0];pool[global]&&pool[global].length;)pool[global].pop().call();else window.setTimeout(function(){poll(global)},100)},third_party_globals={IN:function(x){var funcName="itsThirdPartyTime"+(new Date).getTime();window[funcName]=function(){delete window[funcName],poll(x)},thirdparty.loadScript("https://platform.linkedin.com/in.js",function(){},"onLoad:"+funcName+"\napi_key: v7ah6tdxsqt6")},google:function(x){var funcName;if(/^google\.maps.places/.test(x))funcName="itsThirdPartyTime"+(new Date).getTime(),window[funcName]=function(){delete window[funcName],poll(x)},thirdparty.loadScript("https://maps.googleapis.com/maps/api/js?sensor=false&key=AIzaSyC7XENXcXiE_oj0HvDUC_MiLY9zI3xTW0g&libraries=places&callback="+funcName);if(/^google\.maps\.Map/.test(x))funcName="itsThirdPartyTime"+(new Date).getTime(),window[funcName]=function(){delete window[funcName],poll(x)},thirdparty.loadScript("https://maps.googleapis.com/maps/api/js?sensor=false&key=AIzaSyCzodUI0p0hH-8n6tZ45vMNlaNfKEpuEMU&callback="+funcName)},FB:function(x){thirdparty.loadScript("https://connect.facebook.net/en_US/all.js#xfbml=1&appId=274998519252278",function(){poll(x)})},gapi:function(x){window.___gcfg={lang:"en-US",parsetags:"explicit"},thirdparty.loadScript("https://apis.google.com/js/plusone.js",function(){delete window.___gcfg,poll(x)})},twttr:function(x){thirdparty.loadScript("https://platform.twitter.com/widgets.js",function(){poll(x)})},MathJax:function(x){thirdparty.loadScript("https://d2265nx4vomwra.cloudfront.net/2.1/MathJax.js?delayStartupUntil=configured",function(){poll(x)})}};return thirdparty};if("function"==typeof define&&define.amd)define("js/lib/thirdParties.v0-0-1",["js/vendor/underscore.v1-6","js/vendor/jquery.v2-1"],function(_,$){return module(_,$)});else window.thirdparties=module(window._,window.$)}(window),!function(wndw){var module=function(_){var MultiTracker=function(opts){var options=opts||{};this.trackers={},this.logger=options.logger||Log({level:"error"})};MultiTracker.prototype.register=function(name,queue,type,parser){this.trackers[name]={queue:queue||[],type:type||"key-value",parse:parser}},MultiTracker.prototype.get=function(name){return this.trackers[name]},MultiTracker.prototype.push=function(){for(var trackings=arguments,k=0;k<trackings.length;k++){var tracking=_.isArray(trackings[k])?trackings[k]:[trackings[k]];for(var tracker in this.trackers){var trackEvent,i,handler;if("google"==this.trackers[tracker].type){if("pageview"==tracking[0])for(trackEvent=["_trackPageview"],i=1;i<tracking.length;i++)trackEvent.push(_.isString(tracking[i])?tracking[i]:JSON.stringify(tracking[i]))}else if("key-value"==this.trackers[tracker].type){for(var value=[],a=1;a<tracking.length;a++)if("function"==typeof tracking[a])handler=tracking[a];else value.push(_.isString(tracking[a])?tracking[a]:JSON.stringify(tracking[a]));if(value.length)trackEvent={key:tracking[0],value:value.join(".")};else trackEvent={key:tracking[0]}}else if("custom"==this.trackers[tracker].type&&this.trackers[tracker].parse)trackEvent=this.trackers[tracker].parse.apply(this,tracking);if(trackEvent)if(handler)this.trackers[tracker].queue.push(["send",trackEvent,handler]);else this.trackers[tracker].queue.push(trackEvent)}this.logger.info.apply(this.logger,tracking)}};var external=function(options){return new MultiTracker(options)};return external};if("function"==typeof define&&define.amd)define("js/lib/multitracker.v0-0-1",["js/vendor/underscore.v1-6","js/lib/json2"],function(_){return module(_)});else wndw.MultiTracker=module(wndw._)}(window),define("js/app/multitrackerSingleton.v0-0-1",["js/app/origamiSingleton.v0-0-1","js/app/config","js/vendor/jquery.v2-1","js/vendor/underscore.v1-6","js/vendor/backbone.v1-1-2","js/lib/thirdParties.v0-0-1","js/app/loggerSingleton.v0-0-1","js/lib/multitracker.v0-0-1"],function(origami,config,$,_,Backbone,thirdparty,logger,MultiTracker){var multitracker=MultiTracker({logger:logger});return multitracker.register("204",[]),multitracker.register("ga",window._gaq=[],"google"),$(document).ready(function(){if(/staging|production/.test(config.environment))requirejs.config({context:"204js",paths:{_204:"https://eventing.coursera.org/204.min"}})(["_204"],function(_204){if(!_204)return;for(var parts=location.host.split(".");parts.length>2;)parts.shift();multitracker.get("204").queue.push(["domain","."+parts.join(".")]),multitracker.get("204").queue=_204.batch(multitracker.get("204").queue)}),multitracker.get("ga").queue.push(["_setAccount","UA-28377374-1"],["_setDomainName","coursera.org"],["_setAllowLinker",!0],["_trackPageview"]),thirdparty.loadScript(("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",function(){multitracker.get("ga").queue=window._gaq});origami.router.on("route",function(){var currentURL=config.dir.home+Backbone.history.getFragment();multitracker.push(["pageview",currentURL])})}),multitracker}),define("pages/open-course/common/apiWrapper",["js/lib/api.v0-0-1","js/app/multitrackerSingleton.v0-0-1"],function(API,Multitracker){return function(endpoint,options){var api=API(endpoint,options);return api.on("always",function(api){if(api.xhr.status>=400)Multitracker.push(["api.error."+api.xhr.status,{timing:api.timing,url:api.url,params:api.params,status:api.xhr.status,response:api.xhr.responseText}]);else Multitracker.push(["api.ok."+api.xhr.status,{timing:api.timing,url:api.url,params:api.params,status:api.xhr.status,cf_age:api.xhr.getResponseHeader("Age"),cf_hit:api.xhr.getResponseHeader("X-Cache")}])}),api}}),define("pages/open-course/common/catalogApi",["pages/open-course/common/apiWrapper"],function(API){return API("/api/catalog.v1/",{type:"rest"})}),define("pages/open-course/data/catalogData",["js/vendor/q.v1-0-1","pages/open-course/common/catalogApi"],function(Q,catalogApi){return function(path){return Q(catalogApi.get(path))}}),define("js/lib/memoize.v0-0-1",["js/vendor/underscore.v1-6"],function(_){return function(func,hasher){var memo={};hasher=hasher||_.identity;var memoized=function(){var key=hasher.apply(this,arguments);if(!_.has(memo,key))memo[key]=func.apply(this,arguments);return memo[key]};return memoized.force=function(){return memoized.clear.apply(this,arguments),memoized.apply(this,arguments)},memoized.clear=function(){var key=hasher.apply(this,arguments);delete memo[key]},memoized.reset=function(){memo={}},memoized}}),define("pages/open-course/data/catalogData.memoized",["pages/open-course/data/catalogData","js/lib/memoize.v0-0-1"],function(catalogData,memoize){return memoize(catalogData)}),define("pages/open-course/common/models/catalogModel",["js/vendor/backbone-associations.v0-6-1","js/vendor/underscore.v1-6","js/vendor/uri.v0-0-1","js/vendor/q.v1-0-1","pages/open-course/common/constants","pages/open-course/data/catalogData.memoized"],function(Backbone,_,Uri,Q,constants,catalogData){function parseElement(element,linked){var parsed=_.omit(element,"links"),links=element.links;return _(links).each(function(ids,key){parsed[key]=_(ids).map(function(id){var idData={id:id},linkedData=_(linked[key]).findWhere(idData);return linkedData||idData})}),parsed}function fetchPromise(model){return model instanceof CatalogModel?model.fetch():Q(model.fetch())}var CatalogModel=Backbone.AssociatedModel.extend({fields:[],includes:[],urlPath:"",url:function(){var uri=(new Uri).setPath(this.urlPath).addQueryParam("id",this.id).addQueryParam("includes",this.includes).addQueryParam("fields",this.fields);return uri.toString().replace(/%2C/g,",")},fetch:function(options){options=options||{};var self=this,promise=catalogData(this.url()).then(function(data){return this.set(this.parse(data)),this}.bind(this)).then(function(){var promises=_(self.relations).chain().map(function(relation){var value=self.get(relation.key);if(relation.type==Backbone.Many)return value&&value.map(fetchPromise);else if(relation.type==Backbone.One)return value&&fetchPromise(value)}).flatten().compact().value(),combinedPromise=Q.all(promises);return combinedPromise.done(),combinedPromise}).then(options.success).fail(options.error);return promise.done(),promise},parse:function(json){if(json.elements)if(1==json.elements.length)return parseElement(json.elements[0],json.linked);else return _(json.elements).map(function(element){return parseElement(element,json.linked)});else return json}});return CatalogModel}),define("pages/open-course/common/models/university",["js/vendor/backbone-associations.v0-6-1","js/vendor/underscore.v1-6","js/vendor/uri.v0-0-1","pages/open-course/common/constants","pages/open-course/common/models/catalogModel","js/lib/path"],function(Backbone,_,Uri,constants,CatalogModel,path){var University=CatalogModel.extend({fields:["classLogo","homeLink","name","squareLogo"],urlPath:"universities",getLink:function(){return this.get("homeLink")||path.join(constants.config.dir.home,this.get("shortName"))}});return University}),define("pages/open-course/common/util/concatName",["js/vendor/underscore.v1-6"],function(_){function concatName(nameObj){var full=_(["prefix","first","middle","last"]).chain().map(function(key){return nameObj[key]}).compact().value().join(" ");if(nameObj.suffix)full+=", "+nameObj.suffix;return full}return concatName}),define("pages/open-course/common/models/instructor",["js/vendor/backbone-associations.v0-6-1","js/vendor/underscore.v1-6","js/vendor/uri.v0-0-1","pages/open-course/common/constants","pages/open-course/common/models/catalogModel","pages/open-course/common/models/university","pages/open-course/common/util/concatName","js/lib/path"],function(Backbone,_,Uri,constants,CatalogModel,University,concatName,path){var Instructor=CatalogModel.extend({fields:["firstName","lastName","prefixName","suffixName","shortName","title","department","photo150"],includes:["universities"],relations:[{type:Backbone.Many,key:"universities",relatedModel:University}],urlPath:"instructors",getFullName:function(){return concatName({prefix:this.get("prefixName"),first:this.get("firstName"),middle:this.get("middleName"),last:this.get("lastName"),suffix:this.get("suffixName")})},getPrefixedName:function(){var prefixedName="";if(this.get("prefixName"))prefixedName+=this.get("prefixName")+" ";return prefixedName+=this.get("fullName")},getLink:function(){return path.join(constants.config.url.home,"instructor",this.get("shortName")||"~"+this.get("id"))},getTitle:function(){return this.get("title")},getDepartment:function(){return this.get("department")},getUniversity:function(){return this.get("universities").at(0)},shouldDisplay:function(){return void 0!==this.get("firstName")&&""!==this.get("firstName")}});return Instructor}),define("pages/open-course/common/models/course",["js/vendor/backbone-associations.v0-6-1","js/vendor/underscore.v1-6","js/vendor/q.v1-0-1","js/lib/path","js/lib/language.v0-0-1","pages/open-course/common/models/instructor","pages/open-course/common/models/university","pages/open-course/common/constants"],function(Backbone,_,Q,path,language,Instructor,University,constants){var Course=Backbone.AssociatedModel.extend({initialize:function(){},fetch:function(options){options=options||{};var promises=_.union(this.get("instructors").map(function(instructor){return instructor.fetch()}),this.get("universities").map(function(university){return university.fetch()})),combinedPromise=Q.all(promises).then(function(){return this}.bind(this)).then(options.success).fail(options.error);return combinedPromise.done(),combinedPromise},relations:[{type:Backbone.Many,key:"instructors",relatedModel:Instructor},{type:Backbone.Many,key:"universities",relatedModel:University}],parse:function(courseData){var course=_.omit(courseData,"courseMaterial");return course.instructors=_(courseData.instructorIds).map(function(id){return{id:id}}),course.universities=_(courseData.partnerIds).map(function(id){return{id:id}}),course},getLink:function(){return path.join(constants.rootPath,this.get("slug"))},getOutlineLink:function(){return path.join(this.getLink(),"outline")},getSubtitles:function(){return _(this.getSubtitleCodes()).map(language.languageCodeToName)},getSubtitleCodes:function(){return _.union(this.get("primaryLanguageCodes"),this.get("subtitleLanguageCodes"))}});return Course}),define("pages/open-course/common/api",["pages/open-course/common/apiWrapper"],function(API){return API("/api/opencourse.v1/",{type:"rest"})}),define("pages/open-course/data/courseData",["js/vendor/q.v1-0-1","pages/open-course/common/api"],function(Q,api){return function(courseSlug){return Q(api.get("course/"+courseSlug))}}),define("pages/open-course/data/courseData.memoized",["pages/open-course/data/courseData","js/lib/memoize.v0-0-1"],function(courseData,memoize){return memoize(courseData)}),define("pages/open-course/common/promises/course",["pages/open-course/common/models/course","pages/open-course/data/courseData.memoized"],function(Course,courseDataPromise){return function(courseSlug){var promise=courseDataPromise(courseSlug).then(function(courseData){var course=new Course(courseData,{parse:!0});return course.fetch()});return promise.done(),promise}}),define("pages/open-course/common/promises/course.memoized",["pages/open-course/common/promises/course","js/lib/memoize.v0-0-1"],function(coursePromise,memoize){return memoize(coursePromise)}),define("pages/open-course/common/models/progress",["js/vendor/backbone-associations.v0-6-1","js/vendor/underscore.v1-6","pages/open-course/common/constants"],function(Backbone,_,constants){var stateToPercent=function(state){switch(state){case constants.progressCompleted:return 100;case constants.progressStarted:return 50;case constants.progressNotStarted:return 0;default:throw new Error("Unknown progressState: "+state)}},percentToState=function(percent){if(100===percent)return constants.progressCompleted;else if(percent>0&&100>percent)return constants.progressStarted;else return constants.progressNotStarted},Progress=Backbone.AssociatedModel.extend({initialize:function(attributes){var percent,state;if(_.isObject(attributes))if(_.has(attributes,"progressState"))this.setState(attributes.progressState);else if(_.has(attributes,"completionPercent"))this.setPercent(attributes.completionPercent)},getState:function(){return this.get("progressState")},setState:function(state){return this.set({progressState:state,completionPercent:stateToPercent(state)}),this},getPercent:function(){return this.get("completionPercent")},setPercent:function(percent){return this.set({progressState:percentToState(percent),completionPercent:percent}),this},getPercentString:function(){return this.getPercent()+"%"},getPercentDegrees:function(){return this.getPercent()/100*360},isComplete:function(){return this.getState()===constants.progressCompleted},hasStarted:function(){return this.getState()===constants.progressStarted},hasNotStarted:function(){return!(this.isComplete()||this.hasStarted())}});return Progress}),define("bundles/flex-template/models/backbone.immutable",["js/vendor/underscore.v1-6"],function(_){function makeImmutableModel(Model){var originalInitialize=Model.prototype.initialize;return Model.extend({initialize:function(){if(originalInitialize)originalInitialize.apply(this,arguments);this.set=function(){console.error("set called on immutable model")}}})}return makeImmutableModel}),define("bundles/flex-template/models/userIdentity",["js/vendor/backbone.v1-1-2","js/vendor/underscore.v1-6","pages/open-course/common/constants","bundles/flex-template/models/backbone.immutable","pages/home/models/user.json"],function(Backbone,_,constants,makeImmutableModel,userJson){var UserIdentity=Backbone.Model.extend({hasProfile:function(){return-1!=this.get("privacy")&&this.has("external_id")},getProfileUrl:function(){var url=this.hasProfile()?"user/i/"+this.get("external_id"):"account/profile";return constants.config.dir.home+url},parse:function(userJson){if(_(userJson).isEmpty())return{authenticated:!1};else return _(userJson).chain().pick(["display_name","email_address","external_id","full_name","id","privacy"]).extend({authenticated:!0}).value()}}),ImmutableUserIdentity=makeImmutableModel(UserIdentity),userIdentitySingleton=new ImmutableUserIdentity(userJson,{parse:!0});return userIdentitySingleton}),define("pages/open-course/data/courseProgress",["js/vendor/q.v1-0-1","pages/open-course/common/api","bundles/flex-template/models/userIdentity"],function(Q,api,userIdentity){return function(courseSlug){if(!userIdentity.get("id"))return Q.fcall(function(){return{modules:{},lessons:{},items:{}}});else return Q(api.get("user/"+userIdentity.get("id")+"/course/"+courseSlug))}}),define("pages/open-course/data/courseProgress.memoized",["pages/open-course/data/courseProgress","js/lib/memoize.v0-0-1"],function(courseProgress,memoize){return memoize(courseProgress)}),define("pages/open-course/common/models/courseProgress",["js/vendor/q.v1-0-1","js/vendor/underscore.v1-6","js/vendor/backbone-associations.v0-6-1","pages/open-course/common/api","pages/open-course/common/models/progress","pages/open-course/data/courseProgress.memoized","pages/open-course/common/constants"],function(Q,_,Backbone,api,Progress,courseProgressPromise,constants){var CourseProgress=Backbone.AssociatedModel.extend({initialize:function(){this.progressMapping={},this.on("refresh",this.refresh,this)},refresh:function(){var promise=courseProgressPromise.force(constants.courseSlug).then(function(newCourseProgress){return this.set(newCourseProgress),this}.bind(this));return promise.done(),promise},getNextUpItem:function(){return this.get("nextItem")},hasItem:function(id){return _(this.get("items")).has(id)},getItem:function(id){return this.get("items")[id]},getItemProgress:function(id){if(!this.progressMapping[id]){var progressAttributes={id:id,timestamp:Date.now(),progressState:constants.progressNotStarted};if(this.hasItem(id))_(progressAttributes).extend(this.getItem(id));var progress=new Progress(progressAttributes);this.listenTo(progress,"change:progressState",function(progressModel,newState){this.trigger("refresh")}.bind(this)),this.progressMapping[id]=progress}return this.progressMapping[id]},hasModule:function(id){return _(this.get("modules")).has(id)},getModuleCompletionPercent:function(id){return this.get("modules")[id]},getModuleProgress:function(id){var completionPercent=0;if(this.hasModule(id))completionPercent=this.getModuleCompletionPercent(id);return new Progress({id:id,timestamp:Date.now(),completionPercent:completionPercent})},getOverallProgressPercent:function(){var numModules=_(this.get("modules")).keys().length;if(numModules)return _(this.get("modules")).reduce(function(sum,percent,id){return sum+percent},0)/numModules;else return 0}});return CourseProgress}),define("pages/open-course/common/promises/courseProgress",["pages/open-course/common/models/courseProgress","pages/open-course/data/courseProgress.memoized"],function(CourseProgress,courseProgressPromise){return function(courseSlug){var promise=courseProgressPromise(courseSlug).then(function(progressData){return new CourseProgress(progressData)});return promise.done(),promise}}),define("pages/open-course/common/promises/courseProgress.memoized",["pages/open-course/common/promises/courseProgress","js/lib/memoize.v0-0-1"],function(courseProgressPromise,memoize){return memoize(courseProgressPromise)}),function(undefined){function padToken(func,count){return function(a){return leftZeroFill(func.call(this,a),count)}}function ordinalizeToken(func,period){return function(a){return this.lang().ordinal(func.call(this,a),period)}}function Language(){}function Moment(config){checkOverflow(config),extend(this,config)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._input=duration,this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+36e5*hours,this._days=+days+7*weeks,this._months=+months+12*years,this._data={},this._bubble()}function extend(a,b){for(var i in b)if(b.hasOwnProperty(i))a[i]=b[i];if(b.hasOwnProperty("toString"))a.toString=b.toString;if(b.hasOwnProperty("valueOf"))a.valueOf=b.valueOf;return a}function absRound(number){if(0>number)return Math.ceil(number);else return Math.floor(number)}function leftZeroFill(number,targetLength){for(var output=number+"";output.length<targetLength;)output="0"+output;return output}function addOrSubtractDurationFromMoment(mom,duration,isAdding,ignoreUpdateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months,minutes,hours;if(milliseconds)mom._d.setTime(+mom._d+milliseconds*isAdding);if(days||months)minutes=mom.minute(),hours=mom.hour();if(days)mom.date(mom.date()+days*isAdding);if(months)mom.month(mom.month()+months*isAdding);if(milliseconds&&!ignoreUpdateOffset)moment.updateOffset(mom);if(days||months)mom.minute(minutes),mom.hour(hours)}function isArray(input){return"[object Array]"===Object.prototype.toString.call(input)}function isDate(input){return"[object Date]"===Object.prototype.toString.call(input)}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;len>i;i++)if(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))diffs++;return diffs+lengthDiff}function normalizeUnits(units){return units?unitAliases[units]||units.toLowerCase().replace(/(.)s$/,"$1"):units}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop,index;for(prop in inputObject)if(inputObject.hasOwnProperty(prop))if(normalizedProp=normalizeUnits(prop))normalizedInput[normalizedProp]=inputObject[prop];return normalizedInput}function makeList(field){var count,setter;if(0===field.indexOf("week"))count=7,setter="day";else if(0===field.indexOf("month"))count=12,setter="month";else return;moment[field]=function(format,index){var i,getter,method=moment.fn._lang[field],results=[];if("number"==typeof format)index=format,format=undefined;if(getter=function(i){var m=moment().utc().set(setter,i);return method.call(moment.fn._lang,m,format||"")},index)return getter(index);else{for(i=0;count>i;i++)results.push(getter(i));return results}}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(0!==coercedNumber&&isFinite(coercedNumber))if(coercedNumber>=0)value=Math.floor(coercedNumber);else value=Math.ceil(coercedNumber);return value}function daysInMonth(year,month){return moment.utc([year,month+1,0]).date()}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function checkOverflow(m){var overflow;if(m._a&&-2===m._pf.overflow){if(overflow=m._a[MONTH]<0||m._a[MONTH]>11?MONTH:m._a[DATE]<1||m._a[DATE]>daysInMonth(m._a[YEAR],m._a[MONTH])?DATE:m._a[HOUR]<0||m._a[HOUR]>23?HOUR:m._a[MINUTE]<0||m._a[MINUTE]>59?MINUTE:m._a[SECOND]<0||m._a[SECOND]>59?SECOND:m._a[MILLISECOND]<0||m._a[MILLISECOND]>999?MILLISECOND:-1,m._pf._overflowDayOfYear&&(YEAR>overflow||overflow>DATE))overflow=DATE;m._pf.overflow=overflow}}function initializeParsingFlags(config){config._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,userInvalidated:!1}}function isValid(m){if(null==m._isValid)if(m._isValid=!isNaN(m._d.getTime())&&m._pf.overflow<0&&!m._pf.empty&&!m._pf.invalidMonth&&!m._pf.nullInput&&!m._pf.userInvalidated,m._strict)m._isValid=m._isValid&&0===m._pf.charsLeftOver&&0===m._pf.unusedTokens.length;return m._isValid}function normalizeLanguage(key){return key?key.toLowerCase().replace("_","-"):key}function loadLang(key,values){if(values.abbr=key,!languages[key])languages[key]=new Language;return languages[key].set(values),languages[key]}function unloadLang(key){delete languages[key]}function getLangDefinition(key){var i=0,j,lang,next,split,get=function(k){if(!languages[k]&&hasModule)try{require("./lang/"+k)}catch(e){}return languages[k]};if(!key)return moment.fn._lang;if(!isArray(key)){if(lang=get(key))return lang;key=[key]}for(;i<key.length;){for(split=normalizeLanguage(key[i]).split("-"),j=split.length,next=normalizeLanguage(key[i+1]),next=next?next.split("-"):null;j>0;){if(lang=get(split.slice(0,j).join("-")))return lang;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return moment.fn._lang}function removeFormattingTokens(input){if(input.match(/\[[\s\S]/))return input.replace(/^\[|\]$/g,"");return input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;length>i;i++)if(formatTokenFunctions[array[i]])array[i]=formatTokenFunctions[array[i]];else array[i]=removeFormattingTokens(array[i]);return function(mom){var output="";for(i=0;length>i;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}function formatMoment(m,format){if(!m.isValid())return m.lang().invalidDate();if(format=expandFormat(format,m.lang()),!formatFunctions[format])formatFunctions[format]=makeFormatFunction(format);return formatFunctions[format](m)}function expandFormat(format,lang){function replaceLongDateFormatTokens(input){return lang.longDateFormat(input)||input
}var i=5;for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}function getParseRegexForToken(token,config){var a;switch(token){case"DDDD":return parseTokenThreeDigits;case"YYYY":return parseTokenFourDigits;case"YYYYY":return parseTokenSixDigits;case"S":case"SS":case"SSS":case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return parseTokenWord;case"a":case"A":return getLangDefinition(config._l)._meridiemParse;case"X":return parseTokenTimestampMs;case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return parseTokenOneOrTwoDigits;default:return a=new RegExp(regexpEscape(unescapeFormat(token.replace("\\","")),"i"))}}function timezoneMinutesFromString(string){var tzchunk=(parseTokenTimezone.exec(string)||[])[0],parts=(tzchunk+"").match(parseTimezoneChunker)||["-",0,0],minutes=+(60*parts[1])+toInt(parts[2]);return"+"===parts[0]?-minutes:minutes}function addTimeToArrayFromToken(token,input,config){var a,datePartArray=config._a;switch(token){case"M":case"MM":if(null!=input)datePartArray[MONTH]=toInt(input)-1;break;case"MMM":case"MMMM":if(a=getLangDefinition(config._l).monthsParse(input),null!=a)datePartArray[MONTH]=a;else config._pf.invalidMonth=input;break;case"D":case"DD":if(null!=input)datePartArray[DATE]=toInt(input);break;case"DDD":case"DDDD":if(null!=input)config._dayOfYear=toInt(input);break;case"YY":datePartArray[YEAR]=toInt(input)+(toInt(input)>68?1900:2e3);break;case"YYYY":case"YYYYY":datePartArray[YEAR]=toInt(input);break;case"a":case"A":config._isPm=getLangDefinition(config._l).isPM(input);break;case"H":case"HH":case"h":case"hh":datePartArray[HOUR]=toInt(input);break;case"m":case"mm":datePartArray[MINUTE]=toInt(input);break;case"s":case"ss":datePartArray[SECOND]=toInt(input);break;case"S":case"SS":case"SSS":datePartArray[MILLISECOND]=toInt(1e3*("0."+input));break;case"X":config._d=new Date(1e3*parseFloat(input));break;case"Z":case"ZZ":config._useUTC=!0,config._tzm=timezoneMinutesFromString(input)}}function dateFromConfig(config){var i,date,input=[],currentDate,yearToUse;if(config._d)return;if(currentDate=currentDateArray(config),config._dayOfYear){if(yearToUse=null==config._a[YEAR]?currentDate[YEAR]:config._a[YEAR],config._dayOfYear>(isLeapYear(yearToUse)?364:365))config._pf._overflowDayOfYear=!0;date=makeUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()}for(i=0;3>i&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;7>i;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];input[HOUR]+=toInt((config._tzm||0)/60),input[MINUTE]+=toInt((config._tzm||0)%60),config._d=(config._useUTC?makeUTCDate:makeDate).apply(null,input)}function dateFromObject(config){var normalizedInput;if(config._d)return;normalizedInput=normalizeObjectUnits(config._i),config._a=[normalizedInput.year,normalizedInput.month,normalizedInput.day,normalizedInput.hour,normalizedInput.minute,normalizedInput.second,normalizedInput.millisecond],dateFromConfig(config)}function currentDateArray(config){var now=new Date;if(config._useUTC)return[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()];else return[now.getFullYear(),now.getMonth(),now.getDate()]}function makeDateFromStringAndFormat(config){config._a=[],config._pf.empty=!0;var lang=getLangDefinition(config._l),string=""+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,lang).match(formattingTokens)||[],i=0;i<tokens.length;i++){if(token=tokens[i],parsedInput=(getParseRegexForToken(token,config).exec(string)||[])[0]){if(skipped=string.substr(0,string.indexOf(parsedInput)),skipped.length>0)config._pf.unusedInput.push(skipped);string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length}if(formatTokenFunctions[token]){if(parsedInput)config._pf.empty=!1;else config._pf.unusedTokens.push(token);addTimeToArrayFromToken(token,parsedInput,config)}else if(config._strict&&!parsedInput)config._pf.unusedTokens.push(token)}if(config._pf.charsLeftOver=stringLength-totalParsedInputLength,string.length>0)config._pf.unusedInput.push(string);if(config._isPm&&config._a[HOUR]<12)config._a[HOUR]+=12;if(config._isPm===!1&&12===config._a[HOUR])config._a[HOUR]=0;dateFromConfig(config),checkOverflow(config)}function unescapeFormat(s){return s.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4})}function regexpEscape(s){return s.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}function makeDateFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat=1e3,i,currentScore;for(i=0;i<config._f.length;i++){if(currentScore=0,tempConfig=extend({},config),initializeParsingFlags(tempConfig),tempConfig._f=config._f[i],makeDateFromStringAndFormat(tempConfig),!isValid(tempConfig))continue;if(currentScore+=tempConfig._pf.charsLeftOver,currentScore+=10*tempConfig._pf.unusedTokens.length,tempConfig._pf.score=currentScore,scoreToBeat>currentScore)scoreToBeat=currentScore,bestMoment=tempConfig}extend(config,bestMoment||tempConfig)}function makeDateFromString(config){var i,string=config._i,match=isoRegex.exec(string);if(match){for(config._f="YYYY-MM-DD"+(match[2]||" "),i=0;4>i;i++)if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break}if(parseTokenTimezone.exec(string))config._f+=" Z";makeDateFromStringAndFormat(config)}else config._d=new Date(string)}function makeDateFromInput(config){var input=config._i,matched=aspNetJsonRegex.exec(input);if(input===undefined)config._d=new Date;else if(matched)config._d=new Date(+matched[1]);else if("string"==typeof input)makeDateFromString(config);else if(isArray(input))config._a=input.slice(0),dateFromConfig(config);else if(isDate(input))config._d=new Date(+input);else if("object"==typeof input)dateFromObject(config);else config._d=new Date(input)}function makeDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(1970>y)date.setFullYear(y);return date}function makeUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(1970>y)date.setUTCFullYear(y);return date}function substituteTimeAgo(string,number,withoutSuffix,isFuture,lang){return lang.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime(milliseconds,withoutSuffix,lang){var seconds=round(Math.abs(milliseconds)/1e3),minutes=round(seconds/60),hours=round(minutes/60),days=round(hours/24),years=round(days/365),args=45>seconds&&["s",seconds]||1===minutes&&["m"]||45>minutes&&["mm",minutes]||1===hours&&["h"]||22>hours&&["hh",hours]||1===days&&["d"]||25>=days&&["dd",days]||45>=days&&["M"]||345>days&&["MM",round(days/30)]||1===years&&["y"]||["yy",years];return args[2]=withoutSuffix,args[3]=milliseconds>0,args[4]=lang,substituteTimeAgo.apply({},args)}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day(),adjustedMoment;if(daysToDayOfWeek>end)daysToDayOfWeek-=7;if(end-7>daysToDayOfWeek)daysToDayOfWeek+=7;return adjustedMoment=moment(mom).add("d",daysToDayOfWeek),{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function makeMoment(config){var input=config._i,format=config._f;if("undefined"==typeof config._pf)initializeParsingFlags(config);if(null===input)return moment.invalid({nullInput:!0});if("string"==typeof input)config._i=input=getLangDefinition().preparse(input);if(moment.isMoment(input))config=extend({},input),config._d=new Date(+input._d);else if(format)if(isArray(format))makeDateFromStringAndArray(config);else makeDateFromStringAndFormat(config);else makeDateFromInput(config);return new Moment(config)}function makeGetterAndSetter(name,key){moment.fn[name]=moment.fn[name+"s"]=function(input){var utc=this._isUTC?"UTC":"";if(null!=input)return this._d["set"+utc+key](input),moment.updateOffset(this),this;else return this._d["get"+utc+key]()}}function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}function makeDurationAsGetter(name,factor){moment.duration.fn["as"+name]=function(){return+this/factor}}function makeGlobal(){if("undefined"==typeof ender)this.moment=moment}for(var moment,VERSION="2.2.1",round=Math.round,i,YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,languages={},hasModule="undefined"!=typeof module&&module.exports,aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,aspNetTimeSpanJsonRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,isoDurationRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{1,4}/,parseTokenSixDigits=/[+\-]?\d{1,6}/,parseTokenWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/i,parseTokenT=/T/i,parseTokenTimestampMs=/[\+\-]?\d+(\.\d{1,3})?/,isoRegex=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?$/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoTimes=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,proxyGettersAndSetters="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),unitMillisecondFactors={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},unitAliases={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",W:"isoweek",M:"month",y:"year"},formatFunctions={},ordinalizeTokens="DDD w W M D d".split(" "),paddedTokens="M D H h m s w W".split(" "),formatTokenFunctions={M:function(){return this.month()+1},MMM:function(format){return this.lang().monthsShort(this,format)},MMMM:function(format){return this.lang().months(this,format)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(format){return this.lang().weekdaysMin(this,format)},ddd:function(format){return this.lang().weekdaysShort(this,format)},dddd:function(format){return this.lang().weekdays(this,format)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},gg:function(){return leftZeroFill(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return leftZeroFill(this.weekYear(),5)},GG:function(){return leftZeroFill(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return leftZeroFill(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return toInt(this.milliseconds()/100)},SS:function(){return leftZeroFill(toInt(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";if(0>a)a=-a,b="-";return b+leftZeroFill(toInt(a/60),2)+":"+leftZeroFill(toInt(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";if(0>a)a=-a,b="-";return b+leftZeroFill(toInt(10*a/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},lists=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ordinalizeTokens.length;)i=ordinalizeTokens.pop(),formatTokenFunctions[i+"o"]=ordinalizeToken(formatTokenFunctions[i],i);for(;paddedTokens.length;)i=paddedTokens.pop(),formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2);for(formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3),extend(Language.prototype,{set:function(config){var prop,i;for(i in config)if(prop=config[i],"function"==typeof prop)this[i]=prop;else this["_"+i]=prop},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(m){return this._months[m.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(m){return this._monthsShort[m.month()]},monthsParse:function(monthName){var i,mom,regex;if(!this._monthsParse)this._monthsParse=[];for(i=0;12>i;i++){if(!this._monthsParse[i])mom=moment.utc([2e3,i]),regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i");if(this._monthsParse[i].test(monthName))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(m){return this._weekdays[m.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(m){return this._weekdaysShort[m.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(m){return this._weekdaysMin[m.day()]},weekdaysParse:function(weekdayName){var i,mom,regex;if(!this._weekdaysParse)this._weekdaysParse=[];for(i=0;7>i;i++){if(!this._weekdaysParse[i])mom=moment([2e3,1]).day(i),regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i");if(this._weekdaysParse[i].test(weekdayName))return i}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(key){var output=this._longDateFormat[key];if(!output&&this._longDateFormat[key.toUpperCase()])output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key]=output;return output},isPM:function(input){return"p"===(input+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(hours,minutes,isLower){if(hours>11)return isLower?"pm":"PM";else return isLower?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(key,mom){var output=this._calendar[key];return"function"==typeof output?output.apply(mom):output},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return"function"==typeof output?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},pastFuture:function(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return"function"==typeof format?format(output):format.replace(/%s/i,output)},ordinal:function(number){return this._ordinal.replace("%d",number)},_ordinal:"%d",preparse:function(string){return string},postformat:function(string){return string},week:function(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),moment=function(input,format,lang,strict){if("boolean"==typeof lang)strict=lang,lang=undefined;return makeMoment({_i:input,_f:format,_l:lang,_strict:strict,_isUTC:!1})},moment.utc=function(input,format,lang,strict){var m;if("boolean"==typeof lang)strict=lang,lang=undefined;return m=makeMoment({_useUTC:!0,_isUTC:!0,_l:lang,_i:input,_f:format,_strict:strict}).utc()},moment.unix=function(input){return moment(1e3*input)},moment.duration=function(input,key){var isDuration=moment.isDuration(input),isNumber="number"==typeof input,duration=isDuration?input._input:isNumber?{}:input,match=null,sign,ret,parseIso,timeEmpty,dateTimeEmpty;if(isNumber)if(key)duration[key]=input;else duration.milliseconds=input;else if(match=aspNetTimeSpanJsonRegex.exec(input))sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign};else if(match=isoDurationRegex.exec(input))sign="-"===match[1]?-1:1,parseIso=function(inp){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign},duration={y:parseIso(match[2]),M:parseIso(match[3]),d:parseIso(match[4]),h:parseIso(match[5]),m:parseIso(match[6]),s:parseIso(match[7]),w:parseIso(match[8])};if(ret=new Duration(duration),isDuration&&input.hasOwnProperty("_lang"))ret._lang=input._lang;return ret},moment.version=VERSION,moment.defaultFormat=isoFormat,moment.updateOffset=function(){},moment.lang=function(key,values){var r;if(!key)return moment.fn._lang._abbr;if(values)loadLang(normalizeLanguage(key),values);else if(null===values)unloadLang(key),key="en";else if(!languages[key])getLangDefinition(key);return r=moment.duration.fn._lang=moment.fn._lang=getLangDefinition(key),r._abbr},moment.langData=function(key){if(key&&key._lang&&key._lang._abbr)key=key._lang._abbr;return getLangDefinition(key)},moment.isMoment=function(obj){return obj instanceof Moment},moment.isDuration=function(obj){return obj instanceof Duration},i=lists.length-1;i>=0;--i)makeList(lists[i]);for(moment.normalizeUnits=function(units){return normalizeUnits(units)},moment.invalid=function(flags){var m=moment.utc(0/0);if(null!=flags)extend(m._pf,flags);else m._pf.userInvalidated=!0;return m},moment.parseZone=function(input){return moment(input).parseZone()},extend(moment.fn=Moment.prototype,{clone:function(){return moment(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return formatMoment(moment(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var m=this;return[m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds()]},isValid:function(){return isValid(this)},isDSTShifted:function(){if(this._a)return this.isValid()&&compareArrays(this._a,(this._isUTC?moment.utc(this._a):moment(this._a)).toArray())>0;return!1},parsingFlags:function(){return extend({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(inputString){var output=formatMoment(this,inputString||moment.defaultFormat);return this.lang().postformat(output)},add:function(input,val){var dur;if("string"==typeof input)dur=moment.duration(+val,input);else dur=moment.duration(input,val);return addOrSubtractDurationFromMoment(this,dur,1),this},subtract:function(input,val){var dur;if("string"==typeof input)dur=moment.duration(+val,input);else dur=moment.duration(input,val);return addOrSubtractDurationFromMoment(this,dur,-1),this},diff:function(input,units,asFloat){var that=this._isUTC?moment(input).zone(this._offset||0):moment(input).local(),zoneDiff=6e4*(this.zone()-that.zone()),diff,output;if(units=normalizeUnits(units),"year"===units||"month"===units){if(diff=432e5*(this.daysInMonth()+that.daysInMonth()),output=12*(this.year()-that.year())+(this.month()-that.month()),output+=(this-moment(this).startOf("month")-(that-moment(that).startOf("month")))/diff,output-=6e4*(this.zone()-moment(this).startOf("month").zone()-(that.zone()-moment(that).startOf("month").zone()))/diff,"year"===units)output/=12}else diff=this-that,output="second"===units?diff/1e3:"minute"===units?diff/6e4:"hour"===units?diff/36e5:"day"===units?(diff-zoneDiff)/864e5:"week"===units?(diff-zoneDiff)/6048e5:diff;return asFloat?output:absRound(output)},from:function(time,withoutSuffix){return moment.duration(this.diff(time)).lang(this.lang()._abbr).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(){var diff=this.diff(moment().zone(this.zone()).startOf("day"),"days",!0),format=-6>diff?"sameElse":-1>diff?"lastWeek":0>diff?"lastDay":1>diff?"sameDay":2>diff?"nextDay":7>diff?"nextWeek":"sameElse";return this.format(this.lang().calendar(format,this))},isLeapYear:function(){return isLeapYear(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=input){if("string"==typeof input)if(input=this.lang().weekdaysParse(input),"number"!=typeof input)return this;return this.add({d:input-day})}else return day},month:function(input){var utc=this._isUTC?"UTC":"",dayOfMonth;if(null!=input){if("string"==typeof input)if(input=this.lang().monthsParse(input),"number"!=typeof input)return this;return dayOfMonth=this.date(),this.date(1),this._d["set"+utc+"Month"](input),this.date(Math.min(dayOfMonth,this.daysInMonth())),moment.updateOffset(this),this}else return this._d["get"+utc+"Month"]()},startOf:function(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoweek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if("week"===units)this.weekday(0);else if("isoweek"===units)this.isoWeekday(1);return this},endOf:function(units){return units=normalizeUnits(units),this.startOf(units).add("isoweek"===units?"week":units,1).subtract("ms",1)},isAfter:function(input,units){return units="undefined"!=typeof units?units:"millisecond",+this.clone().startOf(units)>+moment(input).startOf(units)},isBefore:function(input,units){return units="undefined"!=typeof units?units:"millisecond",+this.clone().startOf(units)<+moment(input).startOf(units)},isSame:function(input,units){return units="undefined"!=typeof units?units:"millisecond",+this.clone().startOf(units)===+moment(input).startOf(units)},min:function(other){return other=moment.apply(null,arguments),this>other?this:other},max:function(other){return other=moment.apply(null,arguments),other>this?this:other},zone:function(input){var offset=this._offset||0;if(null!=input){if("string"==typeof input)input=timezoneMinutesFromString(input);if(Math.abs(input)<16)input=60*input;if(this._offset=input,this._isUTC=!0,offset!==input)addOrSubtractDurationFromMoment(this,moment.duration(offset-input,"m"),1,!0)}else return this._isUTC?offset:this._d.getTimezoneOffset();return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){if("string"==typeof this._i)this.zone(this._i);return this},hasAlignedHourOffset:function(input){if(!input)input=0;else input=moment(input).zone();return(this.zone()-input)%60===0},daysInMonth:function(){return daysInMonth(this.year(),this.month())},dayOfYear:function(input){var dayOfYear=round((moment(this).startOf("day")-moment(this).startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add("d",input-dayOfYear)},weekYear:function(input){var year=weekOfYear(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==input?year:this.add("y",input-year)},isoWeekYear:function(input){var year=weekOfYear(this,1,4).year;return null==input?year:this.add("y",input-year)},week:function(input){var week=this.lang().week(this);return null==input?week:this.add("d",7*(input-week))},isoWeek:function(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add("d",7*(input-week))},weekday:function(input){var weekday=(this.day()+7-this.lang()._week.dow)%7;return null==input?weekday:this.add("d",input-weekday)},isoWeekday:function(input){return null==input?this.day()||7:this.day(this.day()%7?input:input-7)},get:function(units){return units=normalizeUnits(units),this[units.toLowerCase()]()},set:function(units,value){return units=normalizeUnits(units),this[units.toLowerCase()](value),this},lang:function(key){if(key===undefined)return this._lang;else return this._lang=getLangDefinition(key),this}}),i=0;i<proxyGettersAndSetters.length;i++)makeGetterAndSetter(proxyGettersAndSetters[i].toLowerCase().replace(/s$/,""),proxyGettersAndSetters[i]);makeGetterAndSetter("year","FullYear"),moment.fn.days=moment.fn.day,moment.fn.months=moment.fn.month,moment.fn.weeks=moment.fn.week,moment.fn.isoWeeks=moment.fn.isoWeek,moment.fn.toJSON=moment.fn.toISOString,extend(moment.duration.fn=Duration.prototype,{_bubble:function(){var milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data,seconds,minutes,hours,years;data.milliseconds=milliseconds%1e3,seconds=absRound(milliseconds/1e3),data.seconds=seconds%60,minutes=absRound(seconds/60),data.minutes=minutes%60,hours=absRound(minutes/60),data.hours=hours%24,days+=absRound(hours/24),data.days=days%30,months+=absRound(days/30),data.months=months%12,years=absRound(months/12),data.years=years},weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)},humanize:function(withSuffix){var difference=+this,output=relativeTime(difference,!withSuffix,this.lang());if(withSuffix)output=this.lang().pastFuture(difference,output);return this.lang().postformat(output)},add:function(input,val){var dur=moment.duration(input,val);return this._milliseconds+=dur._milliseconds,this._days+=dur._days,this._months+=dur._months,this._bubble(),this},subtract:function(input,val){var dur=moment.duration(input,val);return this._milliseconds-=dur._milliseconds,this._days-=dur._days,this._months-=dur._months,this._bubble(),this},get:function(units){return units=normalizeUnits(units),this[units.toLowerCase()+"s"]()},as:function(units){return units=normalizeUnits(units),this["as"+units.charAt(0).toUpperCase()+units.slice(1)+"s"]()},lang:moment.fn.lang,toIsoString:function(){var years=Math.abs(this.years()),months=Math.abs(this.months()),days=Math.abs(this.days()),hours=Math.abs(this.hours()),minutes=Math.abs(this.minutes()),seconds=Math.abs(this.seconds()+this.milliseconds()/1e3);if(!this.asSeconds())return"P0D";return(this.asSeconds()<0?"-":"")+"P"+(years?years+"Y":"")+(months?months+"M":"")+(days?days+"D":"")+(hours||minutes||seconds?"T":"")+(hours?hours+"H":"")+(minutes?minutes+"M":"")+(seconds?seconds+"S":"")}});for(i in unitMillisecondFactors)if(unitMillisecondFactors.hasOwnProperty(i))makeDurationAsGetter(i,unitMillisecondFactors[i]),makeDurationGetter(i.toLowerCase());if(makeDurationAsGetter("Weeks",6048e5),moment.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},moment.lang("en",{ordinal:function(number){var b=number%10,output=1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return number+output}}),hasModule)module.exports=moment,makeGlobal();else if("function"==typeof define&&define.amd)define("js/vendor/moment.v2-2",[],function(){return moment});else makeGlobal()}.call(this),define("pages/open-course/common/models/itemMetadata",["js/vendor/backbone-associations.v0-6-1","pages/open-course/common/models/progress","pages/open-course/common/constants","js/lib/path","js/vendor/moment.v2-2"],function(Backbone,Progress,constants,path,moment){var ItemMetadata=Backbone.AssociatedModel.extend({comparator:"sequence",getLink:function(){return path.join(this.get("course").getLink(),"item",this.get("id"),this.get("slug"))},getTimeCommitment:function(){return moment.duration(this.get("timeCommitment"))},getTypeName:function(){return this.getContent().typeName},getContent:function(){return this.get("content")},getDefinition:function(key){return this.getContent().definition[key]},getName:function(){if("assessOpenSinglePage"===this.getTypeName())return"Quiz: "+this.get("name");else return this.get("name")},getId:function(){return this.get("id")}});return ItemMetadata}),define("pages/open-course/common/models/lesson",["js/vendor/backbone-associations.v0-6-1","js/vendor/underscore.v1-6","pages/open-course/common/models/itemMetadata","js/lib/path","js/vendor/moment.v2-2"],function(Backbone,_,ItemMetadata,path,moment){var Lesson=Backbone.AssociatedModel.extend({initialize:function(options){this.getItemMetadatas().invoke("set",{lesson:this}),_(["course","courseMaterials"]).each(function(field){this.on("change:"+field,this.passReference(field),this)},this)},passReference:function(field){return function(){this.getItemMetadatas().invoke("set",field,this.get(field))}},relations:[{type:Backbone.Associations.Many,key:"elements",relatedModel:ItemMetadata}],getLink:function(id){return path.join(this.get("course").getLink(),"lesson",this.get("id"))},getItemMetadata:function(id){return this.getItemMetadatas().get(id)},getItemMetadatas:function(){return this.get("elements")},getTimeCommitment:function(){return moment.duration(this.get("timeCommitment"))}});return Lesson}),define("pages/open-course/common/models/module",["js/vendor/backbone-associations.v0-6-1","js/vendor/underscore.v1-6","pages/open-course/common/models/lesson","js/lib/path","js/vendor/moment.v2-2"],function(Backbone,_,Lesson,path,moment){var Module=Backbone.AssociatedModel.extend({relations:[{type:Backbone.Associations.Many,key:"elements",relatedModel:Lesson}],initialize:function(options){this.getLessons().invoke("set","module",this),_(["course","courseMaterials"]).each(function(field){this.on("change:"+field,this.passReference(field),this)},this)},passReference:function(field){return function(){this.getLessons().invoke("set",field,this.get(field))}},getLink:function(){return path.join("module",this.get("id"))},getLessons:function(){return this.get("elements")},getLesson:function(id){return this.getLessons().get(id)},getTotalItemCount:function(){return this.getLessons().reduce(function(sum,lesson){return sum+lesson.getItemMetadatas().length},0)},getItemMetadata:function(id){return this.getItemMetadatas().get(id)},getItemMetadatas:function(){if(!this.allItemMetadatas){var items=this.getLessons().chain().invoke("getItemMetadatas").invoke("toArray").flatten().value();this.allItemMetadatas=new Backbone.Collection(items)}return this.allItemMetadatas},getTimeCommitment:function(){return moment.duration(this.get("timeCommitment"))}});return Module}),define("pages/open-course/common/models/courseMaterials",["js/vendor/underscore.v1-6","js/vendor/backbone-associations.v0-6-1","js/vendor/q.v1-0-1","pages/open-course/common/models/module","pages/open-course/common/models/lesson","pages/open-course/common/models/itemMetadata"],function(_,Backbone,Q,Module,Lesson,ItemMetadata){var CourseMaterials=Backbone.AssociatedModel.extend({initialize:function(attributes,options){if(!options||!options.course)throw new Error("Please pass in a reference to course to CourseMaterials during initialization");this.getModules().each(function(module,index){module.set({index:index+1,course:options.course,courseMaterials:this})},this)},relations:[{type:Backbone.Associations.Many,key:"elements",relatedModel:Module}],getModules:function(){return this.get("elements")},getLesson:function(id){var candidates=this.getModules().invoke("getLesson",id);return _(candidates).compact()[0]},getModuleCount:function(){return this.get("elements").length},getItemMetadata:function(id){return this.getItemMetadatas().findWhere({id:id})},getItemMetadatas:function(){if(!this.allItemMetadatas){var items=this.getModules().chain().invoke("getItemMetadatas").invoke("toArray").flatten().value();
this.allItemMetadatas=new Backbone.Collection(items,{model:ItemMetadata})}return this.allItemMetadatas},getItemMetadataAt:function(n){return this.getItemMetadatas().at(n)},getNeighboringItemMetadata:function(itemMetadata){var items=this.getItemMetadatas(),index=items.indexOf(itemMetadata),previous,next;if(index>0)previous=this.getItemMetadataAt(index-1);if(index>=0&&index<items.length-1)next=this.getItemMetadataAt(index+1);return{previous:previous,next:next}},getLessons:function(){if(!this.allLessons){var lessons=this.get("elements").chain().invoke("getLessons").invoke("toArray").flatten().value();this.allLessons=new Backbone.Collection(lessons,{model:Lesson})}return this.allLessons},getLessonAt:function(n){return this.getLessons().at(n)},getNeighboringLessons:function(lesson){var lessons=this.getLessons(),index=lessons.indexOf(lesson),previous,next;if(index>0)previous=this.getLessonAt(index-1);if(index<lessons.length-1)next=this.getLessonAt(index+1);return{previous:previous,next:next}}});return CourseMaterials}),define("pages/open-course/common/promises/courseMaterials",["js/vendor/q.v1-0-1","pages/open-course/common/models/courseMaterials","pages/open-course/data/courseData.memoized","pages/open-course/common/promises/course.memoized"],function(Q,CourseMaterials,courseDataPromise,coursePromise){return function(courseSlug){var promise=Q.all([courseDataPromise(courseSlug),coursePromise(courseSlug)]).spread(function(courseData,course){return new CourseMaterials(courseData.courseMaterial,{course:course})});return promise.done(),promise}}),define("pages/open-course/common/promises/courseMaterials.memoized",["pages/open-course/common/promises/courseMaterials","js/lib/memoize.v0-0-1"],function(courseMaterialsPromise,memoize){return memoize(courseMaterialsPromise)}),define("pages/open-course/data/videoData",["js/vendor/q.v1-0-1","pages/open-course/common/api","bundles/flex-template/models/userIdentity"],function(Q,api,userIdentity){return function(videoId){if(!userIdentity.get("authenticated"))return Q(api.get("videoPreview/"+videoId));else return Q(api.get("video/"+videoId))}}),define("pages/open-course/data/videoData.memoized",["pages/open-course/data/videoData","js/lib/memoize.v0-0-1"],function(videoData,memoize){return memoize(videoData)}),define("pages/open-course/video/models/video",["js/vendor/underscore.v1-6","js/vendor/backbone-associations.v0-6-1","pages/open-course/common/constants","js/lib/language.v0-0-1","js/vendor/uri.v0-0-1"],function(_,Backbone,constants,language,Uri){var Video=Backbone.AssociatedModel.extend({initialize:function(options){if(options&&options.metadata)this.set("metadata",options.metadata);else throw new Error("metadata is required to instantiate this model")},defaults:{metadata:null},parse:function(data){var options={};return options.sources=_(data.sources).reduce(function(sources,source){return sources[source.resolution]=source.formatSources,sources},{}),options.subtitles=_(data.subtitles).reduce(function(subtitles,url,languageCode){return subtitles[languageCode]={label:language.languageCodeToName(languageCode),url:new Uri(url).addQueryParam("__cf_origin",location.origin).toString()},subtitles},{}),options.posters=_(data.posters).reduce(function(posters,poster){return posters[poster.resolution]=poster.url,posters},{}),options},getId:function(){return this.get("metadata").id},getName:function(){return this.get("metadata").get("name")},getVideoId:function(){return this.get("metadata").getDefinition("videoId")},getSources:function(){return this.getSourcesForResolution(constants.defaultVideoPlayerResolution)},getSourcesForResolution:function(resolution){return this.get("sources")[resolution]},getPosterForResolution:function(resolution){return this.get("posters")[resolution]},getCaptionForLanguage:function(languageCode){return this.get("subtitles")[languageCode]}});return Video}),define("pages/open-course/video/promises/video",["pages/open-course/data/videoData.memoized","pages/open-course/video/models/video"],function(videoDataPromise,Video){return function(options){var video=new Video(options);return videoDataPromise(video.getVideoId()).then(function(data){return video.set(video.parse(data),{silent:!0})})}}),define("pages/open-course/common/contentRequester",["js/vendor/q.v1-0-1","pages/open-course/common/promises/courseProgress.memoized","bundles/flex-template/models/userIdentity","js/lib/path","pages/open-course/common/api"],function(Q,courseProgressPromise,userIdentity,path,api){var buildBaseUrl=function(){return path.join("user",userIdentity.get("id"),"course",this.itemMetadata.get("course").get("slug"),"item",this.itemMetadata.getId(),this.itemMetadata.getTypeName())},ContentRequester=function(itemMetadata){this.itemMetadata=itemMetadata};return ContentRequester.prototype.request=function(requestUrl,requestBody){var itemMetadata=this.itemMetadata,baseUrl=buildBaseUrl.call(this),url=path.join(baseUrl,requestUrl),options={data:{contentRequestBody:requestBody}};return Q.all([courseProgressPromise(itemMetadata.get("course").get("slug")),api.post(url,options)]).spread(function(courseProgress,apiResponse){var itemId=itemMetadata.getId(),itemProgress=courseProgress.getItemProgress(itemId);if(itemProgress&&apiResponse&&apiResponse.itemProgress)itemProgress.set(apiResponse.itemProgress);return apiResponse.contentResponseBody})},ContentRequester}),define("pages/open-course/data/assessmentData",["js/vendor/q.v1-0-1","js/lib/path","pages/open-course/common/contentRequester","bundles/flex-template/models/userIdentity"],function(Q,path,ContentRequester,userIdentity){return function(itemMetadata){var contentRequester=new ContentRequester(itemMetadata);if(!userIdentity.get("authenticated"))return Q(function(){return{}});else return contentRequester.request("session",[]).then(function(data){var sessionId=data.session.id;return contentRequester.request(path.join("session",sessionId,"action","getState"),{argument:[]})}).then(function(data){return data.return})}}),define("pages/open-course/assessment/models/evaluation",["js/vendor/backbone-associations.v0-6-1","pages/open-course/common/constants"],function(Backbone,constants){var Evaluation=Backbone.AssociatedModel.extend({defaults:{maxScore:1,score:0,isPassed:!1,passingPercent:constants.assessments.defaultPassingPercent},reset:function(){this.set(this.defaults)},getPercentScore:function(){return this.get("score")/this.get("maxScore")},getHumanPercentScore:function(){return Math.floor(100*this.getPercentScore())},getPassingQuestionCount:function(){return Math.ceil(this.get("passingPercent")*this.get("maxScore"))}});return Evaluation}),define("pages/open-course/assessment/models/assessment",["js/vendor/underscore.v1-6","js/vendor/backbone-associations.v0-6-1","js/lib/path","pages/open-course/common/constants","pages/open-course/data/assessmentData","pages/open-course/assessment/models/evaluation"],function(_,Backbone,path,constants,assessmentData,Evaluation){var Assessment=Backbone.AssociatedModel.extend({defaults:{metadata:null,passingPercent:constants.assessments.defaultPassingPercent},relations:[{type:Backbone.Associations.One,key:"evaluation",relatedModel:Evaluation},{type:Backbone.Associations.One,key:"lastEvaluation",relatedModel:Evaluation},{type:Backbone.Associations.One,key:"bestEvaluation",relatedModel:Evaluation}],initialize:function(options){if(!options||!options.metadata)throw new Error("metadata is required to instantiate this model");this.set("metadata",options.metadata)},hasUnsubmittedAttempt:function(){return null!==this.get("unsubmittedAttemptIndex")},hasSubmittedAttempt:function(){return null!==this.get("lastSubmittedAttemptIndex")},getQuestionCount:function(){return this.get("metadata").getDefinition("questionCount")},isPassed:function(){var evaluation=this.get("bestEvaluation");return evaluation&&evaluation.get("isPassed")},getPassingQuestionCount:function(){return Math.ceil(this.get("passingPercent")*this.getQuestionCount())}}),loadAssessmentContent=function(options){return assessmentData(options.metadata).then(function(data){return new Assessment(_(data).extend(options))})};return loadAssessmentContent}),define("pages/open-course/item/models/itemConfig",["js/vendor/underscore.v1-6","js/vendor/q.v1-0-1","pages/open-course/video/promises/video","pages/open-course/assessment/models/assessment"],function(_,Q,videoPromise,assessmentPromise){var CONFIGS={lecture:{contentPromise:videoPromise},assessOpenSinglePage:{contentPromise:assessmentPromise}};return function(itemMetadata,additionalConfigs){var typeName=itemMetadata.getTypeName();additionalConfigs=additionalConfigs||{};var config=_({type:typeName}).extend(CONFIGS[typeName],additionalConfigs[typeName]);return config.contentPromise({metadata:itemMetadata}).then(function(model){return config.model=model,config})}}),define("pages/open-course/external/dashboard/coursesWithProgress",["js/vendor/underscore.v1-6","js/vendor/q.v1-0-1","pages/open-course/common/promises/course.memoized","pages/open-course/common/promises/courseProgress.memoized","pages/open-course/common/promises/courseMaterials.memoized","pages/open-course/item/models/itemConfig"],function(_,Q,coursePromise,courseProgressPromise,courseMaterialsPromise,itemConfig){function loadCourseIfProgress(courseSlug,options){return courseProgressPromise(courseSlug).then(function(courseProgress){if(courseProgress.getOverallProgressPercent()>0)return courseProgress;else throw new NoProgressException(courseSlug)}).then(function(courseProgress){return Q.all([coursePromise(courseSlug),courseMaterialsPromise(courseSlug)]).spread(function(course,courseMaterials){var nextItemId=courseProgress.getNextUpItem(),nextItemMetadata=courseMaterials.getItemMetadata(nextItemId)||courseMaterials.getItemMetadataAt(0),result={course:course,courseMaterials:courseMaterials,courseProgress:courseProgress,nextItemMetadata:nextItemMetadata};if(options&&options.includeNextItem)return itemConfig(nextItemMetadata).then(function(nextItem){return _.extend(result,{nextItem:nextItem})});else return result})})}var NoProgressException=function(courseSlug){this.name="NoProgressException",this.message="No Progress found for "+courseSlug};return function(courseSlugs,options){var promises=_(courseSlugs).map(function(courseSlug){return loadCourseIfProgress(courseSlug,options)}),openCoursesPromise=Q.allSettled(promises).then(function(results){return _(results).chain().reject(function(result){var reject="rejected"==result.state;if(reject&&!(result.reason instanceof NoProgressException))console.error(result.reason);return reject}).pluck("value").value()});return openCoursesPromise}}),define("pages/home/account/courseList",["jquery","backbone","underscore","js/core/coursera","pages/home/template/body","pages/home/assessApi","pages/home/account/courseList.html","pages/home/account/courseMini.html","pages/home/front/frontTopicIcon.html","i18n!js/json/nls/universities","i18n!js/json/nls/topics","pages/home/front/frontSearchBanner","pages/home/account/seriesMini","js/collections/courses","js/collections/topics","js/collections/specializations","js/lib/moment","js/lib/q","js/lib/util","js/lib/cookie","js/lib/modals","js/json/featuredClasses","js/lib/tooltips","js/lib/coursera.ab","js/lib/language","js/lib/readme","js/lib/bootstrap-tabs","bundles/assess/assessmentTypes/quickQuestions/assessment","js/json/constants","pages/open-course/external/dashboard/openCourseList","pages/open-course/external/dashboard/coursesWithProgress"],function($,Backbone,_,Coursera,body,assessApi,template,courseTemplate,topicTemplate,universities_t,topics_t,FrontSearchBanner,SpecializationTemplate,Courses,Topics,Specializations,moment,Q,util,cookie,Modal,featuredClasses,tooltips,AB,language,Readme,_bootstrapTabs,_quickQuestionsAssessment,constants,OpenCourseList,openCoursesPromise){var additionalStrings_t=universities_t.merge(topics_t),accountCoursesBody=body.extend({initPersonas:function(){var self=this;Coursera.api.get("university/list",{data:{"signature-track":!0}}).done(function(response){var randomUniversity=response[Math.floor(Math.random()*response.length)];util.getSTCertCorner(randomUniversity.short_name).done(function(certFilename){self.$(".coursera-persona-sigtrack-icon").attr("src",certFilename)})});var trackPersonas=function(eventname,value,options){if(options=options||{},!options.silent)Coursera.multitracker.push([eventname,value])},silent;_.each([0,1,2],function(i){var $personaOption=$(self.$(".coursera-persona-option:eq("+i+")")),$personaSubview=$(".coursera-persona-subview:eq("+i+")"),personaTitle=$($personaOption.find(".coursera-persona-option-title")).text().toLowerCase();$personaOption.bind("click",function(){var $this=$(this);$(".coursera-persona-subview").hide(),$personaSubview.show(),$(".coursera-persona-title").removeClass("active"),$personaOption.find(".coursera-persona-title").addClass("active"),$(".coursera-persona-option").removeClass("active"),$this.addClass("active"),trackPersonas("user.click.personas",personaTitle,{silent:silent})}),$($personaSubview.find(".coursera-persona-course-recommend > a")).bind("click",function(e){var href=util.getUrlPath($(e.currentTarget).attr("href"));trackPersonas("user.click.personas-course-link",href,{silent:silent})}),$($personaSubview.find(".coursera-persona-sigtrack-link")).bind("click",function(){trackPersonas("user.click.personas-sigtrack",personaTitle,{silent:silent}),window.location.href="signature"})});var randomInitialPersona=Math.floor(3*Math.random());silent=!0,$(self.$(".coursera-persona-option:eq("+randomInitialPersona+")")).click(),silent=!1},initialize:function(){function renderAll(){var pollLoadDefer=Q.defer(),recommendedLoadDefer=Q.defer(),promises=[pollLoadDefer.promise,recommendedLoadDefer.promise];Coursera.user.getTopics(!0).done(function(){self.renderRecommendedModule(recommendedLoadDefer),self.renderMyCourses(),self.renderSubscriptionsMaybe(),self.renderMyOpenCourses()}),openCoursesPromise(constants.openCourses,{includeNextItem:!0}).then(function(openCourses){self.openCourses=openCourses,self.renderMyOpenCourses()}),self.renderedSubscriptions=!1,$(window).on("scroll.subscriptionsload",_.bind(self.renderSubscriptionsMaybe,self)),self.renderSidebarModule(promises,pollLoadDefer)}var self=this;document.title="Your Courses | Coursera",self.bind("view:appended",function(){Readme("[data-readme]"),self.initPersonas(),renderAll()}),self.bind("view:closed",function(){window.clearInterval(self.updateTimer),Modal(self.$(".modal")).close(),self.closeTooltips()})},events:{"click [data-unenroll-course-id]":"unEnrollPrompt","click .coursera-profile-button-unenroll-now":"unEnroll","click .coursera-profile-button-unenroll-cancel":"unEnrollCancel","click .coursera-course-button":"onGoToClassClick","click .coursera-dashboard-course-listing-box-university a":"onUniLinkClick","click .coursera-dashboard-course-listing-box-name a":"onCourseLinkClick","click .coursera-dashboard-course-listing-box-links .internal-home":"onCourseInfoLinkClick","click .coursera-dashboard-subscriptions-section .coursera-course-card-image a":"onWatchlistCourseImageClick","click .coursera-dashboard-subscriptions-section .coursera-course-card-details a":"onWatchlistCourseLinkClick","click .coursera-front-sidebar-module-recommended-course a":"onRecommendedCourseClick","click .coursera-front-sidebar-module-mobile-app-promotion-icon a":"onApplePromotionIconClick"},closeTooltips:function(){$(".tooltip").each(function(){var tooltip=tooltips(this);tooltip.close()})},_trackEvent:function(name,value){Coursera.multitracker.push(["user.click."+name,value])},_trackCourseLink:function(e,name){var $box=$(e.currentTarget).parents(".coursera-dashboard-course-listing-box"),courseId=$box.data("course-id"),index=$box.index();this._trackEvent(name,{courseId:courseId,index:index})},onGoToClassClick:function(e){this._trackCourseLink(e,"courses-gotoclass-button")},onUniLinkClick:function(e){this._trackCourseLink(e,"courses-uni-link")},onCourseLinkClick:function(e){this._trackCourseLink(e,"courses-course-link")},onCourseInfoLinkClick:function(e){this._trackCourseLink(e,"courses-course-info-link")},_trackWatchlistClick:function(e,name){var $target=$(e.currentTarget),courseLink=util.getUrlPath($target.attr("href")),index=$target.parents(".coursera-course-card").index();this._trackEvent(name,{link:courseLink,index:index})},onWatchlistCourseImageClick:function(e){this._trackWatchlistClick(e,"watchlist-course-image")},onWatchlistCourseLinkClick:function(e){this._trackWatchlistClick(e,"watchlist-course-link")},onRecommendedCourseClick:function(e){var $target=$(e.target).closest(".coursera-front-sidebar-module-recommended-course"),topicId=$target.data("topic-id"),index=$target.index();AB.user.getExperiment("upcoming_window_leading2").convert("recommeded_topic_click"),AB.user.getExperiment("upcoming_window_trailing2").convert("recommeded_topic_click");var topicIds=_.map(Coursera.user.get("topics").models,function(enrolledTopic){return enrolledTopic.get("id")});Coursera.multitracker.push(["course-list.recommended-topics.click",index+"_"+topicIds.join()+"_"+topicId])},onApplePromotionIconClick:function(e){this._trackEvent("apple-mobile-app-promotion-badge",{})},render:function(){var self=this;if(!self.$el.find(".coursera-profile-mini-section").size())self.$el.html(template({config:Coursera.config,featuredClasses:featuredClasses}));return self},renderSubscriptionsMaybe:function(){var self=this;if(util.inView(self.$(".coursera-dashboard-subscriptions-section"),100)){if(!self.renderedSubscriptions)self.fetchSubscriptions();$(window).off("scroll.subscriptionsload"),self.renderedSubscriptions=!0}},fetchSubscriptions:function(){var self=this;Q.allSettled([Topics.singletonReadAll(),Coursera.user.getSubscriptions()]).spread(function(topicsP,subsP){self.renderSubscriptions(topicsP.value)})},renderSidebarModule:function(promises,pollLoadDefer){var self=this,allLoaded=Q.all(promises);allLoaded.then(function(states){self.$(".coursera-front-sidebar-module-loading-message").hide();var pollState=states[0],recommendedState=states[1];if("visible"==pollState)self.$(".coursera-front-sidebar-module-poll").show();if("visible"==recommendedState)self.$(".coursera-front-sidebar-module-recommended").show()}).done();var assessmentId="0ci5djHTEeO2oCIACpAJcg@1";if(null!==cookie.get("quickQuestionsAssessmentId"))assessmentId=cookie.get("quickQuestionsAssessmentId");var shortLanguageCode=language.shortenLanguageCode(language.getLanguageCode())||"en";if("en"==shortLanguageCode)self.region.append("bundles/assess/assessmentTypes/quickQuestions/assessment",{initialize:{assessmentId:assessmentId,api:assessApi,loadDefer:pollLoadDefer},to:self.$(".coursera-front-sidebar-module-poll")});else pollLoadDefer.resolve("hidden")},hideEnrollmentLoadingIcon:_.after(2,function(){this.$(".coursera-dashboard-enrollments-loading").hide()}),showPresentEnrollmentMessage:_.after(2,function(){this.$("#coursera-feed-tabs-current .coursera-dashboard-no-enrollments-message").show()}),renderRecommendedModule:function(recommendedLoadDefer){var self=this;self.region.append("pages/home/account/recommendedSidebarModule",{initialize:{loadDefer:recommendedLoadDefer},to:self.$(".coursera-front-sidebar-module-recommended")})},renderSubscriptions:function(topics){var self=this;if(self.$el.find(".coursera-dashboard-subscriptions-loading").hide(),self.$(".coursera-front-section-watchlist-header").hide(),self.$(".coursera-dashboard-subscriptions-section").hide(),Coursera.user.get("subscriptions").length){var topicsShown=0;topics.each(function(topic){if(Coursera.user.isSubscribedToTopic(topic))self.$(".coursera-front-section-watchlist-header").show(),self.$(".coursera-dashboard-subscriptions-section").show(),topicsShown++,self.$el.find(".coursera-dashboard-subscriptions-section").append(topicTemplate({topic:topic,config:Coursera.config,_:_}))})}},renderMyCourses:function(){function updateTime(){self.$(".coursera-course-listing-starts time").each(function(){var startTime=$(this).attr("datetime"),duration=moment(parseInt(startTime,10)).diff(moment(new Date)),countdown=moment(duration).format("D [days,] h [hours,] m [minutes, and] s [seconds]");$(this).text(countdown)})}var self=this;self.hideEnrollmentLoadingIcon(),self.$(".coursera-feed-tabs-selector").show();var numCoursesShown=0,numPastCourses=0,numPresentCourses=0,numFutureCourses=0;if(self.$(".coursera-dashboard-course-listing-box").remove(),self.$(".coursera-specialization-container").remove(),_.each(Courses.byTime(Coursera.user.get("courses")),function(course){var courseRecord=course.get("record"),endDate=moment(course.getStartDateMoment());if(null!=endDate)endDate.add("weeks",course.getDurationWeeks()+6);var certIsNotReady=course.get("eligible_for_certificates")&&!course.certificateIsReady(),hasCert=null!=courseRecord.achievement_level&&courseRecord.achievement_level>0,courseIsRecent=null==endDate||null!=endDate&&endDate>moment(new Date);course.set("user_is_enrolled",!0);var feedAppendSection;switch(course.getDashboardStartStatus()){case"future":numFutureCourses++,feedAppendSection="#coursera-feed-tabs-future";break;case"past":numPastCourses++,feedAppendSection="#coursera-feed-tabs-past";break;case"present":numPresentCourses++,feedAppendSection="#coursera-feed-tabs-current"}var $courseMini=courseTemplate({_t:additionalStrings_t,course:course,config:Coursera.config,_:_,user:Coursera.user});if("#coursera-feed-tabs-past"===feedAppendSection)self.$el.find(feedAppendSection).prepend($courseMini);else self.$el.find(feedAppendSection).append($courseMini);numCoursesShown++}),0===numFutureCourses)self.$("#coursera-feed-tabs-future .coursera-dashboard-no-enrollments-message").show();if(0===numPastCourses)self.$("#coursera-feed-tabs-past .coursera-dashboard-no-enrollments-message").show();if(0===numPresentCourses)self.showPresentEnrollmentMessage();if(self.$el.find(".coursera-feed-tabs-selector a").click(function(e){e.preventDefault(),$(".coursera-feed-tabs-selector .coursera-bubble-wrapper").hide(),$(this.parentElement).find(".coursera-bubble-wrapper").show(),$(this).tab("show")}),2>=numPresentCourses){var frontBanner=new FrontSearchBanner({signedInUser:!0});frontBanner.render(),self.$(".coursera-search-banner").html(frontBanner.$el).show()}if(numPastCourses+numPresentCourses+numFutureCourses>0)self.$(".coursera-dashboard-help-link").show();self.updateTimer=window.setInterval(updateTime,1e3),updateTime(),this.renderSpecializations()},renderSpecializations:function(){var self=this;Specializations.singletonReadAll().done(function(specializations,rawData){var specHidden=!1,hideCookieName="specialization-hide",specializationsHidden=[];if(cookie.get(hideCookieName))specializationsHidden=cookie.get(hideCookieName).split(",");var collapseCookieName="specialization-collapse",specializationsCollapsed=[];if(cookie.get(collapseCookieName))specializationsCollapsed=JSON.parse(cookie.get(collapseCookieName));if(_.each(Coursera.user.get("specializations"),function(specInfo,specID){var specializationFound=_.find(specializations.models,function(specialization){return specialization.get("id")==specID});if(specializationFound){if(self.$(".coursera-front-specializations-container").show(),specializationsHidden.indexOf(specID)>=0)return void(specHidden=!0);var specTemplate=new SpecializationTemplate({model:specializationFound,courses:Coursera.user.get("courses"),collapse:specializationsCollapsed.indexOf(specializationFound.get("id"))>=0});Coursera.multitracker.push(["Specializations shown-on-dashboard",specializationFound.get("id")]),self.$(".coursera-specializations-list").append(specTemplate.render().$el),self.$(".coursera-front-specializations-container .coursera-dashboard-section-header").css("border-bottom","0px")}}),specHidden)self.$(".coursera-specializations-show-all").show();self.$(".coursera-specializations-show-all").on("click",function(){cookie.clear("specialization-hide"),window.location.reload()}),self.setupSigtrackProfileReminder()}),self.setupPromo()},renderMyOpenCourses:_.after(2,function(){var $container=this.$el.find('[data-js="open-course-dashboard-container"]');if(this.hideEnrollmentLoadingIcon(),this.openCourses&&this.openCourses.length)this.region.append(OpenCourseList,{initialize:{courses:this.openCourses},to:$container});else this.showPresentEnrollmentMessage()}),setupSigtrackProfileReminder:function(){var self=this;if(Coursera.user.isSignatureTrackStudent()&&!Coursera.user.completedAllSTProfile())self.$("#coursera-sigtrack-profile-incomplete").show()},setupPromo:function(){var self=this,showPromo=1===Math.floor(500*Math.random()),promoId="coursera-promo-betaclub";if(showPromo&&Coursera.user.get("courses").size()>0&&!cookie.get(promoId)){var $promo=self.$("#"+promoId);$promo.show(),Coursera.multitracker.push(["user.promo.show."+promoId]),$promo.find(".close").on("click",function(){$promo.hide(),cookie.set(promoId,"closed"),Coursera.multitracker.push(["user.promo.close."+promoId])}),$promo.find("a").on("click",function(){Coursera.multitracker.push(["user.promo.click."+promoId])})}},unEnrollPrompt:function(e){var courseId=$(e.target).attr("data-unenroll-course-id");if(this.selected=Coursera.user.get("courses").find(function(course){return course.get("id")==courseId}),this.$(".coursera-profile-unenroll-title").empty().append(this.selected.get("topic").get("name")),$(e.target).attr("is_signature_track"))Modal(this.$(".coursera-profile-modal-unenroll-signature-track")).open(),Coursera.multitracker.push(["user.unenroll.siganture_track.prompt",this.selected.id]);else Modal(this.$(".coursera-profile-modal-unenroll")).open(),Coursera.multitracker.push(["user.unenroll.prompt",this.selected.id])},unEnrollCancel:function(){Coursera.multitracker.push(["user.unenroll.cancel",this.selected.id]),this.selected=null,Modal(this.$(".coursera-profile-modal-unenroll")).close()},unEnroll:function(){var self=this;this.$(".coursera-profile-button-unenroll-now").hide(),this.$(".coursera-profile-button-unenroll-cancel").hide(),this.$(".coursera-profile-button-unenroll-waiting").show(),Coursera.user.unenroll(self.selected.get("id"),function(err){if(err)Coursera.router.trigger("error",500,location.href,{message:"failed to unenroll user"});else{Coursera.user.get("courses").remove(self.selected),Modal(self.$(".coursera-profile-modal-unenroll")).close(),self.$(".coursera-profile-button-unenroll-waiting").hide(),self.$(".coursera-profile-button-unenroll-cancel").show(),self.$(".coursera-profile-button-unenroll-now").show();var topicShortName=self.selected.get("topic").get("short_name"),surveys={writing2:"1pGq1bpzcz0Z6hKdN9mRp1w5kRR9_dNCq-53pO9gXZ24",techcity:"1Qxi9oKoRL83pND658XqFM5PYARL-RHdwRZ8mVsGHK4A",calc1:"1WE6_Szq0rk2erdnjgJfB8BIJbiJLp2bLss3ipMEcYBo",sequence:"1LtJxHWxqdoWGvEBkopB9r6pPGs8I-t9UDkluZnGHU_4",intropharma:"1xmRojoxbWx5fHilv7-CbpYJj8-BJvkVAXK6CiftHRYs",latinmigration:"1izkcRnzyPoHvJoK7N9a-Zv02g1xU0TF9XAV0SSTHJZA",genrx:"1_N4buGAfkxbUFc9JivsRBCrIm0wPsldjpBd30yvs0go"};if(surveys[topicShortName]){var $unenrollSurvey=self.$(".coursera-profile-modal-unenroll-survey");$unenrollSurvey.find("a").attr("href","https://docs.google.com/forms/d/"+surveys[topicShortName]+"/viewform?pli=1"),Modal($unenrollSurvey).open()}self.selected=null,self.renderMyCourses()}}),Coursera.multitracker.push(["user.unenroll.click",this.selected.id])}});return accountCoursesBody}),define("pages/home/catalog/nls/catalogBody",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t){buf.push('<div class="container"><div class="coursera-full-canvas coursera-catalog"><div data-affix="data-affix" class="row-fluid coursera-catalog-toolbar"><div class="span12"><div class="coursera-catalog-toolbar-body"><label for="coursera-catalog-search-id" style="display:none;">'+jade.escape(null==(jade_interp=_t("Search by course name, category, university, or instructor"))?"":jade_interp)+'</label><input id="coursera-catalog-search-id" type="search"'+jade.attr("placeholder",_t("Search by course name, category, university, or instructor"),!0,!1)+' name="search" class="coursera-catalog-search input-large search-query"/><div class="coursera-catalog-partners"></div></div></div></div><div class="row-fluid coursera-catalog-results"><div class="span3"><div class="coursera-catalog-sidebar"><div style="padding:14px 0px 12px 4px;"><span class="coursera-catalog-sort-title">'+jade.escape(null==(jade_interp=_t("Sort by"))?"":jade_interp)+' </span><select aria-label="Sort by" style="width:150px; margin-left: 2px; margin-bottom:0px;" class="coursera-catalog-sort"><option value="upcoming">'+jade.escape(null==(jade_interp=_t("Starting soon"))?"":jade_interp)+'</option><option value="current">'+jade.escape(null==(jade_interp=_t("Currently running"))?"":jade_interp)+'</option><option value="new">'+jade.escape(null==(jade_interp=_t("Newest courses"))?"":jade_interp)+'</option></select></div></div></div><div class="span9"><div style="display:none;" class="coursera-catalog-container coursera-catalog-listings-specializations-container"><h2>'+jade.escape(null==(jade_interp=_t("Specializations"))?"":jade_interp)+'</h2><div class="coursera-catalog-listings-specializations"></div></div><div style="display:none;" class="coursera-catalog-container coursera-catalog-listings-courses-container"><h2>'+jade.escape(null==(jade_interp=_t("Courses"))?"":jade_interp)+'</h2><div class="coursera-catalog-listings"></div><div style="display:none;" class="coursera-catalog-load-more-box"><a href="javascript:void(0)">'+jade.escape(null==(jade_interp=_t("Load More Results..."))?"":jade_interp)+'</a></div></div><div style="display:none;" class="coursera-catalog-container coursera-catalog-listings-statesystems-container"><h2>'+jade.escape(null==(jade_interp=_t("US State Institutions"))?"":jade_interp)+'</h2><div class="coursera-catalog-listings-statesystems"></div></div><div style="display:none;" class="coursera-catalog-loading-box"><span>'+jade.escape(null==(jade_interp=_t("Loading courses..."))?"":jade_interp)+'</span></div><div style="display:none;" class="coursera-catalog-noresults-box"><span>'+jade.escape(null==(jade_interp=_t("No results."))?"":jade_interp)+'</span></div><div style="display:none;" class="coursera-catalog-error-box"><span>'+jade.escape(null==(jade_interp=_t("Error loading courses."))?"":jade_interp)+"</span></div></div></div></div></div>")}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/catalog/catalogBody.html",["js/lib/jade","i18n!pages/home/catalog/nls/catalogBody"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.catalog.catalogBody"]=jadify(wndw.jade.helpers)}(window),define("pages/home/catalog/nls/catalogSpecialization",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(specializations,_,config,_t){(function(){var $$obj=specializations;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var spec=$$obj[$index],universities=_.uniq(spec.get("universities").toArray()),instructors=_.uniq(spec.get("instructors").toArray());if(buf.push("<div"+jade.attr("data-spec-id",spec.get("id"),!0,!1)+' class="coursera-catalog-course-listing-box"><div class="row-fluid"><div class="span2"><img'+jade.attr("src",spec.get("logo"),!0,!1)+' alt="" role="presentation" class="coursera-catalog-listing-thumbnail"/></div><div class="span7"><div class="coursera-catalog-listing-text"><div class="coursera-catalog-listing-primary"><span class="coursera-catalog-listing-university">'),function(){var $$obj=universities;
if("number"==typeof $$obj.length)for(var index=0,$$l=$$obj.length;$$l>index;index++){var university=$$obj[index];if(buf.push("<a"+jade.attr("href",config.dir.home+university.get("short_name"),!0,!1)+' class="coursera-catalog-listing-secondary-link internal-home">'+jade.escape(null==(jade_interp=_t(university.get("name")))?"":jade_interp)+'<span class="coursera-catalog-listing-secondary-link-target"></span></a>'),index<universities.length-2)buf.push("<span>,&nbsp;</span>");else buf.push("<span></span>");if(universities.length>1&&index==universities.length-2)buf.push("<span> &amp;&nbsp;</span>")}else{var $$l=0;for(var index in $$obj){$$l++;var university=$$obj[index];if(buf.push("<a"+jade.attr("href",config.dir.home+university.get("short_name"),!0,!1)+' class="coursera-catalog-listing-secondary-link internal-home">'+jade.escape(null==(jade_interp=_t(university.get("name")))?"":jade_interp)+'<span class="coursera-catalog-listing-secondary-link-target"></span></a>'),index<universities.length-2)buf.push("<span>,&nbsp;</span>");else buf.push("<span></span>");if(universities.length>1&&index==universities.length-2)buf.push("<span> &amp;&nbsp;</span>")}}}.call(this),buf.push('</span><span class="coursera-catalog-listing-coursename"><a'+jade.attr("href",config.dir.home+"specialization/"+spec.get("short_name")+"/"+spec.get("id")+"?utm_medium=catalogSpec",!0,!1)+' class="coursera-catalog-listing-courselink">'+jade.escape(null==(jade_interp=_t(spec.get("name")))?"":jade_interp)+'<span class="coursera-catalog-listing-course-link-box"></span></a></span></div></div></div><div class="span3"><div class="coursera-catalog-listing-secondary">'),spec.get("next_open_course"))buf.push('<span class="coursera-catalog-listing-secondary-item">'+jade.escape(null==(jade_interp=_t("Next session:"))?"":jade_interp)+'</span><span class="coursera-catalog-listing-secondary-item">'+jade.escape(null==(jade_interp=_t(spec.get("next_open_course").getStartDisplay()))?"":jade_interp)+"</span>");buf.push("</div></div></div></div>")}else{var $$l=0;for(var $index in $$obj){$$l++;var spec=$$obj[$index],universities=_.uniq(spec.get("universities").toArray()),instructors=_.uniq(spec.get("instructors").toArray());if(buf.push("<div"+jade.attr("data-spec-id",spec.get("id"),!0,!1)+' class="coursera-catalog-course-listing-box"><div class="row-fluid"><div class="span2"><img'+jade.attr("src",spec.get("logo"),!0,!1)+' alt="" role="presentation" class="coursera-catalog-listing-thumbnail"/></div><div class="span7"><div class="coursera-catalog-listing-text"><div class="coursera-catalog-listing-primary"><span class="coursera-catalog-listing-university">'),function(){var $$obj=universities;if("number"==typeof $$obj.length)for(var index=0,$$l=$$obj.length;$$l>index;index++){var university=$$obj[index];if(buf.push("<a"+jade.attr("href",config.dir.home+university.get("short_name"),!0,!1)+' class="coursera-catalog-listing-secondary-link internal-home">'+jade.escape(null==(jade_interp=_t(university.get("name")))?"":jade_interp)+'<span class="coursera-catalog-listing-secondary-link-target"></span></a>'),index<universities.length-2)buf.push("<span>,&nbsp;</span>");else buf.push("<span></span>");if(universities.length>1&&index==universities.length-2)buf.push("<span> &amp;&nbsp;</span>")}else{var $$l=0;for(var index in $$obj){$$l++;var university=$$obj[index];if(buf.push("<a"+jade.attr("href",config.dir.home+university.get("short_name"),!0,!1)+' class="coursera-catalog-listing-secondary-link internal-home">'+jade.escape(null==(jade_interp=_t(university.get("name")))?"":jade_interp)+'<span class="coursera-catalog-listing-secondary-link-target"></span></a>'),index<universities.length-2)buf.push("<span>,&nbsp;</span>");else buf.push("<span></span>");if(universities.length>1&&index==universities.length-2)buf.push("<span> &amp;&nbsp;</span>")}}}.call(this),buf.push('</span><span class="coursera-catalog-listing-coursename"><a'+jade.attr("href",config.dir.home+"specialization/"+spec.get("short_name")+"/"+spec.get("id")+"?utm_medium=catalogSpec",!0,!1)+' class="coursera-catalog-listing-courselink">'+jade.escape(null==(jade_interp=_t(spec.get("name")))?"":jade_interp)+'<span class="coursera-catalog-listing-course-link-box"></span></a></span></div></div></div><div class="span3"><div class="coursera-catalog-listing-secondary">'),spec.get("next_open_course"))buf.push('<span class="coursera-catalog-listing-secondary-item">'+jade.escape(null==(jade_interp=_t("Next session:"))?"":jade_interp)+'</span><span class="coursera-catalog-listing-secondary-item">'+jade.escape(null==(jade_interp=_t(spec.get("next_open_course").getStartDisplay()))?"":jade_interp)+"</span>");buf.push("</div></div></div></div>")}}}).call(this)}("specializations"in locals_for_with?locals_for_with.specializations:"undefined"!=typeof specializations?specializations:void 0,"_"in locals_for_with?locals_for_with._:"undefined"!=typeof _?_:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/catalog/catalogSpecialization.html",["js/lib/jade","i18n!pages/home/catalog/nls/catalogSpecialization"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.catalog.catalogSpecialization"]=jadify(wndw.jade.helpers)}(window),define("pages/home/catalog/nls/catalogListing",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t,topicsInfo,config){jade_mixins.sigtrack=function(config,topic,universities){var block=this&&this.block,attributes=this&&this.attributes||{};if(topic.hasEligibleForSignatureTrack()){var modalClass="coursera-catalog-sigtrack-modal-"+topic.get("id"),university_short_name=universities[0].get("short_name");if(topic.hasOpenEnrollForSignatureTrack()){if(topic.get("spec_info")&&topic.get("spec_info").id>0){var specInfo=topic.get("spec_info");buf.push("<a"+jade.attr("href",config.url.base+"specialization/"+specInfo.shortName+"/"+specInfo.id+"?utm_medium=catalogCourse",!0,!1)+' class="coursera-catalog-listing-secondary-item coursera-catalog-list-secondary-sigtrack coursera-catalog-listing-secondary-sigtrack-open">'+jade.escape(null==(jade_interp=_t("Specializations"))?"":jade_interp)+"</a>")}else buf.push("<a"+jade.attr("data-modal","."+modalClass,!0,!1)+' class="coursera-catalog-listing-secondary-item coursera-catalog-list-secondary-sigtrack coursera-catalog-listing-secondary-sigtrack-open">'+jade.escape(null==(jade_interp=_t("Verified Certificate"))?"":jade_interp)+"</a>");buf.push('<div data-modal-position="fixed" data-modal-position-top="100px" data-modal-overlay-class="coursera-overlay" data-modal-overlay-close="true"'+jade.cls(["modal","hide","coursera-catalog-sigtrack-modal",modalClass],[null,null,null,!0])+'><div class="modal-header"><img'+jade.attr("src",config.url.assets+"pages/signature/views/ribbon_stripes.png",!0,!1)+' class="coursera-signature-modal-ribbon"/><h2>'+jade.escape(null==(jade_interp=_t("Verified Certificates with Signature Track"))?"":jade_interp)+'</h2></div><div style="margin-left: 0px; padding: 30px;" class="row"><div style="text-align: center" class="span4"><img'+jade.attr("data-sigtrack-cert-icon",university_short_name,!0,!1)+' style="margin-top: 20px"'+jade.attr("src","https://s3.amazonaws.com/coursera/universities/"+university_short_name+"/signature-cert-icon.png",!0,!1)+'/></div><div class="span8"><p>'+jade.escape(null==(jade_interp=_t("Join this course's Signature Track and earn an official Verified Certificate from the school and Coursera."))?"":jade_interp)+"</p><ul><li>"+jade.escape(null==(jade_interp=_t("Show the world your achievement"))?"":jade_interp)+"</li><li>"+jade.escape(null==(jade_interp=_t("Share your course record with employers and universities"))?"":jade_interp)+"</li><li>"+jade.escape(null==(jade_interp=_t("Prove it's your work, your identity"))?"":jade_interp)+'</li></ul></div></div><div style="text-align: center; margin-top: -10px; margin-bottom: 20px;"><a style="width:auto; margin-left: 0px"'+jade.attr("href",config.dir.home+"signature/course/"+topic.get("short_name")+"/"+topic.get("open_course").get("id")+"?utm_source=catalog",!0,!1)+' target="_blank" class="btn coursera-signature-next-button">'+(null==(jade_interp=_t("Learn more about Signature Track &raquo;"))?"":jade_interp)+"</a></div></div>")}else{if(topic.get("spec_info")&&topic.get("spec_info").id>0){var specInfo=topic.get("spec_info");buf.push("<a"+jade.attr("href",config.url.base+"specialization/"+specInfo.shortName+"/"+specInfo.id+"?utm_medium=catalogCourse",!0,!1)+' class="coursera-catalog-listing-secondary-item coursera-catalog-list-secondary-sigtrack coursera-catalog-listing-secondary-sigtrack-open">'+jade.escape(null==(jade_interp=_t("Specializations"))?"":jade_interp)+"</a>")}else buf.push("<a"+jade.attr("data-modal","."+modalClass,!0,!1)+' class="coursera-catalog-listing-secondary-item coursera-catalog-list-secondary-sigtrack coursera-catalog-listing-secondary-sigtrack-not-open">'+jade.escape(null==(jade_interp=_t("Verified Certificate"))?"":jade_interp)+"</a>");buf.push('<div style="width: 610px" data-modal-position="fixed" data-modal-position-top="100px" data-modal-overlay-class="coursera-overlay" data-modal-overlay-close="true"'+jade.cls(["modal","hide","coursera-catalog-sigtrack-modal-disabled",modalClass],[null,null,null,!0])+'><div class="modal-header"><img'+jade.attr("src",config.url.assets+"pages/signature/views/ribbon_stripes.png",!0,!1)+' class="coursera-signature-modal-ribbon"/><h2>'+jade.escape(null==(jade_interp=_t("Signature Track Registration is currently closed"))?"":jade_interp)+'</h2></div><div style="margin-top: 5px; margin-left: 0px; padding: 30px;" class="row"><div style="text-align: center" class="span4"><img'+jade.attr("data-sigtrack-cert-icon",university_short_name,!0,!1)+' style="margin-top: 20px"'+jade.attr("src","https://s3.amazonaws.com/coursera/universities/"+university_short_name+"/signature-cert-icon.png",!0,!1)+'/></div><div class="span8"><p>'+jade.escape(null==(jade_interp=_t("Join this course's Signature Track and earn an official Verified Certificate from the school and Coursera."))?"":jade_interp)+"</p><ul><li>"+jade.escape(null==(jade_interp=_t("Show the world your achievement"))?"":jade_interp)+"</li><li>"+jade.escape(null==(jade_interp=_t("Share your course record with employers and universities"))?"":jade_interp)+"</li><li>"+jade.escape(null==(jade_interp=_t("Prove it's your work, your identity"))?"":jade_interp)+'</li></ul></div></div><div style="text-align: center; margin-top: -10px; margin-bottom: 20px;"><a style="width:auto; margin-left: 0px"'+jade.attr("href",config.dir.home+"signature/guidebook",!0,!1)+' target="_blank" class="btn coursera-signature-next-button">'+(null==(jade_interp=_t("Learn more about Signature Track &raquo;"))?"":jade_interp)+"</a></div></div>")}}},function(){var $$obj=topicsInfo;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var topicInfo=$$obj[$index],topic=topicInfo.topic,universities=topicInfo.universities,instructors=topicInfo.instructors;buf.push("<div"+jade.attr("data-topic-id",topic.get("id"),!0,!1)+' class="coursera-catalog-course-listing-box"><div class="row-fluid"><div class="span2"><img'+jade.attr("src",topic.get("small_icon_hover"),!0,!1)+' alt="" role="presentation" class="coursera-catalog-listing-thumbnail"/></div><div class="span7"><div class="coursera-catalog-listing-text"><div class="coursera-catalog-listing-primary"><span class="coursera-catalog-listing-university">'),function(){var $$obj=universities;if("number"==typeof $$obj.length)for(var i=0,$$l=$$obj.length;$$l>i;i++){var university=$$obj[i];if(buf.push("<a"+jade.attr("href",config.dir.home+university.get("short_name"),!0,!1)+' class="coursera-catalog-listing-secondary-link internal-home">'+jade.escape(null==(jade_interp=_t(university.get("name")))?"":jade_interp)+'<span class="coursera-catalog-listing-secondary-link-target"></span></a>'),i<universities.length-2)buf.push("<span>, </span>");else buf.push("<span></span>");if(universities.length>1&&i==universities.length-2)buf.push("<span> &amp; </span>")}else{var $$l=0;for(var i in $$obj){$$l++;var university=$$obj[i];if(buf.push("<a"+jade.attr("href",config.dir.home+university.get("short_name"),!0,!1)+' class="coursera-catalog-listing-secondary-link internal-home">'+jade.escape(null==(jade_interp=_t(university.get("name")))?"":jade_interp)+'<span class="coursera-catalog-listing-secondary-link-target"></span></a>'),i<universities.length-2)buf.push("<span>, </span>");else buf.push("<span></span>");if(universities.length>1&&i==universities.length-2)buf.push("<span> &amp; </span>")}}}.call(this),buf.push('</span><span class="coursera-catalog-listing-coursename">');var internalLinkClass=topic.get("flex_course")?"":"internal-home";if(buf.push("<a"+jade.attr("href",topic.getLink(),!0,!1)+jade.cls(["coursera-catalog-listing-courselink",internalLinkClass],[null,!0])+">"+jade.escape(null==(jade_interp=_t(topic.get("name")))?"":jade_interp)),buf.push('<span class="coursera-catalog-listing-course-link-box"></span></a></span><span class="coursera-catalog-listing-instructor">'),instructors.length)buf.push(""+jade.escape(null==(jade_interp=_t("with"))?"":jade_interp)+" ");if(function(){var $$obj=instructors;if("number"==typeof $$obj.length)for(var i=0,$$l=$$obj.length;$$l>i;i++){var instructor=$$obj[i];if(buf.push("<a"+jade.attr("href",instructor.getLink(),!0,!1)+' class="internal-home coursera-catalog-listing-secondary-link">'+jade.escape(null==(jade_interp=_t(instructor.get("full_name")))?"":jade_interp)+'<span class="coursera-catalog-listing-secondary-link-target"></span></a>'),i<instructors.length-2)buf.push("<span>, </span>");else buf.push("<span></span>");if(instructors.length>1&&i==instructors.length-2)buf.push("<span>&#32;&amp; </span>")}else{var $$l=0;for(var i in $$obj){$$l++;var instructor=$$obj[i];if(buf.push("<a"+jade.attr("href",instructor.getLink(),!0,!1)+' class="internal-home coursera-catalog-listing-secondary-link">'+jade.escape(null==(jade_interp=_t(instructor.get("full_name")))?"":jade_interp)+'<span class="coursera-catalog-listing-secondary-link-target"></span></a>'),i<instructors.length-2)buf.push("<span>, </span>");else buf.push("<span></span>");if(instructors.length>1&&i==instructors.length-2)buf.push("<span>&#32;&amp; </span>")}}}.call(this),buf.push('</span></div></div></div><div class="span3"><div class="coursera-catalog-listing-secondary">'),topic.get("flex_course"))buf.push('<span class="coursera-catalog-listing-secondary-item">'+jade.escape(null==(jade_interp=_t("Go at your own pace."))?"":jade_interp)+'</span><span class="coursera-catalog-flex-button">'+jade.escape(null==(jade_interp=_t("Learn now!"))?"":jade_interp)+"</span>");else{if(topic.get("open_course")){if(buf.push('<span class="coursera-catalog-listing-secondary-item">'+jade.escape(null==(jade_interp=_t(topic.get("open_course").getStartDisplay()))?"":jade_interp)+"</span>"),topic.get("open_course").get("duration_string"))buf.push('<span class="coursera-catalog-listing-secondary-item">'+jade.escape(null==(jade_interp=_t("#{topic.get('open_course').get('duration_string')} long",{"topic.get('open_course').get('duration_string')":topic.get("open_course").get("duration_string")}))?"":jade_interp)+"</span>")}else buf.push('<span class="coursera-catalog-listing-secondary-item coursera-catalog-listing-secondary-inactive">'+jade.escape(null==(jade_interp=_t("There are"))?"":jade_interp)+'</span><span class="coursera-catalog-listing-secondary-item coursera-catalog-listing-secondary-inactive">'+jade.escape(null==(jade_interp=_t("no open sessions."))?"":jade_interp)+"</span>");jade_mixins.sigtrack(config,topic,universities)}buf.push("</div></div></div></div>")}else{var $$l=0;for(var $index in $$obj){$$l++;var topicInfo=$$obj[$index],topic=topicInfo.topic,universities=topicInfo.universities,instructors=topicInfo.instructors;buf.push("<div"+jade.attr("data-topic-id",topic.get("id"),!0,!1)+' class="coursera-catalog-course-listing-box"><div class="row-fluid"><div class="span2"><img'+jade.attr("src",topic.get("small_icon_hover"),!0,!1)+' alt="" role="presentation" class="coursera-catalog-listing-thumbnail"/></div><div class="span7"><div class="coursera-catalog-listing-text"><div class="coursera-catalog-listing-primary"><span class="coursera-catalog-listing-university">'),function(){var $$obj=universities;if("number"==typeof $$obj.length)for(var i=0,$$l=$$obj.length;$$l>i;i++){var university=$$obj[i];if(buf.push("<a"+jade.attr("href",config.dir.home+university.get("short_name"),!0,!1)+' class="coursera-catalog-listing-secondary-link internal-home">'+jade.escape(null==(jade_interp=_t(university.get("name")))?"":jade_interp)+'<span class="coursera-catalog-listing-secondary-link-target"></span></a>'),i<universities.length-2)buf.push("<span>, </span>");else buf.push("<span></span>");if(universities.length>1&&i==universities.length-2)buf.push("<span> &amp; </span>")}else{var $$l=0;for(var i in $$obj){$$l++;var university=$$obj[i];if(buf.push("<a"+jade.attr("href",config.dir.home+university.get("short_name"),!0,!1)+' class="coursera-catalog-listing-secondary-link internal-home">'+jade.escape(null==(jade_interp=_t(university.get("name")))?"":jade_interp)+'<span class="coursera-catalog-listing-secondary-link-target"></span></a>'),i<universities.length-2)buf.push("<span>, </span>");else buf.push("<span></span>");if(universities.length>1&&i==universities.length-2)buf.push("<span> &amp; </span>")}}}.call(this),buf.push('</span><span class="coursera-catalog-listing-coursename">');var internalLinkClass=topic.get("flex_course")?"":"internal-home";if(buf.push("<a"+jade.attr("href",topic.getLink(),!0,!1)+jade.cls(["coursera-catalog-listing-courselink",internalLinkClass],[null,!0])+">"+jade.escape(null==(jade_interp=_t(topic.get("name")))?"":jade_interp)),buf.push('<span class="coursera-catalog-listing-course-link-box"></span></a></span><span class="coursera-catalog-listing-instructor">'),instructors.length)buf.push(""+jade.escape(null==(jade_interp=_t("with"))?"":jade_interp)+" ");if(function(){var $$obj=instructors;if("number"==typeof $$obj.length)for(var i=0,$$l=$$obj.length;$$l>i;i++){var instructor=$$obj[i];if(buf.push("<a"+jade.attr("href",instructor.getLink(),!0,!1)+' class="internal-home coursera-catalog-listing-secondary-link">'+jade.escape(null==(jade_interp=_t(instructor.get("full_name")))?"":jade_interp)+'<span class="coursera-catalog-listing-secondary-link-target"></span></a>'),i<instructors.length-2)buf.push("<span>, </span>");else buf.push("<span></span>");if(instructors.length>1&&i==instructors.length-2)buf.push("<span>&#32;&amp; </span>")}else{var $$l=0;for(var i in $$obj){$$l++;var instructor=$$obj[i];if(buf.push("<a"+jade.attr("href",instructor.getLink(),!0,!1)+' class="internal-home coursera-catalog-listing-secondary-link">'+jade.escape(null==(jade_interp=_t(instructor.get("full_name")))?"":jade_interp)+'<span class="coursera-catalog-listing-secondary-link-target"></span></a>'),i<instructors.length-2)buf.push("<span>, </span>");else buf.push("<span></span>");if(instructors.length>1&&i==instructors.length-2)buf.push("<span>&#32;&amp; </span>")}}}.call(this),buf.push('</span></div></div></div><div class="span3"><div class="coursera-catalog-listing-secondary">'),topic.get("flex_course"))buf.push('<span class="coursera-catalog-listing-secondary-item">'+jade.escape(null==(jade_interp=_t("Go at your own pace."))?"":jade_interp)+'</span><span class="coursera-catalog-flex-button">'+jade.escape(null==(jade_interp=_t("Learn now!"))?"":jade_interp)+"</span>");else{if(topic.get("open_course")){if(buf.push('<span class="coursera-catalog-listing-secondary-item">'+jade.escape(null==(jade_interp=_t(topic.get("open_course").getStartDisplay()))?"":jade_interp)+"</span>"),topic.get("open_course").get("duration_string"))buf.push('<span class="coursera-catalog-listing-secondary-item">'+jade.escape(null==(jade_interp=_t("#{topic.get('open_course').get('duration_string')} long",{"topic.get('open_course').get('duration_string')":topic.get("open_course").get("duration_string")}))?"":jade_interp)+"</span>")}else buf.push('<span class="coursera-catalog-listing-secondary-item coursera-catalog-listing-secondary-inactive">'+jade.escape(null==(jade_interp=_t("There are"))?"":jade_interp)+'</span><span class="coursera-catalog-listing-secondary-item coursera-catalog-listing-secondary-inactive">'+jade.escape(null==(jade_interp=_t("no open sessions."))?"":jade_interp)+"</span>");jade_mixins.sigtrack(config,topic,universities)}buf.push("</div></div></div></div>")}}}.call(this)}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"topicsInfo"in locals_for_with?locals_for_with.topicsInfo:"undefined"!=typeof topicsInfo?topicsInfo:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/catalog/catalogListing.html",["js/lib/jade","i18n!pages/home/catalog/nls/catalogListing"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.catalog.catalogListing"]=jadify(wndw.jade.helpers)}(window),define("js/models/tagset",["underscore","backbone"],function(_,Backbone){var tagset=Backbone.Model.extend({setInitialData:function(data){var parsed=this.parse(data),zeroed={};if(_.each(parsed,function(v,k){zeroed[k]=_.extend(_.clone(v),{count:0})}),this.set("initialData",zeroed,{silent:!0}),this.set("tags",parsed),this.get("waitingData"))this.setCurrentData(this.get("waitingData")),this.unset("waitingData",{silent:!0})},setCurrentData:function(data){if(this.unset("waitingData",{silent:!0}),!this.has("initialData"))return void this.set("waitingData",data,{silent:!0});var parsed=this.parse(data);this.set("tags",_.extend(_.clone(this.get("initialData")),parsed))},parse:function(data){return data}});return tagset}),define("js/models/topicsearch",["jquery","backbone","underscore","js/collections/topics","js/collections/specializations","js/models/tagset","js/core/coursera","js/lib/language","js/lib/coursera.ab"],function($,Backbone,_,Topics,Specializations,TagSet,Coursera,language,AB){function countValues(counts,values){_.each(values,function(value){if(_.has(counts,value.id))counts[value.id].count+=1;else counts[value.id]=value,counts[value.id].count=1})}function asyncSearch(topics,specializations,options,deferred){if(deferred.stopRunning)return void deferred.reject();if(options.search)topics=Topics.matchingSearch(topics,options.search);else topics=Topics.toArray(topics);var counts={};_.each(filterFields,function(field_function,field_name){counts[field_name]={}});var results=_.groupBy(topics,function(topic){var mismatchFieldName,numMismatchFields=0,filterFieldVals={};if(_.each(filterFields,function(field_function,field_name){if(filterFieldVals[field_name]=field_function(topic,specializations),filterFieldVals[field_name].push({id:"ALL",name:"ALL"}),!_.isUndefined(options[field_name])&&0===_.intersection(options[field_name],_.pluck(filterFieldVals[field_name],"id")).length)numMismatchFields+=1,mismatchFieldName=field_name}),0===numMismatchFields)_.each(filterFieldVals,function(values,field_name){countValues(counts[field_name],values)});else if(1===numMismatchFields)countValues(counts[mismatchFieldName],filterFieldVals[mismatchFieldName]);if(0===numMismatchFields)return"topics";else if(1===numMismatchFields)return mismatchFieldName;else return"unmatched"});delete results.unmatched;var sortFunc=Topics.byUpcoming;if("current"==options.orderby)sortFunc=Topics.byCurrentlyRunning;else if("new"==options.orderby)sortFunc=Topics.byAdded;_.each(results,function(topics,key){results[key]=sortFunc(topics)}),topics=results.topics,delete results.topics,deferred.resolve({topics:topics||[],mismatched:results,counts:counts})}var filterFields={ptypes:function(topic){var unis=topic.get("universities"),uniTypes=_.unique(_.pluck(unis,"partner_type"));if(_.contains(uniTypes,1))return[{id:1,name:1}];else return[{id:2,name:2}]},unis:function(topic){var uniValues=[];return _.each(topic.get("universities"),function(uni){uniValues.push({id:uni.id.toString(),name:uni.name})}),uniValues},cats:function(topic){var catValues=[];return _.each(topic.get("categories"),function(cat){catValues.push({id:cat.short_name,name:cat.name})}),catValues},lngs:function(topic){return filterFields.subs(topic)},subs:function(topic){var languagesHash=language.languageCodeCSVtoLanguages(topic.get("subtitle_language_groups"));return _.map(languagesHash,function(lang,code){return{id:code,name:lang}})},certs:function(topic,specs){var ret=[];if(topic.hasEligibleForSignatureTrack())if(ret.push({id:"st",name:"Verified Certificates"}),Specializations.specsHasTopic(specs,topic))ret.push({id:"spec",name:"Specialization Certificates"});return ret},stats:function(topic){if(topic.isUpcoming())return[{id:"upcoming",name:"Starting Soon"}];else if(topic.get("flex_course"))return[{id:"open",name:"Always Open"},{id:"upcoming",name:"Starting Soon"}];else return[]}},TopicSearch=Backbone.Model.extend({initialize:function(){var self=this;if(this.get("haveTagSets"))this.set("tagSets",{ptypes:new TagSet,unis:new TagSet,cats:new TagSet,lngs:new TagSet,subs:new TagSet,certs:new TagSet,stats:new TagSet}),this._setInitialCounts();this.set("collection",new Topics),this.get("collection").comparator=void 0,this.set("mismatched",{}),this.set("orderby","upcoming"),this.set("page-size",20),this.set("specializations",new Specializations),this.reset(),this.on("change:search",this.reset,this),this.on("change:orderby",this.reset,this),this.on("change:unis",this.reset,this),this.on("change:ptypes",this.reset,this),this.on("change:cats",this.reset,this),this.on("change:lngs",this.reset,this),this.on("change:subs",this.reset,this),this.on("change:certs",this.reset,this),this.on("change:stats",this.reset,this)},_getSearchOptions:function(){var options={search:this.get("search"),orderby:this.get("orderby"),cats:this.get("cats"),unis:this.get("unis"),ptypes:this.get("ptypes")||[1],lngs:this.get("lngs"),subs:this.get("subs"),certs:this.get("certs"),stats:this.get("stats")};return options},_getSearchResults:function(){var self=this;if(this.get("_searchResults"))return this.get("_searchResults");else{var deferred=$.Deferred();return this.set("_searchResults",deferred),$.when(Topics.singletonReadAll(),Specializations.singletonReadAll()).then(function(topicsDeferred,specializationsDeferred){var topics=topicsDeferred[0],specializations=specializationsDeferred[0];Specializations.annotateTopics(specializations,topics);var options=self._getSearchOptions();_.defer(_.bind(asyncSearch,null,topics,specializations,options,deferred))}).fail(function(){self.trigger("topicLoadError")}),deferred}},fetchPage:function(){var self=this;self.trigger("startLoad"),$.when(this._getSearchResults(),Specializations.singletonReadAll()).then(function(searchResults,specializationsDeferred){var filteredTopics=searchResults.topics,startIdx=self.get("page-size")*self.get("_fetchedPages"),endIdx=Math.min(startIdx+self.get("page-size"),filteredTopics.length);if(self.get("collection").add(filteredTopics.slice(startIdx,endIdx)),self.set("mismatched",searchResults.mismatched),self.set("_fetchedPages",self.get("_fetchedPages")+1),endIdx==filteredTopics.length)self.set("fetchedAllPages",!0);self._updateSpecializations(specializationsDeferred[0]),self.trigger("finishLoad")})},_setInitialCounts:function(){var self=this;$.when(Topics.singletonReadAll(),Specializations.singletonReadAll()).then(function(topicsDeferred,specializationsDeferred){var topics=topicsDeferred[0],specializations=specializationsDeferred[0];Specializations.annotateTopics(specializations,topics);var deferred=$.Deferred();deferred.done(function(searchResults){var counts=searchResults.counts;_.each(counts,function(tagSetCounts,tagSetName){self.get("tagSets")[tagSetName].setInitialData(tagSetCounts)})}),asyncSearch(topics,specializations,{},deferred)}).fail(function(){self.trigger("topicLoadError")})},_updateCounts:function(){var self=this;if(this.get("haveTagSets"))this._getSearchResults().done(function(searchResults){var counts=searchResults.counts;_.each(counts,function(tagSetCounts,tagSetName){self.get("tagSets")[tagSetName].setCurrentData(tagSetCounts)})})},_updateSpecializations:function(specializations){var searchString=this.get("search"),searchSpecIds={};if(searchString){var searchSpec=Specializations.matchingSearch(specializations,searchString);_.each(searchSpec,function(spec){searchSpecIds[spec.get("id")]=1})}var topicsShown={};_.each(this.get("collection").pluck("id"),function(topicId){topicsShown[topicId]=1});var specs=specializations.filter(function(specialization){return specialization.get("id")in searchSpecIds||specialization.get("topics").some(function(topic){return topic.get("id")in topicsShown})});this.set("specializations",specs)},reset:function(){if(this.set("_fetchedPages",0),this.set("fetchedAllPages",!1),this.get("_searchResults"))this.get("_searchResults").stopRunning=!0,this.unset("_searchResults");this.get("collection").reset(),this.set("specializations",new Specializations),this.trigger("reset"),this._updateCounts()}});return TopicSearch}),define("pages/home/catalog/nls/catalogTagListing",{}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(tags,_t){(function(){var $$obj=tags;if("number"==typeof $$obj.length)for(var $index=0,$$l=$$obj.length;$$l>$index;$index++){var tag=$$obj[$index];buf.push("<li"+jade.attr("data-id",tag.id,!0,!1)+jade.cls(["coursera-catalog-tag","coursera-catalog-tag-click","ALL"==tag.id?"coursera-catalog-tag-all":""],[null,null,!0])+'><div class="coursera-catalog-tag-checkbox-column"><input type="checkbox"'+jade.attr("checked",tag.shouldCheck?"checked":!1,!0,!1)+jade.attr("aria-label",""+tag.tagText,!0,!1)+' class="coursera-catalog-tag-checkbox"/></div><div class="coursera-catalog-tag-text">'+jade.escape(null==(jade_interp=_t(tag.tagText))?"":jade_interp)+'</div><div class="coursera-catalog-tag-count">'+jade.escape(null==(jade_interp=_t(tag.tagCount))?"":jade_interp)+"</div></li>")}else{var $$l=0;for(var $index in $$obj){$$l++;var tag=$$obj[$index];buf.push("<li"+jade.attr("data-id",tag.id,!0,!1)+jade.cls(["coursera-catalog-tag","coursera-catalog-tag-click","ALL"==tag.id?"coursera-catalog-tag-all":""],[null,null,!0])+'><div class="coursera-catalog-tag-checkbox-column"><input type="checkbox"'+jade.attr("checked",tag.shouldCheck?"checked":!1,!0,!1)+jade.attr("aria-label",""+tag.tagText,!0,!1)+' class="coursera-catalog-tag-checkbox"/></div><div class="coursera-catalog-tag-text">'+jade.escape(null==(jade_interp=_t(tag.tagText))?"":jade_interp)+'</div><div class="coursera-catalog-tag-count">'+jade.escape(null==(jade_interp=_t(tag.tagCount))?"":jade_interp)+"</div></li>")}}}).call(this)}("tags"in locals_for_with?locals_for_with.tags:"undefined"!=typeof tags?tags:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/catalog/catalogTagListing.html",["js/lib/jade","i18n!pages/home/catalog/nls/catalogTagListing"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.catalog.catalogTagListing"]=jadify(wndw.jade.helpers)
}(window),define("js/json/nls/otherInterfaceStrings",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),define("pages/home/catalog/catalogTagListing",["jquery","underscore","js/core/coursera","backbone","js/lib/util","js/lib/coursera.ab","pages/home/catalog/catalogTagListing.html","i18n!js/json/nls/languages","i18n!js/json/nls/universities","i18n!js/json/nls/categories","i18n!js/json/nls/otherInterfaceStrings"],function($,_,Coursera,Backbone,util,AB,template,languages_t,universities_t,categories_t,otherInterfaceStrings_t){var _t=languages_t.merge(universities_t,categories_t,otherInterfaceStrings_t),catalogTagListing=Backbone.View.extend({options:{name:"none",label:"none",shouldShow:void 0,orderBy:"count",numToShow:-1,showEmpty:!1,showAllTag:!0,header:void 0},events:{"click .coursera-catalog-tag-click":"clickTag","click .coursera-catalog-tag-showmore":"showMore"},initialize:function(){this.selections={},this.name=this.options.name},clickTag:function(evt){var id=$(evt.currentTarget).data("id"),checkbox=$(evt.currentTarget).find("input"),tag=_.find(this.data,function(tag){return tag.id==id}),tagName=tag?tag.name:"",eventName;if(_.has(this.selections,id))checkbox.prop("checked",!1),delete this.selections[id],eventName="deselect";else checkbox.prop("checked",!0),this.selections[id]=!0,eventName="select";Coursera.multitracker.push(["user.coursera.catalog.tags."+eventName,this.options.name+"."+tagName]),this.checkSelectionConsistency("ALL"==id),this.trigger("selection",{target:this})},clearSelections:function(){this.selections={},this.$("input").each(function(){var checkbox=$(this);checkbox.prop("checked",!1)}),this.checkSelectionConsistency(!0)},setSelection:function(id){this.selections[id]=!0,this.$(".coursera-catalog-tag").each(function(){var $tag=$(this);if($tag.data("id")==id)$tag.find("input").prop("checked",!0)}),this.checkSelectionConsistency("ALL"==id)},checkSelectionConsistency:function(preferAll){if(this.options.showAllTag){var allTagSelected=_.has(this.selections,"ALL"),otherTagSelected=_.some(_.keys(this.selections),function(id){return"ALL"!=id});if(allTagSelected&&otherTagSelected)if(preferAll)this.clearSelections();else delete this.selections.ALL,this.$(".coursera-catalog-tag").each(function(){var $tag=$(this);if("ALL"==$tag.data("id"))$tag.find("input").prop("checked",!1)});else if(!allTagSelected&&!otherTagSelected)this.setSelection("ALL")}},render:function(){var self=this;if(this.$el.empty(),this.$el.append($("<ul>").addClass("coursera-catalog-tag-list")),this.showHide(),this.model.on("change",function(){self.updateRender()}),this.model.get("tags"))this.updateRender();else this.showLoading();return this},showLoading:function(){var list=this.$(".coursera-catalog-tag-list");list.empty(),list.append($("<li>").text("Loading...").addClass("coursera-catalog-tag"))},showHide:function(){if(this.options.shouldShow)if(this.options.shouldShow.call(this))this.$el.show();else this.$el.hide()},updateRender:function(){var self=this;if(this.data=_.values(this.model.get("tags")),"name"==this.options.orderBy)this.data.sort(function(a,b){if("ALL"==a.id)return-1;if("ALL"==b.id)return 1;return b.name>a.name?-1:1});else if("count"==this.options.orderBy)this.data.sort(function(a,b){if("ALL"==a.id)return-1;if("ALL"==b.id)return 1;if(a.count!=b.count)return b.count-a.count;else return b.name>a.name?-1:1});if(_.each(this.data,function(tag){tag.isAdded=!1}),!this.options.showAllTag)this.data=_.reject(this.data,function(tag){return"ALL"==tag.id});this.showHide();var list=this.$(".coursera-catalog-tag-list");if(list.empty(),this.options.header){var li=$("<li>").addClass("coursera-catalog-tag").addClass("coursera-catalog-tag-all"),div=$("<div>").addClass("coursera-catalog-tag-text");div.text(_t(this.options.header)),li.append(div),this.$("ul").append(li)}var allTagsShown=this.addTags(this.options.numToShow);if(!allTagsShown)list.append($("<li>").text("show more").addClass("coursera-catalog-tag-showmore"));if(0===list.find("li").length)list.append($("<li>").text("No results.").addClass("coursera-catalog-tag"));this.checkSelectionConsistency()},getNumNonzeroTags:function(){var numNonzero=0;return _.each(this.data,function(tag){numNonzero+=0===tag.count?0:1}),numNonzero},addTags:function(num){var self=this,unshown={},tag,i,tagsToAdd=[],numAdded=0;for(i=0;i<this.data.length;i++)if(tag=this.data[i],!tag.isAdded&&(this.options.showEmpty||tag.count>0||"ALL"==tag.id))if(num>numAdded||-1==num)tagsToAdd.push(tag),tag.isAdded=!0,numAdded+=1;else unshown[tag.id]=!0;for(i=0;i<this.data.length;i++)if(tag=this.data[i],!tag.isAdded&&_.has(this.selections,tag.id))if(tagsToAdd.push(tag),tag.isAdded=!0,numAdded+=1,unshown[tag.id])delete unshown[tag.id];return tagsToAdd=_.map(tagsToAdd,function(tag){var tagText=tag.name;if("ALL"==tagText)tagText="All "+self.options.label;var shouldCheck=!1;if(_.has(self.selections,tag.id))shouldCheck=!0;return{id:tag.id,tagText:tagText,tagCount:tag.count,shouldCheck:shouldCheck}}),this.$(".coursera-catalog-tag-list").append(template({_t:_t,tags:tagsToAdd})),_.isEmpty(unshown)},addTag:function(tag){},showMore:function(){this.$(".coursera-catalog-tag-showmore").remove(),this.addTags(-1),Coursera.multitracker.push(["user.coursera.catalog.tags.showMore",this.options.name])}});return catalogTagListing}),define("pages/home/catalog/nls/catalogPartnerFilter",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t){buf.push('<a href="javascript:void(0);" style="margin-right: 6px;" data-id="1" class="coursera-catalog-partners-link">'+jade.escape(null==(jade_interp=_t("Global Partners"))?"":jade_interp)+' <span data-js-count="data-js-count"> (300)</span></a>&middot;<a href="javascript:void(0);" style="margin-left: 6px;" data-id="2" class="coursera-catalog-partners-link">'+jade.escape(null==(jade_interp=_t("US State Institutions"))?"":jade_interp)+' <span data-js-count="data-js-count">(200)</span></a><div style="position: relative; top: 20px; display:none;" class="coursera-bubble-wrapper"><div class="coursera-bubble-arrow"></div><div class="coursera-bubble-arrow-shadow"></div></div>')}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/catalog/catalogPartnerFilter.html",["js/lib/jade","i18n!pages/home/catalog/nls/catalogPartnerFilter"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.catalog.catalogPartnerFilter"]=jadify(wndw.jade.helpers)}(window),define("pages/home/catalog/catalogPartnerFilter",["jquery","underscore","js/core/coursera","backbone","js/lib/util","pages/home/catalog/catalogPartnerFilter.html","i18n!pages/home/catalog/nls/catalogPartnerFilter"],function($,_,Coursera,Backbone,util,template,template_t){var PARTNER_GLOBAL=1,PARTNER_US=2,catalogPartnerFilter=Backbone.View.extend({events:{"click a":"clickFilter"},initialize:function(){this.selectedId=null,this.selections=[],this.name="ptypes"},clickFilter:function(evt){var id=$(evt.currentTarget).data("id");Coursera.multitracker.push(["user.coursera.catalog.partnerfilter.select",id]),this.setSelection(id),this.trigger("selection",{target:this})},selectFilter:function(){this.$("a").removeClass("active");var $anchor=this.$("a[data-id="+this.selectedId+"]");if(!$anchor.size())return;$anchor.addClass("active");var left=this.$el.offset().left,x=$anchor.offset().left+$anchor.outerWidth()/2-left-10;this.$(".coursera-bubble-wrapper").show(),this.$(".coursera-bubble-arrow").css({left:x}),this.$(".coursera-bubble-arrow-shadow").css({left:x+1})},clearSelections:function(){this.setSelection(PARTNER_GLOBAL)},setSelection:function(id){this.selectedId=id,this.selections=[id],this.selectFilter()},render:function(){var self=this;if(this.$el.html(template({_t:template_t})),this.model.on("change",function(){self.updateRender()}),this.model.get("tags"))this.updateRender();else this.showLoading();return this},showLoading:function(){this.$("[data-js-count]").text("")},updateRender:function(){var self=this;if(this.data=_.values(this.model.get("tags")),_.each(this.model.get("tags"),function(tag){if(self.$("[data-id="+tag.id+"] span[data-js-count]").text("("+tag.count+")"),0===tag.count&&tag.id==self.selectedId&&tag.id==PARTNER_US)self.setSelection(PARTNER_GLOBAL),self.trigger("selection",{target:self})}),!this.selectedId)this.setSelection(PARTNER_GLOBAL)}});return catalogPartnerFilter.PARTNER_GLOBAL=PARTNER_GLOBAL,catalogPartnerFilter.PARTNER_US=PARTNER_US,catalogPartnerFilter}),!function(){var Affixes=function($,LucidJS,_){var _private={defaults:{"bind.scroll":"scroll","attribute.affix":"data-affix","offset.y":"0","offset.x":"0","class":"affix",preserve:"1","z.index":"1000",debounce:500},getAffix:function(el,options){var affix=$(el).data("affix.me");if(affix&&affix.constructor==Affix.prototype.constructor)if(options)return affix.customize(options);else return affix;else return null},makeAffix:function(el,options){var $el=$(el),affix=_private.getAffix($el);if(!affix)affix=new Affix($el,options),$el.data("affix.me",affix);return affix},readDataAttributes:function($el,prefix,defaults){var settings={};for(var key in defaults){var attr=$el.attr(prefix+key.replace(/\./g,"-"));settings[key]=void 0===attr||0===attr.length?defaults[key]:attr}return settings}},Affix=function(el,settings){this.$el=$(el),this.$parent=this.$el.parent(),this.emitter=LucidJS.emitter(this),this.customize(settings),this.affixed=!1};Affix.prototype.customize=function(settings){return this.options=_.extend({},_private.readDataAttributes(this.$el,_private["attribute.affix"]+"-",_private.defaults),settings),this},Affix.prototype.reposition=function(){if(!this.$el.is(":visible"))return;var scrollHeight=$(document).height(),scrollTop=$(window).scrollTop(),position=this.$el.offset(),height=this.$el.outerHeight(),offsetLeft=parseInt(this.options["offset.x"],10)||0,offsetTop=parseInt(this.options["offset.y"],10)||0;if(!this.affixed&&scrollTop>position.top+offsetTop){if(this.options.preserve)this.restore={display:this.$el.css("display"),"z-index":this.$el.css("z-index"),top:this.$el.css("top"),left:this.$el.css("left"),width:this.$el.css("width")},this.placeholder=$("<"+this.$el.prop("tagName")+">").css({display:"block",top:this.restore.top,left:this.restore.left,width:this.restore.width,height:height,"z-index":0}),this.placeholder.insertBefore(this.$el),this.$el.css({display:"fixed","z-index":this.options["z.index"],top:offsetTop,left:position.left,width:this.$el.width()});this.position=position,this.$el.addClass(this.options["class"]),this.affixed=!0,this.emitter.trigger("pin")}else if(this.affixed&&scrollTop<=this.position.top+offsetTop){if(this.placeholder.remove(),this.$el.removeClass(this.options["class"]),this.options.preserve)this.$el.css(this.restore),this.restore={};this.affixed=!1,this.emitter.trigger("unpin")}};var external=function(){return _private.getAffix.apply(null,arguments)||_private.makeAffix.apply(this,arguments)};return external.start=function(view,_options){var $view=$(view),$domView=view==window?$(document):$view,options=_.extend({},_private.defaults,_options);$view.on(options["bind.scroll"]+".affix",function(){$domView.find("["+options["attribute.affix"]+"]").each(function(){var $affix=$(this);options=_.extend({},options,_private.readDataAttributes($affix,options["attribute.affix"]+"-",_private.defaults));var affix=_private.getAffix($affix,options)||_private.makeAffix($affix,options);affix.reposition()})})},external.stop=function(view){var $view=$(view);$view.unbind(".affix")},external.start(window),external};if("function"==typeof define&&define.amd)define("js/lib/affix",["jquery","js/lib/lucid","underscore"],function($,LucidJS,_){return Affixes($,LucidJS,_)});else if("undefined"!=typeof window&&"undefined"==typeof ender)window.Affix=Affixes(window.$,window.LucidJS,window._)}(),define("pages/home/catalog/catalogBody",["jquery","underscore","js/core/coursera","pages/home/template/body","pages/home/catalog/catalogBody.html","i18n!pages/home/catalog/nls/catalogBody","pages/home/catalog/catalogSpecialization.html","pages/home/catalog/catalogListing.html","i18n!pages/home/catalog/nls/catalogListing","i18n!js/json/nls/universities","i18n!js/json/nls/topics","js/models/topicsearch","js/lib/util","pages/home/catalog/catalogTagListing","pages/home/catalog/catalogPartnerFilter","js/models/instructor","js/models/university","js/lib/modals","js/lib/cookie","js/lib/coursera.ab","js/lib/affix"],function($,_,Coursera,body,template,template_t,specializationTemplate,listingTemplate,listingTemplate_t,universities_t,topics_t,TopicSearch,util,tagListingView,partnerFilterView,Instructor,University,modals,cookie,AB){listingTemplate_t=listingTemplate_t.merge(universities_t,topics_t);var initialLoadMoreThreshold=20,loadMoreCount=40,catalogBody2=body.extend({events:{"change .coursera-catalog-sort":"updateSort","click .coursera-catalog-listing-courselink":"trackLink","click .coursera-catalog-listing-instructor a":"onInstructorLinkClick","click .coursera-catalog-listing-university a":"onUniLinkClick","click .coursera-catalog-list-secondary-sigtrack":"onSigTrackBadgeClick","click .coursera-catalog-listing-secondary-inline-enroll-button":"onInlineEnrollClick","click .coursera-catalog-load-more-box":"onLoadMoreResultsClick"},initialize:function(){var self=this;this.model=new TopicSearch({haveTagSets:!0,orderby:"upcoming"}),this.model.on("startLoad",this.startLoad,this),this.model.on("finishLoad",this.finishLoad,this),this.model.on("topicLoadError",this.loadError,this);var collection=this.model.get("collection");collection.on("reset",this.clearTopics,this),collection.on("reset",this.checkLazyLoad,this),self._partnerFilterView=new partnerFilterView({model:this.model.get("tagSets").ptypes}),self._tagListingViews={},self._orderedTagListingViews=[],self._tagListingViews.stats=new tagListingView({name:"stats",label:"Starting soon",showEmpty:!0,orderBy:"count",model:this.model.get("tagSets").stats,showAllTag:!1}),self._orderedTagListingViews.push(self._tagListingViews.stats),self._tagListingViews.certs=new tagListingView({name:"certs",label:"Eligibilities",header:"Eligible For",numToShow:-1,showEmpty:!0,orderBy:"name",model:this.model.get("tagSets").certs,showAllTag:!1}),self._orderedTagListingViews.push(self._tagListingViews.certs),self._tagListingViews.unis=new tagListingView({name:"unis",label:"Partners",shouldShow:function(){return(this.getNumNonzeroTags()>0||!_.isEmpty(this.selections))&&self.$(".coursera-catalog-search").val().length>1},numToShow:6,showEmpty:!1,orderBy:"count",model:this.model.get("tagSets").unis}),self._orderedTagListingViews.push(self._tagListingViews.unis),self._tagListingViews.lngs=new tagListingView({name:"lngs",label:"Languages",numToShow:-1,showEmpty:!0,orderBy:"count",model:this.model.get("tagSets").lngs}),self._orderedTagListingViews.push(self._tagListingViews.lngs),self._tagListingViews.cats=new tagListingView({name:"cats",label:"Categories",numToShow:-1,showEmpty:!0,orderBy:"name",model:this.model.get("tagSets").cats}),self._orderedTagListingViews.push(self._tagListingViews.cats),this.loadMoreThreshold=initialLoadMoreThreshold,this.on("view:appended",this.renderAppended,this),this.on("view:merged",function(initialize){self.readQuery(initialize.query)})},onScroll:function(e){var stateSystemsVisible=util.inView(this.$statesystems,0);if(stateSystemsVisible&&this.$statesystems.is(":visible"))this._partnerFilterView.setSelection(partnerFilterView.PARTNER_US);else this._partnerFilterView.setSelection(partnerFilterView.PARTNER_GLOBAL);this.checkLazyLoad()},scrollToPartnerSection:function(e){var partnerView=e.target,$page=$("html, body"),heightOffset=$("[data-affix]").height();if(partnerView.selectedId==partnerFilterView.PARTNER_US)$page.scrollTop(this.$statesystems.offset().top-heightOffset);else $page.scrollTop(this.$courses.offset().top-heightOffset);this._partnerFilterView.setSelection(partnerView.selectedId)},renderAppended:function(){var self=this;document.title="Courses | Coursera",this.$el.append(template({_t:template_t,config:Coursera.config})),_.each(this._orderedTagListingViews,function(tagSetView){tagSetView.render(),self.$(".coursera-catalog-sidebar").append(tagSetView.el),tagSetView.on("selection",self.selection,self),tagSetView.on("selection",self.updateUrl,self)}),self.$(".coursera-catalog-partners").append(self._partnerFilterView.render().el),self._partnerFilterView.on("selection",self.scrollToPartnerSection,self),self._partnerFilterView.on("selection",self.updateUrl,self),self._partnerFilterView.selectFilter(),$(window).on("scroll",_.bind(this.onScroll,this)),this.$(".coursera-catalog-search").on("keyup input",_.debounce(_.bind(this.updateSearch,this),200)),self.readQuery(self.options.query),Coursera.multitracker.push(["user.coursera.catalog.open",""]),self.$("#coursera-catalog-search-id").focus(),self.$toolbar=self.$(".coursera-catalog-toolbar"),self.$results=self.$(".coursera-catalog-results"),self.$specializations=self.$(".coursera-catalog-listings-specializations-container"),self.$courses=self.$(".coursera-catalog-listings-courses-container"),self.$statesystems=self.$(".coursera-catalog-listings-statesystems-container"),this.checkLazyLoad()},readQuery:function(query){var self=this;if(query=query||{},_.has(query,"category")&&!_.has(query,"cats"))query.cats=query.category;if(_.each(this._tagListingViews,function(tagSetView){if(tagSetView.clearSelections(),self.model.unset(tagSetView.options.name),query[tagSetView.options.name]){var selections=query[tagSetView.options.name].split(",");_.each(selections,function(selection){tagSetView.setSelection(selection)}),self.model.set(tagSetView.options.name,selections)}}),query.ptypes){var ptype=parseInt(query.ptypes,10);self.model.set("ptypes",[ptype]),self._partnerFilterView.setSelection(ptype)}if(query.search)self.$(".coursera-catalog-search").val(query.search),self.model.set("search",query.search);else self.$(".coursera-catalog-search").val(""),self.model.unset("search");if(query.orderby)self.$(".coursera-catalog-sort").val(query.orderby),self.model.set("orderby",query.orderby)},getQuery:function(){var query="";if(query+="orderby="+this.model.get("orderby"),this.model.get("search"))query+="&search="+this.model.get("search");return _.each(this._tagListingViews,function(tagListView){var name=tagListView.options.name,options=_.keys(tagListView.selections).join(",");if(options&&"ALL"!=options)query+="&"+name+"="+options}),query},updateUrl:function(){var query="courses?"+this.getQuery();Coursera.router.navigate(query,{trigger:!1,replace:!0})},updateSearch:function(){var search=this.$(".coursera-catalog-search").val();if(search)this.model.set("search",search),Coursera.multitracker.push(["user.coursera.catalog.search",search]);else this.model.unset("search");this.model.unset("unis"),this._tagListingViews.unis.clearSelections(),this.updateUrl()},updateSort:function(){var orderby=this.$(".coursera-catalog-sort").val();this.model.set("orderby",orderby),Coursera.multitracker.push(["user.coursera.catalog.sort",orderby]),this.updateUrl()},checkLazyLoad:function(){var numLoaded=this.model.get("collection").length,highestInView=0;this.$(".coursera-catalog-listings .coursera-catalog-course-listing-box").each(function(index,elem){if(util.inView($(elem),0))highestInView=Math.max(highestInView,index+1)});var $loadmore=$(".coursera-catalog-load-more-box");if(numLoaded<this.loadMoreThreshold){if($loadmore.hide(),5>numLoaded-highestInView&&!this.model.get("fetchedAllPages"))this.model.fetchPage(),Coursera.multitracker.push(["user.coursera.catalog.loadpage."+numLoaded,this.getQuery()])}else $loadmore.show()},onLoadMoreResultsClick:function(){this.loadMoreThreshold+=loadMoreCount,this.checkLazyLoad(),Coursera.multitracker.push(["user.click.course-catalog-load-more",this.loadMoreThreshold])},prepareTopicCollection:function(topics){var self=this,enrollmentList=Coursera.user.get("enrollmentList");return _.chain(topics).filter(function(topic){return 0===self.$(".coursera-catalog-course-listing-box[data-topic-id="+topic.get("id")+"]").length}).map(function(topic){var instructorModels=[];if(topic.get("open_course")){var openCourse=topic.get("open_course");if(instructorModels=_.map(openCourse.get("instructors"),function(i){return new Instructor(i)}),instructorModels=_.filter(instructorModels,function(i){return i.shouldDisplay()}),openCourse.set("instructors",instructorModels,{silent:!0}),enrollmentList){var topicId=topic.get("id"),matched=_.find(enrollmentList,function(course){return course.course__topic_id===topicId});openCourse.set("user_is_enrolled",!!matched)}}else instructorModels=_.map(topic.get("instructors"),function(i){return new Instructor(i)}),instructorModels=_.filter(instructorModels,function(i){return i.shouldDisplay()});var universityModels=_.map(topic.get("universities"),function(u){return new University(u)});return{instructors:instructorModels,universities:universityModels,topic:topic}}).value()},addTopics:function(){var self=this,globalPartners=this.prepareTopicCollection(this.model.get("collection").toArray()),stateSystems=this.prepareTopicCollection(this.model.get("mismatched").ptypes),specializations=this.model.get("specializations");if(this.$(".coursera-catalog-listings-specializations").empty(),0===specializations.length||!this.model.get("search")&&!("spec"in this._tagListingViews.certs.selections))this.$specializations.hide();else this.$(".coursera-catalog-listings-specializations").append(specializationTemplate({_:_,_t:listingTemplate_t,config:Coursera.config,specializations:specializations})),this.$specializations.show();var context={_t:listingTemplate_t,config:Coursera.config};if(context.topicsInfo=globalPartners,this.$(".coursera-catalog-listings").append(listingTemplate(context)),0===this.model.get("collection").length)this.$courses.hide();else this.$courses.show();var $stateSystemsResults=this.$(".coursera-catalog-listings-statesystems");if($stateSystemsResults.children().length+stateSystems.length>0)context.topicsInfo=stateSystems,this.$statesystems.show(),$stateSystemsResults.append(listingTemplate(context));else this.$statesystems.hide();this.$("[data-sigtrack-cert-icon]").each(function(){var $self=$(this),short_name=$self.attr("data-sigtrack-cert-icon");util.getSTCertIcon(short_name).done(function(filename){$self.attr("src",filename)})})},clearTopics:function(){this.$(".coursera-catalog-listings").empty(),this.$(".coursera-catalog-listings-statesystems").empty(),this.$(".coursera-catalog-listings-specializations").empty(),this.loadMoreThreshold=initialLoadMoreThreshold},selection:function(evt){var name=evt.target.name,selections=_.isArray(evt.target.selections)?evt.target.selections:_.keys(evt.target.selections);if(selections.length>0)this.model.set(name,selections);else this.model.unset(name)},startLoad:function(){this.$(".coursera-catalog-loading-box").show(),this.$(".coursera-catalog-noresults-box").hide(),this.$(".coursera-catalog-error-box").hide()},finishLoad:function(){if(this.$(".coursera-catalog-loading-box").hide(),0===this.model.get("collection").length&&this.model.get("fetchedAllPages")&&_.isEmpty(this.model.get("mismatched")))this.$(".coursera-catalog-noresults-box").show(),Coursera.multitracker.push(["user.coursera.catalog.noresults",this.getQuery()]);this.addTopics(),this.checkLazyLoad(),this.trigger("finishLoad")},loadError:function(){this.$(".coursera-catalog-loading-box").hide(),this.$(".coursera-catalog-error-box").show()},_trackLink:function(e,name){var $target=$(e.currentTarget),href=util.getUrlPath($target.attr("href")),index=$target.parents(".coursera-catalog-course-listing-box").index();Coursera.multitracker.push(["user.click.course-catalog-"+name,{link:href,index:index}])},trackLink:function(evt){this._trackLink(evt,"course-link")},onInstructorLinkClick:function(e){this._trackLink(e,"instructor-link")},onUniLinkClick:function(e){this._trackLink(e,"uni-link")},onSigTrackBadgeClick:function(e){var $box=$(e.currentTarget).parents(".coursera-catalog-course-listing-box"),topicId=$box.data("topic-id"),index=$box.index();Coursera.multitracker.push(["user.click.course-catalog-sig-track-badge",{topicId:topicId,index:index}])},onInlineEnrollClick:function(e){var self=this,$target=$(e.currentTarget),$box=$target.parents(".coursera-catalog-course-listing-box"),topicId=$box.data("topic-id"),topic=this.model.get("collection").find(function(topic){return topic.get("id")===topicId}),course=topic&&topic.get("open_course"),courseId=course&&course.get("id"),trackingData={topicId:topicId,courseId:courseId,index:$box.index()};if(!course)return;if($target.hasClass("enrolled"))Coursera.multitracker.push(["user.click.course-catalog-inline-gotoclass-button",trackingData]);else if(Coursera.user.get("authenticated")){Coursera.multitracker.push(["user.enroll.course-catalog-inline-enroll-button",trackingData]),$target.attr("disabled","disabled"),$target.find(".enroll-msg").hide();var $loader=$target.find("i");$loader.show();var enrollInSignatureTrack=0;Coursera.user.enroll(courseId,enrollInSignatureTrack,function(err){if(err)Coursera.router.trigger("error",500,window.location.href,{message:"failed to enroll user"});else{cookie.clear("just_enrolled"),$target.removeAttr("disabled").removeClass(function(index,css){return(css.match(/\bbtn-flat-\S+/g)||[]).join(" ")}).addClass("btn-flat-success enrolled"),$loader.hide();var $success=$target.find(".success-msg");$success.show(),setTimeout(function(){$success.fadeOut("fast",function(){if(course.get("active"))$target.attr("href",course.get("home_link")).find(".goto-msg").fadeIn("fast");else $target.attr("href",Coursera.config.dir.home+"course/"+topic.get("short_name")).find(".starts-msg").fadeIn("fast")})},1e3)}})}else{Coursera.multitracker.push(["user.enroll.course-catalog-inline-enroll-button-visitor",trackingData]);var signupParams={course_id:courseId,topic_shortname:topic.get("short_name"),topic_name:topic.get("name"),user_action:"enroll"};location.href=util.createAccountsUrl("signup",signupParams)}}});return catalogBody2}),define("pages/home/instructor/nls/instructorProfileViewer",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(instructor,config,_t,user){buf.push('<div class="container"><div class="coursera-full-canvas"><div class="row-fluid"><div class="span12"><div class="coursera-instructor-primary-info"><div class="row-fluid"><div class="span3"><div class="coursera-instructor-profile">');var url=instructor.get("photo_150")||config.url.assets+"images/icons/avatar.jpg";if(buf.push("<div"+jade.attr("style","background-image:url("+url+");",!0,!1)+' class="coursera-instructor-profile-image"></div><div class="coursera-instructor-profile-inner-shadow"></div></div></div><div class="span6"><div class="coursera-instructor-basic-info"><h1 class="coursera-instructor-name">'+jade.escape(null==(jade_interp=_t(instructor.getDecoratedName()))?"":jade_interp)+'</h1><h2 class="coursera-instructor-position-details">'+jade.escape(null==(jade_interp=_t(instructor.get("title")))?"":jade_interp)+'</h2><h2 class="coursera-instructor-position-details">'+jade.escape(null==(jade_interp=_t(instructor.get("department")))?"":jade_interp)+'</h2><span class="coursera-instructor-university-section"></span></div></div><div class="span3">'),user.canEditInstructorProfile(instructor))buf.push('<div class="coursera-edit-page"><span class="coursera-edit-page-button">'+jade.escape(null==(jade_interp=_t("Admins only:"))?"":jade_interp)+'</span><a target="_blank"'+jade.attr("href",config.dir.home+"admin/data/instructorprofiles/"+instructor.get("id"),!0,!1)+'><span class="icon-cog"> '+jade.escape(null==(jade_interp=_t("Edit Page"))?"":jade_interp)+"</span></a></div>");if(buf.push('<div class="coursera-instructor-external-links"><ul class="unstyled">'),instructor.get("website"))buf.push('<li><span class="icon-globe"></span><a'+jade.attr("href",instructor.get("website"),!0,!1)+' target="_blank">  '+jade.escape(null==(jade_interp=_t(instructor.getPrettyWebsiteUrl()))?"":jade_interp)+"</a></li>");if(instructor.get("website_twitter"))buf.push('<li><span class="icon-twitter"></span><a'+jade.attr("href","http://twitter.com/"+instructor.get("website_twitter"),!0,!1)+' target="_blank">  '+jade.escape(null==(jade_interp=_t(instructor.get("website_twitter")))?"":jade_interp)+"</a></li>");if(instructor.get("website_facebook"))buf.push('<li><span class="icon-facebook"></span><a'+jade.attr("href","http://facebook.com/"+instructor.get("website_facebook"),!0,!1)+' target="_blank">  '+jade.escape(null==(jade_interp=_t(instructor.get("website_facebook")))?"":jade_interp)+"</a></li>");if(instructor.get("website_linkedin"))buf.push('<li><span class="icon-linkedin"></span><a'+jade.attr("href","http://linkedin.com/in/"+instructor.get("website_linkedin"),!0,!1)+' target="_blank">  '+jade.escape(null==(jade_interp=_t(instructor.get("website_linkedin")))?"":jade_interp)+"</a></li>");buf.push('</ul></div></div></div></div></div></div><hr class="coursera-full-page-divider"/><div class="row-fluid"><div class="span12"><div class="coursera-instructor-secondary-info"><div class="row-fluid"><div class="span9"><div dir="auto" class="coursera-instructor-bio">'+(null==(jade_interp=_t(instructor.get("bio")))?"":jade_interp)+'</div></div><div class="span3 coursera-instructor-courses coursera-instructor-topic-section"></div></div></div></div></div></div></div>')}("instructor"in locals_for_with?locals_for_with.instructor:"undefined"!=typeof instructor?instructor:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"user"in locals_for_with?locals_for_with.user:"undefined"!=typeof user?user:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/instructor/instructorProfileViewer.html",["js/lib/jade","i18n!pages/home/instructor/nls/instructorProfileViewer"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.instructor.instructorProfileViewer"]=jadify(wndw.jade.helpers)}(window),define("pages/home/instructor/nls/instructorProfileUniversity",{}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(university,config,_t){buf.push("<a"+jade.attr("href",university.home_link||config.dir.home+university.short_name,!0,!1)+jade.cls([university.home_link?"":"internal-home"],[!0])+'><h2 class="coursera-instructor-position-details">'+jade.escape(null==(jade_interp=_t(university.name))?"":jade_interp)+"</h2></a>")}("university"in locals_for_with?locals_for_with.university:"undefined"!=typeof university?university:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/instructor/instructorProfileUniversity.html",["js/lib/jade","i18n!pages/home/instructor/nls/instructorProfileUniversity"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.instructor.instructorProfileUniversity"]=jadify(wndw.jade.helpers)}(window),define("pages/home/instructor/nls/instructorProfileTopic",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),!function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};
return function(topic,_t){if(buf.push("<a"+jade.attr("href",topic.getLink(),!0,!1)+jade.cls([topic.getLinkClass()],[!0])+"><img"+jade.attr("src",topic.get("small_icon"),!0,!1)+jade.attr("alt","Icon for "+topic.get("name"),!0,!1)+'/><span class="coursera-instructor-course-name">'+jade.escape(null==(jade_interp=_t(topic.get("name")))?"":jade_interp)+'</span></a><span class="coursera-instructor-course-date">'),topic.get("flex_course"))buf.push(""+jade.escape(null==(jade_interp=_t("Always Open"))?"":jade_interp));else if(topic.get("open_course"))buf.push(""+jade.escape(null==(jade_interp=_t(topic.get("open_course").getStartDisplay()))?"":jade_interp));else buf.push(""+jade.escape(null==(jade_interp=_t("Date to be announced."))?"":jade_interp));buf.push("</span>")}("topic"in locals_for_with?locals_for_with.topic:"undefined"!=typeof topic?topic:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/home/instructor/instructorProfileTopic.html",["js/lib/jade","i18n!pages/home/instructor/nls/instructorProfileTopic"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.home.instructor.instructorProfileTopic"]=jadify(wndw.jade.helpers)}(window),define("pages/home/instructor/instructorProfileViewer",["pages/home/template/body","js/core/coursera","underscore","pages/home/instructor/instructorProfileViewer.html","i18n!pages/home/instructor/nls/instructorProfileViewer","js/models/instructor","pages/home/instructor/instructorProfileUniversity.html","pages/home/instructor/instructorProfileTopic.html","i18n!pages/home/instructor/nls/instructorProfileTopic","js/lib/util","js/lib/metatags"],function(body,Coursera,_,template,template_t,Instructor,universityTemplate,topicTemplate,topicTemplate_t,util,metatags){var instructorProfileViewer=body.extend({initialize:function(){this.instructor=new Instructor({profile_id:this.options.profile_id,short_name:this.options.short_name})},events:{},render:function(){var self=this;return self.instructor.sync(function(err){if(err)return void Coursera.router.trigger("error",err,location.href);metatags.share(self.instructor.getDecoratedName(),self.instructor.get("photo_150"),self.instructor.get("bio"),window.location.href),document.title=self.instructor.get("full_name")+" | Coursera",self.$el.append(template({_t:template_t,instructor:self.instructor,config:Coursera.config,user:Coursera.user,_:_}));var $bioEl=self.$(".coursera-instructor-bio");if(_.each(self.instructor.get("universities"),function(university){self.$(".coursera-instructor-university-section").append(universityTemplate({university:university,config:Coursera.config}))}),self.instructor.get("topics").each(function(topic){if(topic.get("display"))self.$(".coursera-instructor-topic-section").append(topicTemplate({_t:topicTemplate_t,topic:topic}))}),self.instructor.get("universities").length>0){var universityColor=self.instructor.get("universities")[0].primary_color;self.$("a").css("color",universityColor)}}),self}});return instructorProfileViewer}),define("pages/home/routes",["jquery","underscore","backbone","pages/home/app","js/core/config","js/models/user","js/collections/topics","js/models/university","js/models/topic","js/collections/courses","js/lib/cookie","js/lib/util","js/lib/coursera.redirect","pages/home/models/user.json","js/lib/third-parties","js/lib/backbone.queryparams","pages/home/template/page","pages/home/template/banner","pages/home/template/footer","pages/home/template/header","pages/home/front/frontSearchBanner","pages/home/front/frontBody","pages/home/front/frontCourse","pages/error/errorBody","pages/home/account/settings","pages/home/account/signedIn","pages/home/course/courseBody","pages/home/account/courseList","pages/home/catalog/catalogBody","pages/home/instructor/instructorProfileViewer"],function($,_,Backbone,Coursera,config,User,Topics,University,Topic,Courses,cookie,util,redirect,UserJSON){function showCourseDashboard(){Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/home/account/courseList":{id:"account"}}}}})}function showLoggedInWelcome(){Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/home/front/frontBody":{id:"listings"}},banner:{"pages/home/account/welcomeBanner":{id:"welcome"}}}}})}function showLoggedOutWelcome(){Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/home/front/frontBody":{id:"listings"}}}}})}function handleUniversity(id,query){var self=this;Coursera.api.get("university/information",{data:{"university-id":id}}).fail(function(xhr){if(404==xhr.status)Coursera.router.trigger("error",404,location.href,{message:"this page does not exist"});else if(500==xhr.status)Coursera.router.trigger("error",500,location.href,{message:"backend server has seen an error"});else if(403==xhr.status&&!Coursera.user.get("authenticated"))Coursera.router.navigate("/account/signin?r="+location.href,{trigger:!0,replace:!0});else if(403==xhr.status)Coursera.router.trigger("error",403,location.href,{message:"you do not have permission to view this page"})}).done(function(data){var university=new University(data),topics=university.get("topics"),home_link=university.get("home_link");if(home_link)window.location.href=home_link;else Coursera.region.open({"pages/home/template/page":{regions:{header:{"pages/home/template/header":{id:"plain",initialize:{universityPartnerType:university.get("partner_type")}}},body:{"pages/home/university/universityPage":{initialize:{university:university,topics:topics},id:"university-"+id}}}}})})}var routes={},home=config.dir.home.replace(/^\//,""),testableRoutes={};return routes["*id"]=function(id,query){if(/^[a-z0-9.\-]+$/.test(id))handleUniversity(id,query);else Coursera.router.trigger("error",404)},routes[home]=function(){if(Coursera.user.get("authenticated"))showCourseDashboard();else showLoggedOutWelcome()},routes[home+"_=_"]=function(){this.navigate(config.dir.home,!0)},routes[home+"welcome"]=function(){showLoggedOutWelcome()},routes[home+"in"]=function(){if(window.localStorage)window.localStorage.removeItem("locale");window.location.href=Coursera.config.url.base},routes[home+"in/:language"]=function(language,params){if(window.localStorage)window.localStorage.setItem("locale",language);if(params&&params.to&&window.localStorage)redirect.sanitize(params.to);else window.location.href=Coursera.config.url.base},routes[home+"account/profile"]=function(){if(Coursera.user.get("authenticated"))Coursera.user.getTopics().done(function(){Coursera.user.resync(function(){Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/home/account/profileEditor":{id:"account"}}}}})})});else this.navigate(config.dir.home,!0)},routes[home+"account/settings"]=function(){if(Coursera.user.get("authenticated"))Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/home/account/settings":{id:"account"}}}}});else this.navigate(config.dir.home,!0)},routes[home+"account/confirm_network/:payload_param"]=function(payload_param){if(Coursera.user.get("authenticated"))Coursera.api.post("networks/confirm_validation_email",{data:{payload_param:payload_param}}).fail(function(xhr){var message=$.parseJSON(xhr.responseText).error_message.message;if("user_in_network"===message)window.location=$.parseJSON(xhr.responseText).error_message.redirect_url;Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/error/errorBody":{id:"error",initialize:{message:message}}}}}})}).done(function(xhr){if(xhr.redirect_url)window.location=xhr.redirect_url;else Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/home/account/settings":{id:"account"}}}}})});else Coursera.router.navigate("/account/signin?r="+location.href,{trigger:!0,replace:!0})},routes[home+"account/settings/signature"]=function(query){if(Coursera.user.get("authenticated"))Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/home/account/settingsSignature":{id:"account-sigtrack-records",initialize:{status:query?query.status:""}}}}}});else this.navigate(config.dir.home,!0)},routes[home+"account/records"]=function(query){if(Coursera.user.get("authenticated"))Coursera.user.getTopics(!0).done(function(topics){Coursera.user.resync(function(){Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/home/account/courseRecords":{id:"account-records",initialize:{show_all:query&&query.show_all?!0:!1}}}}}})})});else this.navigate(config.dir.home,!0)},routes[home+"account/logout"]=function(){Coursera.api.get("user/logout").done(function(){Coursera.user.logout(),Coursera.region.open({"pages/home/template/page":{regions:{header:{"pages/home/template/header":{id:"header-logout"}},body:{"pages/home/front/frontBody":{id:"listings"}},banner:{"pages/home/account/logoutBanner":{id:"logout"}}}}})})},routes[home+"courses"]=function(query){Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/home/catalog/catalogBody":{id:"catalog",initialize:{query:query}}}}}})},routes[home+"specializations"]=function(){Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/home/specializations/specializationsBody":{id:"specializations-all"}}}}})},routes[home+"courses/browse"]=function(){routes[home+"courses"]()},routes[home+"account/signin"]=function(params){if(!Coursera.user.get("authenticated"))location.href=util.createAccountsUrl("signin",params);else routes[home+"account/signedin"](params)},testableRoutes["account/signin"]=routes[home+"account/signin"],routes[home+"account/signup"]=function(params){if(!Coursera.user.get("authenticated"))location.href=util.createAccountsUrl("signup",params);else routes[home+"account/signedin"](params)},testableRoutes["account/signup"]=routes[home+"account/signup"],routes[home+"account/signedin"]=function(params){Coursera.region.open({"pages/home/account/signedIn":{id:"signup",initialize:{params:params}}})},testableRoutes["account/signedin"]=routes[home+"account/signedin"],routes[home+"account/signedup"]=function(params){if(void 0===params)params={registered:"1"};else params.registered="1";routes[home+"account/signedin"](params)},routes[home+"account/reset"]=function(){if(!Coursera.user.get("authenticated"))location.href=util.createAccountsUrl("reset");else this.navigate(config.dir.home,!0)},routes[home+"error/:id"]=function(id){var status=parseInt(id,10);if(_.isNumber(status)&&status>=300&&500>=status)Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/error/errorBody":{id:"error",initialize:{status:status}}}}}});else Coursera.router.trigger("error",404,location.href)},routes[home+"course/:shortName"]=function(shortName,query){var self=this,topic=Topic.getByShortName(shortName);topic.sync(function(err){if(err)util.handleAPIError(err,location.href);else{var university=topic.get("universities")&&topic.get("universities")[0],universityPartnerType=university&&university.partner_type;if(Coursera.multitracker.push(["Course Description","Open"]),query&&2==query.preview_redesign)Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/home/course/courseBody2":{initialize:{model:topic,query:query},id:"course-"+topic.get("id")}}},initialize:{model:topic}}});else Coursera.region.open({"pages/home/template/page":{regions:{header:{"pages/home/template/header":{id:"plain",initialize:{plain:!0,universityPartnerType:universityPartnerType}}},footer:{"pages/home/template/footer":{id:"plain",initialize:{plain:!0}}},body:{"pages/home/course/courseBody":{initialize:{model:topic,query:query},id:"course-"+topic.get("id")}}},initialize:{model:topic}}})}})},routes[home+"universitypreview/:id"]=function(id,query){handleUniversity(id,query)},routes[home+"user/i/:id"]=function(id){Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/home/account/profileViewer":{initialize:{id:id},id:"user-"+id}}}}})},routes[home+"instructor/:id"]=function(id){Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/home/instructor/instructorProfileViewer":{initialize:{short_name:id},id:"instructor-"+id}}}}})},routes[home+"instructor/~:id"]=function(id){Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/home/instructor/instructorProfileViewer":{initialize:{profile_id:id},id:"instructor-byid-"+id}}}}})},routes[home+"category/:id"]=function(id){Coursera.region.open({"pages/home/template/page":{regions:{body:{"pages/home/catalog/catalogBody":{initialize:{query:{cats:id}},id:"category-"+id}}}}})},routes[home+"account/contacts/:provider"]=function(provider,params){var lochash=location.hash.substr(1),access_token=lochash.substr(lochash.indexOf("access_token=")).split("&")[0].split("=")[1];if(void 0===params)params={};params=_.extend(params,{access_token:access_token}),window.opener.oauthCallback(params,provider),window.close()},Coursera.router.on("error",function(code,url,message){Coursera.multitracker.push(["page.error",{code:code,url:url||location.href,message:message||""}]),routes[home+"error/:id"](code)}),Coursera.router.setupLinks(Coursera.config.url.base,"internal-home"),Coursera.router.addRoutes(routes),Backbone.history.on("route",function(evt,route,args){var query=args[args.length-1];if(query&&query.ref)if("linked_lecture"==query.ref&&query.ref_cid){var courseId=query.ref_cid;Coursera.multitracker.push(["user.referred.linkedLecture",courseId.toString()]),cookie.set("linked_lecture",courseId,{expires:1})}}),$(document).ready(function(){if(Coursera.user=new User,Coursera.multitracker.get("204").queue.push(["client","home"]),!_.isEmpty(UserJSON))Coursera.user.login(UserJSON);if(Coursera.user.get("authenticated"))Coursera.multitracker.get("204").queue.push(["user",Coursera.user.get("id")]);if(!Backbone.history.start({pushState:!0}))Coursera.router.trigger("error",404)}),routes});